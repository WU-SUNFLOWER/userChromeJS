<html>
<head>
    <meta charset="utf-8">
    <title>JavaScript 格式化</title>
    <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAhklEQVQ4jbWTQQrFIAxEc6LGG2WpCB7AhbjIterZ5q/8SEUbaDswEMnMW0WityQieJQTEVggy9y46PPVJoDVW0CMEVd5722AlNJU7goh3AMA4OQDzfG/2Bzj5AMAbIDmeAL0twmw0/eAWuuynHNeA0aIqk7lUsq+TEQ0hlZW1fs/Y76+N/QDfH54UpD++6YAAAAASUVORK5CYII=" type="image/png">
    <link rel="stylesheet" href="data:text/css;base64,LyogQkFTSUNTICovCgouQ29kZU1pcnJvciB7CiAgLyogU2V0IGhlaWdodCwgd2lkdGgsIGJvcmRlcnMsIGFuZCBnbG9iYWwgZm9udCBwcm9wZXJ0aWVzIGhlcmUgKi8KICBmb250LWZhbWlseTogbW9ub3NwYWNlOwogIGhlaWdodDogMzAwcHg7Cn0KCi8qIFBBRERJTkcgKi8KCi5Db2RlTWlycm9yLWxpbmVzIHsKICBwYWRkaW5nOiA0cHggMDsgLyogVmVydGljYWwgcGFkZGluZyBhcm91bmQgY29udGVudCAqLwp9Ci5Db2RlTWlycm9yIHByZSB7CiAgcGFkZGluZzogMCA0cHg7IC8qIEhvcml6b250YWwgcGFkZGluZyBvZiBjb250ZW50ICovCn0KCi5Db2RlTWlycm9yLXNjcm9sbGJhci1maWxsZXIsIC5Db2RlTWlycm9yLWd1dHRlci1maWxsZXIgewogIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOyAvKiBUaGUgbGl0dGxlIHNxdWFyZSBiZXR3ZWVuIEggYW5kIFYgc2Nyb2xsYmFycyAqLwp9CgovKiBHVVRURVIgKi8KCi5Db2RlTWlycm9yLWd1dHRlcnMgewogIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNkZGQ7CiAgYmFja2dyb3VuZC1jb2xvcjogI2Y3ZjdmNzsKICB3aGl0ZS1zcGFjZTogbm93cmFwOwp9Ci5Db2RlTWlycm9yLWxpbmVudW1iZXJzIHt9Ci5Db2RlTWlycm9yLWxpbmVudW1iZXIgewogIHBhZGRpbmc6IDAgM3B4IDAgNXB4OwogIG1pbi13aWR0aDogMjBweDsKICB0ZXh0LWFsaWduOiByaWdodDsKICBjb2xvcjogIzk5OTsKICAtbW96LWJveC1zaXppbmc6IGNvbnRlbnQtYm94OwogIGJveC1zaXppbmc6IGNvbnRlbnQtYm94Owp9CgouQ29kZU1pcnJvci1ndXR0ZXJtYXJrZXIgeyBjb2xvcjogYmxhY2s7IH0KLkNvZGVNaXJyb3ItZ3V0dGVybWFya2VyLXN1YnRsZSB7IGNvbG9yOiAjOTk5OyB9CgovKiBDVVJTT1IgKi8KCi5Db2RlTWlycm9yIGRpdi5Db2RlTWlycm9yLWN1cnNvciB7CiAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCBibGFjazsKfQovKiBTaG93biB3aGVuIG1vdmluZyBpbiBiaS1kaXJlY3Rpb25hbCB0ZXh0ICovCi5Db2RlTWlycm9yIGRpdi5Db2RlTWlycm9yLXNlY29uZGFyeWN1cnNvciB7CiAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCBzaWx2ZXI7Cn0KLkNvZGVNaXJyb3IuY20tZmF0LWN1cnNvciBkaXYuQ29kZU1pcnJvci1jdXJzb3IgewogIHdpZHRoOiBhdXRvOwogIGJvcmRlcjogMDsKICBiYWNrZ3JvdW5kOiAjN2U3Owp9Ci5Db2RlTWlycm9yLmNtLWZhdC1jdXJzb3IgZGl2LkNvZGVNaXJyb3ItY3Vyc29ycyB7CiAgei1pbmRleDogMTsKfQoKLmNtLWFuaW1hdGUtZmF0LWN1cnNvciB7CiAgd2lkdGg6IGF1dG87CiAgYm9yZGVyOiAwOwogIC13ZWJraXQtYW5pbWF0aW9uOiBibGluayAxLjA2cyBzdGVwcygxKSBpbmZpbml0ZTsKICAtbW96LWFuaW1hdGlvbjogYmxpbmsgMS4wNnMgc3RlcHMoMSkgaW5maW5pdGU7CiAgYW5pbWF0aW9uOiBibGluayAxLjA2cyBzdGVwcygxKSBpbmZpbml0ZTsKfQpALW1vei1rZXlmcmFtZXMgYmxpbmsgewogIDAlIHsgYmFja2dyb3VuZDogIzdlNzsgfQogIDUwJSB7IGJhY2tncm91bmQ6IG5vbmU7IH0KICAxMDAlIHsgYmFja2dyb3VuZDogIzdlNzsgfQp9CkAtd2Via2l0LWtleWZyYW1lcyBibGluayB7CiAgMCUgeyBiYWNrZ3JvdW5kOiAjN2U3OyB9CiAgNTAlIHsgYmFja2dyb3VuZDogbm9uZTsgfQogIDEwMCUgeyBiYWNrZ3JvdW5kOiAjN2U3OyB9Cn0KQGtleWZyYW1lcyBibGluayB7CiAgMCUgeyBiYWNrZ3JvdW5kOiAjN2U3OyB9CiAgNTAlIHsgYmFja2dyb3VuZDogbm9uZTsgfQogIDEwMCUgeyBiYWNrZ3JvdW5kOiAjN2U3OyB9Cn0KCi8qIENhbiBzdHlsZSBjdXJzb3IgZGlmZmVyZW50IGluIG92ZXJ3cml0ZSAobm9uLWluc2VydCkgbW9kZSAqLwpkaXYuQ29kZU1pcnJvci1vdmVyd3JpdGUgZGl2LkNvZGVNaXJyb3ItY3Vyc29yIHt9CgouY20tdGFiIHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB0ZXh0LWRlY29yYXRpb246IGluaGVyaXQ7IH0KCi5Db2RlTWlycm9yLXJ1bGVyIHsKICBib3JkZXItbGVmdDogMXB4IHNvbGlkICNjY2M7CiAgcG9zaXRpb246IGFic29sdXRlOwp9CgovKiBERUZBVUxUIFRIRU1FICovCgouY20tcy1kZWZhdWx0IC5jbS1rZXl3b3JkIHtjb2xvcjogIzcwODt9Ci5jbS1zLWRlZmF1bHQgLmNtLWF0b20ge2NvbG9yOiAjMjE5O30KLmNtLXMtZGVmYXVsdCAuY20tbnVtYmVyIHtjb2xvcjogIzE2NDt9Ci5jbS1zLWRlZmF1bHQgLmNtLWRlZiB7Y29sb3I6ICMwMGY7fQouY20tcy1kZWZhdWx0IC5jbS12YXJpYWJsZSwKLmNtLXMtZGVmYXVsdCAuY20tcHVuY3R1YXRpb24sCi5jbS1zLWRlZmF1bHQgLmNtLXByb3BlcnR5LAouY20tcy1kZWZhdWx0IC5jbS1vcGVyYXRvciB7fQouY20tcy1kZWZhdWx0IC5jbS12YXJpYWJsZS0yIHtjb2xvcjogIzA1YTt9Ci5jbS1zLWRlZmF1bHQgLmNtLXZhcmlhYmxlLTMge2NvbG9yOiAjMDg1O30KLmNtLXMtZGVmYXVsdCAuY20tY29tbWVudCB7Y29sb3I6ICNhNTA7fQouY20tcy1kZWZhdWx0IC5jbS1zdHJpbmcge2NvbG9yOiAjYTExO30KLmNtLXMtZGVmYXVsdCAuY20tc3RyaW5nLTIge2NvbG9yOiAjZjUwO30KLmNtLXMtZGVmYXVsdCAuY20tbWV0YSB7Y29sb3I6ICM1NTU7fQouY20tcy1kZWZhdWx0IC5jbS1xdWFsaWZpZXIge2NvbG9yOiAjNTU1O30KLmNtLXMtZGVmYXVsdCAuY20tYnVpbHRpbiB7Y29sb3I6ICMzMGE7fQouY20tcy1kZWZhdWx0IC5jbS1icmFja2V0IHtjb2xvcjogIzk5Nzt9Ci5jbS1zLWRlZmF1bHQgLmNtLXRhZyB7Y29sb3I6ICMxNzA7fQouY20tcy1kZWZhdWx0IC5jbS1hdHRyaWJ1dGUge2NvbG9yOiAjMDBjO30KLmNtLXMtZGVmYXVsdCAuY20taGVhZGVyIHtjb2xvcjogYmx1ZTt9Ci5jbS1zLWRlZmF1bHQgLmNtLXF1b3RlIHtjb2xvcjogIzA5MDt9Ci5jbS1zLWRlZmF1bHQgLmNtLWhyIHtjb2xvcjogIzk5OTt9Ci5jbS1zLWRlZmF1bHQgLmNtLWxpbmsge2NvbG9yOiAjMDBjO30KCi5jbS1uZWdhdGl2ZSB7Y29sb3I6ICNkNDQ7fQouY20tcG9zaXRpdmUge2NvbG9yOiAjMjkyO30KLmNtLWhlYWRlciwgLmNtLXN0cm9uZyB7Zm9udC13ZWlnaHQ6IGJvbGQ7fQouY20tZW0ge2ZvbnQtc3R5bGU6IGl0YWxpYzt9Ci5jbS1saW5rIHt0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTt9Ci5jbS1zdHJpa2V0aHJvdWdoIHt0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDt9CgouY20tcy1kZWZhdWx0IC5jbS1lcnJvciB7Y29sb3I6ICNmMDA7fQouY20taW52YWxpZGNoYXIge2NvbG9yOiAjZjAwO30KCi8qIERlZmF1bHQgc3R5bGVzIGZvciBjb21tb24gYWRkb25zICovCgpkaXYuQ29kZU1pcnJvciBzcGFuLkNvZGVNaXJyb3ItbWF0Y2hpbmdicmFja2V0IHtjb2xvcjogIzBmMDt9CmRpdi5Db2RlTWlycm9yIHNwYW4uQ29kZU1pcnJvci1ub25tYXRjaGluZ2JyYWNrZXQge2NvbG9yOiAjZjIyO30KLkNvZGVNaXJyb3ItbWF0Y2hpbmd0YWcgeyBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMTUwLCAwLCAuMyk7IH0KLkNvZGVNaXJyb3ItYWN0aXZlbGluZS1iYWNrZ3JvdW5kIHtiYWNrZ3JvdW5kOiAjZThmMmZmO30KCi8qIFNUT1AgKi8KCi8qIFRoZSByZXN0IG9mIHRoaXMgZmlsZSBjb250YWlucyBzdHlsZXMgcmVsYXRlZCB0byB0aGUgbWVjaGFuaWNzIG9mCiAgIHRoZSBlZGl0b3IuIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgdG91Y2ggdGhlbS4gKi8KCi5Db2RlTWlycm9yIHsKICBsaW5lLWhlaWdodDogMTsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICBjb2xvcjogYmxhY2s7Cn0KCi5Db2RlTWlycm9yLXNjcm9sbCB7CiAgb3ZlcmZsb3c6IHNjcm9sbCAhaW1wb3J0YW50OyAvKiBUaGluZ3Mgd2lsbCBicmVhayBpZiB0aGlzIGlzIG92ZXJyaWRkZW4gKi8KICAvKiAzMHB4IGlzIHRoZSBtYWdpYyBtYXJnaW4gdXNlZCB0byBoaWRlIHRoZSBlbGVtZW50J3MgcmVhbCBzY3JvbGxiYXJzICovCiAgLyogU2VlIG92ZXJmbG93OiBoaWRkZW4gaW4gLkNvZGVNaXJyb3IgKi8KICBtYXJnaW4tYm90dG9tOiAtMzBweDsgbWFyZ2luLXJpZ2h0OiAtMzBweDsKICBwYWRkaW5nLWJvdHRvbTogMzBweDsKICBoZWlnaHQ6IDEwMCU7CiAgb3V0bGluZTogbm9uZTsgLyogUHJldmVudCBkcmFnZ2luZyBmcm9tIGhpZ2hsaWdodGluZyB0aGUgZWxlbWVudCAqLwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAtbW96LWJveC1zaXppbmc6IGNvbnRlbnQtYm94OwogIGJveC1zaXppbmc6IGNvbnRlbnQtYm94Owp9Ci5Db2RlTWlycm9yLXNpemVyIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgYm9yZGVyLXJpZ2h0OiAzMHB4IHNvbGlkIHRyYW5zcGFyZW50OwogIC1tb3otYm94LXNpemluZzogY29udGVudC1ib3g7CiAgYm94LXNpemluZzogY29udGVudC1ib3g7Cn0KCi8qIFRoZSBmYWtlLCB2aXNpYmxlIHNjcm9sbGJhcnMuIFVzZWQgdG8gZm9yY2UgcmVkcmF3IGR1cmluZyBzY3JvbGxpbmcKICAgYmVmb3JlIGFjdHVhbGwgc2Nyb2xsaW5nIGhhcHBlbnMsIHRodXMgcHJldmVudGluZyBzaGFraW5nIGFuZAogICBmbGlja2VyaW5nIGFydGlmYWN0cy4gKi8KLkNvZGVNaXJyb3ItdnNjcm9sbGJhciwgLkNvZGVNaXJyb3ItaHNjcm9sbGJhciwgLkNvZGVNaXJyb3Itc2Nyb2xsYmFyLWZpbGxlciwgLkNvZGVNaXJyb3ItZ3V0dGVyLWZpbGxlciB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHotaW5kZXg6IDY7CiAgZGlzcGxheTogbm9uZTsKfQouQ29kZU1pcnJvci12c2Nyb2xsYmFyIHsKICByaWdodDogMDsgdG9wOiAwOwogIG92ZXJmbG93LXg6IGhpZGRlbjsKICBvdmVyZmxvdy15OiBzY3JvbGw7Cn0KLkNvZGVNaXJyb3ItaHNjcm9sbGJhciB7CiAgYm90dG9tOiAwOyBsZWZ0OiAwOwogIG92ZXJmbG93LXk6IGhpZGRlbjsKICBvdmVyZmxvdy14OiBzY3JvbGw7Cn0KLkNvZGVNaXJyb3Itc2Nyb2xsYmFyLWZpbGxlciB7CiAgcmlnaHQ6IDA7IGJvdHRvbTogMDsKfQouQ29kZU1pcnJvci1ndXR0ZXItZmlsbGVyIHsKICBsZWZ0OiAwOyBib3R0b206IDA7Cn0KCi5Db2RlTWlycm9yLWd1dHRlcnMgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMDsgdG9wOiAwOwogIHotaW5kZXg6IDM7Cn0KLkNvZGVNaXJyb3ItZ3V0dGVyIHsKICB3aGl0ZS1zcGFjZTogbm9ybWFsOwogIGhlaWdodDogMTAwJTsKICAtbW96LWJveC1zaXppbmc6IGNvbnRlbnQtYm94OwogIGJveC1zaXppbmc6IGNvbnRlbnQtYm94OwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBtYXJnaW4tYm90dG9tOiAtMzBweDsKICAvKiBIYWNrIHRvIG1ha2UgSUU3IGJlaGF2ZSAqLwogICp6b29tOjE7CiAgKmRpc3BsYXk6aW5saW5lOwp9Ci5Db2RlTWlycm9yLWd1dHRlci13cmFwcGVyIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgei1pbmRleDogNDsKICBoZWlnaHQ6IDEwMCU7Cn0KLkNvZGVNaXJyb3ItZ3V0dGVyLWVsdCB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGN1cnNvcjogZGVmYXVsdDsKICB6LWluZGV4OiA0Owp9CgouQ29kZU1pcnJvci1saW5lcyB7CiAgY3Vyc29yOiB0ZXh0OwogIG1pbi1oZWlnaHQ6IDFweDsgLyogcHJldmVudHMgY29sbGFwc2luZyBiZWZvcmUgZmlyc3QgZHJhdyAqLwp9Ci5Db2RlTWlycm9yIHByZSB7CiAgLyogUmVzZXQgc29tZSBzdHlsZXMgdGhhdCB0aGUgcmVzdCBvZiB0aGUgcGFnZSBtaWdodCBoYXZlIHNldCAqLwogIC1tb3otYm9yZGVyLXJhZGl1czogMDsgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAwOyBib3JkZXItcmFkaXVzOiAwOwogIGJvcmRlci13aWR0aDogMDsKICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICBmb250LWZhbWlseTogaW5oZXJpdDsKICBmb250LXNpemU6IGluaGVyaXQ7CiAgbWFyZ2luOiAwOwogIHdoaXRlLXNwYWNlOiBwcmU7CiAgd29yZC13cmFwOiBub3JtYWw7CiAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7CiAgY29sb3I6IGluaGVyaXQ7CiAgei1pbmRleDogMjsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgb3ZlcmZsb3c6IHZpc2libGU7Cn0KLkNvZGVNaXJyb3Itd3JhcCBwcmUgewogIHdvcmQtd3JhcDogYnJlYWstd29yZDsKICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7CiAgd29yZC1icmVhazogbm9ybWFsOwp9CgouQ29kZU1pcnJvci1saW5lYmFja2dyb3VuZCB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGxlZnQ6IDA7IHJpZ2h0OiAwOyB0b3A6IDA7IGJvdHRvbTogMDsKICB6LWluZGV4OiAwOwp9CgouQ29kZU1pcnJvci1saW5ld2lkZ2V0IHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgei1pbmRleDogMjsKICBvdmVyZmxvdzogYXV0bzsKfQoKLkNvZGVNaXJyb3Itd2lkZ2V0IHt9CgouQ29kZU1pcnJvci1tZWFzdXJlIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAwOwogIG92ZXJmbG93OiBoaWRkZW47CiAgdmlzaWJpbGl0eTogaGlkZGVuOwp9Ci5Db2RlTWlycm9yLW1lYXN1cmUgcHJlIHsgcG9zaXRpb246IHN0YXRpYzsgfQoKLkNvZGVNaXJyb3IgZGl2LkNvZGVNaXJyb3ItY3Vyc29yIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYm9yZGVyLXJpZ2h0OiBub25lOwogIHdpZHRoOiAwOwp9CgpkaXYuQ29kZU1pcnJvci1jdXJzb3JzIHsKICB2aXNpYmlsaXR5OiBoaWRkZW47CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHotaW5kZXg6IDM7Cn0KLkNvZGVNaXJyb3ItZm9jdXNlZCBkaXYuQ29kZU1pcnJvci1jdXJzb3JzIHsKICB2aXNpYmlsaXR5OiB2aXNpYmxlOwp9CgouQ29kZU1pcnJvci1zZWxlY3RlZCB7IGJhY2tncm91bmQ6ICNkOWQ5ZDk7IH0KLkNvZGVNaXJyb3ItZm9jdXNlZCAuQ29kZU1pcnJvci1zZWxlY3RlZCB7IGJhY2tncm91bmQ6ICNkN2Q0ZjA7IH0KLkNvZGVNaXJyb3ItY3Jvc3NoYWlyIHsgY3Vyc29yOiBjcm9zc2hhaXI7IH0KCi5jbS1zZWFyY2hpbmcgewogIGJhY2tncm91bmQ6ICNmZmE7CiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMCwgLjQpOwp9CgovKiBJRTcgaGFjayB0byBwcmV2ZW50IGl0IGZyb20gcmV0dXJuaW5nIGZ1bm55IG9mZnNldFRvcHMgb24gdGhlIHNwYW5zICovCi5Db2RlTWlycm9yIHNwYW4geyAqdmVydGljYWwtYWxpZ246IHRleHQtYm90dG9tOyB9CgovKiBVc2VkIHRvIGZvcmNlIGEgYm9yZGVyIG1vZGVsIGZvciBhIG5vZGUgKi8KLmNtLWZvcmNlLWJvcmRlciB7IHBhZGRpbmctcmlnaHQ6IC4xcHg7IH0KCkBtZWRpYSBwcmludCB7CiAgLyogSGlkZSB0aGUgY3Vyc29yIHdoZW4gcHJpbnRpbmcgKi8KICAuQ29kZU1pcnJvciBkaXYuQ29kZU1pcnJvci1jdXJzb3JzIHsKICAgIHZpc2liaWxpdHk6IGhpZGRlbjsKICB9Cn0KCi8qIFNlZSBpc3N1ZSAjMjkwMSAqLwouY20tdGFiLXdyYXAtaGFjazphZnRlciB7IGNvbnRlbnQ6ICcnOyB9CgovKiBIZWxwIHVzZXJzIHVzZSBtYXJrc2VsZWN0aW9uIHRvIHNhZmVseSBzdHlsZSB0ZXh0IGJhY2tncm91bmQgKi8Kc3Bhbi5Db2RlTWlycm9yLXNlbGVjdGVkdGV4dCB7IGJhY2tncm91bmQ6IG5vbmU7IH0K">
    <script src="data:application/x-javascript;base64,LyogQ29kZU1pcnJvciAtIE1pbmlmaWVkICYgQnVuZGxlZAogICBHZW5lcmF0ZWQgb24gMTEvMTkvMjAxNSB3aXRoIGh0dHA6Ly9jb2RlbWlycm9yLm5ldC9kb2MvY29tcHJlc3MuaHRtbAogICBWZXJzaW9uOiA0LjEzCgogICBDb2RlTWlycm9yIExpYnJhcnk6CiAgIC0gY29kZW1pcnJvci5qcwogKi8KCiFmdW5jdGlvbihhKXtpZigib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWEoKTtlbHNle2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpcmV0dXJuIGRlZmluZShbXSxhKTt0aGlzLkNvZGVNaXJyb3I9YSgpfX0oZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gdyhhLGIpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHcpKXJldHVybiBuZXcgdyhhLGIpO3RoaXMub3B0aW9ucz1iPWI/WGYoYik6e30sWGYocGQsYiwhMSksSihiKTt2YXIgYz1iLnZhbHVlOyJzdHJpbmciPT10eXBlb2YgYyYmKGM9bmV3IFJlKGMsYi5tb2RlKSksdGhpcy5kb2M9Yzt2YXIgZz10aGlzLmRpc3BsYXk9bmV3IHgoYSxjKTtnLndyYXBwZXIuQ29kZU1pcnJvcj10aGlzLEYodGhpcyksRCh0aGlzKSxiLmxpbmVXcmFwcGluZyYmKHRoaXMuZGlzcGxheS53cmFwcGVyLmNsYXNzTmFtZSs9IiBDb2RlTWlycm9yLXdyYXAiKSxiLmF1dG9mb2N1cyYmIW8mJmZjKHRoaXMpLE4odGhpcyksdGhpcy5zdGF0ZT17a2V5TWFwczpbXSxvdmVybGF5czpbXSxtb2RlR2VuOjAsb3ZlcndyaXRlOiExLGZvY3VzZWQ6ITEsc3VwcHJlc3NFZGl0czohMSxwYXN0ZUluY29taW5nOiExLGN1dEluY29taW5nOiExLGRyYWdnaW5nVGV4dDohMSxoaWdobGlnaHQ6bmV3IE5mLGtleVNlcTpudWxsfSxkJiYxMT5lJiZzZXRUaW1lb3V0KFlmKGVjLHRoaXMsITApLDIwKSxpYyh0aGlzKSxwZygpLEdiKHRoaXMpLHRoaXMuY3VyT3AuZm9yY2VVcGRhdGU9ITAsVmUodGhpcyxjKSxiLmF1dG9mb2N1cyYmIW98fGlnKCk9PWcuaW5wdXQ/c2V0VGltZW91dChZZihPYyx0aGlzKSwyMCk6UGModGhpcyk7Zm9yKHZhciBoIGluIHFkKXFkLmhhc093blByb3BlcnR5KGgpJiZxZFtoXSh0aGlzLGJbaF0sc2QpO1ModGhpcyksYi5maW5pc2hJbml0JiZiLmZpbmlzaEluaXQodGhpcyk7Zm9yKHZhciBpPTA7aTx3ZC5sZW5ndGg7KytpKXdkW2ldKHRoaXMpO0liKHRoaXMpLGYmJmIubGluZVdyYXBwaW5nJiYib3B0aW1pemVsZWdpYmlsaXR5Ij09Z2V0Q29tcHV0ZWRTdHlsZShnLmxpbmVEaXYpLnRleHRSZW5kZXJpbmcmJihnLmxpbmVEaXYuc3R5bGUudGV4dFJlbmRlcmluZz0iYXV0byIpfWZ1bmN0aW9uIHgoYSxiKXt2YXIgYz10aGlzLGc9Yy5pbnB1dD1kZygidGV4dGFyZWEiLG51bGwsbnVsbCwicG9zaXRpb246IGFic29sdXRlOyBwYWRkaW5nOiAwOyB3aWR0aDogMXB4OyBoZWlnaHQ6IDFlbTsgb3V0bGluZTogbm9uZSIpO2Y/Zy5zdHlsZS53aWR0aD0iMTAwMHB4IjpnLnNldEF0dHJpYnV0ZSgid3JhcCIsIm9mZiIpLG4mJihnLnN0eWxlLmJvcmRlcj0iMXB4IHNvbGlkIGJsYWNrIiksZy5zZXRBdHRyaWJ1dGUoImF1dG9jb3JyZWN0Iiwib2ZmIiksZy5zZXRBdHRyaWJ1dGUoImF1dG9jYXBpdGFsaXplIiwib2ZmIiksZy5zZXRBdHRyaWJ1dGUoInNwZWxsY2hlY2siLCJmYWxzZSIpLGMuaW5wdXREaXY9ZGcoImRpdiIsW2ddLG51bGwsIm92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsgd2lkdGg6IDNweDsgaGVpZ2h0OiAwcHg7IiksYy5zY3JvbGxiYXJGaWxsZXI9ZGcoImRpdiIsbnVsbCwiQ29kZU1pcnJvci1zY3JvbGxiYXItZmlsbGVyIiksYy5zY3JvbGxiYXJGaWxsZXIuc2V0QXR0cmlidXRlKCJub3QtY29udGVudCIsInRydWUiKSxjLmd1dHRlckZpbGxlcj1kZygiZGl2IixudWxsLCJDb2RlTWlycm9yLWd1dHRlci1maWxsZXIiKSxjLmd1dHRlckZpbGxlci5zZXRBdHRyaWJ1dGUoIm5vdC1jb250ZW50IiwidHJ1ZSIpLGMubGluZURpdj1kZygiZGl2IixudWxsLCJDb2RlTWlycm9yLWNvZGUiKSxjLnNlbGVjdGlvbkRpdj1kZygiZGl2IixudWxsLG51bGwsInBvc2l0aW9uOiByZWxhdGl2ZTsgei1pbmRleDogMSIpLGMuY3Vyc29yRGl2PWRnKCJkaXYiLG51bGwsIkNvZGVNaXJyb3ItY3Vyc29ycyIpLGMubWVhc3VyZT1kZygiZGl2IixudWxsLCJDb2RlTWlycm9yLW1lYXN1cmUiKSxjLmxpbmVNZWFzdXJlPWRnKCJkaXYiLG51bGwsIkNvZGVNaXJyb3ItbWVhc3VyZSIpLGMubGluZVNwYWNlPWRnKCJkaXYiLFtjLm1lYXN1cmUsYy5saW5lTWVhc3VyZSxjLnNlbGVjdGlvbkRpdixjLmN1cnNvckRpdixjLmxpbmVEaXZdLG51bGwsInBvc2l0aW9uOiByZWxhdGl2ZTsgb3V0bGluZTogbm9uZSIpLGMubW92ZXI9ZGcoImRpdiIsW2RnKCJkaXYiLFtjLmxpbmVTcGFjZV0sIkNvZGVNaXJyb3ItbGluZXMiKV0sbnVsbCwicG9zaXRpb246IHJlbGF0aXZlIiksYy5zaXplcj1kZygiZGl2IixbYy5tb3Zlcl0sIkNvZGVNaXJyb3Itc2l6ZXIiKSxjLnNpemVyV2lkdGg9bnVsbCxjLmhlaWdodEZvcmNlcj1kZygiZGl2IixudWxsLG51bGwsInBvc2l0aW9uOiBhYnNvbHV0ZTsgaGVpZ2h0OiAiK0lmKyJweDsgd2lkdGg6IDFweDsiKSxjLmd1dHRlcnM9ZGcoImRpdiIsbnVsbCwiQ29kZU1pcnJvci1ndXR0ZXJzIiksYy5saW5lR3V0dGVyPW51bGwsYy5zY3JvbGxlcj1kZygiZGl2IixbYy5zaXplcixjLmhlaWdodEZvcmNlcixjLmd1dHRlcnNdLCJDb2RlTWlycm9yLXNjcm9sbCIpLGMuc2Nyb2xsZXIuc2V0QXR0cmlidXRlKCJ0YWJJbmRleCIsIi0xIiksYy53cmFwcGVyPWRnKCJkaXYiLFtjLmlucHV0RGl2LGMuc2Nyb2xsYmFyRmlsbGVyLGMuZ3V0dGVyRmlsbGVyLGMuc2Nyb2xsZXJdLCJDb2RlTWlycm9yIiksZCYmOD5lJiYoYy5ndXR0ZXJzLnN0eWxlLnpJbmRleD0tMSxjLnNjcm9sbGVyLnN0eWxlLnBhZGRpbmdSaWdodD0wKSxuJiYoZy5zdHlsZS53aWR0aD0iMHB4IiksZnx8KGMuc2Nyb2xsZXIuZHJhZ2dhYmxlPSEwKSxrJiYoYy5pbnB1dERpdi5zdHlsZS5oZWlnaHQ9IjFweCIsYy5pbnB1dERpdi5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiKSxhJiYoYS5hcHBlbmRDaGlsZD9hLmFwcGVuZENoaWxkKGMud3JhcHBlcik6YShjLndyYXBwZXIpKSxjLnZpZXdGcm9tPWMudmlld1RvPWIuZmlyc3QsYy5yZXBvcnRlZFZpZXdGcm9tPWMucmVwb3J0ZWRWaWV3VG89Yi5maXJzdCxjLnZpZXc9W10sYy5yZW5kZXJlZFZpZXc9bnVsbCxjLmV4dGVybmFsTWVhc3VyZWQ9bnVsbCxjLnZpZXdPZmZzZXQ9MCxjLmxhc3RXcmFwSGVpZ2h0PWMubGFzdFdyYXBXaWR0aD0wLGMudXBkYXRlTGluZU51bWJlcnM9bnVsbCxjLm5hdGl2ZUJhcldpZHRoPWMuYmFySGVpZ2h0PWMuYmFyV2lkdGg9MCxjLnNjcm9sbGJhcnNDbGlwcGVkPSExLGMubGluZU51bVdpZHRoPWMubGluZU51bUlubmVyV2lkdGg9Yy5saW5lTnVtQ2hhcnM9bnVsbCxjLnByZXZJbnB1dD0iIixjLmFsaWduV2lkZ2V0cz0hMSxjLnBvbGxpbmdGYXN0PSExLGMucG9sbD1uZXcgTmYsYy5jYWNoZWRDaGFyV2lkdGg9Yy5jYWNoZWRUZXh0SGVpZ2h0PWMuY2FjaGVkUGFkZGluZ0g9bnVsbCxjLmluYWNjdXJhdGVTZWxlY3Rpb249ITEsYy5tYXhMaW5lPW51bGwsYy5tYXhMaW5lTGVuZ3RoPTAsYy5tYXhMaW5lQ2hhbmdlZD0hMSxjLndoZWVsRFg9Yy53aGVlbERZPWMud2hlZWxTdGFydFg9Yy53aGVlbFN0YXJ0WT1udWxsLGMuc2hpZnQ9ITEsYy5zZWxGb3JDb250ZXh0TWVudT1udWxsfWZ1bmN0aW9uIHkoYSl7YS5kb2MubW9kZT13LmdldE1vZGUoYS5vcHRpb25zLGEuZG9jLm1vZGVPcHRpb24pLHooYSl9ZnVuY3Rpb24geihhKXthLmRvYy5pdGVyKGZ1bmN0aW9uKGEpe2Euc3RhdGVBZnRlciYmKGEuc3RhdGVBZnRlcj1udWxsKSxhLnN0eWxlcyYmKGEuc3R5bGVzPW51bGwpfSksYS5kb2MuZnJvbnRpZXI9YS5kb2MuZmlyc3QsV2EoYSwxMDApLGEuc3RhdGUubW9kZUdlbisrLGEuY3VyT3AmJlZiKGEpfWZ1bmN0aW9uIEEoYSl7YS5vcHRpb25zLmxpbmVXcmFwcGluZz8obGcoYS5kaXNwbGF5LndyYXBwZXIsIkNvZGVNaXJyb3Itd3JhcCIpLGEuZGlzcGxheS5zaXplci5zdHlsZS5taW5XaWR0aD0iIixhLmRpc3BsYXkuc2l6ZXJXaWR0aD1udWxsKTooa2coYS5kaXNwbGF5LndyYXBwZXIsIkNvZGVNaXJyb3Itd3JhcCIpLEkoYSkpLEMoYSksVmIoYSkscWIoYSksc2V0VGltZW91dChmdW5jdGlvbigpe08oYSl9LDEwMCl9ZnVuY3Rpb24gQihhKXt2YXIgYj1DYihhLmRpc3BsYXkpLGM9YS5vcHRpb25zLmxpbmVXcmFwcGluZyxkPWMmJk1hdGgubWF4KDUsYS5kaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoL0RiKGEuZGlzcGxheSktMyk7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKGxlKGEuZG9jLGUpKXJldHVybiAwO3ZhciBmPTA7aWYoZS53aWRnZXRzKWZvcih2YXIgZz0wO2c8ZS53aWRnZXRzLmxlbmd0aDtnKyspZS53aWRnZXRzW2ddLmhlaWdodCYmKGYrPWUud2lkZ2V0c1tnXS5oZWlnaHQpO3JldHVybiBjP2YrKE1hdGguY2VpbChlLnRleHQubGVuZ3RoL2QpfHwxKSpiOmYrYn19ZnVuY3Rpb24gQyhhKXt2YXIgYj1hLmRvYyxjPUIoYSk7Yi5pdGVyKGZ1bmN0aW9uKGEpe3ZhciBiPWMoYSk7YiE9YS5oZWlnaHQmJlplKGEsYil9KX1mdW5jdGlvbiBEKGEpe2EuZGlzcGxheS53cmFwcGVyLmNsYXNzTmFtZT1hLmRpc3BsYXkud3JhcHBlci5jbGFzc05hbWUucmVwbGFjZSgvXHMqY20tcy1cUysvZywiIikrYS5vcHRpb25zLnRoZW1lLnJlcGxhY2UoLyhefFxzKVxzKi9nLCIgY20tcy0iKSxxYihhKX1mdW5jdGlvbiBFKGEpe0YoYSksVmIoYSksc2V0VGltZW91dChmdW5jdGlvbigpe1IoYSl9LDIwKX1mdW5jdGlvbiBGKGEpe3ZhciBiPWEuZGlzcGxheS5ndXR0ZXJzLGM9YS5vcHRpb25zLmd1dHRlcnM7ZmcoYik7Zm9yKHZhciBkPTA7ZDxjLmxlbmd0aDsrK2Qpe3ZhciBlPWNbZF0sZj1iLmFwcGVuZENoaWxkKGRnKCJkaXYiLG51bGwsIkNvZGVNaXJyb3ItZ3V0dGVyICIrZSkpOyJDb2RlTWlycm9yLWxpbmVudW1iZXJzIj09ZSYmKGEuZGlzcGxheS5saW5lR3V0dGVyPWYsZi5zdHlsZS53aWR0aD0oYS5kaXNwbGF5LmxpbmVOdW1XaWR0aHx8MSkrInB4Iil9Yi5zdHlsZS5kaXNwbGF5PWQ/IiI6Im5vbmUiLEcoYSl9ZnVuY3Rpb24gRyhhKXt2YXIgYj1hLmRpc3BsYXkuZ3V0dGVycy5vZmZzZXRXaWR0aDthLmRpc3BsYXkuc2l6ZXIuc3R5bGUubWFyZ2luTGVmdD1iKyJweCJ9ZnVuY3Rpb24gSChhKXtpZigwPT1hLmhlaWdodClyZXR1cm4gMDtmb3IodmFyIGMsYj1hLnRleHQubGVuZ3RoLGQ9YTtjPWVlKGQpOyl7dmFyIGU9Yy5maW5kKDAsITApO2Q9ZS5mcm9tLmxpbmUsYis9ZS5mcm9tLmNoLWUudG8uY2h9Zm9yKGQ9YTtjPWZlKGQpOyl7dmFyIGU9Yy5maW5kKDAsITApO2ItPWQudGV4dC5sZW5ndGgtZS5mcm9tLmNoLGQ9ZS50by5saW5lLGIrPWQudGV4dC5sZW5ndGgtZS50by5jaH1yZXR1cm4gYn1mdW5jdGlvbiBJKGEpe3ZhciBiPWEuZGlzcGxheSxjPWEuZG9jO2IubWF4TGluZT1XZShjLGMuZmlyc3QpLGIubWF4TGluZUxlbmd0aD1IKGIubWF4TGluZSksYi5tYXhMaW5lQ2hhbmdlZD0hMCxjLml0ZXIoZnVuY3Rpb24oYSl7dmFyIGM9SChhKTtjPmIubWF4TGluZUxlbmd0aCYmKGIubWF4TGluZUxlbmd0aD1jLGIubWF4TGluZT1hKX0pfWZ1bmN0aW9uIEooYSl7dmFyIGI9VWYoYS5ndXR0ZXJzLCJDb2RlTWlycm9yLWxpbmVudW1iZXJzIik7LTE9PWImJmEubGluZU51bWJlcnM/YS5ndXR0ZXJzPWEuZ3V0dGVycy5jb25jYXQoWyJDb2RlTWlycm9yLWxpbmVudW1iZXJzIl0pOmI+LTEmJiFhLmxpbmVOdW1iZXJzJiYoYS5ndXR0ZXJzPWEuZ3V0dGVycy5zbGljZSgwKSxhLmd1dHRlcnMuc3BsaWNlKGIsMSkpfWZ1bmN0aW9uIEsoYSl7dmFyIGI9YS5kaXNwbGF5LGM9Yi5ndXR0ZXJzLm9mZnNldFdpZHRoLGQ9TWF0aC5yb3VuZChhLmRvYy5oZWlnaHQrX2EoYS5kaXNwbGF5KSk7cmV0dXJue2NsaWVudEhlaWdodDpiLnNjcm9sbGVyLmNsaWVudEhlaWdodCx2aWV3SGVpZ2h0OmIud3JhcHBlci5jbGllbnRIZWlnaHQsc2Nyb2xsV2lkdGg6Yi5zY3JvbGxlci5zY3JvbGxXaWR0aCxjbGllbnRXaWR0aDpiLnNjcm9sbGVyLmNsaWVudFdpZHRoLHZpZXdXaWR0aDpiLndyYXBwZXIuY2xpZW50V2lkdGgsYmFyTGVmdDphLm9wdGlvbnMuZml4ZWRHdXR0ZXI/YzowLGRvY0hlaWdodDpkLHNjcm9sbEhlaWdodDpkK2JiKGEpK2IuYmFySGVpZ2h0LG5hdGl2ZUJhcldpZHRoOmIubmF0aXZlQmFyV2lkdGgsZ3V0dGVyV2lkdGg6Y319ZnVuY3Rpb24gTChhLGIsYyl7dGhpcy5jbT1jO3ZhciBmPXRoaXMudmVydD1kZygiZGl2IixbZGcoImRpdiIsbnVsbCxudWxsLCJtaW4td2lkdGg6IDFweCIpXSwiQ29kZU1pcnJvci12c2Nyb2xsYmFyIiksZz10aGlzLmhvcml6PWRnKCJkaXYiLFtkZygiZGl2IixudWxsLG51bGwsImhlaWdodDogMTAwJTsgbWluLWhlaWdodDogMXB4IildLCJDb2RlTWlycm9yLWhzY3JvbGxiYXIiKTthKGYpLGEoZykseWYoZiwic2Nyb2xsIixmdW5jdGlvbigpe2YuY2xpZW50SGVpZ2h0JiZiKGYuc2Nyb2xsVG9wLCJ2ZXJ0aWNhbCIpfSkseWYoZywic2Nyb2xsIixmdW5jdGlvbigpe2cuY2xpZW50V2lkdGgmJmIoZy5zY3JvbGxMZWZ0LCJob3Jpem9udGFsIil9KSx0aGlzLmNoZWNrZWRPdmVybGF5PSExLGQmJjg+ZSYmKHRoaXMuaG9yaXouc3R5bGUubWluSGVpZ2h0PXRoaXMudmVydC5zdHlsZS5taW5XaWR0aD0iMThweCIpfWZ1bmN0aW9uIE0oKXt9ZnVuY3Rpb24gTihhKXthLmRpc3BsYXkuc2Nyb2xsYmFycyYmKGEuZGlzcGxheS5zY3JvbGxiYXJzLmNsZWFyKCksYS5kaXNwbGF5LnNjcm9sbGJhcnMuYWRkQ2xhc3MmJmtnKGEuZGlzcGxheS53cmFwcGVyLGEuZGlzcGxheS5zY3JvbGxiYXJzLmFkZENsYXNzKSksYS5kaXNwbGF5LnNjcm9sbGJhcnM9bmV3IHcuc2Nyb2xsYmFyTW9kZWxbYS5vcHRpb25zLnNjcm9sbGJhclN0eWxlXShmdW5jdGlvbihiKXthLmRpc3BsYXkud3JhcHBlci5pbnNlcnRCZWZvcmUoYixhLmRpc3BsYXkuc2Nyb2xsYmFyRmlsbGVyKSx5ZihiLCJtb3VzZWRvd24iLGZ1bmN0aW9uKCl7YS5zdGF0ZS5mb2N1c2VkJiZzZXRUaW1lb3V0KFlmKGZjLGEpLDApfSksYi5zZXRBdHRyaWJ1dGUoIm5vdC1jb250ZW50IiwidHJ1ZSIpfSxmdW5jdGlvbihiLGMpeyJob3Jpem9udGFsIj09Yz95YyhhLGIpOnhjKGEsYil9LGEpLGEuZGlzcGxheS5zY3JvbGxiYXJzLmFkZENsYXNzJiZsZyhhLmRpc3BsYXkud3JhcHBlcixhLmRpc3BsYXkuc2Nyb2xsYmFycy5hZGRDbGFzcyl9ZnVuY3Rpb24gTyhhLGIpe2J8fChiPUsoYSkpO3ZhciBjPWEuZGlzcGxheS5iYXJXaWR0aCxkPWEuZGlzcGxheS5iYXJIZWlnaHQ7UChhLGIpO2Zvcih2YXIgZT0wOzQ+ZSYmYyE9YS5kaXNwbGF5LmJhcldpZHRofHxkIT1hLmRpc3BsYXkuYmFySGVpZ2h0O2UrKyljIT1hLmRpc3BsYXkuYmFyV2lkdGgmJmEub3B0aW9ucy5saW5lV3JhcHBpbmcmJl8oYSksUChhLEsoYSkpLGM9YS5kaXNwbGF5LmJhcldpZHRoLGQ9YS5kaXNwbGF5LmJhckhlaWdodH1mdW5jdGlvbiBQKGEsYil7dmFyIGM9YS5kaXNwbGF5LGQ9Yy5zY3JvbGxiYXJzLnVwZGF0ZShiKTtjLnNpemVyLnN0eWxlLnBhZGRpbmdSaWdodD0oYy5iYXJXaWR0aD1kLnJpZ2h0KSsicHgiLGMuc2l6ZXIuc3R5bGUucGFkZGluZ0JvdHRvbT0oYy5iYXJIZWlnaHQ9ZC5ib3R0b20pKyJweCIsZC5yaWdodCYmZC5ib3R0b20/KGMuc2Nyb2xsYmFyRmlsbGVyLnN0eWxlLmRpc3BsYXk9ImJsb2NrIixjLnNjcm9sbGJhckZpbGxlci5zdHlsZS5oZWlnaHQ9ZC5ib3R0b20rInB4IixjLnNjcm9sbGJhckZpbGxlci5zdHlsZS53aWR0aD1kLnJpZ2h0KyJweCIpOmMuc2Nyb2xsYmFyRmlsbGVyLnN0eWxlLmRpc3BsYXk9IiIsZC5ib3R0b20mJmEub3B0aW9ucy5jb3Zlckd1dHRlck5leHRUb1Njcm9sbGJhciYmYS5vcHRpb25zLmZpeGVkR3V0dGVyPyhjLmd1dHRlckZpbGxlci5zdHlsZS5kaXNwbGF5PSJibG9jayIsYy5ndXR0ZXJGaWxsZXIuc3R5bGUuaGVpZ2h0PWQuYm90dG9tKyJweCIsYy5ndXR0ZXJGaWxsZXIuc3R5bGUud2lkdGg9Yi5ndXR0ZXJXaWR0aCsicHgiKTpjLmd1dHRlckZpbGxlci5zdHlsZS5kaXNwbGF5PSIifWZ1bmN0aW9uIFEoYSxiLGMpe3ZhciBkPWMmJm51bGwhPWMudG9wP01hdGgubWF4KDAsYy50b3ApOmEuc2Nyb2xsZXIuc2Nyb2xsVG9wO2Q9TWF0aC5mbG9vcihkLSRhKGEpKTt2YXIgZT1jJiZudWxsIT1jLmJvdHRvbT9jLmJvdHRvbTpkK2Eud3JhcHBlci5jbGllbnRIZWlnaHQsZj1fZShiLGQpLGc9X2UoYixlKTtpZihjJiZjLmVuc3VyZSl7dmFyIGg9Yy5lbnN1cmUuZnJvbS5saW5lLGk9Yy5lbnN1cmUudG8ubGluZTtmPmg/KGY9aCxnPV9lKGIsYWYoV2UoYixoKSkrYS53cmFwcGVyLmNsaWVudEhlaWdodCkpOk1hdGgubWluKGksYi5sYXN0TGluZSgpKT49ZyYmKGY9X2UoYixhZihXZShiLGkpKS1hLndyYXBwZXIuY2xpZW50SGVpZ2h0KSxnPWkpfXJldHVybntmcm9tOmYsdG86TWF0aC5tYXgoZyxmKzEpfX1mdW5jdGlvbiBSKGEpe3ZhciBiPWEuZGlzcGxheSxjPWIudmlldztpZihiLmFsaWduV2lkZ2V0c3x8Yi5ndXR0ZXJzLmZpcnN0Q2hpbGQmJmEub3B0aW9ucy5maXhlZEd1dHRlcil7Zm9yKHZhciBkPVUoYiktYi5zY3JvbGxlci5zY3JvbGxMZWZ0K2EuZG9jLnNjcm9sbExlZnQsZT1iLmd1dHRlcnMub2Zmc2V0V2lkdGgsZj1kKyJweCIsZz0wO2c8Yy5sZW5ndGg7ZysrKWlmKCFjW2ddLmhpZGRlbil7YS5vcHRpb25zLmZpeGVkR3V0dGVyJiZjW2ddLmd1dHRlciYmKGNbZ10uZ3V0dGVyLnN0eWxlLmxlZnQ9Zik7dmFyIGg9Y1tnXS5hbGlnbmFibGU7aWYoaClmb3IodmFyIGk9MDtpPGgubGVuZ3RoO2krKyloW2ldLnN0eWxlLmxlZnQ9Zn1hLm9wdGlvbnMuZml4ZWRHdXR0ZXImJihiLmd1dHRlcnMuc3R5bGUubGVmdD1kK2UrInB4Iil9fWZ1bmN0aW9uIFMoYSl7aWYoIWEub3B0aW9ucy5saW5lTnVtYmVycylyZXR1cm4hMTt2YXIgYj1hLmRvYyxjPVQoYS5vcHRpb25zLGIuZmlyc3QrYi5zaXplLTEpLGQ9YS5kaXNwbGF5O2lmKGMubGVuZ3RoIT1kLmxpbmVOdW1DaGFycyl7dmFyIGU9ZC5tZWFzdXJlLmFwcGVuZENoaWxkKGRnKCJkaXYiLFtkZygiZGl2IixjKV0sIkNvZGVNaXJyb3ItbGluZW51bWJlciBDb2RlTWlycm9yLWd1dHRlci1lbHQiKSksZj1lLmZpcnN0Q2hpbGQub2Zmc2V0V2lkdGgsZz1lLm9mZnNldFdpZHRoLWY7cmV0dXJuIGQubGluZUd1dHRlci5zdHlsZS53aWR0aD0iIixkLmxpbmVOdW1Jbm5lcldpZHRoPU1hdGgubWF4KGYsZC5saW5lR3V0dGVyLm9mZnNldFdpZHRoLWcpLGQubGluZU51bVdpZHRoPWQubGluZU51bUlubmVyV2lkdGgrZyxkLmxpbmVOdW1DaGFycz1kLmxpbmVOdW1Jbm5lcldpZHRoP2MubGVuZ3RoOi0xLGQubGluZUd1dHRlci5zdHlsZS53aWR0aD1kLmxpbmVOdW1XaWR0aCsicHgiLEcoYSksITB9cmV0dXJuITF9ZnVuY3Rpb24gVChhLGIpe3JldHVybiBTdHJpbmcoYS5saW5lTnVtYmVyRm9ybWF0dGVyKGIrYS5maXJzdExpbmVOdW1iZXIpKX1mdW5jdGlvbiBVKGEpe3JldHVybiBhLnNjcm9sbGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQtYS5zaXplci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0fWZ1bmN0aW9uIFYoYSxiLGMpe3ZhciBkPWEuZGlzcGxheTt0aGlzLnZpZXdwb3J0PWIsdGhpcy52aXNpYmxlPVEoZCxhLmRvYyxiKSx0aGlzLmVkaXRvcklzSGlkZGVuPSFkLndyYXBwZXIub2Zmc2V0V2lkdGgsdGhpcy53cmFwcGVySGVpZ2h0PWQud3JhcHBlci5jbGllbnRIZWlnaHQsdGhpcy53cmFwcGVyV2lkdGg9ZC53cmFwcGVyLmNsaWVudFdpZHRoLHRoaXMub2xkRGlzcGxheVdpZHRoPWNiKGEpLHRoaXMuZm9yY2U9Yyx0aGlzLmRpbXM9YmEoYSksdGhpcy5ldmVudHM9W119ZnVuY3Rpb24gVyhhKXt2YXIgYj1hLmRpc3BsYXk7IWIuc2Nyb2xsYmFyc0NsaXBwZWQmJmIuc2Nyb2xsZXIub2Zmc2V0V2lkdGgmJihiLm5hdGl2ZUJhcldpZHRoPWIuc2Nyb2xsZXIub2Zmc2V0V2lkdGgtYi5zY3JvbGxlci5jbGllbnRXaWR0aCxiLmhlaWdodEZvcmNlci5zdHlsZS5oZWlnaHQ9YmIoYSkrInB4IixiLnNpemVyLnN0eWxlLm1hcmdpbkJvdHRvbT0tYi5uYXRpdmVCYXJXaWR0aCsicHgiLGIuc2l6ZXIuc3R5bGUuYm9yZGVyUmlnaHRXaWR0aD1iYihhKSsicHgiLGIuc2Nyb2xsYmFyc0NsaXBwZWQ9ITApfWZ1bmN0aW9uIFgoYSxiKXt2YXIgYz1hLmRpc3BsYXksZD1hLmRvYztpZihiLmVkaXRvcklzSGlkZGVuKXJldHVybiBYYihhKSwhMTtpZighYi5mb3JjZSYmYi52aXNpYmxlLmZyb20+PWMudmlld0Zyb20mJmIudmlzaWJsZS50bzw9Yy52aWV3VG8mJihudWxsPT1jLnVwZGF0ZUxpbmVOdW1iZXJzfHxjLnVwZGF0ZUxpbmVOdW1iZXJzPj1jLnZpZXdUbykmJmMucmVuZGVyZWRWaWV3PT1jLnZpZXcmJjA9PV9iKGEpKXJldHVybiExO1MoYSkmJihYYihhKSxiLmRpbXM9YmEoYSkpO3ZhciBlPWQuZmlyc3QrZC5zaXplLGY9TWF0aC5tYXgoYi52aXNpYmxlLmZyb20tYS5vcHRpb25zLnZpZXdwb3J0TWFyZ2luLGQuZmlyc3QpLGc9TWF0aC5taW4oZSxiLnZpc2libGUudG8rYS5vcHRpb25zLnZpZXdwb3J0TWFyZ2luKTtjLnZpZXdGcm9tPGYmJmYtYy52aWV3RnJvbTwyMCYmKGY9TWF0aC5tYXgoZC5maXJzdCxjLnZpZXdGcm9tKSksYy52aWV3VG8+ZyYmYy52aWV3VG8tZzwyMCYmKGc9TWF0aC5taW4oZSxjLnZpZXdUbykpLHYmJihmPWplKGEuZG9jLGYpLGc9a2UoYS5kb2MsZykpO3ZhciBoPWYhPWMudmlld0Zyb218fGchPWMudmlld1RvfHxjLmxhc3RXcmFwSGVpZ2h0IT1iLndyYXBwZXJIZWlnaHR8fGMubGFzdFdyYXBXaWR0aCE9Yi53cmFwcGVyV2lkdGg7JGIoYSxmLGcpLGMudmlld09mZnNldD1hZihXZShhLmRvYyxjLnZpZXdGcm9tKSksYS5kaXNwbGF5Lm1vdmVyLnN0eWxlLnRvcD1jLnZpZXdPZmZzZXQrInB4Ijt2YXIgaT1fYihhKTtpZighaCYmMD09aSYmIWIuZm9yY2UmJmMucmVuZGVyZWRWaWV3PT1jLnZpZXcmJihudWxsPT1jLnVwZGF0ZUxpbmVOdW1iZXJzfHxjLnVwZGF0ZUxpbmVOdW1iZXJzPj1jLnZpZXdUbykpcmV0dXJuITE7dmFyIGo9aWcoKTtyZXR1cm4gaT40JiYoYy5saW5lRGl2LnN0eWxlLmRpc3BsYXk9Im5vbmUiKSxjYShhLGMudXBkYXRlTGluZU51bWJlcnMsYi5kaW1zKSxpPjQmJihjLmxpbmVEaXYuc3R5bGUuZGlzcGxheT0iIiksYy5yZW5kZXJlZFZpZXc9Yy52aWV3LGomJmlnKCkhPWomJmoub2Zmc2V0SGVpZ2h0JiZqLmZvY3VzKCksZmcoYy5jdXJzb3JEaXYpLGZnKGMuc2VsZWN0aW9uRGl2KSxjLmd1dHRlcnMuc3R5bGUuaGVpZ2h0PTAsaCYmKGMubGFzdFdyYXBIZWlnaHQ9Yi53cmFwcGVySGVpZ2h0LGMubGFzdFdyYXBXaWR0aD1iLndyYXBwZXJXaWR0aCxXYShhLDQwMCkpLGMudXBkYXRlTGluZU51bWJlcnM9bnVsbCwhMH1mdW5jdGlvbiBZKGEsYil7Zm9yKHZhciBjPWIuZm9yY2UsZD1iLnZpZXdwb3J0LGU9ITA7O2U9ITEpe2lmKGUmJmEub3B0aW9ucy5saW5lV3JhcHBpbmcmJmIub2xkRGlzcGxheVdpZHRoIT1jYihhKSljPSEwO2Vsc2UgaWYoYz0hMSxkJiZudWxsIT1kLnRvcCYmKGQ9e3RvcDpNYXRoLm1pbihhLmRvYy5oZWlnaHQrX2EoYS5kaXNwbGF5KS1kYihhKSxkLnRvcCl9KSxiLnZpc2libGU9UShhLmRpc3BsYXksYS5kb2MsZCksYi52aXNpYmxlLmZyb20+PWEuZGlzcGxheS52aWV3RnJvbSYmYi52aXNpYmxlLnRvPD1hLmRpc3BsYXkudmlld1RvKWJyZWFrO2lmKCFYKGEsYikpYnJlYWs7XyhhKTt2YXIgZj1LKGEpO1NhKGEpLCQoYSxmKSxPKGEsZil9Yi5zaWduYWwoYSwidXBkYXRlIixhKSwoYS5kaXNwbGF5LnZpZXdGcm9tIT1hLmRpc3BsYXkucmVwb3J0ZWRWaWV3RnJvbXx8YS5kaXNwbGF5LnZpZXdUbyE9YS5kaXNwbGF5LnJlcG9ydGVkVmlld1RvKSYmKGIuc2lnbmFsKGEsInZpZXdwb3J0Q2hhbmdlIixhLGEuZGlzcGxheS52aWV3RnJvbSxhLmRpc3BsYXkudmlld1RvKSxhLmRpc3BsYXkucmVwb3J0ZWRWaWV3RnJvbT1hLmRpc3BsYXkudmlld0Zyb20sYS5kaXNwbGF5LnJlcG9ydGVkVmlld1RvPWEuZGlzcGxheS52aWV3VG8pfWZ1bmN0aW9uIFooYSxiKXt2YXIgYz1uZXcgVihhLGIpO2lmKFgoYSxjKSl7XyhhKSxZKGEsYyk7dmFyIGQ9SyhhKTtTYShhKSwkKGEsZCksTyhhLGQpLGMuZmluaXNoKCl9fWZ1bmN0aW9uICQoYSxiKXthLmRpc3BsYXkuc2l6ZXIuc3R5bGUubWluSGVpZ2h0PWIuZG9jSGVpZ2h0KyJweCI7dmFyIGM9Yi5kb2NIZWlnaHQrYS5kaXNwbGF5LmJhckhlaWdodDthLmRpc3BsYXkuaGVpZ2h0Rm9yY2VyLnN0eWxlLnRvcD1jKyJweCIsYS5kaXNwbGF5Lmd1dHRlcnMuc3R5bGUuaGVpZ2h0PU1hdGgubWF4KGMrYmIoYSksYi5jbGllbnRIZWlnaHQpKyJweCJ9ZnVuY3Rpb24gXyhhKXtmb3IodmFyIGI9YS5kaXNwbGF5LGM9Yi5saW5lRGl2Lm9mZnNldFRvcCxmPTA7ZjxiLnZpZXcubGVuZ3RoO2YrKyl7dmFyIGgsZz1iLnZpZXdbZl07aWYoIWcuaGlkZGVuKXtpZihkJiY4PmUpe3ZhciBpPWcubm9kZS5vZmZzZXRUb3ArZy5ub2RlLm9mZnNldEhlaWdodDtoPWktYyxjPWl9ZWxzZXt2YXIgaj1nLm5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aD1qLmJvdHRvbS1qLnRvcH12YXIgaz1nLmxpbmUuaGVpZ2h0LWg7aWYoMj5oJiYoaD1DYihiKSksKGs+LjAwMXx8LS4wMDE+aykmJihaZShnLmxpbmUsaCksYWEoZy5saW5lKSxnLnJlc3QpKWZvcih2YXIgbD0wO2w8Zy5yZXN0Lmxlbmd0aDtsKyspYWEoZy5yZXN0W2xdKX19fWZ1bmN0aW9uIGFhKGEpe2lmKGEud2lkZ2V0cylmb3IodmFyIGI9MDtiPGEud2lkZ2V0cy5sZW5ndGg7KytiKWEud2lkZ2V0c1tiXS5oZWlnaHQ9YS53aWRnZXRzW2JdLm5vZGUub2Zmc2V0SGVpZ2h0fWZ1bmN0aW9uIGJhKGEpe2Zvcih2YXIgYj1hLmRpc3BsYXksYz17fSxkPXt9LGU9Yi5ndXR0ZXJzLmNsaWVudExlZnQsZj1iLmd1dHRlcnMuZmlyc3RDaGlsZCxnPTA7ZjtmPWYubmV4dFNpYmxpbmcsKytnKWNbYS5vcHRpb25zLmd1dHRlcnNbZ11dPWYub2Zmc2V0TGVmdCtmLmNsaWVudExlZnQrZSxkW2Eub3B0aW9ucy5ndXR0ZXJzW2ddXT1mLmNsaWVudFdpZHRoO3JldHVybntmaXhlZFBvczpVKGIpLGd1dHRlclRvdGFsV2lkdGg6Yi5ndXR0ZXJzLm9mZnNldFdpZHRoLGd1dHRlckxlZnQ6YyxndXR0ZXJXaWR0aDpkLHdyYXBwZXJXaWR0aDpiLndyYXBwZXIuY2xpZW50V2lkdGh9fWZ1bmN0aW9uIGNhKGEsYixjKXtmdW5jdGlvbiBpKGIpe3ZhciBjPWIubmV4dFNpYmxpbmc7cmV0dXJuIGYmJnAmJmEuZGlzcGxheS5jdXJyZW50V2hlZWxUYXJnZXQ9PWI/Yi5zdHlsZS5kaXNwbGF5PSJub25lIjpiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksY31mb3IodmFyIGQ9YS5kaXNwbGF5LGU9YS5vcHRpb25zLmxpbmVOdW1iZXJzLGc9ZC5saW5lRGl2LGg9Zy5maXJzdENoaWxkLGo9ZC52aWV3LGs9ZC52aWV3RnJvbSxsPTA7bDxqLmxlbmd0aDtsKyspe3ZhciBtPWpbbF07aWYobS5oaWRkZW4pO2Vsc2UgaWYobS5ub2RlKXtmb3IoO2ghPW0ubm9kZTspaD1pKGgpO3ZhciBvPWUmJm51bGwhPWImJms+PWImJm0ubGluZU51bWJlcjttLmNoYW5nZXMmJihVZihtLmNoYW5nZXMsImd1dHRlciIpPi0xJiYobz0hMSksZGEoYSxtLGssYykpLG8mJihmZyhtLmxpbmVOdW1iZXIpLG0ubGluZU51bWJlci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShUKGEub3B0aW9ucyxrKSkpKSxoPW0ubm9kZS5uZXh0U2libGluZ31lbHNle3ZhciBuPWxhKGEsbSxrLGMpO2cuaW5zZXJ0QmVmb3JlKG4saCl9ays9bS5zaXplfWZvcig7aDspaD1pKGgpfWZ1bmN0aW9uIGRhKGEsYixjLGQpe2Zvcih2YXIgZT0wO2U8Yi5jaGFuZ2VzLmxlbmd0aDtlKyspe3ZhciBmPWIuY2hhbmdlc1tlXTsidGV4dCI9PWY/aGEoYSxiKToiZ3V0dGVyIj09Zj9qYShhLGIsYyxkKToiY2xhc3MiPT1mP2lhKGIpOiJ3aWRnZXQiPT1mJiZrYShiLGQpfWIuY2hhbmdlcz1udWxsfWZ1bmN0aW9uIGVhKGEpe3JldHVybiBhLm5vZGU9PWEudGV4dCYmKGEubm9kZT1kZygiZGl2IixudWxsLG51bGwsInBvc2l0aW9uOiByZWxhdGl2ZSIpLGEudGV4dC5wYXJlbnROb2RlJiZhLnRleHQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoYS5ub2RlLGEudGV4dCksYS5ub2RlLmFwcGVuZENoaWxkKGEudGV4dCksZCYmOD5lJiYoYS5ub2RlLnN0eWxlLnpJbmRleD0yKSksYS5ub2RlfWZ1bmN0aW9uIGZhKGEpe3ZhciBiPWEuYmdDbGFzcz9hLmJnQ2xhc3MrIiAiKyhhLmxpbmUuYmdDbGFzc3x8IiIpOmEubGluZS5iZ0NsYXNzO2lmKGImJihiKz0iIENvZGVNaXJyb3ItbGluZWJhY2tncm91bmQiKSxhLmJhY2tncm91bmQpYj9hLmJhY2tncm91bmQuY2xhc3NOYW1lPWI6KGEuYmFja2dyb3VuZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEuYmFja2dyb3VuZCksYS5iYWNrZ3JvdW5kPW51bGwpO2Vsc2UgaWYoYil7dmFyIGM9ZWEoYSk7YS5iYWNrZ3JvdW5kPWMuaW5zZXJ0QmVmb3JlKGRnKCJkaXYiLG51bGwsYiksYy5maXJzdENoaWxkKX19ZnVuY3Rpb24gZ2EoYSxiKXt2YXIgYz1hLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZDtyZXR1cm4gYyYmYy5saW5lPT1iLmxpbmU/KGEuZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkPW51bGwsYi5tZWFzdXJlPWMubWVhc3VyZSxjLmJ1aWx0KTpGZShhLGIpfWZ1bmN0aW9uIGhhKGEsYil7dmFyIGM9Yi50ZXh0LmNsYXNzTmFtZSxkPWdhKGEsYik7Yi50ZXh0PT1iLm5vZGUmJihiLm5vZGU9ZC5wcmUpLGIudGV4dC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChkLnByZSxiLnRleHQpLGIudGV4dD1kLnByZSxkLmJnQ2xhc3MhPWIuYmdDbGFzc3x8ZC50ZXh0Q2xhc3MhPWIudGV4dENsYXNzPyhiLmJnQ2xhc3M9ZC5iZ0NsYXNzLGIudGV4dENsYXNzPWQudGV4dENsYXNzLGlhKGIpKTpjJiYoYi50ZXh0LmNsYXNzTmFtZT1jKX1mdW5jdGlvbiBpYShhKXtmYShhKSxhLmxpbmUud3JhcENsYXNzP2VhKGEpLmNsYXNzTmFtZT1hLmxpbmUud3JhcENsYXNzOmEubm9kZSE9YS50ZXh0JiYoYS5ub2RlLmNsYXNzTmFtZT0iIik7dmFyIGI9YS50ZXh0Q2xhc3M/YS50ZXh0Q2xhc3MrIiAiKyhhLmxpbmUudGV4dENsYXNzfHwiIik6YS5saW5lLnRleHRDbGFzczthLnRleHQuY2xhc3NOYW1lPWJ8fCIifWZ1bmN0aW9uIGphKGEsYixjLGQpe2IuZ3V0dGVyJiYoYi5ub2RlLnJlbW92ZUNoaWxkKGIuZ3V0dGVyKSxiLmd1dHRlcj1udWxsKTt2YXIgZT1iLmxpbmUuZ3V0dGVyTWFya2VycztpZihhLm9wdGlvbnMubGluZU51bWJlcnN8fGUpe3ZhciBmPWVhKGIpLGc9Yi5ndXR0ZXI9Zi5pbnNlcnRCZWZvcmUoZGcoImRpdiIsbnVsbCwiQ29kZU1pcnJvci1ndXR0ZXItd3JhcHBlciIsImxlZnQ6ICIrKGEub3B0aW9ucy5maXhlZEd1dHRlcj9kLmZpeGVkUG9zOi1kLmd1dHRlclRvdGFsV2lkdGgpKyJweDsgd2lkdGg6ICIrZC5ndXR0ZXJUb3RhbFdpZHRoKyJweCIpLGIudGV4dCk7aWYoYi5saW5lLmd1dHRlckNsYXNzJiYoZy5jbGFzc05hbWUrPSIgIitiLmxpbmUuZ3V0dGVyQ2xhc3MpLCFhLm9wdGlvbnMubGluZU51bWJlcnN8fGUmJmVbIkNvZGVNaXJyb3ItbGluZW51bWJlcnMiXXx8KGIubGluZU51bWJlcj1nLmFwcGVuZENoaWxkKGRnKCJkaXYiLFQoYS5vcHRpb25zLGMpLCJDb2RlTWlycm9yLWxpbmVudW1iZXIgQ29kZU1pcnJvci1ndXR0ZXItZWx0IiwibGVmdDogIitkLmd1dHRlckxlZnRbIkNvZGVNaXJyb3ItbGluZW51bWJlcnMiXSsicHg7IHdpZHRoOiAiK2EuZGlzcGxheS5saW5lTnVtSW5uZXJXaWR0aCsicHgiKSkpLGUpZm9yKHZhciBoPTA7aDxhLm9wdGlvbnMuZ3V0dGVycy5sZW5ndGg7KytoKXt2YXIgaT1hLm9wdGlvbnMuZ3V0dGVyc1toXSxqPWUuaGFzT3duUHJvcGVydHkoaSkmJmVbaV07aiYmZy5hcHBlbmRDaGlsZChkZygiZGl2Iixbal0sIkNvZGVNaXJyb3ItZ3V0dGVyLWVsdCIsImxlZnQ6ICIrZC5ndXR0ZXJMZWZ0W2ldKyJweDsgd2lkdGg6ICIrZC5ndXR0ZXJXaWR0aFtpXSsicHgiKSl9fX1mdW5jdGlvbiBrYShhLGIpe2EuYWxpZ25hYmxlJiYoYS5hbGlnbmFibGU9bnVsbCk7Zm9yKHZhciBkLGM9YS5ub2RlLmZpcnN0Q2hpbGQ7YztjPWQpe3ZhciBkPWMubmV4dFNpYmxpbmc7IkNvZGVNaXJyb3ItbGluZXdpZGdldCI9PWMuY2xhc3NOYW1lJiZhLm5vZGUucmVtb3ZlQ2hpbGQoYyl9bWEoYSxiKX1mdW5jdGlvbiBsYShhLGIsYyxkKXt2YXIgZT1nYShhLGIpO3JldHVybiBiLnRleHQ9Yi5ub2RlPWUucHJlLGUuYmdDbGFzcyYmKGIuYmdDbGFzcz1lLmJnQ2xhc3MpLGUudGV4dENsYXNzJiYoYi50ZXh0Q2xhc3M9ZS50ZXh0Q2xhc3MpLGlhKGIpLGphKGEsYixjLGQpLG1hKGIsZCksYi5ub2RlfWZ1bmN0aW9uIG1hKGEsYil7aWYobmEoYS5saW5lLGEsYiwhMCksYS5yZXN0KWZvcih2YXIgYz0wO2M8YS5yZXN0Lmxlbmd0aDtjKyspbmEoYS5yZXN0W2NdLGEsYiwhMSl9ZnVuY3Rpb24gbmEoYSxiLGMsZCl7aWYoYS53aWRnZXRzKWZvcih2YXIgZT1lYShiKSxmPTAsZz1hLndpZGdldHM7ZjxnLmxlbmd0aDsrK2Ype3ZhciBoPWdbZl0saT1kZygiZGl2IixbaC5ub2RlXSwiQ29kZU1pcnJvci1saW5ld2lkZ2V0Iik7aC5oYW5kbGVNb3VzZUV2ZW50c3x8aS5zZXRBdHRyaWJ1dGUoImNtLWlnbm9yZS1ldmVudHMiLCJ0cnVlIiksb2EoaCxpLGIsYyksZCYmaC5hYm92ZT9lLmluc2VydEJlZm9yZShpLGIuZ3V0dGVyfHxiLnRleHQpOmUuYXBwZW5kQ2hpbGQoaSksQ2YoaCwicmVkcmF3Iil9fWZ1bmN0aW9uIG9hKGEsYixjLGQpe2lmKGEubm9IU2Nyb2xsKXsoYy5hbGlnbmFibGV8fChjLmFsaWduYWJsZT1bXSkpLnB1c2goYik7dmFyIGU9ZC53cmFwcGVyV2lkdGg7Yi5zdHlsZS5sZWZ0PWQuZml4ZWRQb3MrInB4IixhLmNvdmVyR3V0dGVyfHwoZS09ZC5ndXR0ZXJUb3RhbFdpZHRoLGIuc3R5bGUucGFkZGluZ0xlZnQ9ZC5ndXR0ZXJUb3RhbFdpZHRoKyJweCIpLGIuc3R5bGUud2lkdGg9ZSsicHgifWEuY292ZXJHdXR0ZXImJihiLnN0eWxlLnpJbmRleD01LGIuc3R5bGUucG9zaXRpb249InJlbGF0aXZlIixhLm5vSFNjcm9sbHx8KGIuc3R5bGUubWFyZ2luTGVmdD0tZC5ndXR0ZXJUb3RhbFdpZHRoKyJweCIpKX1mdW5jdGlvbiByYShhKXtyZXR1cm4gcGEoYS5saW5lLGEuY2gpfWZ1bmN0aW9uIHNhKGEsYil7cmV0dXJuIHFhKGEsYik8MD9iOmF9ZnVuY3Rpb24gdGEoYSxiKXtyZXR1cm4gcWEoYSxiKTwwP2E6Yn1mdW5jdGlvbiB1YShhLGIpe3RoaXMucmFuZ2VzPWEsdGhpcy5wcmltSW5kZXg9Yn1mdW5jdGlvbiB2YShhLGIpe3RoaXMuYW5jaG9yPWEsdGhpcy5oZWFkPWJ9ZnVuY3Rpb24gd2EoYSxiKXt2YXIgYz1hW2JdO2Euc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBxYShhLmZyb20oKSxiLmZyb20oKSl9KSxiPVVmKGEsYyk7Zm9yKHZhciBkPTE7ZDxhLmxlbmd0aDtkKyspe3ZhciBlPWFbZF0sZj1hW2QtMV07aWYocWEoZi50bygpLGUuZnJvbSgpKT49MCl7dmFyIGc9dGEoZi5mcm9tKCksZS5mcm9tKCkpLGg9c2EoZi50bygpLGUudG8oKSksaT1mLmVtcHR5KCk/ZS5mcm9tKCk9PWUuaGVhZDpmLmZyb20oKT09Zi5oZWFkO2I+PWQmJi0tYixhLnNwbGljZSgtLWQsMixuZXcgdmEoaT9oOmcsaT9nOmgpKX19cmV0dXJuIG5ldyB1YShhLGIpfWZ1bmN0aW9uIHhhKGEsYil7cmV0dXJuIG5ldyB1YShbbmV3IHZhKGEsYnx8YSldLDApfWZ1bmN0aW9uIHlhKGEsYil7cmV0dXJuIE1hdGgubWF4KGEuZmlyc3QsTWF0aC5taW4oYixhLmZpcnN0K2Euc2l6ZS0xKSl9ZnVuY3Rpb24gemEoYSxiKXtpZihiLmxpbmU8YS5maXJzdClyZXR1cm4gcGEoYS5maXJzdCwwKTt2YXIgYz1hLmZpcnN0K2Euc2l6ZS0xO3JldHVybiBiLmxpbmU+Yz9wYShjLFdlKGEsYykudGV4dC5sZW5ndGgpOkFhKGIsV2UoYSxiLmxpbmUpLnRleHQubGVuZ3RoKX1mdW5jdGlvbiBBYShhLGIpe3ZhciBjPWEuY2g7cmV0dXJuIG51bGw9PWN8fGM+Yj9wYShhLmxpbmUsYik6MD5jP3BhKGEubGluZSwwKTphfWZ1bmN0aW9uIEJhKGEsYil7cmV0dXJuIGI+PWEuZmlyc3QmJmI8YS5maXJzdCthLnNpemV9ZnVuY3Rpb24gQ2EoYSxiKXtmb3IodmFyIGM9W10sZD0wO2Q8Yi5sZW5ndGg7ZCsrKWNbZF09emEoYSxiW2RdKTtyZXR1cm4gY31mdW5jdGlvbiBEYShhLGIsYyxkKXtpZihhLmNtJiZhLmNtLmRpc3BsYXkuc2hpZnR8fGEuZXh0ZW5kKXt2YXIgZT1iLmFuY2hvcjtpZihkKXt2YXIgZj1xYShjLGUpPDA7ZiE9cWEoZCxlKTwwPyhlPWMsYz1kKTpmIT1xYShjLGQpPDAmJihjPWQpfXJldHVybiBuZXcgdmEoZSxjKX1yZXR1cm4gbmV3IHZhKGR8fGMsYyl9ZnVuY3Rpb24gRWEoYSxiLGMsZCl7S2EoYSxuZXcgdWEoW0RhKGEsYS5zZWwucHJpbWFyeSgpLGIsYyldLDApLGQpfWZ1bmN0aW9uIEZhKGEsYixjKXtmb3IodmFyIGQ9W10sZT0wO2U8YS5zZWwucmFuZ2VzLmxlbmd0aDtlKyspZFtlXT1EYShhLGEuc2VsLnJhbmdlc1tlXSxiW2VdLG51bGwpO3ZhciBmPXdhKGQsYS5zZWwucHJpbUluZGV4KTtLYShhLGYsYyl9ZnVuY3Rpb24gR2EoYSxiLGMsZCl7dmFyIGU9YS5zZWwucmFuZ2VzLnNsaWNlKDApO2VbYl09YyxLYShhLHdhKGUsYS5zZWwucHJpbUluZGV4KSxkKX1mdW5jdGlvbiBIYShhLGIsYyxkKXtLYShhLHhhKGIsYyksZCl9ZnVuY3Rpb24gSWEoYSxiKXt2YXIgYz17cmFuZ2VzOmIucmFuZ2VzLHVwZGF0ZTpmdW5jdGlvbihiKXt0aGlzLnJhbmdlcz1bXTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl0aGlzLnJhbmdlc1tjXT1uZXcgdmEoemEoYSxiW2NdLmFuY2hvciksemEoYSxiW2NdLmhlYWQpKX19O3JldHVybiBBZihhLCJiZWZvcmVTZWxlY3Rpb25DaGFuZ2UiLGEsYyksYS5jbSYmQWYoYS5jbSwiYmVmb3JlU2VsZWN0aW9uQ2hhbmdlIixhLmNtLGMpLGMucmFuZ2VzIT1iLnJhbmdlcz93YShjLnJhbmdlcyxjLnJhbmdlcy5sZW5ndGgtMSk6Yn1mdW5jdGlvbiBKYShhLGIsYyl7dmFyIGQ9YS5oaXN0b3J5LmRvbmUsZT1TZihkKTtlJiZlLnJhbmdlcz8oZFtkLmxlbmd0aC0xXT1iLExhKGEsYixjKSk6S2EoYSxiLGMpfWZ1bmN0aW9uIEthKGEsYixjKXtMYShhLGIsYyksamYoYSxhLnNlbCxhLmNtP2EuY20uY3VyT3AuaWQ6TmFOLGMpfWZ1bmN0aW9uIExhKGEsYixjKXsoR2YoYSwiYmVmb3JlU2VsZWN0aW9uQ2hhbmdlIil8fGEuY20mJkdmKGEuY20sImJlZm9yZVNlbGVjdGlvbkNoYW5nZSIpKSYmKGI9SWEoYSxiKSk7dmFyIGQ9YyYmYy5iaWFzfHwocWEoYi5wcmltYXJ5KCkuaGVhZCxhLnNlbC5wcmltYXJ5KCkuaGVhZCk8MD8tMToxKTtNYShhLE9hKGEsYixkLCEwKSksYyYmYy5zY3JvbGw9PT0hMXx8IWEuY218fGlkKGEuY20pfWZ1bmN0aW9uIE1hKGEsYil7Yi5lcXVhbHMoYS5zZWwpfHwoYS5zZWw9YixhLmNtJiYoYS5jbS5jdXJPcC51cGRhdGVJbnB1dD1hLmNtLmN1ck9wLnNlbGVjdGlvbkNoYW5nZWQ9ITAsRmYoYS5jbSkpLENmKGEsImN1cnNvckFjdGl2aXR5IixhKSl9ZnVuY3Rpb24gTmEoYSl7TWEoYSxPYShhLGEuc2VsLG51bGwsITEpLEtmKX1mdW5jdGlvbiBPYShhLGIsYyxkKXtmb3IodmFyIGUsZj0wO2Y8Yi5yYW5nZXMubGVuZ3RoO2YrKyl7dmFyIGc9Yi5yYW5nZXNbZl0saD1QYShhLGcuYW5jaG9yLGMsZCksaT1QYShhLGcuaGVhZCxjLGQpOyhlfHxoIT1nLmFuY2hvcnx8aSE9Zy5oZWFkKSYmKGV8fChlPWIucmFuZ2VzLnNsaWNlKDAsZikpLGVbZl09bmV3IHZhKGgsaSkpfXJldHVybiBlP3dhKGUsYi5wcmltSW5kZXgpOmJ9ZnVuY3Rpb24gUGEoYSxiLGMsZCl7dmFyIGU9ITEsZj1iLGc9Y3x8MTthLmNhbnRFZGl0PSExO2E6Zm9yKDs7KXt2YXIgaD1XZShhLGYubGluZSk7aWYoaC5tYXJrZWRTcGFucylmb3IodmFyIGk9MDtpPGgubWFya2VkU3BhbnMubGVuZ3RoOysraSl7dmFyIGo9aC5tYXJrZWRTcGFuc1tpXSxrPWoubWFya2VyO2lmKChudWxsPT1qLmZyb218fChrLmluY2x1c2l2ZUxlZnQ/ai5mcm9tPD1mLmNoOmouZnJvbTxmLmNoKSkmJihudWxsPT1qLnRvfHwoay5pbmNsdXNpdmVSaWdodD9qLnRvPj1mLmNoOmoudG8+Zi5jaCkpKXtpZihkJiYoQWYoaywiYmVmb3JlQ3Vyc29yRW50ZXIiKSxrLmV4cGxpY2l0bHlDbGVhcmVkKSl7aWYoaC5tYXJrZWRTcGFucyl7LS1pO2NvbnRpbnVlfWJyZWFrfWlmKCFrLmF0b21pYyljb250aW51ZTt2YXIgbD1rLmZpbmQoMD5nPy0xOjEpO2lmKDA9PXFhKGwsZikmJihsLmNoKz1nLGwuY2g8MD9sPWwubGluZT5hLmZpcnN0P3phKGEscGEobC5saW5lLTEpKTpudWxsOmwuY2g+aC50ZXh0Lmxlbmd0aCYmKGw9bC5saW5lPGEuZmlyc3QrYS5zaXplLTE/cGEobC5saW5lKzEsMCk6bnVsbCksIWwpKXtpZihlKXJldHVybiBkPyhhLmNhbnRFZGl0PSEwLHBhKGEuZmlyc3QsMCkpOlBhKGEsYixjLCEwKTtlPSEwLGw9YixnPS1nfWY9bDtjb250aW51ZSBhfX1yZXR1cm4gZn19ZnVuY3Rpb24gUWEoYSl7Zm9yKHZhciBiPWEuZGlzcGxheSxjPWEuZG9jLGQ9e30sZT1kLmN1cnNvcnM9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGY9ZC5zZWxlY3Rpb249ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGc9MDtnPGMuc2VsLnJhbmdlcy5sZW5ndGg7ZysrKXt2YXIgaD1jLnNlbC5yYW5nZXNbZ10saT1oLmVtcHR5KCk7KGl8fGEub3B0aW9ucy5zaG93Q3Vyc29yV2hlblNlbGVjdGluZykmJlRhKGEsaCxlKSxpfHxVYShhLGgsZil9aWYoYS5vcHRpb25zLm1vdmVJbnB1dFdpdGhDdXJzb3Ipe3ZhciBqPXdiKGEsYy5zZWwucHJpbWFyeSgpLmhlYWQsImRpdiIpLGs9Yi53cmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGw9Yi5saW5lRGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2QudGVUb3A9TWF0aC5tYXgoMCxNYXRoLm1pbihiLndyYXBwZXIuY2xpZW50SGVpZ2h0LTEwLGoudG9wK2wudG9wLWsudG9wKSksZC50ZUxlZnQ9TWF0aC5tYXgoMCxNYXRoLm1pbihiLndyYXBwZXIuY2xpZW50V2lkdGgtMTAsai5sZWZ0K2wubGVmdC1rLmxlZnQpKX1yZXR1cm4gZH1mdW5jdGlvbiBSYShhLGIpe2dnKGEuZGlzcGxheS5jdXJzb3JEaXYsYi5jdXJzb3JzKSxnZyhhLmRpc3BsYXkuc2VsZWN0aW9uRGl2LGIuc2VsZWN0aW9uKSxudWxsIT1iLnRlVG9wJiYoYS5kaXNwbGF5LmlucHV0RGl2LnN0eWxlLnRvcD1iLnRlVG9wKyJweCIsYS5kaXNwbGF5LmlucHV0RGl2LnN0eWxlLmxlZnQ9Yi50ZUxlZnQrInB4Iil9ZnVuY3Rpb24gU2EoYSl7UmEoYSxRYShhKSl9ZnVuY3Rpb24gVGEoYSxiLGMpe3ZhciBkPXdiKGEsYi5oZWFkLCJkaXYiLG51bGwsbnVsbCwhYS5vcHRpb25zLnNpbmdsZUN1cnNvckhlaWdodFBlckxpbmUpLGU9Yy5hcHBlbmRDaGlsZChkZygiZGl2IiwiXHhhMCIsIkNvZGVNaXJyb3ItY3Vyc29yIikpO2lmKGUuc3R5bGUubGVmdD1kLmxlZnQrInB4IixlLnN0eWxlLnRvcD1kLnRvcCsicHgiLGUuc3R5bGUuaGVpZ2h0PU1hdGgubWF4KDAsZC5ib3R0b20tZC50b3ApKmEub3B0aW9ucy5jdXJzb3JIZWlnaHQrInB4IixkLm90aGVyKXt2YXIgZj1jLmFwcGVuZENoaWxkKGRnKCJkaXYiLCJceGEwIiwiQ29kZU1pcnJvci1jdXJzb3IgQ29kZU1pcnJvci1zZWNvbmRhcnljdXJzb3IiKSk7Zi5zdHlsZS5kaXNwbGF5PSIiLGYuc3R5bGUubGVmdD1kLm90aGVyLmxlZnQrInB4IixmLnN0eWxlLnRvcD1kLm90aGVyLnRvcCsicHgiLGYuc3R5bGUuaGVpZ2h0PS44NSooZC5vdGhlci5ib3R0b20tZC5vdGhlci50b3ApKyJweCJ9fWZ1bmN0aW9uIFVhKGEsYixjKXtmdW5jdGlvbiBqKGEsYixjLGQpezA+YiYmKGI9MCksYj1NYXRoLnJvdW5kKGIpLGQ9TWF0aC5yb3VuZChkKSxmLmFwcGVuZENoaWxkKGRnKCJkaXYiLG51bGwsIkNvZGVNaXJyb3Itc2VsZWN0ZWQiLCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6ICIrYSsicHg7IHRvcDogIitiKyJweDsgd2lkdGg6ICIrKG51bGw9PWM/aS1hOmMpKyJweDsgaGVpZ2h0OiAiKyhkLWIpKyJweCIpKX1mdW5jdGlvbiBrKGIsYyxkKXtmdW5jdGlvbiBtKGMsZCl7cmV0dXJuIHZiKGEscGEoYixjKSwiZGl2IixmLGQpfXZhciBrLGwsZj1XZShlLGIpLGc9Zi50ZXh0Lmxlbmd0aDtyZXR1cm4gQ2coYmYoZiksY3x8MCxudWxsPT1kP2c6ZCxmdW5jdGlvbihhLGIsZSl7dmFyIG4sbyxwLGY9bShhLCJsZWZ0Iik7aWYoYT09YiluPWYsbz1wPWYubGVmdDtlbHNle2lmKG49bShiLTEsInJpZ2h0IiksInJ0bCI9PWUpe3ZhciBxPWY7Zj1uLG49cX1vPWYubGVmdCxwPW4ucmlnaHR9bnVsbD09YyYmMD09YSYmKG89aCksbi50b3AtZi50b3A+MyYmKGoobyxmLnRvcCxudWxsLGYuYm90dG9tKSxvPWgsZi5ib3R0b208bi50b3AmJmoobyxmLmJvdHRvbSxudWxsLG4udG9wKSksbnVsbD09ZCYmYj09ZyYmKHA9aSksKCFrfHxmLnRvcDxrLnRvcHx8Zi50b3A9PWsudG9wJiZmLmxlZnQ8ay5sZWZ0KSYmKGs9ZiksKCFsfHxuLmJvdHRvbT5sLmJvdHRvbXx8bi5ib3R0b209PWwuYm90dG9tJiZuLnJpZ2h0PmwucmlnaHQpJiYobD1uKSxoKzE+byYmKG89aCksaihvLG4udG9wLHAtbyxuLmJvdHRvbSl9KSx7c3RhcnQ6ayxlbmQ6bH19dmFyIGQ9YS5kaXNwbGF5LGU9YS5kb2MsZj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksZz1hYihhLmRpc3BsYXkpLGg9Zy5sZWZ0LGk9TWF0aC5tYXgoZC5zaXplcldpZHRoLGNiKGEpLWQuc2l6ZXIub2Zmc2V0TGVmdCktZy5yaWdodCxsPWIuZnJvbSgpLG09Yi50bygpO2lmKGwubGluZT09bS5saW5lKWsobC5saW5lLGwuY2gsbS5jaCk7ZWxzZXt2YXIgbj1XZShlLGwubGluZSksbz1XZShlLG0ubGluZSkscD1oZShuKT09aGUobykscT1rKGwubGluZSxsLmNoLHA/bi50ZXh0Lmxlbmd0aCsxOm51bGwpLmVuZCxyPWsobS5saW5lLHA/MDpudWxsLG0uY2gpLnN0YXJ0O3AmJihxLnRvcDxyLnRvcC0yPyhqKHEucmlnaHQscS50b3AsbnVsbCxxLmJvdHRvbSksaihoLHIudG9wLHIubGVmdCxyLmJvdHRvbSkpOmoocS5yaWdodCxxLnRvcCxyLmxlZnQtcS5yaWdodCxxLmJvdHRvbSkpLHEuYm90dG9tPHIudG9wJiZqKGgscS5ib3R0b20sbnVsbCxyLnRvcCl9Yy5hcHBlbmRDaGlsZChmKX1mdW5jdGlvbiBWYShhKXtpZihhLnN0YXRlLmZvY3VzZWQpe3ZhciBiPWEuZGlzcGxheTtjbGVhckludGVydmFsKGIuYmxpbmtlcik7dmFyIGM9ITA7Yi5jdXJzb3JEaXYuc3R5bGUudmlzaWJpbGl0eT0iIixhLm9wdGlvbnMuY3Vyc29yQmxpbmtSYXRlPjA/Yi5ibGlua2VyPXNldEludGVydmFsKGZ1bmN0aW9uKCl7Yi5jdXJzb3JEaXYuc3R5bGUudmlzaWJpbGl0eT0oYz0hYyk/IiI6ImhpZGRlbiJ9LGEub3B0aW9ucy5jdXJzb3JCbGlua1JhdGUpOmEub3B0aW9ucy5jdXJzb3JCbGlua1JhdGU8MCYmKGIuY3Vyc29yRGl2LnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiIpfX1mdW5jdGlvbiBXYShhLGIpe2EuZG9jLm1vZGUuc3RhcnRTdGF0ZSYmYS5kb2MuZnJvbnRpZXI8YS5kaXNwbGF5LnZpZXdUbyYmYS5zdGF0ZS5oaWdobGlnaHQuc2V0KGIsWWYoWGEsYSkpfWZ1bmN0aW9uIFhhKGEpe3ZhciBiPWEuZG9jO2lmKGIuZnJvbnRpZXI8Yi5maXJzdCYmKGIuZnJvbnRpZXI9Yi5maXJzdCksIShiLmZyb250aWVyPj1hLmRpc3BsYXkudmlld1RvKSl7dmFyIGM9K25ldyBEYXRlK2Eub3B0aW9ucy53b3JrVGltZSxkPXlkKGIubW9kZSxaYShhLGIuZnJvbnRpZXIpKSxlPVtdO2IuaXRlcihiLmZyb250aWVyLE1hdGgubWluKGIuZmlyc3QrYi5zaXplLGEuZGlzcGxheS52aWV3VG8rNTAwKSxmdW5jdGlvbihmKXtpZihiLmZyb250aWVyPj1hLmRpc3BsYXkudmlld0Zyb20pe3ZhciBnPWYuc3R5bGVzLGg9emUoYSxmLGQsITApO2Yuc3R5bGVzPWguc3R5bGVzO3ZhciBpPWYuc3R5bGVDbGFzc2VzLGo9aC5jbGFzc2VzO2o/Zi5zdHlsZUNsYXNzZXM9ajppJiYoZi5zdHlsZUNsYXNzZXM9bnVsbCk7Zm9yKHZhciBrPSFnfHxnLmxlbmd0aCE9Zi5zdHlsZXMubGVuZ3RofHxpIT1qJiYoIWl8fCFqfHxpLmJnQ2xhc3MhPWouYmdDbGFzc3x8aS50ZXh0Q2xhc3MhPWoudGV4dENsYXNzKSxsPTA7IWsmJmw8Zy5sZW5ndGg7KytsKWs9Z1tsXSE9Zi5zdHlsZXNbbF07ayYmZS5wdXNoKGIuZnJvbnRpZXIpLGYuc3RhdGVBZnRlcj15ZChiLm1vZGUsZCl9ZWxzZSBCZShhLGYudGV4dCxkKSxmLnN0YXRlQWZ0ZXI9Yi5mcm9udGllciU1PT0wP3lkKGIubW9kZSxkKTpudWxsO3JldHVybisrYi5mcm9udGllciwrbmV3IERhdGU+Yz8oV2EoYSxhLm9wdGlvbnMud29ya0RlbGF5KSwhMCk6dm9pZCAwfSksZS5sZW5ndGgmJlBiKGEsZnVuY3Rpb24oKXtmb3IodmFyIGI9MDtiPGUubGVuZ3RoO2IrKylXYihhLGVbYl0sInRleHQiKX0pfX1mdW5jdGlvbiBZYShhLGIsYyl7Zm9yKHZhciBkLGUsZj1hLmRvYyxnPWM/LTE6Yi0oYS5kb2MubW9kZS5pbm5lck1vZGU/MWUzOjEwMCksaD1iO2g+ZzstLWgpe2lmKGg8PWYuZmlyc3QpcmV0dXJuIGYuZmlyc3Q7dmFyIGk9V2UoZixoLTEpO2lmKGkuc3RhdGVBZnRlciYmKCFjfHxoPD1mLmZyb250aWVyKSlyZXR1cm4gaDt2YXIgaj1PZihpLnRleHQsbnVsbCxhLm9wdGlvbnMudGFiU2l6ZSk7KG51bGw9PWV8fGQ+aikmJihlPWgtMSxkPWopfXJldHVybiBlfWZ1bmN0aW9uIFphKGEsYixjKXt2YXIgZD1hLmRvYyxlPWEuZGlzcGxheTtpZighZC5tb2RlLnN0YXJ0U3RhdGUpcmV0dXJuITA7dmFyIGY9WWEoYSxiLGMpLGc9Zj5kLmZpcnN0JiZXZShkLGYtMSkuc3RhdGVBZnRlcjtyZXR1cm4gZz1nP3lkKGQubW9kZSxnKTp6ZChkLm1vZGUpLGQuaXRlcihmLGIsZnVuY3Rpb24oYyl7QmUoYSxjLnRleHQsZyk7dmFyIGg9Zj09Yi0xfHxmJTU9PTB8fGY+PWUudmlld0Zyb20mJmY8ZS52aWV3VG87Yy5zdGF0ZUFmdGVyPWg/eWQoZC5tb2RlLGcpOm51bGwsKytmfSksYyYmKGQuZnJvbnRpZXI9ZiksZ31mdW5jdGlvbiAkYShhKXtyZXR1cm4gYS5saW5lU3BhY2Uub2Zmc2V0VG9wfWZ1bmN0aW9uIF9hKGEpe3JldHVybiBhLm1vdmVyLm9mZnNldEhlaWdodC1hLmxpbmVTcGFjZS5vZmZzZXRIZWlnaHR9ZnVuY3Rpb24gYWIoYSl7aWYoYS5jYWNoZWRQYWRkaW5nSClyZXR1cm4gYS5jYWNoZWRQYWRkaW5nSDt2YXIgYj1nZyhhLm1lYXN1cmUsZGcoInByZSIsIngiKSksYz13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZT93aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShiKTpiLmN1cnJlbnRTdHlsZSxkPXtsZWZ0OnBhcnNlSW50KGMucGFkZGluZ0xlZnQpLHJpZ2h0OnBhcnNlSW50KGMucGFkZGluZ1JpZ2h0KX07cmV0dXJuIGlzTmFOKGQubGVmdCl8fGlzTmFOKGQucmlnaHQpfHwoYS5jYWNoZWRQYWRkaW5nSD1kKSxkfWZ1bmN0aW9uIGJiKGEpe3JldHVybiBJZi1hLmRpc3BsYXkubmF0aXZlQmFyV2lkdGh9ZnVuY3Rpb24gY2IoYSl7cmV0dXJuIGEuZGlzcGxheS5zY3JvbGxlci5jbGllbnRXaWR0aC1iYihhKS1hLmRpc3BsYXkuYmFyV2lkdGh9ZnVuY3Rpb24gZGIoYSl7cmV0dXJuIGEuZGlzcGxheS5zY3JvbGxlci5jbGllbnRIZWlnaHQtYmIoYSktYS5kaXNwbGF5LmJhckhlaWdodH1mdW5jdGlvbiBlYihhLGIsYyl7dmFyIGQ9YS5vcHRpb25zLmxpbmVXcmFwcGluZyxlPWQmJmNiKGEpO2lmKCFiLm1lYXN1cmUuaGVpZ2h0c3x8ZCYmYi5tZWFzdXJlLndpZHRoIT1lKXt2YXIgZj1iLm1lYXN1cmUuaGVpZ2h0cz1bXTtpZihkKXtiLm1lYXN1cmUud2lkdGg9ZTtmb3IodmFyIGc9Yi50ZXh0LmZpcnN0Q2hpbGQuZ2V0Q2xpZW50UmVjdHMoKSxoPTA7aDxnLmxlbmd0aC0xO2grKyl7dmFyIGk9Z1toXSxqPWdbaCsxXTtNYXRoLmFicyhpLmJvdHRvbS1qLmJvdHRvbSk+MiYmZi5wdXNoKChpLmJvdHRvbStqLnRvcCkvMi1jLnRvcCl9fWYucHVzaChjLmJvdHRvbS1jLnRvcCl9fWZ1bmN0aW9uIGZiKGEsYixjKXtpZihhLmxpbmU9PWIpcmV0dXJue21hcDphLm1lYXN1cmUubWFwLGNhY2hlOmEubWVhc3VyZS5jYWNoZX07Zm9yKHZhciBkPTA7ZDxhLnJlc3QubGVuZ3RoO2QrKylpZihhLnJlc3RbZF09PWIpcmV0dXJue21hcDphLm1lYXN1cmUubWFwc1tkXSxjYWNoZTphLm1lYXN1cmUuY2FjaGVzW2RdfTtmb3IodmFyIGQ9MDtkPGEucmVzdC5sZW5ndGg7ZCsrKWlmKCRlKGEucmVzdFtkXSk+YylyZXR1cm57bWFwOmEubWVhc3VyZS5tYXBzW2RdLGNhY2hlOmEubWVhc3VyZS5jYWNoZXNbZF0sYmVmb3JlOiEwfX1mdW5jdGlvbiBnYihhLGIpe2I9aGUoYik7dmFyIGM9JGUoYiksZD1hLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZD1uZXcgVGIoYS5kb2MsYixjKTtkLmxpbmVOPWM7dmFyIGU9ZC5idWlsdD1GZShhLGQpO3JldHVybiBkLnRleHQ9ZS5wcmUsZ2coYS5kaXNwbGF5LmxpbmVNZWFzdXJlLGUucHJlKSxkfWZ1bmN0aW9uIGhiKGEsYixjLGQpe3JldHVybiBrYihhLGpiKGEsYiksYyxkKX1mdW5jdGlvbiBpYihhLGIpe2lmKGI+PWEuZGlzcGxheS52aWV3RnJvbSYmYjxhLmRpc3BsYXkudmlld1RvKXJldHVybiBhLmRpc3BsYXkudmlld1tZYihhLGIpXTt2YXIgYz1hLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZDtyZXR1cm4gYyYmYj49Yy5saW5lTiYmYjxjLmxpbmVOK2Muc2l6ZT9jOnZvaWQgMH1mdW5jdGlvbiBqYihhLGIpe3ZhciBjPSRlKGIpLGQ9aWIoYSxjKTtkJiYhZC50ZXh0P2Q9bnVsbDpkJiZkLmNoYW5nZXMmJmRhKGEsZCxjLGJhKGEpKSxkfHwoZD1nYihhLGIpKTt2YXIgZT1mYihkLGIsYyk7cmV0dXJue2xpbmU6Yix2aWV3OmQscmVjdDpudWxsLG1hcDplLm1hcCxjYWNoZTplLmNhY2hlLGJlZm9yZTplLmJlZm9yZSxoYXNIZWlnaHRzOiExfX1mdW5jdGlvbiBrYihhLGIsYyxkLGUpe2IuYmVmb3JlJiYoYz0tMSk7dmFyIGcsZj1jKyhkfHwiIik7cmV0dXJuIGIuY2FjaGUuaGFzT3duUHJvcGVydHkoZik/Zz1iLmNhY2hlW2ZdOihiLnJlY3R8fChiLnJlY3Q9Yi52aWV3LnRleHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLGIuaGFzSGVpZ2h0c3x8KGViKGEsYi52aWV3LGIucmVjdCksYi5oYXNIZWlnaHRzPSEwKSxnPW1iKGEsYixjLGQpLGcuYm9ndXN8fChiLmNhY2hlW2ZdPWcpKSx7bGVmdDpnLmxlZnQscmlnaHQ6Zy5yaWdodCx0b3A6ZT9nLnJ0b3A6Zy50b3AsYm90dG9tOmU/Zy5yYm90dG9tOmcuYm90dG9tfX1mdW5jdGlvbiBtYihhLGIsYyxmKXtmb3IodmFyIGgsaSxqLGssZz1iLm1hcCxsPTA7bDxnLmxlbmd0aDtsKz0zKXt2YXIgbT1nW2xdLG49Z1tsKzFdO2lmKG0+Yz8oaT0wLGo9MSxrPSJsZWZ0Iik6bj5jPyhpPWMtbSxqPWkrMSk6KGw9PWcubGVuZ3RoLTN8fGM9PW4mJmdbbCszXT5jKSYmKGo9bi1tLGk9ai0xLGM+PW4mJihrPSJyaWdodCIpKSxudWxsIT1pKXtpZihoPWdbbCsyXSxtPT1uJiZmPT0oaC5pbnNlcnRMZWZ0PyJsZWZ0IjoicmlnaHQiKSYmKGs9ZiksImxlZnQiPT1mJiYwPT1pKWZvcig7bCYmZ1tsLTJdPT1nW2wtM10mJmdbbC0xXS5pbnNlcnRMZWZ0OyloPWdbKGwtPTMpKzJdLGs9ImxlZnQiO2lmKCJyaWdodCI9PWYmJmk9PW4tbSlmb3IoO2w8Zy5sZW5ndGgtMyYmZ1tsKzNdPT1nW2wrNF0mJiFnW2wrNV0uaW5zZXJ0TGVmdDspaD1nWyhsKz0zKSsyXSxrPSJyaWdodCI7YnJlYWt9fXZhciBvO2lmKDM9PWgubm9kZVR5cGUpe2Zvcih2YXIgbD0wOzQ+bDtsKyspe2Zvcig7aSYmY2coYi5saW5lLnRleHQuY2hhckF0KG0raSkpOyktLWk7Zm9yKDtuPm0raiYmY2coYi5saW5lLnRleHQuY2hhckF0KG0raikpOykrK2o7aWYoZCYmOT5lJiYwPT1pJiZqPT1uLW0pbz1oLnBhcmVudE5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7ZWxzZSBpZihkJiZhLm9wdGlvbnMubGluZVdyYXBwaW5nKXt2YXIgcD1lZyhoLGksaikuZ2V0Q2xpZW50UmVjdHMoKTtvPXAubGVuZ3RoP3BbInJpZ2h0Ij09Zj9wLmxlbmd0aC0xOjBdOmxifWVsc2Ugbz1lZyhoLGksaikuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCl8fGxiO2lmKG8ubGVmdHx8by5yaWdodHx8MD09aSlicmVhaztqPWksaS09MSxrPSJyaWdodCJ9ZCYmMTE+ZSYmKG89bmIoYS5kaXNwbGF5Lm1lYXN1cmUsbykpfWVsc2V7aT4wJiYoaz1mPSJyaWdodCIpO3ZhciBwO289YS5vcHRpb25zLmxpbmVXcmFwcGluZyYmKHA9aC5nZXRDbGllbnRSZWN0cygpKS5sZW5ndGg+MT9wWyJyaWdodCI9PWY/cC5sZW5ndGgtMTowXTpoLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfWlmKGQmJjk+ZSYmIWkmJighb3x8IW8ubGVmdCYmIW8ucmlnaHQpKXt2YXIgcT1oLnBhcmVudE5vZGUuZ2V0Q2xpZW50UmVjdHMoKVswXTtvPXE/e2xlZnQ6cS5sZWZ0LHJpZ2h0OnEubGVmdCtEYihhLmRpc3BsYXkpLHRvcDpxLnRvcCxib3R0b206cS5ib3R0b219OmxifWZvcih2YXIgcj1vLnRvcC1iLnJlY3QudG9wLHM9by5ib3R0b20tYi5yZWN0LnRvcCx0PShyK3MpLzIsdT1iLnZpZXcubWVhc3VyZS5oZWlnaHRzLGw9MDtsPHUubGVuZ3RoLTEmJiEodDx1W2xdKTtsKyspO3ZhciB2PWw/dVtsLTFdOjAsdz11W2xdLHg9e2xlZnQ6KCJyaWdodCI9PWs/by5yaWdodDpvLmxlZnQpLWIucmVjdC5sZWZ0LHJpZ2h0OigibGVmdCI9PWs/by5sZWZ0Om8ucmlnaHQpLWIucmVjdC5sZWZ0LHRvcDp2LGJvdHRvbTp3fTtyZXR1cm4gby5sZWZ0fHxvLnJpZ2h0fHwoeC5ib2d1cz0hMCksYS5vcHRpb25zLnNpbmdsZUN1cnNvckhlaWdodFBlckxpbmV8fCh4LnJ0b3A9cix4LnJib3R0b209cykseH1mdW5jdGlvbiBuYihhLGIpe2lmKCF3aW5kb3cuc2NyZWVufHxudWxsPT1zY3JlZW4ubG9naWNhbFhEUEl8fHNjcmVlbi5sb2dpY2FsWERQST09c2NyZWVuLmRldmljZVhEUEl8fCFBZyhhKSlyZXR1cm4gYjt2YXIgYz1zY3JlZW4ubG9naWNhbFhEUEkvc2NyZWVuLmRldmljZVhEUEksZD1zY3JlZW4ubG9naWNhbFlEUEkvc2NyZWVuLmRldmljZVlEUEk7cmV0dXJue2xlZnQ6Yi5sZWZ0KmMscmlnaHQ6Yi5yaWdodCpjLHRvcDpiLnRvcCpkLGJvdHRvbTpiLmJvdHRvbSpkfX1mdW5jdGlvbiBvYihhKXtpZihhLm1lYXN1cmUmJihhLm1lYXN1cmUuY2FjaGU9e30sYS5tZWFzdXJlLmhlaWdodHM9bnVsbCxhLnJlc3QpKWZvcih2YXIgYj0wO2I8YS5yZXN0Lmxlbmd0aDtiKyspYS5tZWFzdXJlLmNhY2hlc1tiXT17fX1mdW5jdGlvbiBwYihhKXthLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlPW51bGwsZmcoYS5kaXNwbGF5LmxpbmVNZWFzdXJlKTtmb3IodmFyIGI9MDtiPGEuZGlzcGxheS52aWV3Lmxlbmd0aDtiKyspb2IoYS5kaXNwbGF5LnZpZXdbYl0pfWZ1bmN0aW9uIHFiKGEpe3BiKGEpLGEuZGlzcGxheS5jYWNoZWRDaGFyV2lkdGg9YS5kaXNwbGF5LmNhY2hlZFRleHRIZWlnaHQ9YS5kaXNwbGF5LmNhY2hlZFBhZGRpbmdIPW51bGwsYS5vcHRpb25zLmxpbmVXcmFwcGluZ3x8KGEuZGlzcGxheS5tYXhMaW5lQ2hhbmdlZD0hMCksYS5kaXNwbGF5LmxpbmVOdW1DaGFycz1udWxsfWZ1bmN0aW9uIHJiKCl7cmV0dXJuIHdpbmRvdy5wYWdlWE9mZnNldHx8KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudHx8ZG9jdW1lbnQuYm9keSkuc2Nyb2xsTGVmdH1mdW5jdGlvbiBzYigpe3JldHVybiB3aW5kb3cucGFnZVlPZmZzZXR8fChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR8fGRvY3VtZW50LmJvZHkpLnNjcm9sbFRvcH1mdW5jdGlvbiB0YihhLGIsYyxkKXtpZihiLndpZGdldHMpZm9yKHZhciBlPTA7ZTxiLndpZGdldHMubGVuZ3RoOysrZSlpZihiLndpZGdldHNbZV0uYWJvdmUpe3ZhciBmPXBlKGIud2lkZ2V0c1tlXSk7Yy50b3ArPWYsYy5ib3R0b20rPWZ9aWYoImxpbmUiPT1kKXJldHVybiBjO2R8fChkPSJsb2NhbCIpO3ZhciBnPWFmKGIpO2lmKCJsb2NhbCI9PWQ/Zys9JGEoYS5kaXNwbGF5KTpnLT1hLmRpc3BsYXkudmlld09mZnNldCwicGFnZSI9PWR8fCJ3aW5kb3ciPT1kKXt2YXIgaD1hLmRpc3BsYXkubGluZVNwYWNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2crPWgudG9wKygid2luZG93Ij09ZD8wOnNiKCkpO3ZhciBpPWgubGVmdCsoIndpbmRvdyI9PWQ/MDpyYigpKTtjLmxlZnQrPWksYy5yaWdodCs9aX1yZXR1cm4gYy50b3ArPWcsYy5ib3R0b20rPWcsY31mdW5jdGlvbiB1YihhLGIsYyl7aWYoImRpdiI9PWMpcmV0dXJuIGI7dmFyIGQ9Yi5sZWZ0LGU9Yi50b3A7aWYoInBhZ2UiPT1jKWQtPXJiKCksZS09c2IoKTtlbHNlIGlmKCJsb2NhbCI9PWN8fCFjKXt2YXIgZj1hLmRpc3BsYXkuc2l6ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7ZCs9Zi5sZWZ0LGUrPWYudG9wfXZhciBnPWEuZGlzcGxheS5saW5lU3BhY2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJue2xlZnQ6ZC1nLmxlZnQsdG9wOmUtZy50b3B9fWZ1bmN0aW9uIHZiKGEsYixjLGQsZSl7cmV0dXJuIGR8fChkPVdlKGEuZG9jLGIubGluZSkpLHRiKGEsZCxoYihhLGQsYi5jaCxlKSxjKX1mdW5jdGlvbiB3YihhLGIsYyxkLGUsZil7ZnVuY3Rpb24gZyhiLGcpe3ZhciBoPWtiKGEsZSxiLGc/InJpZ2h0IjoibGVmdCIsZik7cmV0dXJuIGc/aC5sZWZ0PWgucmlnaHQ6aC5yaWdodD1oLmxlZnQsdGIoYSxkLGgsYyl9ZnVuY3Rpb24gaChhLGIpe3ZhciBjPWlbYl0sZD1jLmxldmVsJTI7cmV0dXJuIGE9PURnKGMpJiZiJiZjLmxldmVsPGlbYi0xXS5sZXZlbD8oYz1pWy0tYl0sYT1FZyhjKS0oYy5sZXZlbCUyPzA6MSksZD0hMCk6YT09RWcoYykmJmI8aS5sZW5ndGgtMSYmYy5sZXZlbDxpW2IrMV0ubGV2ZWwmJihjPWlbKytiXSxhPURnKGMpLWMubGV2ZWwlMixkPSExKSxkJiZhPT1jLnRvJiZhPmMuZnJvbT9nKGEtMSk6ZyhhLGQpfWQ9ZHx8V2UoYS5kb2MsYi5saW5lKSxlfHwoZT1qYihhLGQpKTt2YXIgaT1iZihkKSxqPWIuY2g7aWYoIWkpcmV0dXJuIGcoaik7dmFyIGs9TWcoaSxqKSxsPWgoaixrKTtyZXR1cm4gbnVsbCE9TGcmJihsLm90aGVyPWgoaixMZykpLGx9ZnVuY3Rpb24geGIoYSxiKXt2YXIgYz0wLGI9emEoYS5kb2MsYik7YS5vcHRpb25zLmxpbmVXcmFwcGluZ3x8KGM9RGIoYS5kaXNwbGF5KSpiLmNoKTt2YXIgZD1XZShhLmRvYyxiLmxpbmUpLGU9YWYoZCkrJGEoYS5kaXNwbGF5KTtyZXR1cm57bGVmdDpjLHJpZ2h0OmMsdG9wOmUsYm90dG9tOmUrZC5oZWlnaHR9fWZ1bmN0aW9uIHliKGEsYixjLGQpe3ZhciBlPXBhKGEsYik7cmV0dXJuIGUueFJlbD1kLGMmJihlLm91dHNpZGU9ITApLGV9ZnVuY3Rpb24gemIoYSxiLGMpe3ZhciBkPWEuZG9jO2lmKGMrPWEuZGlzcGxheS52aWV3T2Zmc2V0LDA+YylyZXR1cm4geWIoZC5maXJzdCwwLCEwLC0xKTt2YXIgZT1fZShkLGMpLGY9ZC5maXJzdCtkLnNpemUtMTtpZihlPmYpcmV0dXJuIHliKGQuZmlyc3QrZC5zaXplLTEsV2UoZCxmKS50ZXh0Lmxlbmd0aCwhMCwxKTswPmImJihiPTApO2Zvcih2YXIgZz1XZShkLGUpOzspe3ZhciBoPUFiKGEsZyxlLGIsYyksaT1mZShnKSxqPWkmJmkuZmluZCgwLCEwKTtpZighaXx8IShoLmNoPmouZnJvbS5jaHx8aC5jaD09ai5mcm9tLmNoJiZoLnhSZWw+MCkpcmV0dXJuIGg7ZT0kZShnPWoudG8ubGluZSl9fWZ1bmN0aW9uIEFiKGEsYixjLGQsZSl7ZnVuY3Rpb24gaihkKXt2YXIgZT13YihhLHBhKGMsZCksImxpbmUiLGIsaSk7cmV0dXJuIGc9ITAsZj5lLmJvdHRvbT9lLmxlZnQtaDpmPGUudG9wP2UubGVmdCtoOihnPSExLGUubGVmdCl9dmFyIGY9ZS1hZihiKSxnPSExLGg9MiphLmRpc3BsYXkud3JhcHBlci5jbGllbnRXaWR0aCxpPWpiKGEsYiksaz1iZihiKSxsPWIudGV4dC5sZW5ndGgsbT1GZyhiKSxuPUdnKGIpLG89aihtKSxwPWcscT1qKG4pLHI9ZztpZihkPnEpcmV0dXJuIHliKGMsbixyLDEpO2Zvcig7Oyl7aWYoaz9uPT1tfHxuPT1PZyhiLG0sMSk6MT49bi1tKXtmb3IodmFyIHM9bz5kfHxxLWQ+PWQtbz9tOm4sdD1kLShzPT1tP286cSk7Y2coYi50ZXh0LmNoYXJBdChzKSk7KSsrczt2YXIgdT15YihjLHMscz09bT9wOnIsLTE+dD8tMTp0PjE/MTowKTtyZXR1cm4gdX12YXIgdj1NYXRoLmNlaWwobC8yKSx3PW0rdjtpZihrKXt3PW07Zm9yKHZhciB4PTA7dj54OysreCl3PU9nKGIsdywxKX12YXIgeT1qKHcpO3k+ZD8obj13LHE9eSwocj1nKSYmKHErPTFlMyksbD12KToobT13LG89eSxwPWcsbC09dil9fWZ1bmN0aW9uIENiKGEpe2lmKG51bGwhPWEuY2FjaGVkVGV4dEhlaWdodClyZXR1cm4gYS5jYWNoZWRUZXh0SGVpZ2h0O2lmKG51bGw9PUJiKXtCYj1kZygicHJlIik7Zm9yKHZhciBiPTA7NDk+YjsrK2IpQmIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIngiKSksQmIuYXBwZW5kQ2hpbGQoZGcoImJyIikpO0JiLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCJ4IikpfWdnKGEubWVhc3VyZSxCYik7dmFyIGM9QmIub2Zmc2V0SGVpZ2h0LzUwO3JldHVybiBjPjMmJihhLmNhY2hlZFRleHRIZWlnaHQ9YyksZmcoYS5tZWFzdXJlKSxjfHwxfWZ1bmN0aW9uIERiKGEpe2lmKG51bGwhPWEuY2FjaGVkQ2hhcldpZHRoKXJldHVybiBhLmNhY2hlZENoYXJXaWR0aDt2YXIgYj1kZygic3BhbiIsInh4eHh4eHh4eHgiKSxjPWRnKCJwcmUiLFtiXSk7Z2coYS5tZWFzdXJlLGMpOwp2YXIgZD1iLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGU9KGQucmlnaHQtZC5sZWZ0KS8xMDtyZXR1cm4gZT4yJiYoYS5jYWNoZWRDaGFyV2lkdGg9ZSksZXx8MTB9ZnVuY3Rpb24gR2IoYSl7YS5jdXJPcD17Y206YSx2aWV3Q2hhbmdlZDohMSxzdGFydEhlaWdodDphLmRvYy5oZWlnaHQsZm9yY2VVcGRhdGU6ITEsdXBkYXRlSW5wdXQ6bnVsbCx0eXBpbmc6ITEsY2hhbmdlT2JqczpudWxsLGN1cnNvckFjdGl2aXR5SGFuZGxlcnM6bnVsbCxjdXJzb3JBY3Rpdml0eUNhbGxlZDowLHNlbGVjdGlvbkNoYW5nZWQ6ITEsdXBkYXRlTWF4TGluZTohMSxzY3JvbGxMZWZ0Om51bGwsc2Nyb2xsVG9wOm51bGwsc2Nyb2xsVG9Qb3M6bnVsbCxpZDorK0ZifSxFYj9FYi5vcHMucHVzaChhLmN1ck9wKTphLmN1ck9wLm93bnNHcm91cD1FYj17b3BzOlthLmN1ck9wXSxkZWxheWVkQ2FsbGJhY2tzOltdfX1mdW5jdGlvbiBIYihhKXt2YXIgYj1hLmRlbGF5ZWRDYWxsYmFja3MsYz0wO2Rve2Zvcig7YzxiLmxlbmd0aDtjKyspYltjXSgpO2Zvcih2YXIgZD0wO2Q8YS5vcHMubGVuZ3RoO2QrKyl7dmFyIGU9YS5vcHNbZF07aWYoZS5jdXJzb3JBY3Rpdml0eUhhbmRsZXJzKWZvcig7ZS5jdXJzb3JBY3Rpdml0eUNhbGxlZDxlLmN1cnNvckFjdGl2aXR5SGFuZGxlcnMubGVuZ3RoOyllLmN1cnNvckFjdGl2aXR5SGFuZGxlcnNbZS5jdXJzb3JBY3Rpdml0eUNhbGxlZCsrXShlLmNtKX19d2hpbGUoYzxiLmxlbmd0aCl9ZnVuY3Rpb24gSWIoYSl7dmFyIGI9YS5jdXJPcCxjPWIub3duc0dyb3VwO2lmKGMpdHJ5e0hiKGMpfWZpbmFsbHl7RWI9bnVsbDtmb3IodmFyIGQ9MDtkPGMub3BzLmxlbmd0aDtkKyspYy5vcHNbZF0uY20uY3VyT3A9bnVsbDtKYihjKX19ZnVuY3Rpb24gSmIoYSl7Zm9yKHZhciBiPWEub3BzLGM9MDtjPGIubGVuZ3RoO2MrKylLYihiW2NdKTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKylMYihiW2NdKTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKylNYihiW2NdKTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKylOYihiW2NdKTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKylPYihiW2NdKX1mdW5jdGlvbiBLYihhKXt2YXIgYj1hLmNtLGM9Yi5kaXNwbGF5O1coYiksYS51cGRhdGVNYXhMaW5lJiZJKGIpLGEubXVzdFVwZGF0ZT1hLnZpZXdDaGFuZ2VkfHxhLmZvcmNlVXBkYXRlfHxudWxsIT1hLnNjcm9sbFRvcHx8YS5zY3JvbGxUb1BvcyYmKGEuc2Nyb2xsVG9Qb3MuZnJvbS5saW5lPGMudmlld0Zyb218fGEuc2Nyb2xsVG9Qb3MudG8ubGluZT49Yy52aWV3VG8pfHxjLm1heExpbmVDaGFuZ2VkJiZiLm9wdGlvbnMubGluZVdyYXBwaW5nLGEudXBkYXRlPWEubXVzdFVwZGF0ZSYmbmV3IFYoYixhLm11c3RVcGRhdGUmJnt0b3A6YS5zY3JvbGxUb3AsZW5zdXJlOmEuc2Nyb2xsVG9Qb3N9LGEuZm9yY2VVcGRhdGUpfWZ1bmN0aW9uIExiKGEpe2EudXBkYXRlZERpc3BsYXk9YS5tdXN0VXBkYXRlJiZYKGEuY20sYS51cGRhdGUpfWZ1bmN0aW9uIE1iKGEpe3ZhciBiPWEuY20sYz1iLmRpc3BsYXk7YS51cGRhdGVkRGlzcGxheSYmXyhiKSxhLmJhck1lYXN1cmU9SyhiKSxjLm1heExpbmVDaGFuZ2VkJiYhYi5vcHRpb25zLmxpbmVXcmFwcGluZyYmKGEuYWRqdXN0V2lkdGhUbz1oYihiLGMubWF4TGluZSxjLm1heExpbmUudGV4dC5sZW5ndGgpLmxlZnQrMyxiLmRpc3BsYXkuc2l6ZXJXaWR0aD1hLmFkanVzdFdpZHRoVG8sYS5iYXJNZWFzdXJlLnNjcm9sbFdpZHRoPU1hdGgubWF4KGMuc2Nyb2xsZXIuY2xpZW50V2lkdGgsYy5zaXplci5vZmZzZXRMZWZ0K2EuYWRqdXN0V2lkdGhUbytiYihiKStiLmRpc3BsYXkuYmFyV2lkdGgpLGEubWF4U2Nyb2xsTGVmdD1NYXRoLm1heCgwLGMuc2l6ZXIub2Zmc2V0TGVmdCthLmFkanVzdFdpZHRoVG8tY2IoYikpKSwoYS51cGRhdGVkRGlzcGxheXx8YS5zZWxlY3Rpb25DaGFuZ2VkKSYmKGEubmV3U2VsZWN0aW9uTm9kZXM9UWEoYikpfWZ1bmN0aW9uIE5iKGEpe3ZhciBiPWEuY207bnVsbCE9YS5hZGp1c3RXaWR0aFRvJiYoYi5kaXNwbGF5LnNpemVyLnN0eWxlLm1pbldpZHRoPWEuYWRqdXN0V2lkdGhUbysicHgiLGEubWF4U2Nyb2xsTGVmdDxiLmRvYy5zY3JvbGxMZWZ0JiZ5YyhiLE1hdGgubWluKGIuZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0LGEubWF4U2Nyb2xsTGVmdCksITApLGIuZGlzcGxheS5tYXhMaW5lQ2hhbmdlZD0hMSksYS5uZXdTZWxlY3Rpb25Ob2RlcyYmUmEoYixhLm5ld1NlbGVjdGlvbk5vZGVzKSxhLnVwZGF0ZWREaXNwbGF5JiYkKGIsYS5iYXJNZWFzdXJlKSwoYS51cGRhdGVkRGlzcGxheXx8YS5zdGFydEhlaWdodCE9Yi5kb2MuaGVpZ2h0KSYmTyhiLGEuYmFyTWVhc3VyZSksYS5zZWxlY3Rpb25DaGFuZ2VkJiZWYShiKSxiLnN0YXRlLmZvY3VzZWQmJmEudXBkYXRlSW5wdXQmJmVjKGIsYS50eXBpbmcpfWZ1bmN0aW9uIE9iKGEpe3ZhciBiPWEuY20sYz1iLmRpc3BsYXksZD1iLmRvYztpZihhLnVwZGF0ZWREaXNwbGF5JiZZKGIsYS51cGRhdGUpLG51bGw9PWMud2hlZWxTdGFydFh8fG51bGw9PWEuc2Nyb2xsVG9wJiZudWxsPT1hLnNjcm9sbExlZnQmJiFhLnNjcm9sbFRvUG9zfHwoYy53aGVlbFN0YXJ0WD1jLndoZWVsU3RhcnRZPW51bGwpLG51bGw9PWEuc2Nyb2xsVG9wfHxjLnNjcm9sbGVyLnNjcm9sbFRvcD09YS5zY3JvbGxUb3AmJiFhLmZvcmNlU2Nyb2xsfHwoZC5zY3JvbGxUb3A9TWF0aC5tYXgoMCxNYXRoLm1pbihjLnNjcm9sbGVyLnNjcm9sbEhlaWdodC1jLnNjcm9sbGVyLmNsaWVudEhlaWdodCxhLnNjcm9sbFRvcCkpLGMuc2Nyb2xsYmFycy5zZXRTY3JvbGxUb3AoZC5zY3JvbGxUb3ApLGMuc2Nyb2xsZXIuc2Nyb2xsVG9wPWQuc2Nyb2xsVG9wKSxudWxsPT1hLnNjcm9sbExlZnR8fGMuc2Nyb2xsZXIuc2Nyb2xsTGVmdD09YS5zY3JvbGxMZWZ0JiYhYS5mb3JjZVNjcm9sbHx8KGQuc2Nyb2xsTGVmdD1NYXRoLm1heCgwLE1hdGgubWluKGMuc2Nyb2xsZXIuc2Nyb2xsV2lkdGgtY2IoYiksYS5zY3JvbGxMZWZ0KSksYy5zY3JvbGxiYXJzLnNldFNjcm9sbExlZnQoZC5zY3JvbGxMZWZ0KSxjLnNjcm9sbGVyLnNjcm9sbExlZnQ9ZC5zY3JvbGxMZWZ0LFIoYikpLGEuc2Nyb2xsVG9Qb3Mpe3ZhciBlPWVkKGIsemEoZCxhLnNjcm9sbFRvUG9zLmZyb20pLHphKGQsYS5zY3JvbGxUb1Bvcy50byksYS5zY3JvbGxUb1Bvcy5tYXJnaW4pO2Euc2Nyb2xsVG9Qb3MuaXNDdXJzb3ImJmIuc3RhdGUuZm9jdXNlZCYmZGQoYixlKX12YXIgZj1hLm1heWJlSGlkZGVuTWFya2VycyxnPWEubWF5YmVVbmhpZGRlbk1hcmtlcnM7aWYoZilmb3IodmFyIGg9MDtoPGYubGVuZ3RoOysraClmW2hdLmxpbmVzLmxlbmd0aHx8QWYoZltoXSwiaGlkZSIpO2lmKGcpZm9yKHZhciBoPTA7aDxnLmxlbmd0aDsrK2gpZ1toXS5saW5lcy5sZW5ndGgmJkFmKGdbaF0sInVuaGlkZSIpO2Mud3JhcHBlci5vZmZzZXRIZWlnaHQmJihkLnNjcm9sbFRvcD1iLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wKSxhLmNoYW5nZU9ianMmJkFmKGIsImNoYW5nZXMiLGIsYS5jaGFuZ2VPYmpzKSxhLnVwZGF0ZSYmYS51cGRhdGUuZmluaXNoKCl9ZnVuY3Rpb24gUGIoYSxiKXtpZihhLmN1ck9wKXJldHVybiBiKCk7R2IoYSk7dHJ5e3JldHVybiBiKCl9ZmluYWxseXtJYihhKX19ZnVuY3Rpb24gUWIoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXtpZihhLmN1ck9wKXJldHVybiBiLmFwcGx5KGEsYXJndW1lbnRzKTtHYihhKTt0cnl7cmV0dXJuIGIuYXBwbHkoYSxhcmd1bWVudHMpfWZpbmFsbHl7SWIoYSl9fX1mdW5jdGlvbiBSYihhKXtyZXR1cm4gZnVuY3Rpb24oKXtpZih0aGlzLmN1ck9wKXJldHVybiBhLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtHYih0aGlzKTt0cnl7cmV0dXJuIGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZpbmFsbHl7SWIodGhpcyl9fX1mdW5jdGlvbiBTYihhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj10aGlzLmNtO2lmKCFifHxiLmN1ck9wKXJldHVybiBhLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtHYihiKTt0cnl7cmV0dXJuIGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZpbmFsbHl7SWIoYil9fX1mdW5jdGlvbiBUYihhLGIsYyl7dGhpcy5saW5lPWIsdGhpcy5yZXN0PWllKGIpLHRoaXMuc2l6ZT10aGlzLnJlc3Q/JGUoU2YodGhpcy5yZXN0KSktYysxOjEsdGhpcy5ub2RlPXRoaXMudGV4dD1udWxsLHRoaXMuaGlkZGVuPWxlKGEsYil9ZnVuY3Rpb24gVWIoYSxiLGMpe2Zvcih2YXIgZSxkPVtdLGY9YjtjPmY7Zj1lKXt2YXIgZz1uZXcgVGIoYS5kb2MsV2UoYS5kb2MsZiksZik7ZT1mK2cuc2l6ZSxkLnB1c2goZyl9cmV0dXJuIGR9ZnVuY3Rpb24gVmIoYSxiLGMsZCl7bnVsbD09YiYmKGI9YS5kb2MuZmlyc3QpLG51bGw9PWMmJihjPWEuZG9jLmZpcnN0K2EuZG9jLnNpemUpLGR8fChkPTApO3ZhciBlPWEuZGlzcGxheTtpZihkJiZjPGUudmlld1RvJiYobnVsbD09ZS51cGRhdGVMaW5lTnVtYmVyc3x8ZS51cGRhdGVMaW5lTnVtYmVycz5iKSYmKGUudXBkYXRlTGluZU51bWJlcnM9YiksYS5jdXJPcC52aWV3Q2hhbmdlZD0hMCxiPj1lLnZpZXdUbyl2JiZqZShhLmRvYyxiKTxlLnZpZXdUbyYmWGIoYSk7ZWxzZSBpZihjPD1lLnZpZXdGcm9tKXYmJmtlKGEuZG9jLGMrZCk+ZS52aWV3RnJvbT9YYihhKTooZS52aWV3RnJvbSs9ZCxlLnZpZXdUbys9ZCk7ZWxzZSBpZihiPD1lLnZpZXdGcm9tJiZjPj1lLnZpZXdUbylYYihhKTtlbHNlIGlmKGI8PWUudmlld0Zyb20pe3ZhciBmPVpiKGEsYyxjK2QsMSk7Zj8oZS52aWV3PWUudmlldy5zbGljZShmLmluZGV4KSxlLnZpZXdGcm9tPWYubGluZU4sZS52aWV3VG8rPWQpOlhiKGEpfWVsc2UgaWYoYz49ZS52aWV3VG8pe3ZhciBmPVpiKGEsYixiLC0xKTtmPyhlLnZpZXc9ZS52aWV3LnNsaWNlKDAsZi5pbmRleCksZS52aWV3VG89Zi5saW5lTik6WGIoYSl9ZWxzZXt2YXIgZz1aYihhLGIsYiwtMSksaD1aYihhLGMsYytkLDEpO2cmJmg/KGUudmlldz1lLnZpZXcuc2xpY2UoMCxnLmluZGV4KS5jb25jYXQoVWIoYSxnLmxpbmVOLGgubGluZU4pKS5jb25jYXQoZS52aWV3LnNsaWNlKGguaW5kZXgpKSxlLnZpZXdUbys9ZCk6WGIoYSl9dmFyIGk9ZS5leHRlcm5hbE1lYXN1cmVkO2kmJihjPGkubGluZU4/aS5saW5lTis9ZDpiPGkubGluZU4raS5zaXplJiYoZS5leHRlcm5hbE1lYXN1cmVkPW51bGwpKX1mdW5jdGlvbiBXYihhLGIsYyl7YS5jdXJPcC52aWV3Q2hhbmdlZD0hMDt2YXIgZD1hLmRpc3BsYXksZT1hLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZDtpZihlJiZiPj1lLmxpbmVOJiZiPGUubGluZU4rZS5zaXplJiYoZC5leHRlcm5hbE1lYXN1cmVkPW51bGwpLCEoYjxkLnZpZXdGcm9tfHxiPj1kLnZpZXdUbykpe3ZhciBmPWQudmlld1tZYihhLGIpXTtpZihudWxsIT1mLm5vZGUpe3ZhciBnPWYuY2hhbmdlc3x8KGYuY2hhbmdlcz1bXSk7LTE9PVVmKGcsYykmJmcucHVzaChjKX19fWZ1bmN0aW9uIFhiKGEpe2EuZGlzcGxheS52aWV3RnJvbT1hLmRpc3BsYXkudmlld1RvPWEuZG9jLmZpcnN0LGEuZGlzcGxheS52aWV3PVtdLGEuZGlzcGxheS52aWV3T2Zmc2V0PTB9ZnVuY3Rpb24gWWIoYSxiKXtpZihiPj1hLmRpc3BsYXkudmlld1RvKXJldHVybiBudWxsO2lmKGItPWEuZGlzcGxheS52aWV3RnJvbSwwPmIpcmV0dXJuIG51bGw7Zm9yKHZhciBjPWEuZGlzcGxheS52aWV3LGQ9MDtkPGMubGVuZ3RoO2QrKylpZihiLT1jW2RdLnNpemUsMD5iKXJldHVybiBkfWZ1bmN0aW9uIFpiKGEsYixjLGQpe3ZhciBmLGU9WWIoYSxiKSxnPWEuZGlzcGxheS52aWV3O2lmKCF2fHxjPT1hLmRvYy5maXJzdCthLmRvYy5zaXplKXJldHVybntpbmRleDplLGxpbmVOOmN9O2Zvcih2YXIgaD0wLGk9YS5kaXNwbGF5LnZpZXdGcm9tO2U+aDtoKyspaSs9Z1toXS5zaXplO2lmKGkhPWIpe2lmKGQ+MCl7aWYoZT09Zy5sZW5ndGgtMSlyZXR1cm4gbnVsbDtmPWkrZ1tlXS5zaXplLWIsZSsrfWVsc2UgZj1pLWI7Yis9ZixjKz1mfWZvcig7amUoYS5kb2MsYykhPWM7KXtpZihlPT0oMD5kPzA6Zy5sZW5ndGgtMSkpcmV0dXJuIG51bGw7Yys9ZCpnW2UtKDA+ZD8xOjApXS5zaXplLGUrPWR9cmV0dXJue2luZGV4OmUsbGluZU46Y319ZnVuY3Rpb24gJGIoYSxiLGMpe3ZhciBkPWEuZGlzcGxheSxlPWQudmlldzswPT1lLmxlbmd0aHx8Yj49ZC52aWV3VG98fGM8PWQudmlld0Zyb20/KGQudmlldz1VYihhLGIsYyksZC52aWV3RnJvbT1iKTooZC52aWV3RnJvbT5iP2Qudmlldz1VYihhLGIsZC52aWV3RnJvbSkuY29uY2F0KGQudmlldyk6ZC52aWV3RnJvbTxiJiYoZC52aWV3PWQudmlldy5zbGljZShZYihhLGIpKSksZC52aWV3RnJvbT1iLGQudmlld1RvPGM/ZC52aWV3PWQudmlldy5jb25jYXQoVWIoYSxkLnZpZXdUbyxjKSk6ZC52aWV3VG8+YyYmKGQudmlldz1kLnZpZXcuc2xpY2UoMCxZYihhLGMpKSkpLGQudmlld1RvPWN9ZnVuY3Rpb24gX2IoYSl7Zm9yKHZhciBiPWEuZGlzcGxheS52aWV3LGM9MCxkPTA7ZDxiLmxlbmd0aDtkKyspe3ZhciBlPWJbZF07ZS5oaWRkZW58fGUubm9kZSYmIWUuY2hhbmdlc3x8KytjfXJldHVybiBjfWZ1bmN0aW9uIGFjKGEpe2EuZGlzcGxheS5wb2xsaW5nRmFzdHx8YS5kaXNwbGF5LnBvbGwuc2V0KGEub3B0aW9ucy5wb2xsSW50ZXJ2YWwsZnVuY3Rpb24oKXtkYyhhKSxhLnN0YXRlLmZvY3VzZWQmJmFjKGEpfSl9ZnVuY3Rpb24gYmMoYSl7ZnVuY3Rpb24gYygpe3ZhciBkPWRjKGEpO2R8fGI/KGEuZGlzcGxheS5wb2xsaW5nRmFzdD0hMSxhYyhhKSk6KGI9ITAsYS5kaXNwbGF5LnBvbGwuc2V0KDYwLGMpKX12YXIgYj0hMTthLmRpc3BsYXkucG9sbGluZ0Zhc3Q9ITAsYS5kaXNwbGF5LnBvbGwuc2V0KDIwLGMpfWZ1bmN0aW9uIGRjKGEpe3ZhciBiPWEuZGlzcGxheS5pbnB1dCxjPWEuZGlzcGxheS5wcmV2SW5wdXQsZj1hLmRvYztpZighYS5zdGF0ZS5mb2N1c2VkfHx4ZyhiKSYmIWN8fGhjKGEpfHxhLm9wdGlvbnMuZGlzYWJsZUlucHV0fHxhLnN0YXRlLmtleVNlcSlyZXR1cm4hMTthLnN0YXRlLnBhc3RlSW5jb21pbmcmJmEuc3RhdGUuZmFrZWRMYXN0Q2hhciYmKGIudmFsdWU9Yi52YWx1ZS5zdWJzdHJpbmcoMCxiLnZhbHVlLmxlbmd0aC0xKSxhLnN0YXRlLmZha2VkTGFzdENoYXI9ITEpO3ZhciBnPWIudmFsdWU7aWYoZz09YyYmIWEuc29tZXRoaW5nU2VsZWN0ZWQoKSlyZXR1cm4hMTtpZihkJiZlPj05JiZhLmRpc3BsYXkuaW5wdXRIYXNTZWxlY3Rpb249PT1nfHxwJiYvW1x1ZjcwMC1cdWY3ZmZdLy50ZXN0KGcpKXJldHVybiBlYyhhKSwhMTt2YXIgaD0hYS5jdXJPcDtoJiZHYihhKSxhLmRpc3BsYXkuc2hpZnQ9ITEsODIwMyE9Zy5jaGFyQ29kZUF0KDApfHxmLnNlbCE9YS5kaXNwbGF5LnNlbEZvckNvbnRleHRNZW51fHxjfHwoYz0iXHUyMDBiIik7Zm9yKHZhciBpPTAsaj1NYXRoLm1pbihjLmxlbmd0aCxnLmxlbmd0aCk7aj5pJiZjLmNoYXJDb2RlQXQoaSk9PWcuY2hhckNvZGVBdChpKTspKytpO3ZhciBrPWcuc2xpY2UoaSksbD13ZyhrKSxtPW51bGw7YS5zdGF0ZS5wYXN0ZUluY29taW5nJiZmLnNlbC5yYW5nZXMubGVuZ3RoPjEmJihjYyYmY2Muam9pbigiXG4iKT09az9tPWYuc2VsLnJhbmdlcy5sZW5ndGglY2MubGVuZ3RoPT0wJiZWZihjYyx3Zyk6bC5sZW5ndGg9PWYuc2VsLnJhbmdlcy5sZW5ndGgmJihtPVZmKGwsZnVuY3Rpb24oYSl7cmV0dXJuW2FdfSkpKTtmb3IodmFyIG49Zi5zZWwucmFuZ2VzLmxlbmd0aC0xO24+PTA7bi0tKXt2YXIgbz1mLnNlbC5yYW5nZXNbbl0scT1vLmZyb20oKSxyPW8udG8oKTtpPGMubGVuZ3RoP3E9cGEocS5saW5lLHEuY2gtKGMubGVuZ3RoLWkpKTphLnN0YXRlLm92ZXJ3cml0ZSYmby5lbXB0eSgpJiYhYS5zdGF0ZS5wYXN0ZUluY29taW5nJiYocj1wYShyLmxpbmUsTWF0aC5taW4oV2UoZixyLmxpbmUpLnRleHQubGVuZ3RoLHIuY2grU2YobCkubGVuZ3RoKSkpO3ZhciBzPWEuY3VyT3AudXBkYXRlSW5wdXQsdD17ZnJvbTpxLHRvOnIsdGV4dDptP21bbiVtLmxlbmd0aF06bCxvcmlnaW46YS5zdGF0ZS5wYXN0ZUluY29taW5nPyJwYXN0ZSI6YS5zdGF0ZS5jdXRJbmNvbWluZz8iY3V0IjoiK2lucHV0In07aWYoWWMoYS5kb2MsdCksQ2YoYSwiaW5wdXRSZWFkIixhLHQpLGsmJiFhLnN0YXRlLnBhc3RlSW5jb21pbmcmJmEub3B0aW9ucy5lbGVjdHJpY0NoYXJzJiZhLm9wdGlvbnMuc21hcnRJbmRlbnQmJm8uaGVhZC5jaDwxMDAmJighbnx8Zi5zZWwucmFuZ2VzW24tMV0uaGVhZC5saW5lIT1vLmhlYWQubGluZSkpe3ZhciB1PWEuZ2V0TW9kZUF0KG8uaGVhZCksdj1TYyh0KTtpZih1LmVsZWN0cmljQ2hhcnMpe2Zvcih2YXIgdz0wO3c8dS5lbGVjdHJpY0NoYXJzLmxlbmd0aDt3KyspaWYoay5pbmRleE9mKHUuZWxlY3RyaWNDaGFycy5jaGFyQXQodykpPi0xKXtrZChhLHYubGluZSwic21hcnQiKTticmVha319ZWxzZSB1LmVsZWN0cmljSW5wdXQmJnUuZWxlY3RyaWNJbnB1dC50ZXN0KFdlKGYsdi5saW5lKS50ZXh0LnNsaWNlKDAsdi5jaCkpJiZrZChhLHYubGluZSwic21hcnQiKX19cmV0dXJuIGlkKGEpLGEuY3VyT3AudXBkYXRlSW5wdXQ9cyxhLmN1ck9wLnR5cGluZz0hMCxnLmxlbmd0aD4xZTN8fGcuaW5kZXhPZigiXG4iKT4tMT9iLnZhbHVlPWEuZGlzcGxheS5wcmV2SW5wdXQ9IiI6YS5kaXNwbGF5LnByZXZJbnB1dD1nLGgmJkliKGEpLGEuc3RhdGUucGFzdGVJbmNvbWluZz1hLnN0YXRlLmN1dEluY29taW5nPSExLCEwfWZ1bmN0aW9uIGVjKGEsYil7aWYoIWEuZGlzcGxheS5jb250ZXh0TWVudVBlbmRpbmcpe3ZhciBjLGYsZz1hLmRvYztpZihhLnNvbWV0aGluZ1NlbGVjdGVkKCkpe2EuZGlzcGxheS5wcmV2SW5wdXQ9IiI7dmFyIGg9Zy5zZWwucHJpbWFyeSgpO2M9eWcmJihoLnRvKCkubGluZS1oLmZyb20oKS5saW5lPjEwMHx8KGY9YS5nZXRTZWxlY3Rpb24oKSkubGVuZ3RoPjFlMyk7dmFyIGk9Yz8iLSI6Znx8YS5nZXRTZWxlY3Rpb24oKTthLmRpc3BsYXkuaW5wdXQudmFsdWU9aSxhLnN0YXRlLmZvY3VzZWQmJlRmKGEuZGlzcGxheS5pbnB1dCksZCYmZT49OSYmKGEuZGlzcGxheS5pbnB1dEhhc1NlbGVjdGlvbj1pKX1lbHNlIGJ8fChhLmRpc3BsYXkucHJldklucHV0PWEuZGlzcGxheS5pbnB1dC52YWx1ZT0iIixkJiZlPj05JiYoYS5kaXNwbGF5LmlucHV0SGFzU2VsZWN0aW9uPW51bGwpKTthLmRpc3BsYXkuaW5hY2N1cmF0ZVNlbGVjdGlvbj1jfX1mdW5jdGlvbiBmYyhhKXtpZigibm9jdXJzb3IiIT1hLm9wdGlvbnMucmVhZE9ubHkmJighb3x8aWcoKSE9YS5kaXNwbGF5LmlucHV0KSl0cnl7YS5kaXNwbGF5LmlucHV0LmZvY3VzKCl9Y2F0Y2goYil7fX1mdW5jdGlvbiBnYyhhKXthLnN0YXRlLmZvY3VzZWR8fChmYyhhKSxPYyhhKSl9ZnVuY3Rpb24gaGMoYSl7cmV0dXJuIGEub3B0aW9ucy5yZWFkT25seXx8YS5kb2MuY2FudEVkaXR9ZnVuY3Rpb24gaWMoYSl7ZnVuY3Rpb24gYyhiKXtFZihhLGIpfHx2ZihiKX1mdW5jdGlvbiBnKGMpe2lmKGEuc29tZXRoaW5nU2VsZWN0ZWQoKSljYz1hLmdldFNlbGVjdGlvbnMoKSxiLmluYWNjdXJhdGVTZWxlY3Rpb24mJihiLnByZXZJbnB1dD0iIixiLmluYWNjdXJhdGVTZWxlY3Rpb249ITEsYi5pbnB1dC52YWx1ZT1jYy5qb2luKCJcbiIpLFRmKGIuaW5wdXQpKTtlbHNle2Zvcih2YXIgZD1bXSxlPVtdLGY9MDtmPGEuZG9jLnNlbC5yYW5nZXMubGVuZ3RoO2YrKyl7dmFyIGc9YS5kb2Muc2VsLnJhbmdlc1tmXS5oZWFkLmxpbmUsaD17YW5jaG9yOnBhKGcsMCksaGVhZDpwYShnKzEsMCl9O2UucHVzaChoKSxkLnB1c2goYS5nZXRSYW5nZShoLmFuY2hvcixoLmhlYWQpKX0iY3V0Ij09Yy50eXBlP2Euc2V0U2VsZWN0aW9ucyhlLG51bGwsS2YpOihiLnByZXZJbnB1dD0iIixiLmlucHV0LnZhbHVlPWQuam9pbigiXG4iKSxUZihiLmlucHV0KSksY2M9ZH0iY3V0Ij09Yy50eXBlJiYoYS5zdGF0ZS5jdXRJbmNvbWluZz0hMCl9dmFyIGI9YS5kaXNwbGF5O3lmKGIuc2Nyb2xsZXIsIm1vdXNlZG93biIsUWIoYSxtYykpLGQmJjExPmU/eWYoYi5zY3JvbGxlciwiZGJsY2xpY2siLFFiKGEsZnVuY3Rpb24oYil7aWYoIUVmKGEsYikpe3ZhciBjPWxjKGEsYik7aWYoYyYmIXRjKGEsYikmJiFrYyhhLmRpc3BsYXksYikpe3NmKGIpO3ZhciBkPWEuZmluZFdvcmRBdChjKTtFYShhLmRvYyxkLmFuY2hvcixkLmhlYWQpfX19KSk6eWYoYi5zY3JvbGxlciwiZGJsY2xpY2siLGZ1bmN0aW9uKGIpe0VmKGEsYil8fHNmKGIpfSkseWYoYi5saW5lU3BhY2UsInNlbGVjdHN0YXJ0IixmdW5jdGlvbihhKXtrYyhiLGEpfHxzZihhKX0pLHR8fHlmKGIuc2Nyb2xsZXIsImNvbnRleHRtZW51IixmdW5jdGlvbihiKXtRYyhhLGIpfSkseWYoYi5zY3JvbGxlciwic2Nyb2xsIixmdW5jdGlvbigpe2Iuc2Nyb2xsZXIuY2xpZW50SGVpZ2h0JiYoeGMoYSxiLnNjcm9sbGVyLnNjcm9sbFRvcCkseWMoYSxiLnNjcm9sbGVyLnNjcm9sbExlZnQsITApLEFmKGEsInNjcm9sbCIsYSkpfSkseWYoYi5zY3JvbGxlciwibW91c2V3aGVlbCIsZnVuY3Rpb24oYil7Q2MoYSxiKX0pLHlmKGIuc2Nyb2xsZXIsIkRPTU1vdXNlU2Nyb2xsIixmdW5jdGlvbihiKXtDYyhhLGIpfSkseWYoYi53cmFwcGVyLCJzY3JvbGwiLGZ1bmN0aW9uKCl7Yi53cmFwcGVyLnNjcm9sbFRvcD1iLndyYXBwZXIuc2Nyb2xsTGVmdD0wfSkseWYoYi5pbnB1dCwia2V5dXAiLGZ1bmN0aW9uKGIpe01jLmNhbGwoYSxiKX0pLHlmKGIuaW5wdXQsImlucHV0IixmdW5jdGlvbigpe2QmJmU+PTkmJmEuZGlzcGxheS5pbnB1dEhhc1NlbGVjdGlvbiYmKGEuZGlzcGxheS5pbnB1dEhhc1NlbGVjdGlvbj1udWxsKSxkYyhhKX0pLHlmKGIuaW5wdXQsImtleWRvd24iLFFiKGEsS2MpKSx5ZihiLmlucHV0LCJrZXlwcmVzcyIsUWIoYSxOYykpLHlmKGIuaW5wdXQsImZvY3VzIixZZihPYyxhKSkseWYoYi5pbnB1dCwiYmx1ciIsWWYoUGMsYSkpLGEub3B0aW9ucy5kcmFnRHJvcCYmKHlmKGIuc2Nyb2xsZXIsImRyYWdzdGFydCIsZnVuY3Rpb24oYil7d2MoYSxiKX0pLHlmKGIuc2Nyb2xsZXIsImRyYWdlbnRlciIsYykseWYoYi5zY3JvbGxlciwiZHJhZ292ZXIiLGMpLHlmKGIuc2Nyb2xsZXIsImRyb3AiLFFiKGEsdmMpKSkseWYoYi5zY3JvbGxlciwicGFzdGUiLGZ1bmN0aW9uKGMpe2tjKGIsYyl8fChhLnN0YXRlLnBhc3RlSW5jb21pbmc9ITAsZmMoYSksYmMoYSkpfSkseWYoYi5pbnB1dCwicGFzdGUiLGZ1bmN0aW9uKCl7aWYoZiYmIWEuc3RhdGUuZmFrZWRMYXN0Q2hhciYmIShuZXcgRGF0ZS1hLnN0YXRlLmxhc3RNaWRkbGVEb3duPDIwMCkpe3ZhciBjPWIuaW5wdXQuc2VsZWN0aW9uU3RhcnQsZD1iLmlucHV0LnNlbGVjdGlvbkVuZDtiLmlucHV0LnZhbHVlKz0iJCIsYi5pbnB1dC5zZWxlY3Rpb25FbmQ9ZCxiLmlucHV0LnNlbGVjdGlvblN0YXJ0PWMsYS5zdGF0ZS5mYWtlZExhc3RDaGFyPSEwfWEuc3RhdGUucGFzdGVJbmNvbWluZz0hMCxiYyhhKX0pLHlmKGIuaW5wdXQsImN1dCIsZykseWYoYi5pbnB1dCwiY29weSIsZyksayYmeWYoYi5zaXplciwibW91c2V1cCIsZnVuY3Rpb24oKXtpZygpPT1iLmlucHV0JiZiLmlucHV0LmJsdXIoKSxmYyhhKX0pfWZ1bmN0aW9uIGpjKGEpe3ZhciBiPWEuZGlzcGxheTsoYi5sYXN0V3JhcEhlaWdodCE9Yi53cmFwcGVyLmNsaWVudEhlaWdodHx8Yi5sYXN0V3JhcFdpZHRoIT1iLndyYXBwZXIuY2xpZW50V2lkdGgpJiYoYi5jYWNoZWRDaGFyV2lkdGg9Yi5jYWNoZWRUZXh0SGVpZ2h0PWIuY2FjaGVkUGFkZGluZ0g9bnVsbCxiLnNjcm9sbGJhcnNDbGlwcGVkPSExLGEuc2V0U2l6ZSgpKX1mdW5jdGlvbiBrYyhhLGIpe2Zvcih2YXIgYz13ZihiKTtjIT1hLndyYXBwZXI7Yz1jLnBhcmVudE5vZGUpaWYoIWN8fDE9PWMubm9kZVR5cGUmJiJ0cnVlIj09Yy5nZXRBdHRyaWJ1dGUoImNtLWlnbm9yZS1ldmVudHMiKXx8Yy5wYXJlbnROb2RlPT1hLnNpemVyJiZjIT1hLm1vdmVyKXJldHVybiEwfWZ1bmN0aW9uIGxjKGEsYixjLGQpe3ZhciBlPWEuZGlzcGxheTtpZighYyYmInRydWUiPT13ZihiKS5nZXRBdHRyaWJ1dGUoIm5vdC1jb250ZW50IikpcmV0dXJuIG51bGw7dmFyIGYsZyxoPWUubGluZVNwYWNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3RyeXtmPWIuY2xpZW50WC1oLmxlZnQsZz1iLmNsaWVudFktaC50b3B9Y2F0Y2goYil7cmV0dXJuIG51bGx9dmFyIGosaT16YihhLGYsZyk7aWYoZCYmMT09aS54UmVsJiYoaj1XZShhLmRvYyxpLmxpbmUpLnRleHQpLmxlbmd0aD09aS5jaCl7dmFyIGs9T2YoaixqLmxlbmd0aCxhLm9wdGlvbnMudGFiU2l6ZSktai5sZW5ndGg7aT1wYShpLmxpbmUsTWF0aC5tYXgoMCxNYXRoLnJvdW5kKChmLWFiKGEuZGlzcGxheSkubGVmdCkvRGIoYS5kaXNwbGF5KSktaykpfXJldHVybiBpfWZ1bmN0aW9uIG1jKGEpe2lmKCFFZih0aGlzLGEpKXt2YXIgYj10aGlzLGM9Yi5kaXNwbGF5O2lmKGMuc2hpZnQ9YS5zaGlmdEtleSxrYyhjLGEpKXJldHVybiB2b2lkKGZ8fChjLnNjcm9sbGVyLmRyYWdnYWJsZT0hMSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5zY3JvbGxlci5kcmFnZ2FibGU9ITB9LDEwMCkpKTtpZighdGMoYixhKSl7dmFyIGQ9bGMoYixhKTtzd2l0Y2god2luZG93LmZvY3VzKCkseGYoYSkpe2Nhc2UgMTpkP3BjKGIsYSxkKTp3ZihhKT09Yy5zY3JvbGxlciYmc2YoYSk7YnJlYWs7Y2FzZSAyOmYmJihiLnN0YXRlLmxhc3RNaWRkbGVEb3duPStuZXcgRGF0ZSksZCYmRWEoYi5kb2MsZCksc2V0VGltZW91dChZZihmYyxiKSwyMCksc2YoYSk7YnJlYWs7Y2FzZSAzOnQmJlFjKGIsYSl9fX19ZnVuY3Rpb24gcGMoYSxiLGMpe3NldFRpbWVvdXQoWWYoZ2MsYSksMCk7dmFyIGUsZD0rbmV3IERhdGU7b2MmJm9jLnRpbWU+ZC00MDAmJjA9PXFhKG9jLnBvcyxjKT9lPSJ0cmlwbGUiOm5jJiZuYy50aW1lPmQtNDAwJiYwPT1xYShuYy5wb3MsYyk/KGU9ImRvdWJsZSIsb2M9e3RpbWU6ZCxwb3M6Y30pOihlPSJzaW5nbGUiLG5jPXt0aW1lOmQscG9zOmN9KTt2YXIgaCxmPWEuZG9jLnNlbCxnPXA/Yi5tZXRhS2V5OmIuY3RybEtleTthLm9wdGlvbnMuZHJhZ0Ryb3AmJnJnJiYhaGMoYSkmJiJzaW5nbGUiPT1lJiYoaD1mLmNvbnRhaW5zKGMpKT4tMSYmIWYucmFuZ2VzW2hdLmVtcHR5KCk/cWMoYSxiLGMsZyk6cmMoYSxiLGMsZSxnKX1mdW5jdGlvbiBxYyhhLGIsYyxnKXt2YXIgaD1hLmRpc3BsYXksaT1RYihhLGZ1bmN0aW9uKGope2YmJihoLnNjcm9sbGVyLmRyYWdnYWJsZT0hMSksYS5zdGF0ZS5kcmFnZ2luZ1RleHQ9ITEsemYoZG9jdW1lbnQsIm1vdXNldXAiLGkpLHpmKGguc2Nyb2xsZXIsImRyb3AiLGkpLE1hdGguYWJzKGIuY2xpZW50WC1qLmNsaWVudFgpK01hdGguYWJzKGIuY2xpZW50WS1qLmNsaWVudFkpPDEwJiYoc2YoaiksZ3x8RWEoYS5kb2MsYyksZmMoYSksZCYmOT09ZSYmc2V0VGltZW91dChmdW5jdGlvbigpe2RvY3VtZW50LmJvZHkuZm9jdXMoKSxmYyhhKX0sMjApKX0pO2YmJihoLnNjcm9sbGVyLmRyYWdnYWJsZT0hMCksYS5zdGF0ZS5kcmFnZ2luZ1RleHQ9aSxoLnNjcm9sbGVyLmRyYWdEcm9wJiZoLnNjcm9sbGVyLmRyYWdEcm9wKCkseWYoZG9jdW1lbnQsIm1vdXNldXAiLGkpLHlmKGguc2Nyb2xsZXIsImRyb3AiLGkpfWZ1bmN0aW9uIHJjKGEsYixjLGQsZSl7ZnVuY3Rpb24gbyhiKXtpZigwIT1xYShuLGIpKWlmKG49YiwicmVjdCI9PWQpe2Zvcih2YXIgZT1bXSxmPWEub3B0aW9ucy50YWJTaXplLGs9T2YoV2UoZyxjLmxpbmUpLnRleHQsYy5jaCxmKSxsPU9mKFdlKGcsYi5saW5lKS50ZXh0LGIuY2gsZiksbT1NYXRoLm1pbihrLGwpLG89TWF0aC5tYXgoayxsKSxwPU1hdGgubWluKGMubGluZSxiLmxpbmUpLHE9TWF0aC5taW4oYS5sYXN0TGluZSgpLE1hdGgubWF4KGMubGluZSxiLmxpbmUpKTtxPj1wO3ArKyl7dmFyIHI9V2UoZyxwKS50ZXh0LHM9UGYocixtLGYpO209PW8/ZS5wdXNoKG5ldyB2YShwYShwLHMpLHBhKHAscykpKTpyLmxlbmd0aD5zJiZlLnB1c2gobmV3IHZhKHBhKHAscykscGEocCxQZihyLG8sZikpKSl9ZS5sZW5ndGh8fGUucHVzaChuZXcgdmEoYyxjKSksS2EoZyx3YShqLnJhbmdlcy5zbGljZSgwLGkpLmNvbmNhdChlKSxpKSx7b3JpZ2luOiIqbW91c2UiLHNjcm9sbDohMX0pLGEuc2Nyb2xsSW50b1ZpZXcoYil9ZWxzZXt2YXIgdD1oLHU9dC5hbmNob3Isdj1iO2lmKCJzaW5nbGUiIT1kKXtpZigiZG91YmxlIj09ZCl2YXIgdz1hLmZpbmRXb3JkQXQoYik7ZWxzZSB2YXIgdz1uZXcgdmEocGEoYi5saW5lLDApLHphKGcscGEoYi5saW5lKzEsMCkpKTtxYSh3LmFuY2hvcix1KT4wPyh2PXcuaGVhZCx1PXRhKHQuZnJvbSgpLHcuYW5jaG9yKSk6KHY9dy5hbmNob3IsdT1zYSh0LnRvKCksdy5oZWFkKSl9dmFyIGU9ai5yYW5nZXMuc2xpY2UoMCk7ZVtpXT1uZXcgdmEoemEoZyx1KSx2KSxLYShnLHdhKGUsaSksTGYpfX1mdW5jdGlvbiByKGIpe3ZhciBjPSsrcSxlPWxjKGEsYiwhMCwicmVjdCI9PWQpO2lmKGUpaWYoMCE9cWEoZSxuKSl7Z2MoYSksbyhlKTt2YXIgaD1RKGYsZyk7KGUubGluZT49aC50b3x8ZS5saW5lPGguZnJvbSkmJnNldFRpbWVvdXQoUWIoYSxmdW5jdGlvbigpe3E9PWMmJnIoYil9KSwxNTApfWVsc2V7dmFyIGk9Yi5jbGllbnRZPHAudG9wPy0yMDpiLmNsaWVudFk+cC5ib3R0b20/MjA6MDtpJiZzZXRUaW1lb3V0KFFiKGEsZnVuY3Rpb24oKXtxPT1jJiYoZi5zY3JvbGxlci5zY3JvbGxUb3ArPWkscihiKSl9KSw1MCl9fWZ1bmN0aW9uIHMoYil7cT0xLzAsc2YoYiksZmMoYSksemYoZG9jdW1lbnQsIm1vdXNlbW92ZSIsdCksemYoZG9jdW1lbnQsIm1vdXNldXAiLHUpLGcuaGlzdG9yeS5sYXN0U2VsT3JpZ2luPW51bGx9dmFyIGY9YS5kaXNwbGF5LGc9YS5kb2M7c2YoYik7dmFyIGgsaSxqPWcuc2VsLGs9ai5yYW5nZXM7aWYoZSYmIWIuc2hpZnRLZXk/KGk9Zy5zZWwuY29udGFpbnMoYyksaD1pPi0xP2tbaV06bmV3IHZhKGMsYykpOmg9Zy5zZWwucHJpbWFyeSgpLGIuYWx0S2V5KWQ9InJlY3QiLGV8fChoPW5ldyB2YShjLGMpKSxjPWxjKGEsYiwhMCwhMCksaT0tMTtlbHNlIGlmKCJkb3VibGUiPT1kKXt2YXIgbD1hLmZpbmRXb3JkQXQoYyk7aD1hLmRpc3BsYXkuc2hpZnR8fGcuZXh0ZW5kP0RhKGcsaCxsLmFuY2hvcixsLmhlYWQpOmx9ZWxzZSBpZigidHJpcGxlIj09ZCl7dmFyIG09bmV3IHZhKHBhKGMubGluZSwwKSx6YShnLHBhKGMubGluZSsxLDApKSk7aD1hLmRpc3BsYXkuc2hpZnR8fGcuZXh0ZW5kP0RhKGcsaCxtLmFuY2hvcixtLmhlYWQpOm19ZWxzZSBoPURhKGcsaCxjKTtlPy0xPT1pPyhpPWsubGVuZ3RoLEthKGcsd2Eoay5jb25jYXQoW2hdKSxpKSx7c2Nyb2xsOiExLG9yaWdpbjoiKm1vdXNlIn0pKTprLmxlbmd0aD4xJiZrW2ldLmVtcHR5KCkmJiJzaW5nbGUiPT1kPyhLYShnLHdhKGsuc2xpY2UoMCxpKS5jb25jYXQoay5zbGljZShpKzEpKSwwKSksaj1nLnNlbCk6R2EoZyxpLGgsTGYpOihpPTAsS2EoZyxuZXcgdWEoW2hdLDApLExmKSxqPWcuc2VsKTt2YXIgbj1jLHA9Zi53cmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHE9MCx0PVFiKGEsZnVuY3Rpb24oYSl7eGYoYSk/cihhKTpzKGEpfSksdT1RYihhLHMpO3lmKGRvY3VtZW50LCJtb3VzZW1vdmUiLHQpLHlmKGRvY3VtZW50LCJtb3VzZXVwIix1KX1mdW5jdGlvbiBzYyhhLGIsYyxkLGUpe3RyeXt2YXIgZj1iLmNsaWVudFgsZz1iLmNsaWVudFl9Y2F0Y2goYil7cmV0dXJuITF9aWYoZj49TWF0aC5mbG9vcihhLmRpc3BsYXkuZ3V0dGVycy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCkpcmV0dXJuITE7ZCYmc2YoYik7dmFyIGg9YS5kaXNwbGF5LGk9aC5saW5lRGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2lmKGc+aS5ib3R0b218fCFHZihhLGMpKXJldHVybiB1ZihiKTtnLT1pLnRvcC1oLnZpZXdPZmZzZXQ7Zm9yKHZhciBqPTA7ajxhLm9wdGlvbnMuZ3V0dGVycy5sZW5ndGg7KytqKXt2YXIgaz1oLmd1dHRlcnMuY2hpbGROb2Rlc1tqXTtpZihrJiZrLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0Pj1mKXt2YXIgbD1fZShhLmRvYyxnKSxtPWEub3B0aW9ucy5ndXR0ZXJzW2pdO3JldHVybiBlKGEsYyxhLGwsbSxiKSx1ZihiKX19fWZ1bmN0aW9uIHRjKGEsYil7cmV0dXJuIHNjKGEsYiwiZ3V0dGVyQ2xpY2siLCEwLENmKX1mdW5jdGlvbiB2YyhhKXt2YXIgYj10aGlzO2lmKCFFZihiLGEpJiYha2MoYi5kaXNwbGF5LGEpKXtzZihhKSxkJiYodWM9K25ldyBEYXRlKTt2YXIgYz1sYyhiLGEsITApLGU9YS5kYXRhVHJhbnNmZXIuZmlsZXM7aWYoYyYmIWhjKGIpKWlmKGUmJmUubGVuZ3RoJiZ3aW5kb3cuRmlsZVJlYWRlciYmd2luZG93LkZpbGUpZm9yKHZhciBmPWUubGVuZ3RoLGc9QXJyYXkoZiksaD0wLGk9ZnVuY3Rpb24oYSxkKXt2YXIgZT1uZXcgRmlsZVJlYWRlcjtlLm9ubG9hZD1RYihiLGZ1bmN0aW9uKCl7aWYoZ1tkXT1lLnJlc3VsdCwrK2g9PWYpe2M9emEoYi5kb2MsYyk7dmFyIGE9e2Zyb206Yyx0bzpjLHRleHQ6d2coZy5qb2luKCJcbiIpKSxvcmlnaW46InBhc3RlIn07WWMoYi5kb2MsYSksSmEoYi5kb2MseGEoYyxTYyhhKSkpfX0pLGUucmVhZEFzVGV4dChhKX0saj0wO2Y+ajsrK2opaShlW2pdLGopO2Vsc2V7aWYoYi5zdGF0ZS5kcmFnZ2luZ1RleHQmJmIuZG9jLnNlbC5jb250YWlucyhjKT4tMSlyZXR1cm4gYi5zdGF0ZS5kcmFnZ2luZ1RleHQoYSksdm9pZCBzZXRUaW1lb3V0KFlmKGZjLGIpLDIwKTt0cnl7dmFyIGc9YS5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgiVGV4dCIpO2lmKGcpe2lmKGIuc3RhdGUuZHJhZ2dpbmdUZXh0JiYhKHA/YS5tZXRhS2V5OmEuY3RybEtleSkpdmFyIGs9Yi5saXN0U2VsZWN0aW9ucygpO2lmKExhKGIuZG9jLHhhKGMsYykpLGspZm9yKHZhciBqPTA7ajxrLmxlbmd0aDsrK2opY2QoYi5kb2MsIiIsa1tqXS5hbmNob3Isa1tqXS5oZWFkLCJkcmFnIik7Yi5yZXBsYWNlU2VsZWN0aW9uKGcsImFyb3VuZCIsInBhc3RlIiksZmMoYil9fWNhdGNoKGEpe319fX1mdW5jdGlvbiB3YyhhLGIpe2lmKGQmJighYS5zdGF0ZS5kcmFnZ2luZ1RleHR8fCtuZXcgRGF0ZS11YzwxMDApKXJldHVybiB2b2lkIHZmKGIpO2lmKCFFZihhLGIpJiYha2MoYS5kaXNwbGF5LGIpJiYoYi5kYXRhVHJhbnNmZXIuc2V0RGF0YSgiVGV4dCIsYS5nZXRTZWxlY3Rpb24oKSksYi5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlJiYhaikpe3ZhciBjPWRnKCJpbWciLG51bGwsbnVsbCwicG9zaXRpb246IGZpeGVkOyBsZWZ0OiAwOyB0b3A6IDA7Iik7Yy5zcmM9ImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBQUFBQUNINUJBRUtBQUVBTEFBQUFBQUJBQUVBQUFJQ1RBRUFPdz09IixpJiYoYy53aWR0aD1jLmhlaWdodD0xLGEuZGlzcGxheS53cmFwcGVyLmFwcGVuZENoaWxkKGMpLGMuX3RvcD1jLm9mZnNldFRvcCksYi5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGMsMCwwKSxpJiZjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYyl9fWZ1bmN0aW9uIHhjKGIsYyl7TWF0aC5hYnMoYi5kb2Muc2Nyb2xsVG9wLWMpPDJ8fChiLmRvYy5zY3JvbGxUb3A9YyxhfHxaKGIse3RvcDpjfSksYi5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcCE9YyYmKGIuZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3A9YyksYi5kaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsVG9wKGMpLGEmJlooYiksV2EoYiwxMDApKX1mdW5jdGlvbiB5YyhhLGIsYyl7KGM/Yj09YS5kb2Muc2Nyb2xsTGVmdDpNYXRoLmFicyhhLmRvYy5zY3JvbGxMZWZ0LWIpPDIpfHwoYj1NYXRoLm1pbihiLGEuZGlzcGxheS5zY3JvbGxlci5zY3JvbGxXaWR0aC1hLmRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50V2lkdGgpLGEuZG9jLnNjcm9sbExlZnQ9YixSKGEpLGEuZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0IT1iJiYoYS5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbExlZnQ9YiksYS5kaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsTGVmdChiKSl9ZnVuY3Rpb24gQ2MoYixjKXt2YXIgZD1CYyhjKSxlPWQueCxnPWQueSxoPWIuZGlzcGxheSxqPWguc2Nyb2xsZXI7aWYoZSYmai5zY3JvbGxXaWR0aD5qLmNsaWVudFdpZHRofHxnJiZqLnNjcm9sbEhlaWdodD5qLmNsaWVudEhlaWdodCl7aWYoZyYmcCYmZilhOmZvcih2YXIgaz1jLnRhcmdldCxsPWgudmlldztrIT1qO2s9ay5wYXJlbnROb2RlKWZvcih2YXIgbT0wO208bC5sZW5ndGg7bSsrKWlmKGxbbV0ubm9kZT09ayl7Yi5kaXNwbGF5LmN1cnJlbnRXaGVlbFRhcmdldD1rO2JyZWFrIGF9aWYoZSYmIWEmJiFpJiZudWxsIT1BYylyZXR1cm4gZyYmeGMoYixNYXRoLm1heCgwLE1hdGgubWluKGouc2Nyb2xsVG9wK2cqQWMsai5zY3JvbGxIZWlnaHQtai5jbGllbnRIZWlnaHQpKSkseWMoYixNYXRoLm1heCgwLE1hdGgubWluKGouc2Nyb2xsTGVmdCtlKkFjLGouc2Nyb2xsV2lkdGgtai5jbGllbnRXaWR0aCkpKSxzZihjKSx2b2lkKGgud2hlZWxTdGFydFg9bnVsbCk7aWYoZyYmbnVsbCE9QWMpe3ZhciBuPWcqQWMsbz1iLmRvYy5zY3JvbGxUb3AscT1vK2gud3JhcHBlci5jbGllbnRIZWlnaHQ7MD5uP289TWF0aC5tYXgoMCxvK24tNTApOnE9TWF0aC5taW4oYi5kb2MuaGVpZ2h0LHErbis1MCksWihiLHt0b3A6byxib3R0b206cX0pfTIwPnpjJiYobnVsbD09aC53aGVlbFN0YXJ0WD8oaC53aGVlbFN0YXJ0WD1qLnNjcm9sbExlZnQsaC53aGVlbFN0YXJ0WT1qLnNjcm9sbFRvcCxoLndoZWVsRFg9ZSxoLndoZWVsRFk9ZyxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYobnVsbCE9aC53aGVlbFN0YXJ0WCl7dmFyIGE9ai5zY3JvbGxMZWZ0LWgud2hlZWxTdGFydFgsYj1qLnNjcm9sbFRvcC1oLndoZWVsU3RhcnRZLGM9YiYmaC53aGVlbERZJiZiL2gud2hlZWxEWXx8YSYmaC53aGVlbERYJiZhL2gud2hlZWxEWDtoLndoZWVsU3RhcnRYPWgud2hlZWxTdGFydFk9bnVsbCxjJiYoQWM9KEFjKnpjK2MpLyh6YysxKSwrK3pjKX19LDIwMCkpOihoLndoZWVsRFgrPWUsaC53aGVlbERZKz1nKSl9fWZ1bmN0aW9uIERjKGEsYixjKXtpZigic3RyaW5nIj09dHlwZW9mIGImJihiPUFkW2JdLCFiKSlyZXR1cm4hMTthLmRpc3BsYXkucG9sbGluZ0Zhc3QmJmRjKGEpJiYoYS5kaXNwbGF5LnBvbGxpbmdGYXN0PSExKTt2YXIgZD1hLmRpc3BsYXkuc2hpZnQsZT0hMTt0cnl7aGMoYSkmJihhLnN0YXRlLnN1cHByZXNzRWRpdHM9ITApLGMmJihhLmRpc3BsYXkuc2hpZnQ9ITEpLGU9YihhKSE9SmZ9ZmluYWxseXthLmRpc3BsYXkuc2hpZnQ9ZCxhLnN0YXRlLnN1cHByZXNzRWRpdHM9ITF9cmV0dXJuIGV9ZnVuY3Rpb24gRWMoYSxiLGMpe2Zvcih2YXIgZD0wO2Q8YS5zdGF0ZS5rZXlNYXBzLmxlbmd0aDtkKyspe3ZhciBlPURkKGIsYS5zdGF0ZS5rZXlNYXBzW2RdLGMsYSk7aWYoZSlyZXR1cm4gZX1yZXR1cm4gYS5vcHRpb25zLmV4dHJhS2V5cyYmRGQoYixhLm9wdGlvbnMuZXh0cmFLZXlzLGMsYSl8fERkKGIsYS5vcHRpb25zLmtleU1hcCxjLGEpfWZ1bmN0aW9uIEdjKGEsYixjLGQpe3ZhciBlPWEuc3RhdGUua2V5U2VxO2lmKGUpe2lmKEVkKGIpKXJldHVybiJoYW5kbGVkIjtGYy5zZXQoNTAsZnVuY3Rpb24oKXthLnN0YXRlLmtleVNlcT09ZSYmKGEuc3RhdGUua2V5U2VxPW51bGwsZWMoYSkpfSksYj1lKyIgIitifXZhciBmPUVjKGEsYixkKTtyZXR1cm4ibXVsdGkiPT1mJiYoYS5zdGF0ZS5rZXlTZXE9YiksImhhbmRsZWQiPT1mJiZDZihhLCJrZXlIYW5kbGVkIixhLGIsYyksKCJoYW5kbGVkIj09Znx8Im11bHRpIj09ZikmJihzZihjKSxWYShhKSksZSYmIWYmJi9cJyQvLnRlc3QoYik/KHNmKGMpLCEwKTohIWZ9ZnVuY3Rpb24gSGMoYSxiKXt2YXIgYz1GZChiLCEwKTtyZXR1cm4gYz9iLnNoaWZ0S2V5JiYhYS5zdGF0ZS5rZXlTZXE/R2MoYSwiU2hpZnQtIitjLGIsZnVuY3Rpb24oYil7cmV0dXJuIERjKGEsYiwhMCl9KXx8R2MoYSxjLGIsZnVuY3Rpb24oYil7cmV0dXJuKCJzdHJpbmciPT10eXBlb2YgYj8vXmdvW0EtWl0vLnRlc3QoYik6Yi5tb3Rpb24pP0RjKGEsYik6dm9pZCAwfSk6R2MoYSxjLGIsZnVuY3Rpb24oYil7cmV0dXJuIERjKGEsYil9KTohMX1mdW5jdGlvbiBJYyhhLGIsYyl7cmV0dXJuIEdjKGEsIiciK2MrIiciLGIsZnVuY3Rpb24oYil7cmV0dXJuIERjKGEsYiwhMCl9KX1mdW5jdGlvbiBLYyhhKXt2YXIgYj10aGlzO2lmKGdjKGIpLCFFZihiLGEpKXtkJiYxMT5lJiYyNz09YS5rZXlDb2RlJiYoYS5yZXR1cm5WYWx1ZT0hMSk7dmFyIGM9YS5rZXlDb2RlO2IuZGlzcGxheS5zaGlmdD0xNj09Y3x8YS5zaGlmdEtleTt2YXIgZj1IYyhiLGEpO2kmJihKYz1mP2M6bnVsbCwhZiYmODg9PWMmJiF5ZyYmKHA/YS5tZXRhS2V5OmEuY3RybEtleSkmJmIucmVwbGFjZVNlbGVjdGlvbigiIixudWxsLCJjdXQiKSksMTghPWN8fC9cYkNvZGVNaXJyb3ItY3Jvc3NoYWlyXGIvLnRlc3QoYi5kaXNwbGF5LmxpbmVEaXYuY2xhc3NOYW1lKXx8TGMoYil9fWZ1bmN0aW9uIExjKGEpe2Z1bmN0aW9uIGMoYSl7MTghPWEua2V5Q29kZSYmYS5hbHRLZXl8fChrZyhiLCJDb2RlTWlycm9yLWNyb3NzaGFpciIpLHpmKGRvY3VtZW50LCJrZXl1cCIsYyksemYoZG9jdW1lbnQsIm1vdXNlb3ZlciIsYykpfXZhciBiPWEuZGlzcGxheS5saW5lRGl2O2xnKGIsIkNvZGVNaXJyb3ItY3Jvc3NoYWlyIikseWYoZG9jdW1lbnQsImtleXVwIixjKSx5Zihkb2N1bWVudCwibW91c2VvdmVyIixjKX1mdW5jdGlvbiBNYyhhKXsxNj09YS5rZXlDb2RlJiYodGhpcy5kb2Muc2VsLnNoaWZ0PSExKSxFZih0aGlzLGEpfWZ1bmN0aW9uIE5jKGEpe3ZhciBiPXRoaXM7aWYoIShFZihiLGEpfHxhLmN0cmxLZXkmJiFhLmFsdEtleXx8cCYmYS5tZXRhS2V5KSl7dmFyIGM9YS5rZXlDb2RlLGY9YS5jaGFyQ29kZTtpZihpJiZjPT1KYylyZXR1cm4gSmM9bnVsbCx2b2lkIHNmKGEpO2lmKCEoaSYmKCFhLndoaWNofHxhLndoaWNoPDEwKXx8ayl8fCFIYyhiLGEpKXt2YXIgZz1TdHJpbmcuZnJvbUNoYXJDb2RlKG51bGw9PWY/YzpmKTtJYyhiLGEsZyl8fChkJiZlPj05JiYoYi5kaXNwbGF5LmlucHV0SGFzU2VsZWN0aW9uPW51bGwpLGJjKGIpKX19fWZ1bmN0aW9uIE9jKGEpeyJub2N1cnNvciIhPWEub3B0aW9ucy5yZWFkT25seSYmKGEuc3RhdGUuZm9jdXNlZHx8KEFmKGEsImZvY3VzIixhKSxhLnN0YXRlLmZvY3VzZWQ9ITAsbGcoYS5kaXNwbGF5LndyYXBwZXIsIkNvZGVNaXJyb3ItZm9jdXNlZCIpLGEuY3VyT3B8fGEuZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudT09YS5kb2Muc2VsfHwoZWMoYSksZiYmc2V0VGltZW91dChZZihlYyxhLCEwKSwwKSkpLGFjKGEpLFZhKGEpKX1mdW5jdGlvbiBQYyhhKXthLnN0YXRlLmZvY3VzZWQmJihBZihhLCJibHVyIixhKSxhLnN0YXRlLmZvY3VzZWQ9ITEsa2coYS5kaXNwbGF5LndyYXBwZXIsIkNvZGVNaXJyb3ItZm9jdXNlZCIpKSxjbGVhckludGVydmFsKGEuZGlzcGxheS5ibGlua2VyKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5zdGF0ZS5mb2N1c2VkfHwoYS5kaXNwbGF5LnNoaWZ0PSExKX0sMTUwKX1mdW5jdGlvbiBRYyhhLGIpe2Z1bmN0aW9uIG0oKXtpZihudWxsIT1jLmlucHV0LnNlbGVjdGlvblN0YXJ0KXt2YXIgYj1hLnNvbWV0aGluZ1NlbGVjdGVkKCksZD1jLmlucHV0LnZhbHVlPSJcdTIwMGIiKyhiP2MuaW5wdXQudmFsdWU6IiIpO2MucHJldklucHV0PWI/IiI6Ilx1MjAwYiIsYy5pbnB1dC5zZWxlY3Rpb25TdGFydD0xLGMuaW5wdXQuc2VsZWN0aW9uRW5kPWQubGVuZ3RoLGMuc2VsRm9yQ29udGV4dE1lbnU9YS5kb2Muc2VsfX1mdW5jdGlvbiBuKCl7aWYoYy5jb250ZXh0TWVudVBlbmRpbmc9ITEsYy5pbnB1dERpdi5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiLGMuaW5wdXQuc3R5bGUuY3NzVGV4dD1rLGQmJjk+ZSYmYy5zY3JvbGxiYXJzLnNldFNjcm9sbFRvcChjLnNjcm9sbGVyLnNjcm9sbFRvcD1oKSxhYyhhKSxudWxsIT1jLmlucHV0LnNlbGVjdGlvblN0YXJ0KXsoIWR8fGQmJjk+ZSkmJm0oKTt2YXIgYj0wLGY9ZnVuY3Rpb24oKXtjLnNlbEZvckNvbnRleHRNZW51PT1hLmRvYy5zZWwmJjA9PWMuaW5wdXQuc2VsZWN0aW9uU3RhcnQ/UWIoYSxBZC5zZWxlY3RBbGwpKGEpOmIrKzwxMD9jLmRldGVjdGluZ1NlbGVjdEFsbD1zZXRUaW1lb3V0KGYsNTAwKTplYyhhKX07Yy5kZXRlY3RpbmdTZWxlY3RBbGw9c2V0VGltZW91dChmLDIwMCl9fWlmKCFFZihhLGIsImNvbnRleHRtZW51Iikpe3ZhciBjPWEuZGlzcGxheTtpZigha2MoYyxiKSYmIVJjKGEsYikpe3ZhciBnPWxjKGEsYiksaD1jLnNjcm9sbGVyLnNjcm9sbFRvcDtpZihnJiYhaSl7dmFyIGo9YS5vcHRpb25zLnJlc2V0U2VsZWN0aW9uT25Db250ZXh0TWVudTtqJiYtMT09YS5kb2Muc2VsLmNvbnRhaW5zKGcpJiZRYihhLEthKShhLmRvYyx4YShnKSxLZik7dmFyIGs9Yy5pbnB1dC5zdHlsZS5jc3NUZXh0O2lmKGMuaW5wdXREaXYuc3R5bGUucG9zaXRpb249ImFic29sdXRlIixjLmlucHV0LnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOiBmaXhlZDsgd2lkdGg6IDMwcHg7IGhlaWdodDogMzBweDsgdG9wOiAiKyhiLmNsaWVudFktNSkrInB4OyBsZWZ0OiAiKyhiLmNsaWVudFgtNSkrInB4OyB6LWluZGV4OiAxMDAwOyBiYWNrZ3JvdW5kOiAiKyhkPyJyZ2JhKDI1NSwgMjU1LCAyNTUsIC4wNSkiOiJ0cmFuc3BhcmVudCIpKyI7IG91dGxpbmU6IG5vbmU7IGJvcmRlci13aWR0aDogMDsgb3V0bGluZTogbm9uZTsgb3ZlcmZsb3c6IGhpZGRlbjsgb3BhY2l0eTogLjA1OyBmaWx0ZXI6IGFscGhhKG9wYWNpdHk9NSk7IixmKXZhciBsPXdpbmRvdy5zY3JvbGxZO2lmKGZjKGEpLGYmJndpbmRvdy5zY3JvbGxUbyhudWxsLGwpLGVjKGEpLGEuc29tZXRoaW5nU2VsZWN0ZWQoKXx8KGMuaW5wdXQudmFsdWU9Yy5wcmV2SW5wdXQ9IiAiKSxjLmNvbnRleHRNZW51UGVuZGluZz0hMCxjLnNlbEZvckNvbnRleHRNZW51PWEuZG9jLnNlbCxjbGVhclRpbWVvdXQoYy5kZXRlY3RpbmdTZWxlY3RBbGwpLGQmJmU+PTkmJm0oKSx0KXt2ZihiKTt2YXIgbz1mdW5jdGlvbigpe3pmKHdpbmRvdywibW91c2V1cCIsbyksc2V0VGltZW91dChuLDIwKX07eWYod2luZG93LCJtb3VzZXVwIixvKX1lbHNlIHNldFRpbWVvdXQobiw1MCl9fX19ZnVuY3Rpb24gUmMoYSxiKXtyZXR1cm4gR2YoYSwiZ3V0dGVyQ29udGV4dE1lbnUiKT9zYyhhLGIsImd1dHRlckNvbnRleHRNZW51IiwhMSxBZik6ITF9ZnVuY3Rpb24gVGMoYSxiKXtpZihxYShhLGIuZnJvbSk8MClyZXR1cm4gYTtpZihxYShhLGIudG8pPD0wKXJldHVybiBTYyhiKTt2YXIgYz1hLmxpbmUrYi50ZXh0Lmxlbmd0aC0oYi50by5saW5lLWIuZnJvbS5saW5lKS0xLGQ9YS5jaDtyZXR1cm4gYS5saW5lPT1iLnRvLmxpbmUmJihkKz1TYyhiKS5jaC1iLnRvLmNoKSxwYShjLGQpfWZ1bmN0aW9uIFVjKGEsYil7Zm9yKHZhciBjPVtdLGQ9MDtkPGEuc2VsLnJhbmdlcy5sZW5ndGg7ZCsrKXt2YXIgZT1hLnNlbC5yYW5nZXNbZF07Yy5wdXNoKG5ldyB2YShUYyhlLmFuY2hvcixiKSxUYyhlLmhlYWQsYikpKX1yZXR1cm4gd2EoYyxhLnNlbC5wcmltSW5kZXgpfWZ1bmN0aW9uIFZjKGEsYixjKXtyZXR1cm4gYS5saW5lPT1iLmxpbmU/cGEoYy5saW5lLGEuY2gtYi5jaCtjLmNoKTpwYShjLmxpbmUrKGEubGluZS1iLmxpbmUpLGEuY2gpfWZ1bmN0aW9uIFdjKGEsYixjKXtmb3IodmFyIGQ9W10sZT1wYShhLmZpcnN0LDApLGY9ZSxnPTA7ZzxiLmxlbmd0aDtnKyspe3ZhciBoPWJbZ10saT1WYyhoLmZyb20sZSxmKSxqPVZjKFNjKGgpLGUsZik7aWYoZT1oLnRvLGY9aiwiYXJvdW5kIj09Yyl7dmFyIGs9YS5zZWwucmFuZ2VzW2ddLGw9cWEoay5oZWFkLGsuYW5jaG9yKTwwO2RbZ109bmV3IHZhKGw/ajppLGw/aTpqKX1lbHNlIGRbZ109bmV3IHZhKGksaSl9cmV0dXJuIG5ldyB1YShkLGEuc2VsLnByaW1JbmRleCl9ZnVuY3Rpb24gWGMoYSxiLGMpe3ZhciBkPXtjYW5jZWxlZDohMSxmcm9tOmIuZnJvbSx0bzpiLnRvLHRleHQ6Yi50ZXh0LG9yaWdpbjpiLm9yaWdpbixjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbGVkPSEwfX07cmV0dXJuIGMmJihkLnVwZGF0ZT1mdW5jdGlvbihiLGMsZCxlKXtiJiYodGhpcy5mcm9tPXphKGEsYikpLGMmJih0aGlzLnRvPXphKGEsYykpLGQmJih0aGlzLnRleHQ9ZCksdm9pZCAwIT09ZSYmKHRoaXMub3JpZ2luPWUpfSksQWYoYSwiYmVmb3JlQ2hhbmdlIixhLGQpLGEuY20mJkFmKGEuY20sImJlZm9yZUNoYW5nZSIsYS5jbSxkKSxkLmNhbmNlbGVkP251bGw6e2Zyb206ZC5mcm9tLHRvOmQudG8sdGV4dDpkLnRleHQsb3JpZ2luOmQub3JpZ2lufX1mdW5jdGlvbiBZYyhhLGIsYyl7aWYoYS5jbSl7aWYoIWEuY20uY3VyT3ApcmV0dXJuIFFiKGEuY20sWWMpKGEsYixjKTtpZihhLmNtLnN0YXRlLnN1cHByZXNzRWRpdHMpcmV0dXJufWlmKCEoR2YoYSwiYmVmb3JlQ2hhbmdlIil8fGEuY20mJkdmKGEuY20sImJlZm9yZUNoYW5nZSIpKXx8KGI9WGMoYSxiLCEwKSkpe3ZhciBkPXUmJiFjJiZaZChhLGIuZnJvbSxiLnRvKTtpZihkKWZvcih2YXIgZT1kLmxlbmd0aC0xO2U+PTA7LS1lKVpjKGEse2Zyb206ZFtlXS5mcm9tLHRvOmRbZV0udG8sdGV4dDplP1siIl06Yi50ZXh0fSk7ZWxzZSBaYyhhLGIpfX1mdW5jdGlvbiBaYyhhLGIpe2lmKDEhPWIudGV4dC5sZW5ndGh8fCIiIT1iLnRleHRbMF18fDAhPXFhKGIuZnJvbSxiLnRvKSl7dmFyIGM9VWMoYSxiKTtnZihhLGIsYyxhLmNtP2EuY20uY3VyT3AuaWQ6TmFOKSxhZChhLGIsYyxXZChhLGIpKTt2YXIgZD1bXTtVZShhLGZ1bmN0aW9uKGEsYyl7Y3x8LTEhPVVmKGQsYS5oaXN0b3J5KXx8KHJmKGEuaGlzdG9yeSxiKSxkLnB1c2goYS5oaXN0b3J5KSksYWQoYSxiLG51bGwsV2QoYSxiKSl9KX19ZnVuY3Rpb24gJGMoYSxiLGMpe2lmKCFhLmNtfHwhYS5jbS5zdGF0ZS5zdXBwcmVzc0VkaXRzKXtmb3IodmFyIGUsZD1hLmhpc3RvcnksZj1hLnNlbCxnPSJ1bmRvIj09Yj9kLmRvbmU6ZC51bmRvbmUsaD0idW5kbyI9PWI/ZC51bmRvbmU6ZC5kb25lLGk9MDtpPGcubGVuZ3RoJiYoZT1nW2ldLGM/IWUucmFuZ2VzfHxlLmVxdWFscyhhLnNlbCk6ZS5yYW5nZXMpO2krKyk7aWYoaSE9Zy5sZW5ndGgpe2ZvcihkLmxhc3RPcmlnaW49ZC5sYXN0U2VsT3JpZ2luPW51bGw7ZT1nLnBvcCgpLGUucmFuZ2VzOyl7aWYoa2YoZSxoKSxjJiYhZS5lcXVhbHMoYS5zZWwpKXJldHVybiB2b2lkIEthKGEsZSx7Y2xlYXJSZWRvOiExfSk7Zj1lfXZhciBqPVtdO2tmKGYsaCksaC5wdXNoKHtjaGFuZ2VzOmosZ2VuZXJhdGlvbjpkLmdlbmVyYXRpb259KSxkLmdlbmVyYXRpb249ZS5nZW5lcmF0aW9ufHwrK2QubWF4R2VuZXJhdGlvbjtmb3IodmFyIGs9R2YoYSwiYmVmb3JlQ2hhbmdlIil8fGEuY20mJkdmKGEuY20sImJlZm9yZUNoYW5nZSIpLGk9ZS5jaGFuZ2VzLmxlbmd0aC0xO2k+PTA7LS1pKXt2YXIgbD1lLmNoYW5nZXNbaV07aWYobC5vcmlnaW49YixrJiYhWGMoYSxsLCExKSlyZXR1cm4gdm9pZChnLmxlbmd0aD0wKTtqLnB1c2goZGYoYSxsKSk7dmFyIG09aT9VYyhhLGwpOlNmKGcpO2FkKGEsbCxtLFlkKGEsbCkpLCFpJiZhLmNtJiZhLmNtLnNjcm9sbEludG9WaWV3KHtmcm9tOmwuZnJvbSx0bzpTYyhsKX0pO3ZhciBuPVtdO1VlKGEsZnVuY3Rpb24oYSxiKXtifHwtMSE9VWYobixhLmhpc3RvcnkpfHwocmYoYS5oaXN0b3J5LGwpLG4ucHVzaChhLmhpc3RvcnkpKSxhZChhLGwsbnVsbCxZZChhLGwpKX0pfX19fWZ1bmN0aW9uIF9jKGEsYil7aWYoMCE9YiYmKGEuZmlyc3QrPWIsYS5zZWw9bmV3IHVhKFZmKGEuc2VsLnJhbmdlcyxmdW5jdGlvbihhKXtyZXR1cm4gbmV3IHZhKHBhKGEuYW5jaG9yLmxpbmUrYixhLmFuY2hvci5jaCkscGEoYS5oZWFkLmxpbmUrYixhLmhlYWQuY2gpKX0pLGEuc2VsLnByaW1JbmRleCksYS5jbSkpe1ZiKGEuY20sYS5maXJzdCxhLmZpcnN0LWIsYik7Zm9yKHZhciBjPWEuY20uZGlzcGxheSxkPWMudmlld0Zyb207ZDxjLnZpZXdUbztkKyspV2IoYS5jbSxkLCJndXR0ZXIiKX19ZnVuY3Rpb24gYWQoYSxiLGMsZCl7aWYoYS5jbSYmIWEuY20uY3VyT3ApcmV0dXJuIFFiKGEuY20sYWQpKGEsYixjLGQpO2lmKGIudG8ubGluZTxhLmZpcnN0KXJldHVybiB2b2lkIF9jKGEsYi50ZXh0Lmxlbmd0aC0xLShiLnRvLmxpbmUtYi5mcm9tLmxpbmUpKTtpZighKGIuZnJvbS5saW5lPmEubGFzdExpbmUoKSkpe2lmKGIuZnJvbS5saW5lPGEuZmlyc3Qpe3ZhciBlPWIudGV4dC5sZW5ndGgtMS0oYS5maXJzdC1iLmZyb20ubGluZSk7X2MoYSxlKSxiPXtmcm9tOnBhKGEuZmlyc3QsMCksdG86cGEoYi50by5saW5lK2UsYi50by5jaCksdGV4dDpbU2YoYi50ZXh0KV0sb3JpZ2luOmIub3JpZ2lufX12YXIgZj1hLmxhc3RMaW5lKCk7Yi50by5saW5lPmYmJihiPXtmcm9tOmIuZnJvbSx0bzpwYShmLFdlKGEsZikudGV4dC5sZW5ndGgpLHRleHQ6W2IudGV4dFswXV0sb3JpZ2luOmIub3JpZ2lufSksYi5yZW1vdmVkPVhlKGEsYi5mcm9tLGIudG8pLGN8fChjPVVjKGEsYikpLGEuY20/YmQoYS5jbSxiLGQpOk5lKGEsYixkKSxMYShhLGMsS2YpfX1mdW5jdGlvbiBiZChhLGIsYyl7dmFyIGQ9YS5kb2MsZT1hLmRpc3BsYXksZj1iLmZyb20sZz1iLnRvLGg9ITEsaT1mLmxpbmU7YS5vcHRpb25zLmxpbmVXcmFwcGluZ3x8KGk9JGUoaGUoV2UoZCxmLmxpbmUpKSksZC5pdGVyKGksZy5saW5lKzEsZnVuY3Rpb24oYSl7cmV0dXJuIGE9PWUubWF4TGluZT8oaD0hMCwhMCk6dm9pZCAwfSkpLGQuc2VsLmNvbnRhaW5zKGIuZnJvbSxiLnRvKT4tMSYmRmYoYSksTmUoZCxiLGMsQihhKSksYS5vcHRpb25zLmxpbmVXcmFwcGluZ3x8KGQuaXRlcihpLGYubGluZStiLnRleHQubGVuZ3RoLGZ1bmN0aW9uKGEpe3ZhciBiPUgoYSk7Yj5lLm1heExpbmVMZW5ndGgmJihlLm1heExpbmU9YSxlLm1heExpbmVMZW5ndGg9YixlLm1heExpbmVDaGFuZ2VkPSEwLGg9ITEpfSksaCYmKGEuY3VyT3AudXBkYXRlTWF4TGluZT0hMCkpLGQuZnJvbnRpZXI9TWF0aC5taW4oZC5mcm9udGllcixmLmxpbmUpLFdhKGEsNDAwKTt2YXIgaj1iLnRleHQubGVuZ3RoLShnLmxpbmUtZi5saW5lKS0xO2IuZnVsbD9WYihhKTpmLmxpbmUhPWcubGluZXx8MSE9Yi50ZXh0Lmxlbmd0aHx8TWUoYS5kb2MsYik/VmIoYSxmLmxpbmUsZy5saW5lKzEsaik6V2IoYSxmLmxpbmUsInRleHQiKTt2YXIgaz1HZihhLCJjaGFuZ2VzIiksbD1HZihhLCJjaGFuZ2UiKTtpZihsfHxrKXt2YXIgbT17ZnJvbTpmLHRvOmcsdGV4dDpiLnRleHQscmVtb3ZlZDpiLnJlbW92ZWQsb3JpZ2luOmIub3JpZ2lufTtsJiZDZihhLCJjaGFuZ2UiLGEsbSksayYmKGEuY3VyT3AuY2hhbmdlT2Jqc3x8KGEuY3VyT3AuY2hhbmdlT2Jqcz1bXSkpLnB1c2gobSl9YS5kaXNwbGF5LnNlbEZvckNvbnRleHRNZW51PW51bGx9ZnVuY3Rpb24gY2QoYSxiLGMsZCxlKXtpZihkfHwoZD1jKSxxYShkLGMpPDApe3ZhciBmPWQ7ZD1jLGM9Zn0ic3RyaW5nIj09dHlwZW9mIGImJihiPXdnKGIpKSxZYyhhLHtmcm9tOmMsdG86ZCx0ZXh0OmIsb3JpZ2luOmV9KX1mdW5jdGlvbiBkZChhLGIpe2lmKCFFZihhLCJzY3JvbGxDdXJzb3JJbnRvVmlldyIpKXt2YXIgYz1hLmRpc3BsYXksZD1jLnNpemVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGU9bnVsbDtpZihiLnRvcCtkLnRvcDwwP2U9ITA6Yi5ib3R0b20rZC50b3A+KHdpbmRvdy5pbm5lckhlaWdodHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkmJihlPSExKSxudWxsIT1lJiYhbSl7dmFyIGY9ZGcoImRpdiIsIlx1MjAwYiIsbnVsbCwicG9zaXRpb246IGFic29sdXRlOyB0b3A6ICIrKGIudG9wLWMudmlld09mZnNldC0kYShhLmRpc3BsYXkpKSsicHg7IGhlaWdodDogIisoYi5ib3R0b20tYi50b3ArYmIoYSkrYy5iYXJIZWlnaHQpKyJweDsgbGVmdDogIitiLmxlZnQrInB4OyB3aWR0aDogMnB4OyIpO2EuZGlzcGxheS5saW5lU3BhY2UuYXBwZW5kQ2hpbGQoZiksZi5zY3JvbGxJbnRvVmlldyhlKSxhLmRpc3BsYXkubGluZVNwYWNlLnJlbW92ZUNoaWxkKGYpfX19ZnVuY3Rpb24gZWQoYSxiLGMsZCl7bnVsbD09ZCYmKGQ9MCk7Zm9yKHZhciBlPTA7NT5lO2UrKyl7dmFyIGY9ITEsZz13YihhLGIpLGg9YyYmYyE9Yj93YihhLGMpOmcsaT1nZChhLE1hdGgubWluKGcubGVmdCxoLmxlZnQpLE1hdGgubWluKGcudG9wLGgudG9wKS1kLE1hdGgubWF4KGcubGVmdCxoLmxlZnQpLE1hdGgubWF4KGcuYm90dG9tLGguYm90dG9tKStkKSxqPWEuZG9jLnNjcm9sbFRvcCxrPWEuZG9jLnNjcm9sbExlZnQ7aWYobnVsbCE9aS5zY3JvbGxUb3AmJih4YyhhLGkuc2Nyb2xsVG9wKSxNYXRoLmFicyhhLmRvYy5zY3JvbGxUb3Ataik+MSYmKGY9ITApKSxudWxsIT1pLnNjcm9sbExlZnQmJih5YyhhLGkuc2Nyb2xsTGVmdCksTWF0aC5hYnMoYS5kb2Muc2Nyb2xsTGVmdC1rKT4xJiYoZj0hMCkpLCFmKWJyZWFrfXJldHVybiBnfWZ1bmN0aW9uIGZkKGEsYixjLGQsZSl7dmFyIGY9Z2QoYSxiLGMsZCxlKTtudWxsIT1mLnNjcm9sbFRvcCYmeGMoYSxmLnNjcm9sbFRvcCksbnVsbCE9Zi5zY3JvbGxMZWZ0JiZ5YyhhLGYuc2Nyb2xsTGVmdCl9ZnVuY3Rpb24gZ2QoYSxiLGMsZCxlKXt2YXIgZj1hLmRpc3BsYXksZz1DYihhLmRpc3BsYXkpOzA+YyYmKGM9MCk7dmFyIGg9YS5jdXJPcCYmbnVsbCE9YS5jdXJPcC5zY3JvbGxUb3A/YS5jdXJPcC5zY3JvbGxUb3A6Zi5zY3JvbGxlci5zY3JvbGxUb3AsaT1kYihhKSxqPXt9O2UtYz5pJiYoZT1jK2kpO3ZhciBrPWEuZG9jLmhlaWdodCtfYShmKSxsPWc+YyxtPWU+ay1nO2lmKGg+YylqLnNjcm9sbFRvcD1sPzA6YztlbHNlIGlmKGU+aCtpKXt2YXIgbj1NYXRoLm1pbihjLChtP2s6ZSktaSk7biE9aCYmKGouc2Nyb2xsVG9wPW4pfXZhciBvPWEuY3VyT3AmJm51bGwhPWEuY3VyT3Auc2Nyb2xsTGVmdD9hLmN1ck9wLnNjcm9sbExlZnQ6Zi5zY3JvbGxlci5zY3JvbGxMZWZ0LHA9Y2IoYSktKGEub3B0aW9ucy5maXhlZEd1dHRlcj9mLmd1dHRlcnMub2Zmc2V0V2lkdGg6MCkscT1kLWI+cDtyZXR1cm4gcSYmKGQ9YitwKSwxMD5iP2ouc2Nyb2xsTGVmdD0wOm8+Yj9qLnNjcm9sbExlZnQ9TWF0aC5tYXgoMCxiLShxPzA6MTApKTpkPnArby0zJiYoai5zY3JvbGxMZWZ0PWQrKHE/MDoxMCktcCksan1mdW5jdGlvbiBoZChhLGIsYyl7KG51bGwhPWJ8fG51bGwhPWMpJiZqZChhKSxudWxsIT1iJiYoYS5jdXJPcC5zY3JvbGxMZWZ0PShudWxsPT1hLmN1ck9wLnNjcm9sbExlZnQ/YS5kb2Muc2Nyb2xsTGVmdDphLmN1ck9wLnNjcm9sbExlZnQpK2IpLG51bGwhPWMmJihhLmN1ck9wLnNjcm9sbFRvcD0obnVsbD09YS5jdXJPcC5zY3JvbGxUb3A/YS5kb2Muc2Nyb2xsVG9wOmEuY3VyT3Auc2Nyb2xsVG9wKStjKX1mdW5jdGlvbiBpZChhKXtqZChhKTt2YXIgYj1hLmdldEN1cnNvcigpLGM9YixkPWI7YS5vcHRpb25zLmxpbmVXcmFwcGluZ3x8KGM9Yi5jaD9wYShiLmxpbmUsYi5jaC0xKTpiLGQ9cGEoYi5saW5lLGIuY2grMSkpLGEuY3VyT3Auc2Nyb2xsVG9Qb3M9e2Zyb206Yyx0bzpkLG1hcmdpbjphLm9wdGlvbnMuY3Vyc29yU2Nyb2xsTWFyZ2luLGlzQ3Vyc29yOiEwfX1mdW5jdGlvbiBqZChhKXt2YXIgYj1hLmN1ck9wLnNjcm9sbFRvUG9zO2lmKGIpe2EuY3VyT3Auc2Nyb2xsVG9Qb3M9bnVsbDt2YXIgYz14YihhLGIuZnJvbSksZD14YihhLGIudG8pLGU9Z2QoYSxNYXRoLm1pbihjLmxlZnQsZC5sZWZ0KSxNYXRoLm1pbihjLnRvcCxkLnRvcCktYi5tYXJnaW4sTWF0aC5tYXgoYy5yaWdodCxkLnJpZ2h0KSxNYXRoLm1heChjLmJvdHRvbSxkLmJvdHRvbSkrYi5tYXJnaW4pO2Euc2Nyb2xsVG8oZS5zY3JvbGxMZWZ0LGUuc2Nyb2xsVG9wKX19ZnVuY3Rpb24ga2QoYSxiLGMsZCl7dmFyIGYsZT1hLmRvYztudWxsPT1jJiYoYz0iYWRkIiksInNtYXJ0Ij09YyYmKGUubW9kZS5pbmRlbnQ/Zj1aYShhLGIpOmM9InByZXYiKTt2YXIgZz1hLm9wdGlvbnMudGFiU2l6ZSxoPVdlKGUsYiksaT1PZihoLnRleHQsbnVsbCxnKTtoLnN0YXRlQWZ0ZXImJihoLnN0YXRlQWZ0ZXI9bnVsbCk7dmFyIGssaj1oLnRleHQubWF0Y2goL15ccyovKVswXTtpZihkfHwvXFMvLnRlc3QoaC50ZXh0KSl7aWYoInNtYXJ0Ij09YyYmKGs9ZS5tb2RlLmluZGVudChmLGgudGV4dC5zbGljZShqLmxlbmd0aCksaC50ZXh0KSxrPT1KZnx8az4xNTApKXtpZighZClyZXR1cm47Yz0icHJldiJ9fWVsc2Ugaz0wLGM9Im5vdCI7InByZXYiPT1jP2s9Yj5lLmZpcnN0P09mKFdlKGUsYi0xKS50ZXh0LG51bGwsZyk6MDoiYWRkIj09Yz9rPWkrYS5vcHRpb25zLmluZGVudFVuaXQ6InN1YnRyYWN0Ij09Yz9rPWktYS5vcHRpb25zLmluZGVudFVuaXQ6Im51bWJlciI9PXR5cGVvZiBjJiYoaz1pK2MpLGs9TWF0aC5tYXgoMCxrKTt2YXIgbD0iIixtPTA7aWYoYS5vcHRpb25zLmluZGVudFdpdGhUYWJzKWZvcih2YXIgbj1NYXRoLmZsb29yKGsvZyk7bjstLW4pbSs9ZyxsKz0iCSI7aWYoaz5tJiYobCs9UmYoay1tKSksbCE9ailjZChlLGwscGEoYiwwKSxwYShiLGoubGVuZ3RoKSwiK2lucHV0Iik7ZWxzZSBmb3IodmFyIG49MDtuPGUuc2VsLnJhbmdlcy5sZW5ndGg7bisrKXt2YXIgbz1lLnNlbC5yYW5nZXNbbl07aWYoby5oZWFkLmxpbmU9PWImJm8uaGVhZC5jaDxqLmxlbmd0aCl7dmFyIG09cGEoYixqLmxlbmd0aCk7R2EoZSxuLG5ldyB2YShtLG0pKTticmVha319aC5zdGF0ZUFmdGVyPW51bGx9ZnVuY3Rpb24gbGQoYSxiLGMsZCl7dmFyIGU9YixmPWI7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBiP2Y9V2UoYSx5YShhLGIpKTplPSRlKGIpLG51bGw9PWU/bnVsbDooZChmLGUpJiZhLmNtJiZXYihhLmNtLGUsYyksZil9ZnVuY3Rpb24gbWQoYSxiKXtmb3IodmFyIGM9YS5kb2Muc2VsLnJhbmdlcyxkPVtdLGU9MDtlPGMubGVuZ3RoO2UrKyl7Zm9yKHZhciBmPWIoY1tlXSk7ZC5sZW5ndGgmJnFhKGYuZnJvbSxTZihkKS50byk8PTA7KXt2YXIgZz1kLnBvcCgpO2lmKHFhKGcuZnJvbSxmLmZyb20pPDApe2YuZnJvbT1nLmZyb207YnJlYWt9fWQucHVzaChmKX1QYihhLGZ1bmN0aW9uKCl7Zm9yKHZhciBiPWQubGVuZ3RoLTE7Yj49MDtiLS0pY2QoYS5kb2MsIiIsZFtiXS5mcm9tLGRbYl0udG8sIitkZWxldGUiKTtpZChhKX0pfWZ1bmN0aW9uIG5kKGEsYixjLGQsZSl7ZnVuY3Rpb24gaygpe3ZhciBiPWYrYztyZXR1cm4gYjxhLmZpcnN0fHxiPj1hLmZpcnN0K2Euc2l6ZT9qPSExOihmPWIsaT1XZShhLGIpKX1mdW5jdGlvbiBsKGEpe3ZhciBiPShlP09nOlBnKShpLGcsYywhMCk7aWYobnVsbD09Yil7aWYoYXx8IWsoKSlyZXR1cm4gaj0hMTtnPWU/KDA+Yz9HZzpGZykoaSk6MD5jP2kudGV4dC5sZW5ndGg6MH1lbHNlIGc9YjtyZXR1cm4hMH12YXIgZj1iLmxpbmUsZz1iLmNoLGg9YyxpPVdlKGEsZiksaj0hMDtpZigiY2hhciI9PWQpbCgpO2Vsc2UgaWYoImNvbHVtbiI9PWQpbCghMCk7ZWxzZSBpZigid29yZCI9PWR8fCJncm91cCI9PWQpZm9yKHZhciBtPW51bGwsbj0iZ3JvdXAiPT1kLG89YS5jbSYmYS5jbS5nZXRIZWxwZXIoYiwid29yZENoYXJzIikscD0hMDshKDA+Yyl8fGwoIXApO3A9ITEpe3ZhciBxPWkudGV4dC5jaGFyQXQoZyl8fCJcbiIscj1fZihxLG8pPyJ3IjpuJiYiXG4iPT1xPyJuIjohbnx8L1xzLy50ZXN0KHEpP251bGw6InAiO2lmKCFufHxwfHxyfHwocj0icyIpLG0mJm0hPXIpezA+YyYmKGM9MSxsKCkpO2JyZWFrfWlmKHImJihtPXIpLGM+MCYmIWwoIXApKWJyZWFrfXZhciBzPVBhKGEscGEoZixnKSxoLCEwKTtyZXR1cm4ganx8KHMuaGl0U2lkZT0hMCksc31mdW5jdGlvbiBvZChhLGIsYyxkKXt2YXIgZyxlPWEuZG9jLGY9Yi5sZWZ0O2lmKCJwYWdlIj09ZCl7dmFyIGg9TWF0aC5taW4oYS5kaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0LHdpbmRvdy5pbm5lckhlaWdodHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCk7Zz1iLnRvcCtjKihoLSgwPmM/MS41Oi41KSpDYihhLmRpc3BsYXkpKX1lbHNlImxpbmUiPT1kJiYoZz1jPjA/Yi5ib3R0b20rMzpiLnRvcC0zKTtmb3IoOzspe3ZhciBpPXpiKGEsZixnKTtpZighaS5vdXRzaWRlKWJyZWFrO2lmKDA+Yz8wPj1nOmc+PWUuaGVpZ2h0KXtpLmhpdFNpZGU9ITA7YnJlYWt9Zys9NSpjfXJldHVybiBpfWZ1bmN0aW9uIHJkKGEsYixjLGQpe3cuZGVmYXVsdHNbYV09YixjJiYocWRbYV09ZD9mdW5jdGlvbihhLGIsZCl7ZCE9c2QmJmMoYSxiLGQpfTpjKX1mdW5jdGlvbiBDZChhKXtmb3IodmFyIGMsZCxlLGYsYj1hLnNwbGl0KC8tKD8hJCkvKSxhPWJbYi5sZW5ndGgtMV0sZz0wO2c8Yi5sZW5ndGgtMTtnKyspewp2YXIgaD1iW2ddO2lmKC9eKGNtZHxtZXRhfG0pJC9pLnRlc3QoaCkpZj0hMDtlbHNlIGlmKC9eYShsdCk/JC9pLnRlc3QoaCkpYz0hMDtlbHNlIGlmKC9eKGN8Y3RybHxjb250cm9sKSQvaS50ZXN0KGgpKWQ9ITA7ZWxzZXtpZighL15zKGhpZnQpJC9pLnRlc3QoaCkpdGhyb3cgbmV3IEVycm9yKCJVbnJlY29nbml6ZWQgbW9kaWZpZXIgbmFtZTogIitoKTtlPSEwfX1yZXR1cm4gYyYmKGE9IkFsdC0iK2EpLGQmJihhPSJDdHJsLSIrYSksZiYmKGE9IkNtZC0iK2EpLGUmJihhPSJTaGlmdC0iK2EpLGF9ZnVuY3Rpb24gR2QoYSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBhP0JkW2FdOmF9ZnVuY3Rpb24gS2QoYSxiLGMsZCxlKXtpZihkJiZkLnNoYXJlZClyZXR1cm4gTWQoYSxiLGMsZCxlKTtpZihhLmNtJiYhYS5jbS5jdXJPcClyZXR1cm4gUWIoYS5jbSxLZCkoYSxiLGMsZCxlKTt2YXIgZj1uZXcgSWQoYSxlKSxnPXFhKGIsYyk7aWYoZCYmWGYoZCxmLCExKSxnPjB8fDA9PWcmJmYuY2xlYXJXaGVuRW1wdHkhPT0hMSlyZXR1cm4gZjtpZihmLnJlcGxhY2VkV2l0aCYmKGYuY29sbGFwc2VkPSEwLGYud2lkZ2V0Tm9kZT1kZygic3BhbiIsW2YucmVwbGFjZWRXaXRoXSwiQ29kZU1pcnJvci13aWRnZXQiKSxkLmhhbmRsZU1vdXNlRXZlbnRzfHxmLndpZGdldE5vZGUuc2V0QXR0cmlidXRlKCJjbS1pZ25vcmUtZXZlbnRzIiwidHJ1ZSIpLGQuaW5zZXJ0TGVmdCYmKGYud2lkZ2V0Tm9kZS5pbnNlcnRMZWZ0PSEwKSksZi5jb2xsYXBzZWQpe2lmKGdlKGEsYi5saW5lLGIsYyxmKXx8Yi5saW5lIT1jLmxpbmUmJmdlKGEsYy5saW5lLGIsYyxmKSl0aHJvdyBuZXcgRXJyb3IoIkluc2VydGluZyBjb2xsYXBzZWQgbWFya2VyIHBhcnRpYWxseSBvdmVybGFwcGluZyBhbiBleGlzdGluZyBvbmUiKTt2PSEwfWYuYWRkVG9IaXN0b3J5JiZnZihhLHtmcm9tOmIsdG86YyxvcmlnaW46Im1hcmtUZXh0In0sYS5zZWwsTmFOKTt2YXIgaixoPWIubGluZSxpPWEuY207aWYoYS5pdGVyKGgsYy5saW5lKzEsZnVuY3Rpb24oYSl7aSYmZi5jb2xsYXBzZWQmJiFpLm9wdGlvbnMubGluZVdyYXBwaW5nJiZoZShhKT09aS5kaXNwbGF5Lm1heExpbmUmJihqPSEwKSxmLmNvbGxhcHNlZCYmaCE9Yi5saW5lJiZaZShhLDApLFRkKGEsbmV3IFFkKGYsaD09Yi5saW5lP2IuY2g6bnVsbCxoPT1jLmxpbmU/Yy5jaDpudWxsKSksKytofSksZi5jb2xsYXBzZWQmJmEuaXRlcihiLmxpbmUsYy5saW5lKzEsZnVuY3Rpb24oYil7bGUoYSxiKSYmWmUoYiwwKX0pLGYuY2xlYXJPbkVudGVyJiZ5ZihmLCJiZWZvcmVDdXJzb3JFbnRlciIsZnVuY3Rpb24oKXtmLmNsZWFyKCl9KSxmLnJlYWRPbmx5JiYodT0hMCwoYS5oaXN0b3J5LmRvbmUubGVuZ3RofHxhLmhpc3RvcnkudW5kb25lLmxlbmd0aCkmJmEuY2xlYXJIaXN0b3J5KCkpLGYuY29sbGFwc2VkJiYoZi5pZD0rK0pkLGYuYXRvbWljPSEwKSxpKXtpZihqJiYoaS5jdXJPcC51cGRhdGVNYXhMaW5lPSEwKSxmLmNvbGxhcHNlZClWYihpLGIubGluZSxjLmxpbmUrMSk7ZWxzZSBpZihmLmNsYXNzTmFtZXx8Zi50aXRsZXx8Zi5zdGFydFN0eWxlfHxmLmVuZFN0eWxlfHxmLmNzcylmb3IodmFyIGs9Yi5saW5lO2s8PWMubGluZTtrKyspV2IoaSxrLCJ0ZXh0Iik7Zi5hdG9taWMmJk5hKGkuZG9jKSxDZihpLCJtYXJrZXJBZGRlZCIsaSxmKX1yZXR1cm4gZn1mdW5jdGlvbiBNZChhLGIsYyxkLGUpe2Q9WGYoZCksZC5zaGFyZWQ9ITE7dmFyIGY9W0tkKGEsYixjLGQsZSldLGc9ZlswXSxoPWQud2lkZ2V0Tm9kZTtyZXR1cm4gVWUoYSxmdW5jdGlvbihhKXtoJiYoZC53aWRnZXROb2RlPWguY2xvbmVOb2RlKCEwKSksZi5wdXNoKEtkKGEsemEoYSxiKSx6YShhLGMpLGQsZSkpO2Zvcih2YXIgaT0wO2k8YS5saW5rZWQubGVuZ3RoOysraSlpZihhLmxpbmtlZFtpXS5pc1BhcmVudClyZXR1cm47Zz1TZihmKX0pLG5ldyBMZChmLGcpfWZ1bmN0aW9uIE5kKGEpe3JldHVybiBhLmZpbmRNYXJrcyhwYShhLmZpcnN0LDApLGEuY2xpcFBvcyhwYShhLmxhc3RMaW5lKCkpKSxmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnR9KX1mdW5jdGlvbiBPZChhLGIpe2Zvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdLGU9ZC5maW5kKCksZj1hLmNsaXBQb3MoZS5mcm9tKSxnPWEuY2xpcFBvcyhlLnRvKTtpZihxYShmLGcpKXt2YXIgaD1LZChhLGYsZyxkLnByaW1hcnksZC5wcmltYXJ5LnR5cGUpO2QubWFya2Vycy5wdXNoKGgpLGgucGFyZW50PWR9fX1mdW5jdGlvbiBQZChhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9YVtiXSxkPVtjLnByaW1hcnkuZG9jXTtVZShjLnByaW1hcnkuZG9jLGZ1bmN0aW9uKGEpe2QucHVzaChhKX0pO2Zvcih2YXIgZT0wO2U8Yy5tYXJrZXJzLmxlbmd0aDtlKyspe3ZhciBmPWMubWFya2Vyc1tlXTstMT09VWYoZCxmLmRvYykmJihmLnBhcmVudD1udWxsLGMubWFya2Vycy5zcGxpY2UoZS0tLDEpKX19fWZ1bmN0aW9uIFFkKGEsYixjKXt0aGlzLm1hcmtlcj1hLHRoaXMuZnJvbT1iLHRoaXMudG89Y31mdW5jdGlvbiBSZChhLGIpe2lmKGEpZm9yKHZhciBjPTA7YzxhLmxlbmd0aDsrK2Mpe3ZhciBkPWFbY107aWYoZC5tYXJrZXI9PWIpcmV0dXJuIGR9fWZ1bmN0aW9uIFNkKGEsYil7Zm9yKHZhciBjLGQ9MDtkPGEubGVuZ3RoOysrZClhW2RdIT1iJiYoY3x8KGM9W10pKS5wdXNoKGFbZF0pO3JldHVybiBjfWZ1bmN0aW9uIFRkKGEsYil7YS5tYXJrZWRTcGFucz1hLm1hcmtlZFNwYW5zP2EubWFya2VkU3BhbnMuY29uY2F0KFtiXSk6W2JdLGIubWFya2VyLmF0dGFjaExpbmUoYSl9ZnVuY3Rpb24gVWQoYSxiLGMpe2lmKGEpZm9yKHZhciBlLGQ9MDtkPGEubGVuZ3RoOysrZCl7dmFyIGY9YVtkXSxnPWYubWFya2VyLGg9bnVsbD09Zi5mcm9tfHwoZy5pbmNsdXNpdmVMZWZ0P2YuZnJvbTw9YjpmLmZyb208Yik7aWYoaHx8Zi5mcm9tPT1iJiYiYm9va21hcmsiPT1nLnR5cGUmJighY3x8IWYubWFya2VyLmluc2VydExlZnQpKXt2YXIgaT1udWxsPT1mLnRvfHwoZy5pbmNsdXNpdmVSaWdodD9mLnRvPj1iOmYudG8+Yik7KGV8fChlPVtdKSkucHVzaChuZXcgUWQoZyxmLmZyb20saT9udWxsOmYudG8pKX19cmV0dXJuIGV9ZnVuY3Rpb24gVmQoYSxiLGMpe2lmKGEpZm9yKHZhciBlLGQ9MDtkPGEubGVuZ3RoOysrZCl7dmFyIGY9YVtkXSxnPWYubWFya2VyLGg9bnVsbD09Zi50b3x8KGcuaW5jbHVzaXZlUmlnaHQ/Zi50bz49YjpmLnRvPmIpO2lmKGh8fGYuZnJvbT09YiYmImJvb2ttYXJrIj09Zy50eXBlJiYoIWN8fGYubWFya2VyLmluc2VydExlZnQpKXt2YXIgaT1udWxsPT1mLmZyb218fChnLmluY2x1c2l2ZUxlZnQ/Zi5mcm9tPD1iOmYuZnJvbTxiKTsoZXx8KGU9W10pKS5wdXNoKG5ldyBRZChnLGk/bnVsbDpmLmZyb20tYixudWxsPT1mLnRvP251bGw6Zi50by1iKSl9fXJldHVybiBlfWZ1bmN0aW9uIFdkKGEsYil7aWYoYi5mdWxsKXJldHVybiBudWxsO3ZhciBjPUJhKGEsYi5mcm9tLmxpbmUpJiZXZShhLGIuZnJvbS5saW5lKS5tYXJrZWRTcGFucyxkPUJhKGEsYi50by5saW5lKSYmV2UoYSxiLnRvLmxpbmUpLm1hcmtlZFNwYW5zO2lmKCFjJiYhZClyZXR1cm4gbnVsbDt2YXIgZT1iLmZyb20uY2gsZj1iLnRvLmNoLGc9MD09cWEoYi5mcm9tLGIudG8pLGg9VWQoYyxlLGcpLGk9VmQoZCxmLGcpLGo9MT09Yi50ZXh0Lmxlbmd0aCxrPVNmKGIudGV4dCkubGVuZ3RoKyhqP2U6MCk7aWYoaClmb3IodmFyIGw9MDtsPGgubGVuZ3RoOysrbCl7dmFyIG09aFtsXTtpZihudWxsPT1tLnRvKXt2YXIgbj1SZChpLG0ubWFya2VyKTtuP2omJihtLnRvPW51bGw9PW4udG8/bnVsbDpuLnRvK2spOm0udG89ZX19aWYoaSlmb3IodmFyIGw9MDtsPGkubGVuZ3RoOysrbCl7dmFyIG09aVtsXTtpZihudWxsIT1tLnRvJiYobS50bys9ayksbnVsbD09bS5mcm9tKXt2YXIgbj1SZChoLG0ubWFya2VyKTtufHwobS5mcm9tPWssaiYmKGh8fChoPVtdKSkucHVzaChtKSl9ZWxzZSBtLmZyb20rPWssaiYmKGh8fChoPVtdKSkucHVzaChtKX1oJiYoaD1YZChoKSksaSYmaSE9aCYmKGk9WGQoaSkpO3ZhciBvPVtoXTtpZighail7dmFyIHEscD1iLnRleHQubGVuZ3RoLTI7aWYocD4wJiZoKWZvcih2YXIgbD0wO2w8aC5sZW5ndGg7KytsKW51bGw9PWhbbF0udG8mJihxfHwocT1bXSkpLnB1c2gobmV3IFFkKGhbbF0ubWFya2VyLG51bGwsbnVsbCkpO2Zvcih2YXIgbD0wO3A+bDsrK2wpby5wdXNoKHEpO28ucHVzaChpKX1yZXR1cm4gb31mdW5jdGlvbiBYZChhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoOysrYil7dmFyIGM9YVtiXTtudWxsIT1jLmZyb20mJmMuZnJvbT09Yy50byYmYy5tYXJrZXIuY2xlYXJXaGVuRW1wdHkhPT0hMSYmYS5zcGxpY2UoYi0tLDEpfXJldHVybiBhLmxlbmd0aD9hOm51bGx9ZnVuY3Rpb24gWWQoYSxiKXt2YXIgYz1uZihhLGIpLGQ9V2QoYSxiKTtpZighYylyZXR1cm4gZDtpZighZClyZXR1cm4gYztmb3IodmFyIGU9MDtlPGMubGVuZ3RoOysrZSl7dmFyIGY9Y1tlXSxnPWRbZV07aWYoZiYmZylhOmZvcih2YXIgaD0wO2g8Zy5sZW5ndGg7KytoKXtmb3IodmFyIGk9Z1toXSxqPTA7ajxmLmxlbmd0aDsrK2opaWYoZltqXS5tYXJrZXI9PWkubWFya2VyKWNvbnRpbnVlIGE7Zi5wdXNoKGkpfWVsc2UgZyYmKGNbZV09Zyl9cmV0dXJuIGN9ZnVuY3Rpb24gWmQoYSxiLGMpe3ZhciBkPW51bGw7aWYoYS5pdGVyKGIubGluZSxjLmxpbmUrMSxmdW5jdGlvbihhKXtpZihhLm1hcmtlZFNwYW5zKWZvcih2YXIgYj0wO2I8YS5tYXJrZWRTcGFucy5sZW5ndGg7KytiKXt2YXIgYz1hLm1hcmtlZFNwYW5zW2JdLm1hcmtlcjshYy5yZWFkT25seXx8ZCYmLTEhPVVmKGQsYyl8fChkfHwoZD1bXSkpLnB1c2goYyl9fSksIWQpcmV0dXJuIG51bGw7Zm9yKHZhciBlPVt7ZnJvbTpiLHRvOmN9XSxmPTA7ZjxkLmxlbmd0aDsrK2YpZm9yKHZhciBnPWRbZl0saD1nLmZpbmQoMCksaT0wO2k8ZS5sZW5ndGg7KytpKXt2YXIgaj1lW2ldO2lmKCEocWEoai50byxoLmZyb20pPDB8fHFhKGouZnJvbSxoLnRvKT4wKSl7dmFyIGs9W2ksMV0sbD1xYShqLmZyb20saC5mcm9tKSxtPXFhKGoudG8saC50byk7KDA+bHx8IWcuaW5jbHVzaXZlTGVmdCYmIWwpJiZrLnB1c2goe2Zyb206ai5mcm9tLHRvOmguZnJvbX0pLChtPjB8fCFnLmluY2x1c2l2ZVJpZ2h0JiYhbSkmJmsucHVzaCh7ZnJvbTpoLnRvLHRvOmoudG99KSxlLnNwbGljZS5hcHBseShlLGspLGkrPWsubGVuZ3RoLTF9fXJldHVybiBlfWZ1bmN0aW9uICRkKGEpe3ZhciBiPWEubWFya2VkU3BhbnM7aWYoYil7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDsrK2MpYltjXS5tYXJrZXIuZGV0YWNoTGluZShhKTthLm1hcmtlZFNwYW5zPW51bGx9fWZ1bmN0aW9uIF9kKGEsYil7aWYoYil7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDsrK2MpYltjXS5tYXJrZXIuYXR0YWNoTGluZShhKTthLm1hcmtlZFNwYW5zPWJ9fWZ1bmN0aW9uIGFlKGEpe3JldHVybiBhLmluY2x1c2l2ZUxlZnQ/LTE6MH1mdW5jdGlvbiBiZShhKXtyZXR1cm4gYS5pbmNsdXNpdmVSaWdodD8xOjB9ZnVuY3Rpb24gY2UoYSxiKXt2YXIgYz1hLmxpbmVzLmxlbmd0aC1iLmxpbmVzLmxlbmd0aDtpZigwIT1jKXJldHVybiBjO3ZhciBkPWEuZmluZCgpLGU9Yi5maW5kKCksZj1xYShkLmZyb20sZS5mcm9tKXx8YWUoYSktYWUoYik7aWYoZilyZXR1cm4tZjt2YXIgZz1xYShkLnRvLGUudG8pfHxiZShhKS1iZShiKTtyZXR1cm4gZz9nOmIuaWQtYS5pZH1mdW5jdGlvbiBkZShhLGIpe3ZhciBkLGM9diYmYS5tYXJrZWRTcGFucztpZihjKWZvcih2YXIgZSxmPTA7ZjxjLmxlbmd0aDsrK2YpZT1jW2ZdLGUubWFya2VyLmNvbGxhcHNlZCYmbnVsbD09KGI/ZS5mcm9tOmUudG8pJiYoIWR8fGNlKGQsZS5tYXJrZXIpPDApJiYoZD1lLm1hcmtlcik7cmV0dXJuIGR9ZnVuY3Rpb24gZWUoYSl7cmV0dXJuIGRlKGEsITApfWZ1bmN0aW9uIGZlKGEpe3JldHVybiBkZShhLCExKX1mdW5jdGlvbiBnZShhLGIsYyxkLGUpe3ZhciBmPVdlKGEsYiksZz12JiZmLm1hcmtlZFNwYW5zO2lmKGcpZm9yKHZhciBoPTA7aDxnLmxlbmd0aDsrK2gpe3ZhciBpPWdbaF07aWYoaS5tYXJrZXIuY29sbGFwc2VkKXt2YXIgaj1pLm1hcmtlci5maW5kKDApLGs9cWEoai5mcm9tLGMpfHxhZShpLm1hcmtlciktYWUoZSksbD1xYShqLnRvLGQpfHxiZShpLm1hcmtlciktYmUoZSk7aWYoIShrPj0wJiYwPj1sfHwwPj1rJiZsPj0wKSYmKDA+PWsmJihxYShqLnRvLGMpPjB8fGkubWFya2VyLmluY2x1c2l2ZVJpZ2h0JiZlLmluY2x1c2l2ZUxlZnQpfHxrPj0wJiYocWEoai5mcm9tLGQpPDB8fGkubWFya2VyLmluY2x1c2l2ZUxlZnQmJmUuaW5jbHVzaXZlUmlnaHQpKSlyZXR1cm4hMH19fWZ1bmN0aW9uIGhlKGEpe2Zvcih2YXIgYjtiPWVlKGEpOylhPWIuZmluZCgtMSwhMCkubGluZTtyZXR1cm4gYX1mdW5jdGlvbiBpZShhKXtmb3IodmFyIGIsYztiPWZlKGEpOylhPWIuZmluZCgxLCEwKS5saW5lLChjfHwoYz1bXSkpLnB1c2goYSk7cmV0dXJuIGN9ZnVuY3Rpb24gamUoYSxiKXt2YXIgYz1XZShhLGIpLGQ9aGUoYyk7cmV0dXJuIGM9PWQ/YjokZShkKX1mdW5jdGlvbiBrZShhLGIpe2lmKGI+YS5sYXN0TGluZSgpKXJldHVybiBiO3ZhciBkLGM9V2UoYSxiKTtpZighbGUoYSxjKSlyZXR1cm4gYjtmb3IoO2Q9ZmUoYyk7KWM9ZC5maW5kKDEsITApLmxpbmU7cmV0dXJuICRlKGMpKzF9ZnVuY3Rpb24gbGUoYSxiKXt2YXIgYz12JiZiLm1hcmtlZFNwYW5zO2lmKGMpZm9yKHZhciBkLGU9MDtlPGMubGVuZ3RoOysrZSlpZihkPWNbZV0sZC5tYXJrZXIuY29sbGFwc2VkKXtpZihudWxsPT1kLmZyb20pcmV0dXJuITA7aWYoIWQubWFya2VyLndpZGdldE5vZGUmJjA9PWQuZnJvbSYmZC5tYXJrZXIuaW5jbHVzaXZlTGVmdCYmbWUoYSxiLGQpKXJldHVybiEwfX1mdW5jdGlvbiBtZShhLGIsYyl7aWYobnVsbD09Yy50byl7dmFyIGQ9Yy5tYXJrZXIuZmluZCgxLCEwKTtyZXR1cm4gbWUoYSxkLmxpbmUsUmQoZC5saW5lLm1hcmtlZFNwYW5zLGMubWFya2VyKSl9aWYoYy5tYXJrZXIuaW5jbHVzaXZlUmlnaHQmJmMudG89PWIudGV4dC5sZW5ndGgpcmV0dXJuITA7Zm9yKHZhciBlLGY9MDtmPGIubWFya2VkU3BhbnMubGVuZ3RoOysrZilpZihlPWIubWFya2VkU3BhbnNbZl0sZS5tYXJrZXIuY29sbGFwc2VkJiYhZS5tYXJrZXIud2lkZ2V0Tm9kZSYmZS5mcm9tPT1jLnRvJiYobnVsbD09ZS50b3x8ZS50byE9Yy5mcm9tKSYmKGUubWFya2VyLmluY2x1c2l2ZUxlZnR8fGMubWFya2VyLmluY2x1c2l2ZVJpZ2h0KSYmbWUoYSxiLGUpKXJldHVybiEwfWZ1bmN0aW9uIG9lKGEsYixjKXthZihiKTwoYS5jdXJPcCYmYS5jdXJPcC5zY3JvbGxUb3B8fGEuZG9jLnNjcm9sbFRvcCkmJmhkKGEsbnVsbCxjKX1mdW5jdGlvbiBwZShhKXtpZihudWxsIT1hLmhlaWdodClyZXR1cm4gYS5oZWlnaHQ7aWYoIWhnKGRvY3VtZW50LmJvZHksYS5ub2RlKSl7dmFyIGI9InBvc2l0aW9uOiByZWxhdGl2ZTsiO2EuY292ZXJHdXR0ZXImJihiKz0ibWFyZ2luLWxlZnQ6IC0iK2EuY20uZGlzcGxheS5ndXR0ZXJzLm9mZnNldFdpZHRoKyJweDsiKSxhLm5vSFNjcm9sbCYmKGIrPSJ3aWR0aDogIithLmNtLmRpc3BsYXkud3JhcHBlci5jbGllbnRXaWR0aCsicHg7IiksZ2coYS5jbS5kaXNwbGF5Lm1lYXN1cmUsZGcoImRpdiIsW2Eubm9kZV0sbnVsbCxiKSl9cmV0dXJuIGEuaGVpZ2h0PWEubm9kZS5vZmZzZXRIZWlnaHR9ZnVuY3Rpb24gcWUoYSxiLGMsZCl7dmFyIGU9bmV3IG5lKGEsYyxkKTtyZXR1cm4gZS5ub0hTY3JvbGwmJihhLmRpc3BsYXkuYWxpZ25XaWRnZXRzPSEwKSxsZChhLmRvYyxiLCJ3aWRnZXQiLGZ1bmN0aW9uKGIpe3ZhciBjPWIud2lkZ2V0c3x8KGIud2lkZ2V0cz1bXSk7aWYobnVsbD09ZS5pbnNlcnRBdD9jLnB1c2goZSk6Yy5zcGxpY2UoTWF0aC5taW4oYy5sZW5ndGgtMSxNYXRoLm1heCgwLGUuaW5zZXJ0QXQpKSwwLGUpLGUubGluZT1iLCFsZShhLmRvYyxiKSl7dmFyIGQ9YWYoYik8YS5kb2Muc2Nyb2xsVG9wO1plKGIsYi5oZWlnaHQrcGUoZSkpLGQmJmhkKGEsbnVsbCxlLmhlaWdodCksYS5jdXJPcC5mb3JjZVVwZGF0ZT0hMH1yZXR1cm4hMH0pLGV9ZnVuY3Rpb24gc2UoYSxiLGMsZCl7YS50ZXh0PWIsYS5zdGF0ZUFmdGVyJiYoYS5zdGF0ZUFmdGVyPW51bGwpLGEuc3R5bGVzJiYoYS5zdHlsZXM9bnVsbCksbnVsbCE9YS5vcmRlciYmKGEub3JkZXI9bnVsbCksJGQoYSksX2QoYSxjKTt2YXIgZT1kP2QoYSk6MTtlIT1hLmhlaWdodCYmWmUoYSxlKX1mdW5jdGlvbiB0ZShhKXthLnBhcmVudD1udWxsLCRkKGEpfWZ1bmN0aW9uIHVlKGEsYil7aWYoYSlmb3IoOzspe3ZhciBjPWEubWF0Y2goLyg/Ol58XHMrKWxpbmUtKGJhY2tncm91bmQtKT8oXFMrKS8pO2lmKCFjKWJyZWFrO2E9YS5zbGljZSgwLGMuaW5kZXgpK2Euc2xpY2UoYy5pbmRleCtjWzBdLmxlbmd0aCk7dmFyIGQ9Y1sxXT8iYmdDbGFzcyI6InRleHRDbGFzcyI7bnVsbD09YltkXT9iW2RdPWNbMl06bmV3IFJlZ0V4cCgiKD86XnxzKSIrY1syXSsiKD86JHxzKSIpLnRlc3QoYltkXSl8fChiW2RdKz0iICIrY1syXSl9cmV0dXJuIGF9ZnVuY3Rpb24gdmUoYSxiKXtpZihhLmJsYW5rTGluZSlyZXR1cm4gYS5ibGFua0xpbmUoYik7aWYoYS5pbm5lck1vZGUpe3ZhciBjPXcuaW5uZXJNb2RlKGEsYik7cmV0dXJuIGMubW9kZS5ibGFua0xpbmU/Yy5tb2RlLmJsYW5rTGluZShjLnN0YXRlKTp2b2lkIDB9fWZ1bmN0aW9uIHdlKGEsYixjLGQpe2Zvcih2YXIgZT0wOzEwPmU7ZSsrKXtkJiYoZFswXT13LmlubmVyTW9kZShhLGMpLm1vZGUpO3ZhciBmPWEudG9rZW4oYixjKTtpZihiLnBvcz5iLnN0YXJ0KXJldHVybiBmfXRocm93IG5ldyBFcnJvcigiTW9kZSAiK2EubmFtZSsiIGZhaWxlZCB0byBhZHZhbmNlIHN0cmVhbS4iKX1mdW5jdGlvbiB4ZShhLGIsYyxkKXtmdW5jdGlvbiBlKGEpe3JldHVybntzdGFydDprLnN0YXJ0LGVuZDprLnBvcyxzdHJpbmc6ay5jdXJyZW50KCksdHlwZTpofHxudWxsLHN0YXRlOmE/eWQoZi5tb2RlLGopOmp9fXZhciBoLGY9YS5kb2MsZz1mLm1vZGU7Yj16YShmLGIpO3ZhciBsLGk9V2UoZixiLmxpbmUpLGo9WmEoYSxiLmxpbmUsYyksaz1uZXcgSGQoaS50ZXh0LGEub3B0aW9ucy50YWJTaXplKTtmb3IoZCYmKGw9W10pOyhkfHxrLnBvczxiLmNoKSYmIWsuZW9sKCk7KWsuc3RhcnQ9ay5wb3MsaD13ZShnLGssaiksZCYmbC5wdXNoKGUoITApKTtyZXR1cm4gZD9sOmUoKX1mdW5jdGlvbiB5ZShhLGIsYyxkLGUsZixnKXt2YXIgaD1jLmZsYXR0ZW5TcGFucztudWxsPT1oJiYoaD1hLm9wdGlvbnMuZmxhdHRlblNwYW5zKTt2YXIgbCxpPTAsaj1udWxsLGs9bmV3IEhkKGIsYS5vcHRpb25zLnRhYlNpemUpLG09YS5vcHRpb25zLmFkZE1vZGVDbGFzcyYmW251bGxdO2ZvcigiIj09YiYmdWUodmUoYyxkKSxmKTshay5lb2woKTspe2lmKGsucG9zPmEub3B0aW9ucy5tYXhIaWdobGlnaHRMZW5ndGg/KGg9ITEsZyYmQmUoYSxiLGQsay5wb3MpLGsucG9zPWIubGVuZ3RoLGw9bnVsbCk6bD11ZSh3ZShjLGssZCxtKSxmKSxtKXt2YXIgbj1tWzBdLm5hbWU7biYmKGw9Im0tIisobD9uKyIgIitsOm4pKX1pZighaHx8aiE9bCl7Zm9yKDtpPGsuc3RhcnQ7KWk9TWF0aC5taW4oay5zdGFydCxpKzVlNCksZShpLGopO2o9bH1rLnN0YXJ0PWsucG9zfWZvcig7aTxrLnBvczspe3ZhciBvPU1hdGgubWluKGsucG9zLGkrNWU0KTtlKG8saiksaT1vfX1mdW5jdGlvbiB6ZShhLGIsYyxkKXt2YXIgZT1bYS5zdGF0ZS5tb2RlR2VuXSxmPXt9O3llKGEsYi50ZXh0LGEuZG9jLm1vZGUsYyxmdW5jdGlvbihhLGIpe2UucHVzaChhLGIpfSxmLGQpO2Zvcih2YXIgZz0wO2c8YS5zdGF0ZS5vdmVybGF5cy5sZW5ndGg7KytnKXt2YXIgaD1hLnN0YXRlLm92ZXJsYXlzW2ddLGk9MSxqPTA7eWUoYSxiLnRleHQsaC5tb2RlLCEwLGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWk7YT5qOyl7dmFyIGQ9ZVtpXTtkPmEmJmUuc3BsaWNlKGksMSxhLGVbaSsxXSxkKSxpKz0yLGo9TWF0aC5taW4oYSxkKX1pZihiKWlmKGgub3BhcXVlKWUuc3BsaWNlKGMsaS1jLGEsImNtLW92ZXJsYXkgIitiKSxpPWMrMjtlbHNlIGZvcig7aT5jO2MrPTIpe3ZhciBmPWVbYysxXTtlW2MrMV09KGY/ZisiICI6IiIpKyJjbS1vdmVybGF5ICIrYn19LGYpfXJldHVybntzdHlsZXM6ZSxjbGFzc2VzOmYuYmdDbGFzc3x8Zi50ZXh0Q2xhc3M/ZjpudWxsfX1mdW5jdGlvbiBBZShhLGIsYyl7aWYoIWIuc3R5bGVzfHxiLnN0eWxlc1swXSE9YS5zdGF0ZS5tb2RlR2VuKXt2YXIgZD16ZShhLGIsYi5zdGF0ZUFmdGVyPVphKGEsJGUoYikpKTtiLnN0eWxlcz1kLnN0eWxlcyxkLmNsYXNzZXM/Yi5zdHlsZUNsYXNzZXM9ZC5jbGFzc2VzOmIuc3R5bGVDbGFzc2VzJiYoYi5zdHlsZUNsYXNzZXM9bnVsbCksYz09PWEuZG9jLmZyb250aWVyJiZhLmRvYy5mcm9udGllcisrfXJldHVybiBiLnN0eWxlc31mdW5jdGlvbiBCZShhLGIsYyxkKXt2YXIgZT1hLmRvYy5tb2RlLGY9bmV3IEhkKGIsYS5vcHRpb25zLnRhYlNpemUpO2ZvcihmLnN0YXJ0PWYucG9zPWR8fDAsIiI9PWImJnZlKGUsYyk7IWYuZW9sKCkmJmYucG9zPD1hLm9wdGlvbnMubWF4SGlnaGxpZ2h0TGVuZ3RoOyl3ZShlLGYsYyksZi5zdGFydD1mLnBvc31mdW5jdGlvbiBFZShhLGIpe2lmKCFhfHwvXlxzKiQvLnRlc3QoYSkpcmV0dXJuIG51bGw7dmFyIGM9Yi5hZGRNb2RlQ2xhc3M/RGU6Q2U7cmV0dXJuIGNbYV18fChjW2FdPWEucmVwbGFjZSgvXFMrL2csImNtLSQmIikpfWZ1bmN0aW9uIEZlKGEsYil7dmFyIGM9ZGcoInNwYW4iLG51bGwsbnVsbCxmPyJwYWRkaW5nLXJpZ2h0OiAuMXB4IjpudWxsKSxlPXtwcmU6ZGcoInByZSIsW2NdKSxjb250ZW50OmMsY29sOjAscG9zOjAsY206YX07Yi5tZWFzdXJlPXt9O2Zvcih2YXIgZz0wO2c8PShiLnJlc3Q/Yi5yZXN0Lmxlbmd0aDowKTtnKyspe3ZhciBpLGg9Zz9iLnJlc3RbZy0xXTpiLmxpbmU7ZS5wb3M9MCxlLmFkZFRva2VuPUhlLChkfHxmKSYmYS5nZXRPcHRpb24oImxpbmVXcmFwcGluZyIpJiYoZS5hZGRUb2tlbj1JZShlLmFkZFRva2VuKSksdmcoYS5kaXNwbGF5Lm1lYXN1cmUpJiYoaT1iZihoKSkmJihlLmFkZFRva2VuPUplKGUuYWRkVG9rZW4saSkpLGUubWFwPVtdO3ZhciBqPWIhPWEuZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkJiYkZShoKTtMZShoLGUsQWUoYSxoLGopKSxoLnN0eWxlQ2xhc3NlcyYmKGguc3R5bGVDbGFzc2VzLmJnQ2xhc3MmJihlLmJnQ2xhc3M9bWcoaC5zdHlsZUNsYXNzZXMuYmdDbGFzcyxlLmJnQ2xhc3N8fCIiKSksaC5zdHlsZUNsYXNzZXMudGV4dENsYXNzJiYoZS50ZXh0Q2xhc3M9bWcoaC5zdHlsZUNsYXNzZXMudGV4dENsYXNzLGUudGV4dENsYXNzfHwiIikpKSwwPT1lLm1hcC5sZW5ndGgmJmUubWFwLnB1c2goMCwwLGUuY29udGVudC5hcHBlbmRDaGlsZCh0ZyhhLmRpc3BsYXkubWVhc3VyZSkpKSwwPT1nPyhiLm1lYXN1cmUubWFwPWUubWFwLGIubWVhc3VyZS5jYWNoZT17fSk6KChiLm1lYXN1cmUubWFwc3x8KGIubWVhc3VyZS5tYXBzPVtdKSkucHVzaChlLm1hcCksKGIubWVhc3VyZS5jYWNoZXN8fChiLm1lYXN1cmUuY2FjaGVzPVtdKSkucHVzaCh7fSkpfXJldHVybiBmJiYvXGJjbS10YWJcYi8udGVzdChlLmNvbnRlbnQubGFzdENoaWxkLmNsYXNzTmFtZSkmJihlLmNvbnRlbnQuY2xhc3NOYW1lPSJjbS10YWItd3JhcC1oYWNrIiksQWYoYSwicmVuZGVyTGluZSIsYSxiLmxpbmUsZS5wcmUpLGUucHJlLmNsYXNzTmFtZSYmKGUudGV4dENsYXNzPW1nKGUucHJlLmNsYXNzTmFtZSxlLnRleHRDbGFzc3x8IiIpKSxlfWZ1bmN0aW9uIEdlKGEpe3ZhciBiPWRnKCJzcGFuIiwiXHUyMDIyIiwiY20taW52YWxpZGNoYXIiKTtyZXR1cm4gYi50aXRsZT0iXFx1IithLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpLGIuc2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsIixiLnRpdGxlKSxifWZ1bmN0aW9uIEhlKGEsYixjLGYsZyxoLGkpe2lmKGIpe3ZhciBqPWEuY20ub3B0aW9ucy5zcGVjaWFsQ2hhcnMsaz0hMTtpZihqLnRlc3QoYikpZm9yKHZhciBsPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxtPTA7Oyl7ai5sYXN0SW5kZXg9bTt2YXIgbj1qLmV4ZWMoYiksbz1uP24uaW5kZXgtbTpiLmxlbmd0aC1tO2lmKG8pe3ZhciBwPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGIuc2xpY2UobSxtK28pKTtkJiY5PmU/bC5hcHBlbmRDaGlsZChkZygic3BhbiIsW3BdKSk6bC5hcHBlbmRDaGlsZChwKSxhLm1hcC5wdXNoKGEucG9zLGEucG9zK28scCksYS5jb2wrPW8sYS5wb3MrPW99aWYoIW4pYnJlYWs7aWYobSs9bysxLCIJIj09blswXSl7dmFyIHE9YS5jbS5vcHRpb25zLnRhYlNpemUscj1xLWEuY29sJXEscD1sLmFwcGVuZENoaWxkKGRnKCJzcGFuIixSZihyKSwiY20tdGFiIikpO3Auc2V0QXR0cmlidXRlKCJyb2xlIiwicHJlc2VudGF0aW9uIiksYS5jb2wrPXJ9ZWxzZXt2YXIgcD1hLmNtLm9wdGlvbnMuc3BlY2lhbENoYXJQbGFjZWhvbGRlcihuWzBdKTtkJiY5PmU/bC5hcHBlbmRDaGlsZChkZygic3BhbiIsW3BdKSk6bC5hcHBlbmRDaGlsZChwKSxhLmNvbCs9MX1hLm1hcC5wdXNoKGEucG9zLGEucG9zKzEscCksYS5wb3MrK31lbHNle2EuY29sKz1iLmxlbmd0aDt2YXIgbD1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShiKTthLm1hcC5wdXNoKGEucG9zLGEucG9zK2IubGVuZ3RoLGwpLGQmJjk+ZSYmKGs9ITApLGEucG9zKz1iLmxlbmd0aH1pZihjfHxmfHxnfHxrfHxpKXt2YXIgcz1jfHwiIjtmJiYocys9ZiksZyYmKHMrPWcpO3ZhciB0PWRnKCJzcGFuIixbbF0scyxpKTtyZXR1cm4gaCYmKHQudGl0bGU9aCksYS5jb250ZW50LmFwcGVuZENoaWxkKHQpfWEuY29udGVudC5hcHBlbmRDaGlsZChsKX19ZnVuY3Rpb24gSWUoYSl7ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9IiAiLGM9MDtjPGEubGVuZ3RoLTI7KytjKWIrPWMlMj8iICI6Ilx4YTAiO3JldHVybiBiKz0iICJ9cmV0dXJuIGZ1bmN0aW9uKGMsZCxlLGYsZyxoKXthKGMsZC5yZXBsYWNlKC8gezMsfS9nLGIpLGUsZixnLGgpfX1mdW5jdGlvbiBKZShhLGIpe3JldHVybiBmdW5jdGlvbihjLGQsZSxmLGcsaCl7ZT1lP2UrIiBjbS1mb3JjZS1ib3JkZXIiOiJjbS1mb3JjZS1ib3JkZXIiO2Zvcih2YXIgaT1jLnBvcyxqPWkrZC5sZW5ndGg7Oyl7Zm9yKHZhciBrPTA7azxiLmxlbmd0aDtrKyspe3ZhciBsPWJba107aWYobC50bz5pJiZsLmZyb208PWkpYnJlYWt9aWYobC50bz49ailyZXR1cm4gYShjLGQsZSxmLGcsaCk7YShjLGQuc2xpY2UoMCxsLnRvLWkpLGUsZixudWxsLGgpLGY9bnVsbCxkPWQuc2xpY2UobC50by1pKSxpPWwudG99fX1mdW5jdGlvbiBLZShhLGIsYyxkKXt2YXIgZT0hZCYmYy53aWRnZXROb2RlO2UmJihhLm1hcC5wdXNoKGEucG9zLGEucG9zK2IsZSksYS5jb250ZW50LmFwcGVuZENoaWxkKGUpKSxhLnBvcys9Yn1mdW5jdGlvbiBMZShhLGIsYyl7dmFyIGQ9YS5tYXJrZWRTcGFucyxlPWEudGV4dCxmPTA7aWYoZClmb3IodmFyIGssbCxuLG8scCxxLHIsaD1lLmxlbmd0aCxpPTAsZz0xLGo9IiIsbT0wOzspe2lmKG09PWkpe249bz1wPXE9bD0iIixyPW51bGwsbT0xLzA7Zm9yKHZhciBzPVtdLHQ9MDt0PGQubGVuZ3RoOysrdCl7dmFyIHU9ZFt0XSx2PXUubWFya2VyO3UuZnJvbTw9aSYmKG51bGw9PXUudG98fHUudG8+aSk/KG51bGwhPXUudG8mJm0+dS50byYmKG09dS50byxvPSIiKSx2LmNsYXNzTmFtZSYmKG4rPSIgIit2LmNsYXNzTmFtZSksdi5jc3MmJihsPXYuY3NzKSx2LnN0YXJ0U3R5bGUmJnUuZnJvbT09aSYmKHArPSIgIit2LnN0YXJ0U3R5bGUpLHYuZW5kU3R5bGUmJnUudG89PW0mJihvKz0iICIrdi5lbmRTdHlsZSksdi50aXRsZSYmIXEmJihxPXYudGl0bGUpLHYuY29sbGFwc2VkJiYoIXJ8fGNlKHIubWFya2VyLHYpPDApJiYocj11KSk6dS5mcm9tPmkmJm0+dS5mcm9tJiYobT11LmZyb20pLCJib29rbWFyayI9PXYudHlwZSYmdS5mcm9tPT1pJiZ2LndpZGdldE5vZGUmJnMucHVzaCh2KX1pZihyJiYoci5mcm9tfHwwKT09aSYmKEtlKGIsKG51bGw9PXIudG8/aCsxOnIudG8pLWksci5tYXJrZXIsbnVsbD09ci5mcm9tKSxudWxsPT1yLnRvKSlyZXR1cm47aWYoIXImJnMubGVuZ3RoKWZvcih2YXIgdD0wO3Q8cy5sZW5ndGg7Kyt0KUtlKGIsMCxzW3RdKX1pZihpPj1oKWJyZWFrO2Zvcih2YXIgdz1NYXRoLm1pbihoLG0pOzspe2lmKGope3ZhciB4PWkrai5sZW5ndGg7aWYoIXIpe3ZhciB5PXg+dz9qLnNsaWNlKDAsdy1pKTpqO2IuYWRkVG9rZW4oYix5LGs/aytuOm4scCxpK3kubGVuZ3RoPT1tP286IiIscSxsKX1pZih4Pj13KXtqPWouc2xpY2Uody1pKSxpPXc7YnJlYWt9aT14LHA9IiJ9aj1lLnNsaWNlKGYsZj1jW2crK10pLGs9RWUoY1tnKytdLGIuY20ub3B0aW9ucyl9fWVsc2UgZm9yKHZhciBnPTE7ZzxjLmxlbmd0aDtnKz0yKWIuYWRkVG9rZW4oYixlLnNsaWNlKGYsZj1jW2ddKSxFZShjW2crMV0sYi5jbS5vcHRpb25zKSl9ZnVuY3Rpb24gTWUoYSxiKXtyZXR1cm4gMD09Yi5mcm9tLmNoJiYwPT1iLnRvLmNoJiYiIj09U2YoYi50ZXh0KSYmKCFhLmNtfHxhLmNtLm9wdGlvbnMud2hvbGVMaW5lVXBkYXRlQmVmb3JlKX1mdW5jdGlvbiBOZShhLGIsYyxkKXtmdW5jdGlvbiBlKGEpe3JldHVybiBjP2NbYV06bnVsbH1mdW5jdGlvbiBmKGEsYyxlKXtzZShhLGMsZSxkKSxDZihhLCJjaGFuZ2UiLGEsYil9ZnVuY3Rpb24gZyhhLGIpe2Zvcih2YXIgYz1hLGY9W107Yj5jOysrYylmLnB1c2gobmV3IHJlKGpbY10sZShjKSxkKSk7cmV0dXJuIGZ9dmFyIGg9Yi5mcm9tLGk9Yi50byxqPWIudGV4dCxrPVdlKGEsaC5saW5lKSxsPVdlKGEsaS5saW5lKSxtPVNmKGopLG49ZShqLmxlbmd0aC0xKSxvPWkubGluZS1oLmxpbmU7aWYoYi5mdWxsKWEuaW5zZXJ0KDAsZygwLGoubGVuZ3RoKSksYS5yZW1vdmUoai5sZW5ndGgsYS5zaXplLWoubGVuZ3RoKTtlbHNlIGlmKE1lKGEsYikpe3ZhciBwPWcoMCxqLmxlbmd0aC0xKTtmKGwsbC50ZXh0LG4pLG8mJmEucmVtb3ZlKGgubGluZSxvKSxwLmxlbmd0aCYmYS5pbnNlcnQoaC5saW5lLHApfWVsc2UgaWYoaz09bClpZigxPT1qLmxlbmd0aClmKGssay50ZXh0LnNsaWNlKDAsaC5jaCkrbStrLnRleHQuc2xpY2UoaS5jaCksbik7ZWxzZXt2YXIgcD1nKDEsai5sZW5ndGgtMSk7cC5wdXNoKG5ldyByZShtK2sudGV4dC5zbGljZShpLmNoKSxuLGQpKSxmKGssay50ZXh0LnNsaWNlKDAsaC5jaCkralswXSxlKDApKSxhLmluc2VydChoLmxpbmUrMSxwKX1lbHNlIGlmKDE9PWoubGVuZ3RoKWYoayxrLnRleHQuc2xpY2UoMCxoLmNoKStqWzBdK2wudGV4dC5zbGljZShpLmNoKSxlKDApKSxhLnJlbW92ZShoLmxpbmUrMSxvKTtlbHNle2YoayxrLnRleHQuc2xpY2UoMCxoLmNoKStqWzBdLGUoMCkpLGYobCxtK2wudGV4dC5zbGljZShpLmNoKSxuKTt2YXIgcD1nKDEsai5sZW5ndGgtMSk7bz4xJiZhLnJlbW92ZShoLmxpbmUrMSxvLTEpLGEuaW5zZXJ0KGgubGluZSsxLHApfUNmKGEsImNoYW5nZSIsYSxiKX1mdW5jdGlvbiBPZShhKXt0aGlzLmxpbmVzPWEsdGhpcy5wYXJlbnQ9bnVsbDtmb3IodmFyIGI9MCxjPTA7YjxhLmxlbmd0aDsrK2IpYVtiXS5wYXJlbnQ9dGhpcyxjKz1hW2JdLmhlaWdodDt0aGlzLmhlaWdodD1jfWZ1bmN0aW9uIFBlKGEpe3RoaXMuY2hpbGRyZW49YTtmb3IodmFyIGI9MCxjPTAsZD0wO2Q8YS5sZW5ndGg7KytkKXt2YXIgZT1hW2RdO2IrPWUuY2h1bmtTaXplKCksYys9ZS5oZWlnaHQsZS5wYXJlbnQ9dGhpc310aGlzLnNpemU9Yix0aGlzLmhlaWdodD1jLHRoaXMucGFyZW50PW51bGx9ZnVuY3Rpb24gVWUoYSxiLGMpe2Z1bmN0aW9uIGQoYSxlLGYpe2lmKGEubGlua2VkKWZvcih2YXIgZz0wO2c8YS5saW5rZWQubGVuZ3RoOysrZyl7dmFyIGg9YS5saW5rZWRbZ107aWYoaC5kb2MhPWUpe3ZhciBpPWYmJmguc2hhcmVkSGlzdDsoIWN8fGkpJiYoYihoLmRvYyxpKSxkKGguZG9jLGEsaSkpfX19ZChhLG51bGwsITApfWZ1bmN0aW9uIFZlKGEsYil7aWYoYi5jbSl0aHJvdyBuZXcgRXJyb3IoIlRoaXMgZG9jdW1lbnQgaXMgYWxyZWFkeSBpbiB1c2UuIik7YS5kb2M9YixiLmNtPWEsQyhhKSx5KGEpLGEub3B0aW9ucy5saW5lV3JhcHBpbmd8fEkoYSksYS5vcHRpb25zLm1vZGU9Yi5tb2RlT3B0aW9uLFZiKGEpfWZ1bmN0aW9uIFdlKGEsYil7aWYoYi09YS5maXJzdCwwPmJ8fGI+PWEuc2l6ZSl0aHJvdyBuZXcgRXJyb3IoIlRoZXJlIGlzIG5vIGxpbmUgIisoYithLmZpcnN0KSsiIGluIHRoZSBkb2N1bWVudC4iKTtmb3IodmFyIGM9YTshYy5saW5lczspZm9yKHZhciBkPTA7OysrZCl7dmFyIGU9Yy5jaGlsZHJlbltkXSxmPWUuY2h1bmtTaXplKCk7aWYoZj5iKXtjPWU7YnJlYWt9Yi09Zn1yZXR1cm4gYy5saW5lc1tiXX1mdW5jdGlvbiBYZShhLGIsYyl7dmFyIGQ9W10sZT1iLmxpbmU7cmV0dXJuIGEuaXRlcihiLmxpbmUsYy5saW5lKzEsZnVuY3Rpb24oYSl7dmFyIGY9YS50ZXh0O2U9PWMubGluZSYmKGY9Zi5zbGljZSgwLGMuY2gpKSxlPT1iLmxpbmUmJihmPWYuc2xpY2UoYi5jaCkpLGQucHVzaChmKSwrK2V9KSxkfWZ1bmN0aW9uIFllKGEsYixjKXt2YXIgZD1bXTtyZXR1cm4gYS5pdGVyKGIsYyxmdW5jdGlvbihhKXtkLnB1c2goYS50ZXh0KX0pLGR9ZnVuY3Rpb24gWmUoYSxiKXt2YXIgYz1iLWEuaGVpZ2h0O2lmKGMpZm9yKHZhciBkPWE7ZDtkPWQucGFyZW50KWQuaGVpZ2h0Kz1jfWZ1bmN0aW9uICRlKGEpe2lmKG51bGw9PWEucGFyZW50KXJldHVybiBudWxsO2Zvcih2YXIgYj1hLnBhcmVudCxjPVVmKGIubGluZXMsYSksZD1iLnBhcmVudDtkO2I9ZCxkPWQucGFyZW50KWZvcih2YXIgZT0wO2QuY2hpbGRyZW5bZV0hPWI7KytlKWMrPWQuY2hpbGRyZW5bZV0uY2h1bmtTaXplKCk7cmV0dXJuIGMrYi5maXJzdH1mdW5jdGlvbiBfZShhLGIpe3ZhciBjPWEuZmlyc3Q7YTpkb3tmb3IodmFyIGQ9MDtkPGEuY2hpbGRyZW4ubGVuZ3RoOysrZCl7dmFyIGU9YS5jaGlsZHJlbltkXSxmPWUuaGVpZ2h0O2lmKGY+Yil7YT1lO2NvbnRpbnVlIGF9Yi09ZixjKz1lLmNodW5rU2l6ZSgpfXJldHVybiBjfXdoaWxlKCFhLmxpbmVzKTtmb3IodmFyIGQ9MDtkPGEubGluZXMubGVuZ3RoOysrZCl7dmFyIGc9YS5saW5lc1tkXSxoPWcuaGVpZ2h0O2lmKGg+YilicmVhaztiLT1ofXJldHVybiBjK2R9ZnVuY3Rpb24gYWYoYSl7YT1oZShhKTtmb3IodmFyIGI9MCxjPWEucGFyZW50LGQ9MDtkPGMubGluZXMubGVuZ3RoOysrZCl7dmFyIGU9Yy5saW5lc1tkXTtpZihlPT1hKWJyZWFrO2IrPWUuaGVpZ2h0fWZvcih2YXIgZj1jLnBhcmVudDtmO2M9ZixmPWMucGFyZW50KWZvcih2YXIgZD0wO2Q8Zi5jaGlsZHJlbi5sZW5ndGg7KytkKXt2YXIgZz1mLmNoaWxkcmVuW2RdO2lmKGc9PWMpYnJlYWs7Yis9Zy5oZWlnaHR9cmV0dXJuIGJ9ZnVuY3Rpb24gYmYoYSl7dmFyIGI9YS5vcmRlcjtyZXR1cm4gbnVsbD09YiYmKGI9YS5vcmRlcj1RZyhhLnRleHQpKSxifWZ1bmN0aW9uIGNmKGEpe3RoaXMuZG9uZT1bXSx0aGlzLnVuZG9uZT1bXSx0aGlzLnVuZG9EZXB0aD0xLzAsdGhpcy5sYXN0TW9kVGltZT10aGlzLmxhc3RTZWxUaW1lPTAsdGhpcy5sYXN0T3A9dGhpcy5sYXN0U2VsT3A9bnVsbCx0aGlzLmxhc3RPcmlnaW49dGhpcy5sYXN0U2VsT3JpZ2luPW51bGwsdGhpcy5nZW5lcmF0aW9uPXRoaXMubWF4R2VuZXJhdGlvbj1hfHwxfWZ1bmN0aW9uIGRmKGEsYil7dmFyIGM9e2Zyb206cmEoYi5mcm9tKSx0bzpTYyhiKSx0ZXh0OlhlKGEsYi5mcm9tLGIudG8pfTtyZXR1cm4gbGYoYSxjLGIuZnJvbS5saW5lLGIudG8ubGluZSsxKSxVZShhLGZ1bmN0aW9uKGEpe2xmKGEsYyxiLmZyb20ubGluZSxiLnRvLmxpbmUrMSl9LCEwKSxjfWZ1bmN0aW9uIGVmKGEpe2Zvcig7YS5sZW5ndGg7KXt2YXIgYj1TZihhKTtpZighYi5yYW5nZXMpYnJlYWs7YS5wb3AoKX19ZnVuY3Rpb24gZmYoYSxiKXtyZXR1cm4gYj8oZWYoYS5kb25lKSxTZihhLmRvbmUpKTphLmRvbmUubGVuZ3RoJiYhU2YoYS5kb25lKS5yYW5nZXM/U2YoYS5kb25lKTphLmRvbmUubGVuZ3RoPjEmJiFhLmRvbmVbYS5kb25lLmxlbmd0aC0yXS5yYW5nZXM/KGEuZG9uZS5wb3AoKSxTZihhLmRvbmUpKTp2b2lkIDB9ZnVuY3Rpb24gZ2YoYSxiLGMsZCl7dmFyIGU9YS5oaXN0b3J5O2UudW5kb25lLmxlbmd0aD0wO3ZhciBnLGY9K25ldyBEYXRlO2lmKChlLmxhc3RPcD09ZHx8ZS5sYXN0T3JpZ2luPT1iLm9yaWdpbiYmYi5vcmlnaW4mJigiKyI9PWIub3JpZ2luLmNoYXJBdCgwKSYmYS5jbSYmZS5sYXN0TW9kVGltZT5mLWEuY20ub3B0aW9ucy5oaXN0b3J5RXZlbnREZWxheXx8IioiPT1iLm9yaWdpbi5jaGFyQXQoMCkpKSYmKGc9ZmYoZSxlLmxhc3RPcD09ZCkpKXt2YXIgaD1TZihnLmNoYW5nZXMpOzA9PXFhKGIuZnJvbSxiLnRvKSYmMD09cWEoYi5mcm9tLGgudG8pP2gudG89U2MoYik6Zy5jaGFuZ2VzLnB1c2goZGYoYSxiKSl9ZWxzZXt2YXIgaT1TZihlLmRvbmUpO2ZvcihpJiZpLnJhbmdlc3x8a2YoYS5zZWwsZS5kb25lKSxnPXtjaGFuZ2VzOltkZihhLGIpXSxnZW5lcmF0aW9uOmUuZ2VuZXJhdGlvbn0sZS5kb25lLnB1c2goZyk7ZS5kb25lLmxlbmd0aD5lLnVuZG9EZXB0aDspZS5kb25lLnNoaWZ0KCksZS5kb25lWzBdLnJhbmdlc3x8ZS5kb25lLnNoaWZ0KCl9ZS5kb25lLnB1c2goYyksZS5nZW5lcmF0aW9uPSsrZS5tYXhHZW5lcmF0aW9uLGUubGFzdE1vZFRpbWU9ZS5sYXN0U2VsVGltZT1mLGUubGFzdE9wPWUubGFzdFNlbE9wPWQsZS5sYXN0T3JpZ2luPWUubGFzdFNlbE9yaWdpbj1iLm9yaWdpbixofHxBZihhLCJoaXN0b3J5QWRkZWQiKX1mdW5jdGlvbiBoZihhLGIsYyxkKXt2YXIgZT1iLmNoYXJBdCgwKTtyZXR1cm4iKiI9PWV8fCIrIj09ZSYmYy5yYW5nZXMubGVuZ3RoPT1kLnJhbmdlcy5sZW5ndGgmJmMuc29tZXRoaW5nU2VsZWN0ZWQoKT09ZC5zb21ldGhpbmdTZWxlY3RlZCgpJiZuZXcgRGF0ZS1hLmhpc3RvcnkubGFzdFNlbFRpbWU8PShhLmNtP2EuY20ub3B0aW9ucy5oaXN0b3J5RXZlbnREZWxheTo1MDApfWZ1bmN0aW9uIGpmKGEsYixjLGQpe3ZhciBlPWEuaGlzdG9yeSxmPWQmJmQub3JpZ2luO2M9PWUubGFzdFNlbE9wfHxmJiZlLmxhc3RTZWxPcmlnaW49PWYmJihlLmxhc3RNb2RUaW1lPT1lLmxhc3RTZWxUaW1lJiZlLmxhc3RPcmlnaW49PWZ8fGhmKGEsZixTZihlLmRvbmUpLGIpKT9lLmRvbmVbZS5kb25lLmxlbmd0aC0xXT1iOmtmKGIsZS5kb25lKSxlLmxhc3RTZWxUaW1lPStuZXcgRGF0ZSxlLmxhc3RTZWxPcmlnaW49ZixlLmxhc3RTZWxPcD1jLGQmJmQuY2xlYXJSZWRvIT09ITEmJmVmKGUudW5kb25lKX1mdW5jdGlvbiBrZihhLGIpe3ZhciBjPVNmKGIpO2MmJmMucmFuZ2VzJiZjLmVxdWFscyhhKXx8Yi5wdXNoKGEpfWZ1bmN0aW9uIGxmKGEsYixjLGQpe3ZhciBlPWJbInNwYW5zXyIrYS5pZF0sZj0wO2EuaXRlcihNYXRoLm1heChhLmZpcnN0LGMpLE1hdGgubWluKGEuZmlyc3QrYS5zaXplLGQpLGZ1bmN0aW9uKGMpe2MubWFya2VkU3BhbnMmJigoZXx8KGU9Ylsic3BhbnNfIithLmlkXT17fSkpW2ZdPWMubWFya2VkU3BhbnMpLCsrZn0pfWZ1bmN0aW9uIG1mKGEpe2lmKCFhKXJldHVybiBudWxsO2Zvcih2YXIgYyxiPTA7YjxhLmxlbmd0aDsrK2IpYVtiXS5tYXJrZXIuZXhwbGljaXRseUNsZWFyZWQ/Y3x8KGM9YS5zbGljZSgwLGIpKTpjJiZjLnB1c2goYVtiXSk7cmV0dXJuIGM/Yy5sZW5ndGg/YzpudWxsOmF9ZnVuY3Rpb24gbmYoYSxiKXt2YXIgYz1iWyJzcGFuc18iK2EuaWRdO2lmKCFjKXJldHVybiBudWxsO2Zvcih2YXIgZD0wLGU9W107ZDxiLnRleHQubGVuZ3RoOysrZCllLnB1c2gobWYoY1tkXSkpO3JldHVybiBlfWZ1bmN0aW9uIG9mKGEsYixjKXtmb3IodmFyIGQ9MCxlPVtdO2Q8YS5sZW5ndGg7KytkKXt2YXIgZj1hW2RdO2lmKGYucmFuZ2VzKWUucHVzaChjP3VhLnByb3RvdHlwZS5kZWVwQ29weS5jYWxsKGYpOmYpO2Vsc2V7dmFyIGc9Zi5jaGFuZ2VzLGg9W107ZS5wdXNoKHtjaGFuZ2VzOmh9KTtmb3IodmFyIGk9MDtpPGcubGVuZ3RoOysraSl7dmFyIGssaj1nW2ldO2lmKGgucHVzaCh7ZnJvbTpqLmZyb20sdG86ai50byx0ZXh0OmoudGV4dH0pLGIpZm9yKHZhciBsIGluIGopKGs9bC5tYXRjaCgvXnNwYW5zXyhcZCspJC8pKSYmVWYoYixOdW1iZXIoa1sxXSkpPi0xJiYoU2YoaClbbF09altsXSxkZWxldGUgaltsXSl9fX1yZXR1cm4gZX1mdW5jdGlvbiBwZihhLGIsYyxkKXtjPGEubGluZT9hLmxpbmUrPWQ6YjxhLmxpbmUmJihhLmxpbmU9YixhLmNoPTApfWZ1bmN0aW9uIHFmKGEsYixjLGQpe2Zvcih2YXIgZT0wO2U8YS5sZW5ndGg7KytlKXt2YXIgZj1hW2VdLGc9ITA7aWYoZi5yYW5nZXMpe2YuY29waWVkfHwoZj1hW2VdPWYuZGVlcENvcHkoKSxmLmNvcGllZD0hMCk7Zm9yKHZhciBoPTA7aDxmLnJhbmdlcy5sZW5ndGg7aCsrKXBmKGYucmFuZ2VzW2hdLmFuY2hvcixiLGMsZCkscGYoZi5yYW5nZXNbaF0uaGVhZCxiLGMsZCl9ZWxzZXtmb3IodmFyIGg9MDtoPGYuY2hhbmdlcy5sZW5ndGg7KytoKXt2YXIgaT1mLmNoYW5nZXNbaF07aWYoYzxpLmZyb20ubGluZSlpLmZyb209cGEoaS5mcm9tLmxpbmUrZCxpLmZyb20uY2gpLGkudG89cGEoaS50by5saW5lK2QsaS50by5jaCk7ZWxzZSBpZihiPD1pLnRvLmxpbmUpe2c9ITE7YnJlYWt9fWd8fChhLnNwbGljZSgwLGUrMSksZT0wKX19fWZ1bmN0aW9uIHJmKGEsYil7dmFyIGM9Yi5mcm9tLmxpbmUsZD1iLnRvLmxpbmUsZT1iLnRleHQubGVuZ3RoLShkLWMpLTE7cWYoYS5kb25lLGMsZCxlKSxxZihhLnVuZG9uZSxjLGQsZSl9ZnVuY3Rpb24gdWYoYSl7cmV0dXJuIG51bGwhPWEuZGVmYXVsdFByZXZlbnRlZD9hLmRlZmF1bHRQcmV2ZW50ZWQ6MD09YS5yZXR1cm5WYWx1ZX1mdW5jdGlvbiB3ZihhKXtyZXR1cm4gYS50YXJnZXR8fGEuc3JjRWxlbWVudH1mdW5jdGlvbiB4ZihhKXt2YXIgYj1hLndoaWNoO3JldHVybiBudWxsPT1iJiYoMSZhLmJ1dHRvbj9iPTE6MiZhLmJ1dHRvbj9iPTM6NCZhLmJ1dHRvbiYmKGI9MikpLHAmJmEuY3RybEtleSYmMT09YiYmKGI9MyksYn1mdW5jdGlvbiBDZihhLGIpe2Z1bmN0aW9uIGYoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7YS5hcHBseShudWxsLGQpfX12YXIgYz1hLl9oYW5kbGVycyYmYS5faGFuZGxlcnNbYl07aWYoYyl7dmFyIGUsZD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMik7RWI/ZT1FYi5kZWxheWVkQ2FsbGJhY2tzOkJmP2U9QmY6KGU9QmY9W10sc2V0VGltZW91dChEZiwwKSk7Zm9yKHZhciBnPTA7ZzxjLmxlbmd0aDsrK2cpZS5wdXNoKGYoY1tnXSkpfX1mdW5jdGlvbiBEZigpe3ZhciBhPUJmO0JmPW51bGw7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDsrK2IpYVtiXSgpfWZ1bmN0aW9uIEVmKGEsYixjKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGImJihiPXt0eXBlOmIscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITB9fSksQWYoYSxjfHxiLnR5cGUsYSxiKSx1ZihiKXx8Yi5jb2RlbWlycm9ySWdub3JlfWZ1bmN0aW9uIEZmKGEpe3ZhciBiPWEuX2hhbmRsZXJzJiZhLl9oYW5kbGVycy5jdXJzb3JBY3Rpdml0eTtpZihiKWZvcih2YXIgYz1hLmN1ck9wLmN1cnNvckFjdGl2aXR5SGFuZGxlcnN8fChhLmN1ck9wLmN1cnNvckFjdGl2aXR5SGFuZGxlcnM9W10pLGQ9MDtkPGIubGVuZ3RoOysrZCktMT09VWYoYyxiW2RdKSYmYy5wdXNoKGJbZF0pfWZ1bmN0aW9uIEdmKGEsYil7dmFyIGM9YS5faGFuZGxlcnMmJmEuX2hhbmRsZXJzW2JdO3JldHVybiBjJiZjLmxlbmd0aD4wfWZ1bmN0aW9uIEhmKGEpe2EucHJvdG90eXBlLm9uPWZ1bmN0aW9uKGEsYil7eWYodGhpcyxhLGIpfSxhLnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24oYSxiKXt6Zih0aGlzLGEsYil9fWZ1bmN0aW9uIE5mKCl7dGhpcy5pZD1udWxsfWZ1bmN0aW9uIFBmKGEsYixjKXtmb3IodmFyIGQ9MCxlPTA7Oyl7dmFyIGY9YS5pbmRleE9mKCIJIixkKTstMT09ZiYmKGY9YS5sZW5ndGgpO3ZhciBnPWYtZDtpZihmPT1hLmxlbmd0aHx8ZStnPj1iKXJldHVybiBkK01hdGgubWluKGcsYi1lKTtpZihlKz1mLWQsZSs9Yy1lJWMsZD1mKzEsZT49YilyZXR1cm4gZH19ZnVuY3Rpb24gUmYoYSl7Zm9yKDtRZi5sZW5ndGg8PWE7KVFmLnB1c2goU2YoUWYpKyIgIik7cmV0dXJuIFFmW2FdfWZ1bmN0aW9uIFNmKGEpe3JldHVybiBhW2EubGVuZ3RoLTFdfWZ1bmN0aW9uIFVmKGEsYil7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDsrK2MpaWYoYVtjXT09YilyZXR1cm4gYztyZXR1cm4tMX1mdW5jdGlvbiBWZihhLGIpe2Zvcih2YXIgYz1bXSxkPTA7ZDxhLmxlbmd0aDtkKyspY1tkXT1iKGFbZF0sZCk7cmV0dXJuIGN9ZnVuY3Rpb24gV2YoYSxiKXt2YXIgYztpZihPYmplY3QuY3JlYXRlKWM9T2JqZWN0LmNyZWF0ZShhKTtlbHNle3ZhciBkPWZ1bmN0aW9uKCl7fTtkLnByb3RvdHlwZT1hLGM9bmV3IGR9cmV0dXJuIGImJlhmKGIsYyksY31mdW5jdGlvbiBYZihhLGIsYyl7Ynx8KGI9e30pO2Zvcih2YXIgZCBpbiBhKSFhLmhhc093blByb3BlcnR5KGQpfHxjPT09ITEmJmIuaGFzT3duUHJvcGVydHkoZCl8fChiW2RdPWFbZF0pO3JldHVybiBifWZ1bmN0aW9uIFlmKGEpe3ZhciBiPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShudWxsLGIpfX1mdW5jdGlvbiBfZihhLGIpe3JldHVybiBiP2Iuc291cmNlLmluZGV4T2YoIlxcdyIpPi0xJiYkZihhKT8hMDpiLnRlc3QoYSk6JGYoYSl9ZnVuY3Rpb24gYWcoYSl7Zm9yKHZhciBiIGluIGEpaWYoYS5oYXNPd25Qcm9wZXJ0eShiKSYmYVtiXSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBjZyhhKXtyZXR1cm4gYS5jaGFyQ29kZUF0KDApPj03NjgmJmJnLnRlc3QoYSl9ZnVuY3Rpb24gZGcoYSxiLGMsZCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhKTtpZihjJiYoZS5jbGFzc05hbWU9YyksZCYmKGUuc3R5bGUuY3NzVGV4dD1kKSwic3RyaW5nIj09dHlwZW9mIGIpZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShiKSk7ZWxzZSBpZihiKWZvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7KytmKWUuYXBwZW5kQ2hpbGQoYltmXSk7cmV0dXJuIGV9ZnVuY3Rpb24gZmcoYSl7Zm9yKHZhciBiPWEuY2hpbGROb2Rlcy5sZW5ndGg7Yj4wOy0tYilhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCk7cmV0dXJuIGF9ZnVuY3Rpb24gZ2coYSxiKXtyZXR1cm4gZmcoYSkuYXBwZW5kQ2hpbGQoYil9ZnVuY3Rpb24gaWcoKXtyZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudH1mdW5jdGlvbiBqZyhhKXtyZXR1cm4gbmV3IFJlZ0V4cCgiKF58XFxzKSIrYSsiKD86JHxcXHMpXFxzKiIpfWZ1bmN0aW9uIG1nKGEsYil7Zm9yKHZhciBjPWEuc3BsaXQoIiAiKSxkPTA7ZDxjLmxlbmd0aDtkKyspY1tkXSYmIWpnKGNbZF0pLnRlc3QoYikmJihiKz0iICIrY1tkXSk7cmV0dXJuIGJ9ZnVuY3Rpb24gbmcoYSl7aWYoZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKWZvcih2YXIgYj1kb2N1bWVudC5ib2R5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIkNvZGVNaXJyb3IiKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY10uQ29kZU1pcnJvcjtkJiZhKGQpfX1mdW5jdGlvbiBwZygpe29nfHwocWcoKSxvZz0hMCl9ZnVuY3Rpb24gcWcoKXt2YXIgYTt5Zih3aW5kb3csInJlc2l6ZSIsZnVuY3Rpb24oKXtudWxsPT1hJiYoYT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YT1udWxsLG5nKGpjKX0sMTAwKSl9KSx5Zih3aW5kb3csImJsdXIiLGZ1bmN0aW9uKCl7bmcoUGMpfSl9ZnVuY3Rpb24gdGcoYSl7aWYobnVsbD09c2cpe3ZhciBiPWRnKCJzcGFuIiwiXHUyMDBiIik7Z2coYSxkZygic3BhbiIsW2IsZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIngiKV0pKSwwIT1hLmZpcnN0Q2hpbGQub2Zmc2V0SGVpZ2h0JiYoc2c9Yi5vZmZzZXRXaWR0aDw9MSYmYi5vZmZzZXRIZWlnaHQ+MiYmIShkJiY4PmUpKX1yZXR1cm4gc2c/ZGcoInNwYW4iLCJcdTIwMGIiKTpkZygic3BhbiIsIlx4YTAiLG51bGwsImRpc3BsYXk6IGlubGluZS1ibG9jazsgd2lkdGg6IDFweDsgbWFyZ2luLXJpZ2h0OiAtMXB4Iil9ZnVuY3Rpb24gdmcoYSl7aWYobnVsbCE9dWcpcmV0dXJuIHVnO3ZhciBiPWdnKGEsZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIkFcdTA2MmVBIikpLGM9ZWcoYiwwLDEpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2lmKCFjfHxjLmxlZnQ9PWMucmlnaHQpcmV0dXJuITE7dmFyIGQ9ZWcoYiwxLDIpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybiB1Zz1kLnJpZ2h0LWMucmlnaHQ8M31mdW5jdGlvbiBBZyhhKXtpZihudWxsIT16ZylyZXR1cm4gemc7dmFyIGI9Z2coYSxkZygic3BhbiIsIngiKSksYz1iLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGQ9ZWcoYiwwLDEpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybiB6Zz1NYXRoLmFicyhjLmxlZnQtZC5sZWZ0KT4xfWZ1bmN0aW9uIENnKGEsYixjLGQpe2lmKCFhKXJldHVybiBkKGIsYywibHRyIik7Zm9yKHZhciBlPSExLGY9MDtmPGEubGVuZ3RoOysrZil7dmFyIGc9YVtmXTsoZy5mcm9tPGMmJmcudG8+Ynx8Yj09YyYmZy50bz09YikmJihkKE1hdGgubWF4KGcuZnJvbSxiKSxNYXRoLm1pbihnLnRvLGMpLDE9PWcubGV2ZWw/InJ0bCI6Imx0ciIpLGU9ITApfWV8fGQoYixjLCJsdHIiKX1mdW5jdGlvbiBEZyhhKXtyZXR1cm4gYS5sZXZlbCUyP2EudG86YS5mcm9tfWZ1bmN0aW9uIEVnKGEpe3JldHVybiBhLmxldmVsJTI/YS5mcm9tOmEudG99ZnVuY3Rpb24gRmcoYSl7dmFyIGI9YmYoYSk7cmV0dXJuIGI/RGcoYlswXSk6MH1mdW5jdGlvbiBHZyhhKXt2YXIgYj1iZihhKTtyZXR1cm4gYj9FZyhTZihiKSk6YS50ZXh0Lmxlbmd0aH1mdW5jdGlvbiBIZyhhLGIpe3ZhciBjPVdlKGEuZG9jLGIpLGQ9aGUoYyk7ZCE9YyYmKGI9JGUoZCkpO3ZhciBlPWJmKGQpLGY9ZT9lWzBdLmxldmVsJTI/R2coZCk6RmcoZCk6MDtyZXR1cm4gcGEoYixmKX1mdW5jdGlvbiBJZyhhLGIpe2Zvcih2YXIgYyxkPVdlKGEuZG9jLGIpO2M9ZmUoZCk7KWQ9Yy5maW5kKDEsITApLmxpbmUsYj1udWxsO3ZhciBlPWJmKGQpLGY9ZT9lWzBdLmxldmVsJTI/RmcoZCk6R2coZCk6ZC50ZXh0Lmxlbmd0aDtyZXR1cm4gcGEobnVsbD09Yj8kZShkKTpiLGYpfWZ1bmN0aW9uIEpnKGEsYil7dmFyIGM9SGcoYSxiLmxpbmUpLGQ9V2UoYS5kb2MsYy5saW5lKSxlPWJmKGQpO2lmKCFlfHwwPT1lWzBdLmxldmVsKXt2YXIgZj1NYXRoLm1heCgwLGQudGV4dC5zZWFyY2goL1xTLykpLGc9Yi5saW5lPT1jLmxpbmUmJmIuY2g8PWYmJmIuY2g7cmV0dXJuIHBhKGMubGluZSxnPzA6Zil9cmV0dXJuIGN9ZnVuY3Rpb24gS2coYSxiLGMpe3ZhciBkPWFbMF0ubGV2ZWw7cmV0dXJuIGI9PWQ/ITA6Yz09ZD8hMTpjPmJ9ZnVuY3Rpb24gTWcoYSxiKXtMZz1udWxsO2Zvcih2YXIgZCxjPTA7YzxhLmxlbmd0aDsrK2Mpe3ZhciBlPWFbY107aWYoZS5mcm9tPGImJmUudG8+YilyZXR1cm4gYztpZihlLmZyb209PWJ8fGUudG89PWIpe2lmKG51bGwhPWQpcmV0dXJuIEtnKGEsZS5sZXZlbCxhW2RdLmxldmVsKT8oZS5mcm9tIT1lLnRvJiYoTGc9ZCksYyk6KGUuZnJvbSE9ZS50byYmKExnPWMpLGQpO2Q9Y319cmV0dXJuIGR9ZnVuY3Rpb24gTmcoYSxiLGMsZCl7aWYoIWQpcmV0dXJuIGIrYztkbyBiKz1jO3doaWxlKGI+MCYmY2coYS50ZXh0LmNoYXJBdChiKSkpO3JldHVybiBifWZ1bmN0aW9uIE9nKGEsYixjLGQpe3ZhciBlPWJmKGEpO2lmKCFlKXJldHVybiBQZyhhLGIsYyxkKTtmb3IodmFyIGY9TWcoZSxiKSxnPWVbZl0saD1OZyhhLGIsZy5sZXZlbCUyPy1jOmMsZCk7Oyl7aWYoaD5nLmZyb20mJmg8Zy50bylyZXR1cm4gaDtpZihoPT1nLmZyb218fGg9PWcudG8pcmV0dXJuIE1nKGUsaCk9PWY/aDooZz1lW2YrPWNdLGM+MD09Zy5sZXZlbCUyP2cudG86Zy5mcm9tKTtpZihnPWVbZis9Y10sIWcpcmV0dXJuIG51bGw7aD1jPjA9PWcubGV2ZWwlMj9OZyhhLGcudG8sLTEsZCk6TmcoYSxnLmZyb20sMSxkKX19ZnVuY3Rpb24gUGcoYSxiLGMsZCl7dmFyIGU9YitjO2lmKGQpZm9yKDtlPjAmJmNnKGEudGV4dC5jaGFyQXQoZSkpOyllKz1jO3JldHVybiAwPmV8fGU+YS50ZXh0Lmxlbmd0aD9udWxsOmV9dmFyIGE9L2dlY2tvXC9cZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksYj0vTVNJRSBcZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxjPS9UcmlkZW50XC8oPzpbNy05XXxcZHsyLH0pXC4uKnJ2OihcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpLGQ9Ynx8YyxlPWQmJihiP2RvY3VtZW50LmRvY3VtZW50TW9kZXx8NjpjWzFdKSxmPS9XZWJLaXRcLy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxnPWYmJi9RdFwvXGQrXC5cZCsvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksaD0vQ2hyb21lXC8vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksaT0vT3BlcmFcLy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxqPS9BcHBsZSBDb21wdXRlci8udGVzdChuYXZpZ2F0b3IudmVuZG9yKSxrPS9LSFRNTFwvLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGw9L01hYyBPUyBYIDFcZFxEKFs4LTldfFxkXGQpXEQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksbT0vUGhhbnRvbUpTLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLG49L0FwcGxlV2ViS2l0Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiYvTW9iaWxlXC9cdysvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksbz1ufHwvQW5kcm9pZHx3ZWJPU3xCbGFja0JlcnJ5fE9wZXJhIE1pbml8T3BlcmEgTW9iaXxJRU1vYmlsZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkscD1ufHwvTWFjLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSkscT0vd2luL2kudGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pLHI9aSYmbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvVmVyc2lvblwvKFxkKlwuXGQqKS8pO3ImJihyPU51bWJlcihyWzFdKSksciYmcj49MTUmJihpPSExLGY9ITApO3ZhciBzPXAmJihnfHxpJiYobnVsbD09cnx8MTIuMTE+cikpLHQ9YXx8ZCYmZT49OSx1PSExLHY9ITE7TC5wcm90b3R5cGU9WGYoe3VwZGF0ZTpmdW5jdGlvbihhKXt2YXIgYj1hLnNjcm9sbFdpZHRoPmEuY2xpZW50V2lkdGgrMSxjPWEuc2Nyb2xsSGVpZ2h0PmEuY2xpZW50SGVpZ2h0KzEsZD1hLm5hdGl2ZUJhcldpZHRoO2lmKGMpe3RoaXMudmVydC5zdHlsZS5kaXNwbGF5PSJibG9jayIsdGhpcy52ZXJ0LnN0eWxlLmJvdHRvbT1iP2QrInB4IjoiMCI7dmFyIGU9YS52aWV3SGVpZ2h0LShiP2Q6MCk7dGhpcy52ZXJ0LmZpcnN0Q2hpbGQuc3R5bGUuaGVpZ2h0PU1hdGgubWF4KDAsYS5zY3JvbGxIZWlnaHQtYS5jbGllbnRIZWlnaHQrZSkrInB4In1lbHNlIHRoaXMudmVydC5zdHlsZS5kaXNwbGF5PSIiLHRoaXMudmVydC5maXJzdENoaWxkLnN0eWxlLmhlaWdodD0iMCI7aWYoYil7dGhpcy5ob3Jpei5zdHlsZS5kaXNwbGF5PSJibG9jayIsdGhpcy5ob3Jpei5zdHlsZS5yaWdodD1jP2QrInB4IjoiMCIsdGhpcy5ob3Jpei5zdHlsZS5sZWZ0PWEuYmFyTGVmdCsicHgiO3ZhciBmPWEudmlld1dpZHRoLWEuYmFyTGVmdC0oYz9kOjApO3RoaXMuaG9yaXouZmlyc3RDaGlsZC5zdHlsZS53aWR0aD1hLnNjcm9sbFdpZHRoLWEuY2xpZW50V2lkdGgrZisicHgifWVsc2UgdGhpcy5ob3Jpei5zdHlsZS5kaXNwbGF5PSIiLHRoaXMuaG9yaXouZmlyc3RDaGlsZC5zdHlsZS53aWR0aD0iMCI7cmV0dXJuIXRoaXMuY2hlY2tlZE92ZXJsYXkmJmEuY2xpZW50SGVpZ2h0PjAmJigwPT1kJiZ0aGlzLm92ZXJsYXlIYWNrKCksdGhpcy5jaGVja2VkT3ZlcmxheT0hMCkse3JpZ2h0OmM/ZDowLGJvdHRvbTpiP2Q6MH19LHNldFNjcm9sbExlZnQ6ZnVuY3Rpb24oYSl7dGhpcy5ob3Jpei5zY3JvbGxMZWZ0IT1hJiYodGhpcy5ob3Jpei5zY3JvbGxMZWZ0PWEpfSxzZXRTY3JvbGxUb3A6ZnVuY3Rpb24oYSl7dGhpcy52ZXJ0LnNjcm9sbFRvcCE9YSYmKHRoaXMudmVydC5zY3JvbGxUb3A9YSl9LG92ZXJsYXlIYWNrOmZ1bmN0aW9uKCl7dmFyIGE9cCYmIWw/IjEycHgiOiIxOHB4Ijt0aGlzLmhvcml6LnN0eWxlLm1pbkhlaWdodD10aGlzLnZlcnQuc3R5bGUubWluV2lkdGg9YTt2YXIgYj10aGlzLGM9ZnVuY3Rpb24oYSl7d2YoYSkhPWIudmVydCYmd2YoYSkhPWIuaG9yaXomJlFiKGIuY20sbWMpKGEpfTt5Zih0aGlzLnZlcnQsIm1vdXNlZG93biIsYykseWYodGhpcy5ob3JpeiwibW91c2Vkb3duIixjKX0sY2xlYXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmhvcml6LnBhcmVudE5vZGU7YS5yZW1vdmVDaGlsZCh0aGlzLmhvcml6KSxhLnJlbW92ZUNoaWxkKHRoaXMudmVydCl9fSxMLnByb3RvdHlwZSksTS5wcm90b3R5cGU9WGYoe3VwZGF0ZTpmdW5jdGlvbigpe3JldHVybntib3R0b206MCxyaWdodDowfX0sc2V0U2Nyb2xsTGVmdDpmdW5jdGlvbigpe30sc2V0U2Nyb2xsVG9wOmZ1bmN0aW9uKCl7fSxjbGVhcjpmdW5jdGlvbigpe319LE0ucHJvdG90eXBlKSx3LnNjcm9sbGJhck1vZGVsPXsibmF0aXZlIjpMLCJudWxsIjpNfSxWLnByb3RvdHlwZS5zaWduYWw9ZnVuY3Rpb24oYSxiKXtHZihhLGIpJiZ0aGlzLmV2ZW50cy5wdXNoKGFyZ3VtZW50cyl9LFYucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8dGhpcy5ldmVudHMubGVuZ3RoO2ErKylBZi5hcHBseShudWxsLHRoaXMuZXZlbnRzW2FdKX07dmFyIHBhPXcuUG9zPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBwYT8odGhpcy5saW5lPWEsdm9pZCh0aGlzLmNoPWIpKTpuZXcgcGEoYSxiKX0scWE9dy5jbXBQb3M9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5saW5lLWIubGluZXx8YS5jaC1iLmNofTt1YS5wcm90b3R5cGU9e3ByaW1hcnk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYW5nZXNbdGhpcy5wcmltSW5kZXhdfSxlcXVhbHM6ZnVuY3Rpb24oYSl7aWYoYT09dGhpcylyZXR1cm4hMDtpZihhLnByaW1JbmRleCE9dGhpcy5wcmltSW5kZXh8fGEucmFuZ2VzLmxlbmd0aCE9dGhpcy5yYW5nZXMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYj0wO2I8dGhpcy5yYW5nZXMubGVuZ3RoO2IrKyl7dmFyIGM9dGhpcy5yYW5nZXNbYl0sZD1hLnJhbmdlc1tiXTtpZigwIT1xYShjLmFuY2hvcixkLmFuY2hvcil8fDAhPXFhKGMuaGVhZCxkLmhlYWQpKXJldHVybiExfXJldHVybiEwfSxkZWVwQ29weTpmdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTA7Yjx0aGlzLnJhbmdlcy5sZW5ndGg7YisrKWFbYl09bmV3IHZhKHJhKHRoaXMucmFuZ2VzW2JdLmFuY2hvcikscmEodGhpcy5yYW5nZXNbYl0uaGVhZCkpO3JldHVybiBuZXcgdWEoYSx0aGlzLnByaW1JbmRleCl9LHNvbWV0aGluZ1NlbGVjdGVkOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLnJhbmdlcy5sZW5ndGg7YSsrKWlmKCF0aGlzLnJhbmdlc1thXS5lbXB0eSgpKXJldHVybiEwO3JldHVybiExfSxjb250YWluczpmdW5jdGlvbihhLGIpe2J8fChiPWEpO2Zvcih2YXIgYz0wO2M8dGhpcy5yYW5nZXMubGVuZ3RoO2MrKyl7dmFyIGQ9dGhpcy5yYW5nZXNbY107aWYocWEoYixkLmZyb20oKSk+PTAmJnFhKGEsZC50bygpKTw9MClyZXR1cm4gY31yZXR1cm4tMX19LHZhLnByb3RvdHlwZT17ZnJvbTpmdW5jdGlvbigpe3JldHVybiB0YSh0aGlzLmFuY2hvcix0aGlzLmhlYWQpfSx0bzpmdW5jdGlvbigpe3JldHVybiBzYSh0aGlzLmFuY2hvcix0aGlzLmhlYWQpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhlYWQubGluZT09dGhpcy5hbmNob3IubGluZSYmdGhpcy5oZWFkLmNoPT10aGlzLmFuY2hvci5jaH19O3ZhciBCYixuYyxvYyxsYj17bGVmdDowLHJpZ2h0OjAsdG9wOjAsYm90dG9tOjB9LEViPW51bGwsRmI9MCxjYz1udWxsLHVjPTAsemM9MCxBYz1udWxsO2Q/QWM9LS41MzphP0FjPTE1Omg/QWM9LS43OmomJihBYz0tMS8zKTt2YXIgQmM9ZnVuY3Rpb24oYSl7dmFyIGI9YS53aGVlbERlbHRhWCxjPWEud2hlZWxEZWx0YVk7cmV0dXJuIG51bGw9PWImJmEuZGV0YWlsJiZhLmF4aXM9PWEuSE9SSVpPTlRBTF9BWElTJiYoYj1hLmRldGFpbCksbnVsbD09YyYmYS5kZXRhaWwmJmEuYXhpcz09YS5WRVJUSUNBTF9BWElTP2M9YS5kZXRhaWw6bnVsbD09YyYmKGM9YS53aGVlbERlbHRhKSx7eDpiLHk6Y319O3cud2hlZWxFdmVudFBpeGVscz1mdW5jdGlvbihhKXt2YXIgYj1CYyhhKTtyZXR1cm4gYi54Kj1BYyxiLnkqPUFjLGJ9O3ZhciBGYz1uZXcgTmYsSmM9bnVsbCxTYz13LmNoYW5nZUVuZD1mdW5jdGlvbihhKXtyZXR1cm4gYS50ZXh0P3BhKGEuZnJvbS5saW5lK2EudGV4dC5sZW5ndGgtMSxTZihhLnRleHQpLmxlbmd0aCsoMT09YS50ZXh0Lmxlbmd0aD9hLmZyb20uY2g6MCkpOmEudG99O3cucHJvdG90eXBlPXtjb25zdHJ1Y3Rvcjp3LGZvY3VzOmZ1bmN0aW9uKCl7d2luZG93LmZvY3VzKCksZmModGhpcyksYmModGhpcyl9LHNldE9wdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMub3B0aW9ucyxkPWNbYV07KGNbYV0hPWJ8fCJtb2RlIj09YSkmJihjW2FdPWIscWQuaGFzT3duUHJvcGVydHkoYSkmJlFiKHRoaXMscWRbYV0pKHRoaXMsYixkKSl9LGdldE9wdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vcHRpb25zW2FdfSxnZXREb2M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb2N9LGFkZEtleU1hcDpmdW5jdGlvbihhLGIpe3RoaXMuc3RhdGUua2V5TWFwc1tiPyJwdXNoIjoidW5zaGlmdCJdKEdkKGEpKX0scmVtb3ZlS2V5TWFwOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLnN0YXRlLmtleU1hcHMsYz0wO2M8Yi5sZW5ndGg7KytjKWlmKGJbY109PWF8fGJbY10ubmFtZT09YSlyZXR1cm4gYi5zcGxpY2UoYywxKSwhMH0sYWRkT3ZlcmxheTpSYihmdW5jdGlvbihhLGIpe3ZhciBjPWEudG9rZW4/YTp3LmdldE1vZGUodGhpcy5vcHRpb25zLGEpO2lmKGMuc3RhcnRTdGF0ZSl0aHJvdyBuZXcgRXJyb3IoIk92ZXJsYXlzIG1heSBub3QgYmUgc3RhdGVmdWwuIik7dGhpcy5zdGF0ZS5vdmVybGF5cy5wdXNoKHttb2RlOmMsbW9kZVNwZWM6YSxvcGFxdWU6YiYmYi5vcGFxdWV9KSx0aGlzLnN0YXRlLm1vZGVHZW4rKyxWYih0aGlzKX0pLHJlbW92ZU92ZXJsYXk6UmIoZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuc3RhdGUub3ZlcmxheXMsYz0wO2M8Yi5sZW5ndGg7KytjKXt2YXIgZD1iW2NdLm1vZGVTcGVjO2lmKGQ9PWF8fCJzdHJpbmciPT10eXBlb2YgYSYmZC5uYW1lPT1hKXJldHVybiBiLnNwbGljZShjLDEpLHRoaXMuc3RhdGUubW9kZUdlbisrLHZvaWQgVmIodGhpcyl9fSksaW5kZW50TGluZTpSYihmdW5jdGlvbihhLGIsYyl7InN0cmluZyIhPXR5cGVvZiBiJiYibnVtYmVyIiE9dHlwZW9mIGImJihiPW51bGw9PWI/dGhpcy5vcHRpb25zLnNtYXJ0SW5kZW50PyJzbWFydCI6InByZXYiOmI/ImFkZCI6InN1YnRyYWN0IiksQmEodGhpcy5kb2MsYSkmJmtkKHRoaXMsYSxiLGMpfSksaW5kZW50U2VsZWN0aW9uOlJiKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmRvYy5zZWwucmFuZ2VzLGM9LTEsZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZT1iW2RdO2lmKGUuZW1wdHkoKSllLmhlYWQubGluZT5jJiYoa2QodGhpcyxlLmhlYWQubGluZSxhLCEwKSxjPWUuaGVhZC5saW5lLGQ9PXRoaXMuZG9jLnNlbC5wcmltSW5kZXgmJmlkKHRoaXMpKTtlbHNle3ZhciBmPWUuZnJvbSgpLGc9ZS50bygpLGg9TWF0aC5tYXgoYyxmLmxpbmUpO2M9TWF0aC5taW4odGhpcy5sYXN0TGluZSgpLGcubGluZS0oZy5jaD8wOjEpKSsxO2Zvcih2YXIgaT1oO2M+aTsrK2kpa2QodGhpcyxpLGEpO3ZhciBqPXRoaXMuZG9jLnNlbC5yYW5nZXM7MD09Zi5jaCYmYi5sZW5ndGg9PWoubGVuZ3RoJiZqW2RdLmZyb20oKS5jaD4wJiZHYSh0aGlzLmRvYyxkLG5ldyB2YShmLGpbZF0udG8oKSksS2YpfX19KSxnZXRUb2tlbkF0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHhlKHRoaXMsYSxiKX0sZ2V0TGluZVRva2VuczpmdW5jdGlvbihhLGIpe3JldHVybiB4ZSh0aGlzLHBhKGEpLGIsITApfSxnZXRUb2tlblR5cGVBdDpmdW5jdGlvbihhKXthPXphKHRoaXMuZG9jLGEpO3ZhciBmLGI9QWUodGhpcyxXZSh0aGlzLmRvYyxhLmxpbmUpKSxjPTAsZD0oYi5sZW5ndGgtMSkvMixlPWEuY2g7CmlmKDA9PWUpZj1iWzJdO2Vsc2UgZm9yKDs7KXt2YXIgZz1jK2Q+PjE7aWYoKGc/YlsyKmctMV06MCk+PWUpZD1nO2Vsc2V7aWYoIShiWzIqZysxXTxlKSl7Zj1iWzIqZysyXTticmVha31jPWcrMX19dmFyIGg9Zj9mLmluZGV4T2YoImNtLW92ZXJsYXkgIik6LTE7cmV0dXJuIDA+aD9mOjA9PWg/bnVsbDpmLnNsaWNlKDAsaC0xKX0sZ2V0TW9kZUF0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZG9jLm1vZGU7cmV0dXJuIGIuaW5uZXJNb2RlP3cuaW5uZXJNb2RlKGIsdGhpcy5nZXRUb2tlbkF0KGEpLnN0YXRlKS5tb2RlOmJ9LGdldEhlbHBlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmdldEhlbHBlcnMoYSxiKVswXX0sZ2V0SGVscGVyczpmdW5jdGlvbihhLGIpe3ZhciBjPVtdO2lmKCF4ZC5oYXNPd25Qcm9wZXJ0eShiKSlyZXR1cm4geGQ7dmFyIGQ9eGRbYl0sZT10aGlzLmdldE1vZGVBdChhKTtpZigic3RyaW5nIj09dHlwZW9mIGVbYl0pZFtlW2JdXSYmYy5wdXNoKGRbZVtiXV0pO2Vsc2UgaWYoZVtiXSlmb3IodmFyIGY9MDtmPGVbYl0ubGVuZ3RoO2YrKyl7dmFyIGc9ZFtlW2JdW2ZdXTtnJiZjLnB1c2goZyl9ZWxzZSBlLmhlbHBlclR5cGUmJmRbZS5oZWxwZXJUeXBlXT9jLnB1c2goZFtlLmhlbHBlclR5cGVdKTpkW2UubmFtZV0mJmMucHVzaChkW2UubmFtZV0pO2Zvcih2YXIgZj0wO2Y8ZC5fZ2xvYmFsLmxlbmd0aDtmKyspe3ZhciBoPWQuX2dsb2JhbFtmXTtoLnByZWQoZSx0aGlzKSYmLTE9PVVmKGMsaC52YWwpJiZjLnB1c2goaC52YWwpfXJldHVybiBjfSxnZXRTdGF0ZUFmdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5kb2M7cmV0dXJuIGE9eWEoYyxudWxsPT1hP2MuZmlyc3QrYy5zaXplLTE6YSksWmEodGhpcyxhKzEsYil9LGN1cnNvckNvb3JkczpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9dGhpcy5kb2Muc2VsLnByaW1hcnkoKTtyZXR1cm4gYz1udWxsPT1hP2QuaGVhZDoib2JqZWN0Ij09dHlwZW9mIGE/emEodGhpcy5kb2MsYSk6YT9kLmZyb20oKTpkLnRvKCksd2IodGhpcyxjLGJ8fCJwYWdlIil9LGNoYXJDb29yZHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdmIodGhpcyx6YSh0aGlzLmRvYyxhKSxifHwicGFnZSIpfSxjb29yZHNDaGFyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9dWIodGhpcyxhLGJ8fCJwYWdlIiksemIodGhpcyxhLmxlZnQsYS50b3ApfSxsaW5lQXRIZWlnaHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT11Yih0aGlzLHt0b3A6YSxsZWZ0OjB9LGJ8fCJwYWdlIikudG9wLF9lKHRoaXMuZG9jLGErdGhpcy5kaXNwbGF5LnZpZXdPZmZzZXQpfSxoZWlnaHRBdExpbmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0hMSxkPXRoaXMuZG9jLmZpcnN0K3RoaXMuZG9jLnNpemUtMTthPHRoaXMuZG9jLmZpcnN0P2E9dGhpcy5kb2MuZmlyc3Q6YT5kJiYoYT1kLGM9ITApO3ZhciBlPVdlKHRoaXMuZG9jLGEpO3JldHVybiB0Yih0aGlzLGUse3RvcDowLGxlZnQ6MH0sYnx8InBhZ2UiKS50b3ArKGM/dGhpcy5kb2MuaGVpZ2h0LWFmKGUpOjApfSxkZWZhdWx0VGV4dEhlaWdodDpmdW5jdGlvbigpe3JldHVybiBDYih0aGlzLmRpc3BsYXkpfSxkZWZhdWx0Q2hhcldpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIERiKHRoaXMuZGlzcGxheSl9LHNldEd1dHRlck1hcmtlcjpSYihmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGxkKHRoaXMuZG9jLGEsImd1dHRlciIsZnVuY3Rpb24oYSl7dmFyIGQ9YS5ndXR0ZXJNYXJrZXJzfHwoYS5ndXR0ZXJNYXJrZXJzPXt9KTtyZXR1cm4gZFtiXT1jLCFjJiZhZyhkKSYmKGEuZ3V0dGVyTWFya2Vycz1udWxsKSwhMH0pfSksY2xlYXJHdXR0ZXI6UmIoZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuZG9jLGQ9Yy5maXJzdDtjLml0ZXIoZnVuY3Rpb24oYyl7Yy5ndXR0ZXJNYXJrZXJzJiZjLmd1dHRlck1hcmtlcnNbYV0mJihjLmd1dHRlck1hcmtlcnNbYV09bnVsbCxXYihiLGQsImd1dHRlciIpLGFnKGMuZ3V0dGVyTWFya2VycykmJihjLmd1dHRlck1hcmtlcnM9bnVsbCkpLCsrZH0pfSksYWRkTGluZVdpZGdldDpSYihmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHFlKHRoaXMsYSxiLGMpfSkscmVtb3ZlTGluZVdpZGdldDpmdW5jdGlvbihhKXthLmNsZWFyKCl9LGxpbmVJbmZvOmZ1bmN0aW9uKGEpe2lmKCJudW1iZXIiPT10eXBlb2YgYSl7aWYoIUJhKHRoaXMuZG9jLGEpKXJldHVybiBudWxsO3ZhciBiPWE7aWYoYT1XZSh0aGlzLmRvYyxhKSwhYSlyZXR1cm4gbnVsbH1lbHNle3ZhciBiPSRlKGEpO2lmKG51bGw9PWIpcmV0dXJuIG51bGx9cmV0dXJue2xpbmU6YixoYW5kbGU6YSx0ZXh0OmEudGV4dCxndXR0ZXJNYXJrZXJzOmEuZ3V0dGVyTWFya2Vycyx0ZXh0Q2xhc3M6YS50ZXh0Q2xhc3MsYmdDbGFzczphLmJnQ2xhc3Msd3JhcENsYXNzOmEud3JhcENsYXNzLHdpZGdldHM6YS53aWRnZXRzfX0sZ2V0Vmlld3BvcnQ6ZnVuY3Rpb24oKXtyZXR1cm57ZnJvbTp0aGlzLmRpc3BsYXkudmlld0Zyb20sdG86dGhpcy5kaXNwbGF5LnZpZXdUb319LGFkZFdpZGdldDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPXRoaXMuZGlzcGxheTthPXdiKHRoaXMsemEodGhpcy5kb2MsYSkpO3ZhciBnPWEuYm90dG9tLGg9YS5sZWZ0O2lmKGIuc3R5bGUucG9zaXRpb249ImFic29sdXRlIixiLnNldEF0dHJpYnV0ZSgiY20taWdub3JlLWV2ZW50cyIsInRydWUiKSxmLnNpemVyLmFwcGVuZENoaWxkKGIpLCJvdmVyIj09ZClnPWEudG9wO2Vsc2UgaWYoImFib3ZlIj09ZHx8Im5lYXIiPT1kKXt2YXIgaT1NYXRoLm1heChmLndyYXBwZXIuY2xpZW50SGVpZ2h0LHRoaXMuZG9jLmhlaWdodCksaj1NYXRoLm1heChmLnNpemVyLmNsaWVudFdpZHRoLGYubGluZVNwYWNlLmNsaWVudFdpZHRoKTsoImFib3ZlIj09ZHx8YS5ib3R0b20rYi5vZmZzZXRIZWlnaHQ+aSkmJmEudG9wPmIub2Zmc2V0SGVpZ2h0P2c9YS50b3AtYi5vZmZzZXRIZWlnaHQ6YS5ib3R0b20rYi5vZmZzZXRIZWlnaHQ8PWkmJihnPWEuYm90dG9tKSxoK2Iub2Zmc2V0V2lkdGg+aiYmKGg9ai1iLm9mZnNldFdpZHRoKX1iLnN0eWxlLnRvcD1nKyJweCIsYi5zdHlsZS5sZWZ0PWIuc3R5bGUucmlnaHQ9IiIsInJpZ2h0Ij09ZT8oaD1mLnNpemVyLmNsaWVudFdpZHRoLWIub2Zmc2V0V2lkdGgsYi5zdHlsZS5yaWdodD0iMHB4Iik6KCJsZWZ0Ij09ZT9oPTA6Im1pZGRsZSI9PWUmJihoPShmLnNpemVyLmNsaWVudFdpZHRoLWIub2Zmc2V0V2lkdGgpLzIpLGIuc3R5bGUubGVmdD1oKyJweCIpLGMmJmZkKHRoaXMsaCxnLGgrYi5vZmZzZXRXaWR0aCxnK2Iub2Zmc2V0SGVpZ2h0KX0sdHJpZ2dlck9uS2V5RG93bjpSYihLYyksdHJpZ2dlck9uS2V5UHJlc3M6UmIoTmMpLHRyaWdnZXJPbktleVVwOk1jLGV4ZWNDb21tYW5kOmZ1bmN0aW9uKGEpe3JldHVybiBBZC5oYXNPd25Qcm9wZXJ0eShhKT9BZFthXSh0aGlzKTp2b2lkIDB9LGZpbmRQb3NIOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPTE7MD5iJiYoZT0tMSxiPS1iKTtmb3IodmFyIGY9MCxnPXphKHRoaXMuZG9jLGEpO2I+ZiYmKGc9bmQodGhpcy5kb2MsZyxlLGMsZCksIWcuaGl0U2lkZSk7KytmKTtyZXR1cm4gZ30sbW92ZUg6UmIoZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzO2MuZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKGQpe3JldHVybiBjLmRpc3BsYXkuc2hpZnR8fGMuZG9jLmV4dGVuZHx8ZC5lbXB0eSgpP25kKGMuZG9jLGQuaGVhZCxhLGIsYy5vcHRpb25zLnJ0bE1vdmVWaXN1YWxseSk6MD5hP2QuZnJvbSgpOmQudG8oKX0sTWYpfSksZGVsZXRlSDpSYihmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZG9jLnNlbCxkPXRoaXMuZG9jO2Muc29tZXRoaW5nU2VsZWN0ZWQoKT9kLnJlcGxhY2VTZWxlY3Rpb24oIiIsbnVsbCwiK2RlbGV0ZSIpOm1kKHRoaXMsZnVuY3Rpb24oYyl7dmFyIGU9bmQoZCxjLmhlYWQsYSxiLCExKTtyZXR1cm4gMD5hP3tmcm9tOmUsdG86Yy5oZWFkfTp7ZnJvbTpjLmhlYWQsdG86ZX19KX0pLGZpbmRQb3NWOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPTEsZj1kOzA+YiYmKGU9LTEsYj0tYik7Zm9yKHZhciBnPTAsaD16YSh0aGlzLmRvYyxhKTtiPmc7KytnKXt2YXIgaT13Yih0aGlzLGgsImRpdiIpO2lmKG51bGw9PWY/Zj1pLmxlZnQ6aS5sZWZ0PWYsaD1vZCh0aGlzLGksZSxjKSxoLmhpdFNpZGUpYnJlYWt9cmV0dXJuIGh9LG1vdmVWOlJiKGZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPXRoaXMuZG9jLGU9W10sZj0hYy5kaXNwbGF5LnNoaWZ0JiYhZC5leHRlbmQmJmQuc2VsLnNvbWV0aGluZ1NlbGVjdGVkKCk7aWYoZC5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24oZyl7aWYoZilyZXR1cm4gMD5hP2cuZnJvbSgpOmcudG8oKTt2YXIgaD13YihjLGcuaGVhZCwiZGl2Iik7bnVsbCE9Zy5nb2FsQ29sdW1uJiYoaC5sZWZ0PWcuZ29hbENvbHVtbiksZS5wdXNoKGgubGVmdCk7dmFyIGk9b2QoYyxoLGEsYik7cmV0dXJuInBhZ2UiPT1iJiZnPT1kLnNlbC5wcmltYXJ5KCkmJmhkKGMsbnVsbCx2YihjLGksImRpdiIpLnRvcC1oLnRvcCksaX0sTWYpLGUubGVuZ3RoKWZvcih2YXIgZz0wO2c8ZC5zZWwucmFuZ2VzLmxlbmd0aDtnKyspZC5zZWwucmFuZ2VzW2ddLmdvYWxDb2x1bW49ZVtnXX0pLGZpbmRXb3JkQXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5kb2MsYz1XZShiLGEubGluZSkudGV4dCxkPWEuY2gsZT1hLmNoO2lmKGMpe3ZhciBmPXRoaXMuZ2V0SGVscGVyKGEsIndvcmRDaGFycyIpOyhhLnhSZWw8MHx8ZT09Yy5sZW5ndGgpJiZkPy0tZDorK2U7Zm9yKHZhciBnPWMuY2hhckF0KGQpLGg9X2YoZyxmKT9mdW5jdGlvbihhKXtyZXR1cm4gX2YoYSxmKX06L1xzLy50ZXN0KGcpP2Z1bmN0aW9uKGEpe3JldHVybi9ccy8udGVzdChhKX06ZnVuY3Rpb24oYSl7cmV0dXJuIS9ccy8udGVzdChhKSYmIV9mKGEpfTtkPjAmJmgoYy5jaGFyQXQoZC0xKSk7KS0tZDtmb3IoO2U8Yy5sZW5ndGgmJmgoYy5jaGFyQXQoZSkpOykrK2V9cmV0dXJuIG5ldyB2YShwYShhLmxpbmUsZCkscGEoYS5saW5lLGUpKX0sdG9nZ2xlT3ZlcndyaXRlOmZ1bmN0aW9uKGEpeyhudWxsPT1hfHxhIT10aGlzLnN0YXRlLm92ZXJ3cml0ZSkmJigodGhpcy5zdGF0ZS5vdmVyd3JpdGU9IXRoaXMuc3RhdGUub3ZlcndyaXRlKT9sZyh0aGlzLmRpc3BsYXkuY3Vyc29yRGl2LCJDb2RlTWlycm9yLW92ZXJ3cml0ZSIpOmtnKHRoaXMuZGlzcGxheS5jdXJzb3JEaXYsIkNvZGVNaXJyb3Itb3ZlcndyaXRlIiksQWYodGhpcywib3ZlcndyaXRlVG9nZ2xlIix0aGlzLHRoaXMuc3RhdGUub3ZlcndyaXRlKSl9LGhhc0ZvY3VzOmZ1bmN0aW9uKCl7cmV0dXJuIGlnKCk9PXRoaXMuZGlzcGxheS5pbnB1dH0sc2Nyb2xsVG86UmIoZnVuY3Rpb24oYSxiKXsobnVsbCE9YXx8bnVsbCE9YikmJmpkKHRoaXMpLG51bGwhPWEmJih0aGlzLmN1ck9wLnNjcm9sbExlZnQ9YSksbnVsbCE9YiYmKHRoaXMuY3VyT3Auc2Nyb2xsVG9wPWIpfSksZ2V0U2Nyb2xsSW5mbzpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZGlzcGxheS5zY3JvbGxlcjtyZXR1cm57bGVmdDphLnNjcm9sbExlZnQsdG9wOmEuc2Nyb2xsVG9wLGhlaWdodDphLnNjcm9sbEhlaWdodC1iYih0aGlzKS10aGlzLmRpc3BsYXkuYmFySGVpZ2h0LHdpZHRoOmEuc2Nyb2xsV2lkdGgtYmIodGhpcyktdGhpcy5kaXNwbGF5LmJhcldpZHRoLGNsaWVudEhlaWdodDpkYih0aGlzKSxjbGllbnRXaWR0aDpjYih0aGlzKX19LHNjcm9sbEludG9WaWV3OlJiKGZ1bmN0aW9uKGEsYil7aWYobnVsbD09YT8oYT17ZnJvbTp0aGlzLmRvYy5zZWwucHJpbWFyeSgpLmhlYWQsdG86bnVsbH0sbnVsbD09YiYmKGI9dGhpcy5vcHRpb25zLmN1cnNvclNjcm9sbE1hcmdpbikpOiJudW1iZXIiPT10eXBlb2YgYT9hPXtmcm9tOnBhKGEsMCksdG86bnVsbH06bnVsbD09YS5mcm9tJiYoYT17ZnJvbTphLHRvOm51bGx9KSxhLnRvfHwoYS50bz1hLmZyb20pLGEubWFyZ2luPWJ8fDAsbnVsbCE9YS5mcm9tLmxpbmUpamQodGhpcyksdGhpcy5jdXJPcC5zY3JvbGxUb1Bvcz1hO2Vsc2V7dmFyIGM9Z2QodGhpcyxNYXRoLm1pbihhLmZyb20ubGVmdCxhLnRvLmxlZnQpLE1hdGgubWluKGEuZnJvbS50b3AsYS50by50b3ApLWEubWFyZ2luLE1hdGgubWF4KGEuZnJvbS5yaWdodCxhLnRvLnJpZ2h0KSxNYXRoLm1heChhLmZyb20uYm90dG9tLGEudG8uYm90dG9tKSthLm1hcmdpbik7dGhpcy5zY3JvbGxUbyhjLnNjcm9sbExlZnQsYy5zY3JvbGxUb3ApfX0pLHNldFNpemU6UmIoZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBkKGEpe3JldHVybiJudW1iZXIiPT10eXBlb2YgYXx8L15cZCskLy50ZXN0KFN0cmluZyhhKSk/YSsicHgiOmF9dmFyIGM9dGhpcztudWxsIT1hJiYoYy5kaXNwbGF5LndyYXBwZXIuc3R5bGUud2lkdGg9ZChhKSksbnVsbCE9YiYmKGMuZGlzcGxheS53cmFwcGVyLnN0eWxlLmhlaWdodD1kKGIpKSxjLm9wdGlvbnMubGluZVdyYXBwaW5nJiZwYih0aGlzKTt2YXIgZT1jLmRpc3BsYXkudmlld0Zyb207Yy5kb2MuaXRlcihlLGMuZGlzcGxheS52aWV3VG8sZnVuY3Rpb24oYSl7aWYoYS53aWRnZXRzKWZvcih2YXIgYj0wO2I8YS53aWRnZXRzLmxlbmd0aDtiKyspaWYoYS53aWRnZXRzW2JdLm5vSFNjcm9sbCl7V2IoYyxlLCJ3aWRnZXQiKTticmVha30rK2V9KSxjLmN1ck9wLmZvcmNlVXBkYXRlPSEwLEFmKGMsInJlZnJlc2giLHRoaXMpfSksb3BlcmF0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiBQYih0aGlzLGEpfSxyZWZyZXNoOlJiKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5kaXNwbGF5LmNhY2hlZFRleHRIZWlnaHQ7VmIodGhpcyksdGhpcy5jdXJPcC5mb3JjZVVwZGF0ZT0hMCxxYih0aGlzKSx0aGlzLnNjcm9sbFRvKHRoaXMuZG9jLnNjcm9sbExlZnQsdGhpcy5kb2Muc2Nyb2xsVG9wKSxHKHRoaXMpLChudWxsPT1hfHxNYXRoLmFicyhhLUNiKHRoaXMuZGlzcGxheSkpPi41KSYmQyh0aGlzKSxBZih0aGlzLCJyZWZyZXNoIix0aGlzKX0pLHN3YXBEb2M6UmIoZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5kb2M7cmV0dXJuIGIuY209bnVsbCxWZSh0aGlzLGEpLHFiKHRoaXMpLGVjKHRoaXMpLHRoaXMuc2Nyb2xsVG8oYS5zY3JvbGxMZWZ0LGEuc2Nyb2xsVG9wKSx0aGlzLmN1ck9wLmZvcmNlU2Nyb2xsPSEwLENmKHRoaXMsInN3YXBEb2MiLHRoaXMsYiksYn0pLGdldElucHV0RmllbGQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNwbGF5LmlucHV0fSxnZXRXcmFwcGVyRWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc3BsYXkud3JhcHBlcn0sZ2V0U2Nyb2xsZXJFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzcGxheS5zY3JvbGxlcn0sZ2V0R3V0dGVyRWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc3BsYXkuZ3V0dGVyc319LEhmKHcpO3ZhciBwZD13LmRlZmF1bHRzPXt9LHFkPXcub3B0aW9uSGFuZGxlcnM9e30sc2Q9dy5Jbml0PXt0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJDb2RlTWlycm9yLkluaXQifX07cmQoInZhbHVlIiwiIixmdW5jdGlvbihhLGIpe2Euc2V0VmFsdWUoYil9LCEwKSxyZCgibW9kZSIsbnVsbCxmdW5jdGlvbihhLGIpe2EuZG9jLm1vZGVPcHRpb249Yix5KGEpfSwhMCkscmQoImluZGVudFVuaXQiLDIseSwhMCkscmQoImluZGVudFdpdGhUYWJzIiwhMSkscmQoInNtYXJ0SW5kZW50IiwhMCkscmQoInRhYlNpemUiLDQsZnVuY3Rpb24oYSl7eihhKSxxYihhKSxWYihhKX0sITApLHJkKCJzcGVjaWFsQ2hhcnMiLC9bXHRcdTAwMDAtXHUwMDE5XHUwMGFkXHUyMDBiLVx1MjAwZlx1MjAyOFx1MjAyOVx1ZmVmZl0vZyxmdW5jdGlvbihhLGIpe2Eub3B0aW9ucy5zcGVjaWFsQ2hhcnM9bmV3IFJlZ0V4cChiLnNvdXJjZSsoYi50ZXN0KCIJIik/IiI6InwJIiksImciKSxhLnJlZnJlc2goKX0sITApLHJkKCJzcGVjaWFsQ2hhclBsYWNlaG9sZGVyIixHZSxmdW5jdGlvbihhKXthLnJlZnJlc2goKX0sITApLHJkKCJlbGVjdHJpY0NoYXJzIiwhMCkscmQoInJ0bE1vdmVWaXN1YWxseSIsIXEpLHJkKCJ3aG9sZUxpbmVVcGRhdGVCZWZvcmUiLCEwKSxyZCgidGhlbWUiLCJkZWZhdWx0IixmdW5jdGlvbihhKXtEKGEpLEUoYSl9LCEwKSxyZCgia2V5TWFwIiwiZGVmYXVsdCIsZnVuY3Rpb24oYSxiLGMpe3ZhciBkPUdkKGIpLGU9YyE9dy5Jbml0JiZHZChjKTtlJiZlLmRldGFjaCYmZS5kZXRhY2goYSxkKSxkLmF0dGFjaCYmZC5hdHRhY2goYSxlfHxudWxsKX0pLHJkKCJleHRyYUtleXMiLG51bGwpLHJkKCJsaW5lV3JhcHBpbmciLCExLEEsITApLHJkKCJndXR0ZXJzIixbXSxmdW5jdGlvbihhKXtKKGEub3B0aW9ucyksRShhKX0sITApLHJkKCJmaXhlZEd1dHRlciIsITAsZnVuY3Rpb24oYSxiKXthLmRpc3BsYXkuZ3V0dGVycy5zdHlsZS5sZWZ0PWI/VShhLmRpc3BsYXkpKyJweCI6IjAiLGEucmVmcmVzaCgpfSwhMCkscmQoImNvdmVyR3V0dGVyTmV4dFRvU2Nyb2xsYmFyIiwhMSxmdW5jdGlvbihhKXtPKGEpfSwhMCkscmQoInNjcm9sbGJhclN0eWxlIiwibmF0aXZlIixmdW5jdGlvbihhKXtOKGEpLE8oYSksYS5kaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsVG9wKGEuZG9jLnNjcm9sbFRvcCksYS5kaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsTGVmdChhLmRvYy5zY3JvbGxMZWZ0KX0sITApLHJkKCJsaW5lTnVtYmVycyIsITEsZnVuY3Rpb24oYSl7SihhLm9wdGlvbnMpLEUoYSl9LCEwKSxyZCgiZmlyc3RMaW5lTnVtYmVyIiwxLEUsITApLHJkKCJsaW5lTnVtYmVyRm9ybWF0dGVyIixmdW5jdGlvbihhKXtyZXR1cm4gYX0sRSwhMCkscmQoInNob3dDdXJzb3JXaGVuU2VsZWN0aW5nIiwhMSxTYSwhMCkscmQoInJlc2V0U2VsZWN0aW9uT25Db250ZXh0TWVudSIsITApLHJkKCJyZWFkT25seSIsITEsZnVuY3Rpb24oYSxiKXsibm9jdXJzb3IiPT1iPyhQYyhhKSxhLmRpc3BsYXkuaW5wdXQuYmx1cigpLGEuZGlzcGxheS5kaXNhYmxlZD0hMCk6KGEuZGlzcGxheS5kaXNhYmxlZD0hMSxifHxlYyhhKSl9KSxyZCgiZGlzYWJsZUlucHV0IiwhMSxmdW5jdGlvbihhLGIpe2J8fGVjKGEpfSwhMCkscmQoImRyYWdEcm9wIiwhMCkscmQoImN1cnNvckJsaW5rUmF0ZSIsNTMwKSxyZCgiY3Vyc29yU2Nyb2xsTWFyZ2luIiwwKSxyZCgiY3Vyc29ySGVpZ2h0IiwxLFNhLCEwKSxyZCgic2luZ2xlQ3Vyc29ySGVpZ2h0UGVyTGluZSIsITAsU2EsITApLHJkKCJ3b3JrVGltZSIsMTAwKSxyZCgid29ya0RlbGF5IiwxMDApLHJkKCJmbGF0dGVuU3BhbnMiLCEwLHosITApLHJkKCJhZGRNb2RlQ2xhc3MiLCExLHosITApLHJkKCJwb2xsSW50ZXJ2YWwiLDEwMCkscmQoInVuZG9EZXB0aCIsMjAwLGZ1bmN0aW9uKGEsYil7YS5kb2MuaGlzdG9yeS51bmRvRGVwdGg9Yn0pLHJkKCJoaXN0b3J5RXZlbnREZWxheSIsMTI1MCkscmQoInZpZXdwb3J0TWFyZ2luIiwxMCxmdW5jdGlvbihhKXthLnJlZnJlc2goKX0sITApLHJkKCJtYXhIaWdobGlnaHRMZW5ndGgiLDFlNCx6LCEwKSxyZCgibW92ZUlucHV0V2l0aEN1cnNvciIsITAsZnVuY3Rpb24oYSxiKXtifHwoYS5kaXNwbGF5LmlucHV0RGl2LnN0eWxlLnRvcD1hLmRpc3BsYXkuaW5wdXREaXYuc3R5bGUubGVmdD0wKX0pLHJkKCJ0YWJpbmRleCIsbnVsbCxmdW5jdGlvbihhLGIpe2EuZGlzcGxheS5pbnB1dC50YWJJbmRleD1ifHwiIn0pLHJkKCJhdXRvZm9jdXMiLG51bGwpO3ZhciB0ZD13Lm1vZGVzPXt9LHVkPXcubWltZU1vZGVzPXt9O3cuZGVmaW5lTW9kZT1mdW5jdGlvbihhLGIpe3cuZGVmYXVsdHMubW9kZXx8Im51bGwiPT1hfHwody5kZWZhdWx0cy5tb2RlPWEpLGFyZ3VtZW50cy5sZW5ndGg+MiYmKGIuZGVwZW5kZW5jaWVzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKSksdGRbYV09Yn0sdy5kZWZpbmVNSU1FPWZ1bmN0aW9uKGEsYil7dWRbYV09Yn0sdy5yZXNvbHZlTW9kZT1mdW5jdGlvbihhKXtpZigic3RyaW5nIj09dHlwZW9mIGEmJnVkLmhhc093blByb3BlcnR5KGEpKWE9dWRbYV07ZWxzZSBpZihhJiYic3RyaW5nIj09dHlwZW9mIGEubmFtZSYmdWQuaGFzT3duUHJvcGVydHkoYS5uYW1lKSl7dmFyIGI9dWRbYS5uYW1lXTsic3RyaW5nIj09dHlwZW9mIGImJihiPXtuYW1lOmJ9KSxhPVdmKGIsYSksYS5uYW1lPWIubmFtZX1lbHNlIGlmKCJzdHJpbmciPT10eXBlb2YgYSYmL15bXHdcLV0rXC9bXHdcLV0rXCt4bWwkLy50ZXN0KGEpKXJldHVybiB3LnJlc29sdmVNb2RlKCJhcHBsaWNhdGlvbi94bWwiKTtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGE/e25hbWU6YX06YXx8e25hbWU6Im51bGwifX0sdy5nZXRNb2RlPWZ1bmN0aW9uKGEsYil7dmFyIGI9dy5yZXNvbHZlTW9kZShiKSxjPXRkW2IubmFtZV07aWYoIWMpcmV0dXJuIHcuZ2V0TW9kZShhLCJ0ZXh0L3BsYWluIik7dmFyIGQ9YyhhLGIpO2lmKHZkLmhhc093blByb3BlcnR5KGIubmFtZSkpe3ZhciBlPXZkW2IubmFtZV07Zm9yKHZhciBmIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShmKSYmKGQuaGFzT3duUHJvcGVydHkoZikmJihkWyJfIitmXT1kW2ZdKSxkW2ZdPWVbZl0pfWlmKGQubmFtZT1iLm5hbWUsYi5oZWxwZXJUeXBlJiYoZC5oZWxwZXJUeXBlPWIuaGVscGVyVHlwZSksYi5tb2RlUHJvcHMpZm9yKHZhciBmIGluIGIubW9kZVByb3BzKWRbZl09Yi5tb2RlUHJvcHNbZl07cmV0dXJuIGR9LHcuZGVmaW5lTW9kZSgibnVsbCIsZnVuY3Rpb24oKXtyZXR1cm57dG9rZW46ZnVuY3Rpb24oYSl7YS5za2lwVG9FbmQoKX19fSksdy5kZWZpbmVNSU1FKCJ0ZXh0L3BsYWluIiwibnVsbCIpO3ZhciB2ZD13Lm1vZGVFeHRlbnNpb25zPXt9O3cuZXh0ZW5kTW9kZT1mdW5jdGlvbihhLGIpe3ZhciBjPXZkLmhhc093blByb3BlcnR5KGEpP3ZkW2FdOnZkW2FdPXt9O1hmKGIsYyl9LHcuZGVmaW5lRXh0ZW5zaW9uPWZ1bmN0aW9uKGEsYil7dy5wcm90b3R5cGVbYV09Yn0sdy5kZWZpbmVEb2NFeHRlbnNpb249ZnVuY3Rpb24oYSxiKXtSZS5wcm90b3R5cGVbYV09Yn0sdy5kZWZpbmVPcHRpb249cmQ7dmFyIHdkPVtdO3cuZGVmaW5lSW5pdEhvb2s9ZnVuY3Rpb24oYSl7d2QucHVzaChhKX07dmFyIHhkPXcuaGVscGVycz17fTt3LnJlZ2lzdGVySGVscGVyPWZ1bmN0aW9uKGEsYixjKXt4ZC5oYXNPd25Qcm9wZXJ0eShhKXx8KHhkW2FdPXdbYV09e19nbG9iYWw6W119KSx4ZFthXVtiXT1jfSx3LnJlZ2lzdGVyR2xvYmFsSGVscGVyPWZ1bmN0aW9uKGEsYixjLGQpe3cucmVnaXN0ZXJIZWxwZXIoYSxiLGQpLHhkW2FdLl9nbG9iYWwucHVzaCh7cHJlZDpjLHZhbDpkfSl9O3ZhciB5ZD13LmNvcHlTdGF0ZT1mdW5jdGlvbihhLGIpe2lmKGI9PT0hMClyZXR1cm4gYjtpZihhLmNvcHlTdGF0ZSlyZXR1cm4gYS5jb3B5U3RhdGUoYik7dmFyIGM9e307Zm9yKHZhciBkIGluIGIpe3ZhciBlPWJbZF07ZSBpbnN0YW5jZW9mIEFycmF5JiYoZT1lLmNvbmNhdChbXSkpLGNbZF09ZX1yZXR1cm4gY30semQ9dy5zdGFydFN0YXRlPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYS5zdGFydFN0YXRlP2Euc3RhcnRTdGF0ZShiLGMpOiEwfTt3LmlubmVyTW9kZT1mdW5jdGlvbihhLGIpe2Zvcig7YS5pbm5lck1vZGU7KXt2YXIgYz1hLmlubmVyTW9kZShiKTtpZighY3x8Yy5tb2RlPT1hKWJyZWFrO2I9Yy5zdGF0ZSxhPWMubW9kZX1yZXR1cm4gY3x8e21vZGU6YSxzdGF0ZTpifX07dmFyIEFkPXcuY29tbWFuZHM9e3NlbGVjdEFsbDpmdW5jdGlvbihhKXthLnNldFNlbGVjdGlvbihwYShhLmZpcnN0TGluZSgpLDApLHBhKGEubGFzdExpbmUoKSksS2YpfSxzaW5nbGVTZWxlY3Rpb246ZnVuY3Rpb24oYSl7YS5zZXRTZWxlY3Rpb24oYS5nZXRDdXJzb3IoImFuY2hvciIpLGEuZ2V0Q3Vyc29yKCJoZWFkIiksS2YpfSxraWxsTGluZTpmdW5jdGlvbihhKXttZChhLGZ1bmN0aW9uKGIpe2lmKGIuZW1wdHkoKSl7dmFyIGM9V2UoYS5kb2MsYi5oZWFkLmxpbmUpLnRleHQubGVuZ3RoO3JldHVybiBiLmhlYWQuY2g9PWMmJmIuaGVhZC5saW5lPGEubGFzdExpbmUoKT97ZnJvbTpiLmhlYWQsdG86cGEoYi5oZWFkLmxpbmUrMSwwKX06e2Zyb206Yi5oZWFkLHRvOnBhKGIuaGVhZC5saW5lLGMpfX1yZXR1cm57ZnJvbTpiLmZyb20oKSx0bzpiLnRvKCl9fSl9LGRlbGV0ZUxpbmU6ZnVuY3Rpb24oYSl7bWQoYSxmdW5jdGlvbihiKXtyZXR1cm57ZnJvbTpwYShiLmZyb20oKS5saW5lLDApLHRvOnphKGEuZG9jLHBhKGIudG8oKS5saW5lKzEsMCkpfX0pfSxkZWxMaW5lTGVmdDpmdW5jdGlvbihhKXttZChhLGZ1bmN0aW9uKGEpe3JldHVybntmcm9tOnBhKGEuZnJvbSgpLmxpbmUsMCksdG86YS5mcm9tKCl9fSl9LGRlbFdyYXBwZWRMaW5lTGVmdDpmdW5jdGlvbihhKXttZChhLGZ1bmN0aW9uKGIpe3ZhciBjPWEuY2hhckNvb3JkcyhiLmhlYWQsImRpdiIpLnRvcCs1LGQ9YS5jb29yZHNDaGFyKHtsZWZ0OjAsdG9wOmN9LCJkaXYiKTtyZXR1cm57ZnJvbTpkLHRvOmIuZnJvbSgpfX0pfSxkZWxXcmFwcGVkTGluZVJpZ2h0OmZ1bmN0aW9uKGEpe21kKGEsZnVuY3Rpb24oYil7dmFyIGM9YS5jaGFyQ29vcmRzKGIuaGVhZCwiZGl2IikudG9wKzUsZD1hLmNvb3Jkc0NoYXIoe2xlZnQ6YS5kaXNwbGF5LmxpbmVEaXYub2Zmc2V0V2lkdGgrMTAwLHRvcDpjfSwiZGl2Iik7cmV0dXJue2Zyb206Yi5mcm9tKCksdG86ZH19KX0sdW5kbzpmdW5jdGlvbihhKXthLnVuZG8oKX0scmVkbzpmdW5jdGlvbihhKXthLnJlZG8oKX0sdW5kb1NlbGVjdGlvbjpmdW5jdGlvbihhKXthLnVuZG9TZWxlY3Rpb24oKX0scmVkb1NlbGVjdGlvbjpmdW5jdGlvbihhKXthLnJlZG9TZWxlY3Rpb24oKX0sZ29Eb2NTdGFydDpmdW5jdGlvbihhKXthLmV4dGVuZFNlbGVjdGlvbihwYShhLmZpcnN0TGluZSgpLDApKX0sZ29Eb2NFbmQ6ZnVuY3Rpb24oYSl7YS5leHRlbmRTZWxlY3Rpb24ocGEoYS5sYXN0TGluZSgpKSl9LGdvTGluZVN0YXJ0OmZ1bmN0aW9uKGEpe2EuZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKGIpe3JldHVybiBIZyhhLGIuaGVhZC5saW5lKX0se29yaWdpbjoiK21vdmUiLGJpYXM6MX0pfSxnb0xpbmVTdGFydFNtYXJ0OmZ1bmN0aW9uKGEpe2EuZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKGIpe3JldHVybiBKZyhhLGIuaGVhZCl9LHtvcmlnaW46Iittb3ZlIixiaWFzOjF9KX0sZ29MaW5lRW5kOmZ1bmN0aW9uKGEpe2EuZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKGIpe3JldHVybiBJZyhhLGIuaGVhZC5saW5lKX0se29yaWdpbjoiK21vdmUiLGJpYXM6LTF9KX0sZ29MaW5lUmlnaHQ6ZnVuY3Rpb24oYSl7YS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24oYil7dmFyIGM9YS5jaGFyQ29vcmRzKGIuaGVhZCwiZGl2IikudG9wKzU7cmV0dXJuIGEuY29vcmRzQ2hhcih7bGVmdDphLmRpc3BsYXkubGluZURpdi5vZmZzZXRXaWR0aCsxMDAsdG9wOmN9LCJkaXYiKX0sTWYpfSxnb0xpbmVMZWZ0OmZ1bmN0aW9uKGEpe2EuZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKGIpe3ZhciBjPWEuY2hhckNvb3JkcyhiLmhlYWQsImRpdiIpLnRvcCs1O3JldHVybiBhLmNvb3Jkc0NoYXIoe2xlZnQ6MCx0b3A6Y30sImRpdiIpfSxNZil9LGdvTGluZUxlZnRTbWFydDpmdW5jdGlvbihhKXthLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbihiKXt2YXIgYz1hLmNoYXJDb29yZHMoYi5oZWFkLCJkaXYiKS50b3ArNSxkPWEuY29vcmRzQ2hhcih7bGVmdDowLHRvcDpjfSwiZGl2Iik7cmV0dXJuIGQuY2g8YS5nZXRMaW5lKGQubGluZSkuc2VhcmNoKC9cUy8pP0pnKGEsYi5oZWFkKTpkfSxNZil9LGdvTGluZVVwOmZ1bmN0aW9uKGEpe2EubW92ZVYoLTEsImxpbmUiKX0sZ29MaW5lRG93bjpmdW5jdGlvbihhKXthLm1vdmVWKDEsImxpbmUiKX0sZ29QYWdlVXA6ZnVuY3Rpb24oYSl7YS5tb3ZlVigtMSwicGFnZSIpfSxnb1BhZ2VEb3duOmZ1bmN0aW9uKGEpe2EubW92ZVYoMSwicGFnZSIpfSxnb0NoYXJMZWZ0OmZ1bmN0aW9uKGEpe2EubW92ZUgoLTEsImNoYXIiKX0sZ29DaGFyUmlnaHQ6ZnVuY3Rpb24oYSl7YS5tb3ZlSCgxLCJjaGFyIil9LGdvQ29sdW1uTGVmdDpmdW5jdGlvbihhKXthLm1vdmVIKC0xLCJjb2x1bW4iKX0sZ29Db2x1bW5SaWdodDpmdW5jdGlvbihhKXthLm1vdmVIKDEsImNvbHVtbiIpfSxnb1dvcmRMZWZ0OmZ1bmN0aW9uKGEpe2EubW92ZUgoLTEsIndvcmQiKX0sZ29Hcm91cFJpZ2h0OmZ1bmN0aW9uKGEpe2EubW92ZUgoMSwiZ3JvdXAiKX0sZ29Hcm91cExlZnQ6ZnVuY3Rpb24oYSl7YS5tb3ZlSCgtMSwiZ3JvdXAiKX0sZ29Xb3JkUmlnaHQ6ZnVuY3Rpb24oYSl7YS5tb3ZlSCgxLCJ3b3JkIil9LGRlbENoYXJCZWZvcmU6ZnVuY3Rpb24oYSl7YS5kZWxldGVIKC0xLCJjaGFyIil9LGRlbENoYXJBZnRlcjpmdW5jdGlvbihhKXthLmRlbGV0ZUgoMSwiY2hhciIpfSxkZWxXb3JkQmVmb3JlOmZ1bmN0aW9uKGEpe2EuZGVsZXRlSCgtMSwid29yZCIpfSxkZWxXb3JkQWZ0ZXI6ZnVuY3Rpb24oYSl7YS5kZWxldGVIKDEsIndvcmQiKX0sZGVsR3JvdXBCZWZvcmU6ZnVuY3Rpb24oYSl7YS5kZWxldGVIKC0xLCJncm91cCIpfSxkZWxHcm91cEFmdGVyOmZ1bmN0aW9uKGEpe2EuZGVsZXRlSCgxLCJncm91cCIpfSxpbmRlbnRBdXRvOmZ1bmN0aW9uKGEpe2EuaW5kZW50U2VsZWN0aW9uKCJzbWFydCIpfSxpbmRlbnRNb3JlOmZ1bmN0aW9uKGEpe2EuaW5kZW50U2VsZWN0aW9uKCJhZGQiKX0saW5kZW50TGVzczpmdW5jdGlvbihhKXthLmluZGVudFNlbGVjdGlvbigic3VidHJhY3QiKX0saW5zZXJ0VGFiOmZ1bmN0aW9uKGEpe2EucmVwbGFjZVNlbGVjdGlvbigiCSIpfSxpbnNlcnRTb2Z0VGFiOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPWEubGlzdFNlbGVjdGlvbnMoKSxkPWEub3B0aW9ucy50YWJTaXplLGU9MDtlPGMubGVuZ3RoO2UrKyl7dmFyIGY9Y1tlXS5mcm9tKCksZz1PZihhLmdldExpbmUoZi5saW5lKSxmLmNoLGQpO2IucHVzaChuZXcgQXJyYXkoZC1nJWQrMSkuam9pbigiICIpKX1hLnJlcGxhY2VTZWxlY3Rpb25zKGIpfSxkZWZhdWx0VGFiOmZ1bmN0aW9uKGEpe2Euc29tZXRoaW5nU2VsZWN0ZWQoKT9hLmluZGVudFNlbGVjdGlvbigiYWRkIik6YS5leGVjQ29tbWFuZCgiaW5zZXJ0VGFiIil9LHRyYW5zcG9zZUNoYXJzOmZ1bmN0aW9uKGEpe1BiKGEsZnVuY3Rpb24oKXtmb3IodmFyIGI9YS5saXN0U2VsZWN0aW9ucygpLGM9W10sZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZT1iW2RdLmhlYWQsZj1XZShhLmRvYyxlLmxpbmUpLnRleHQ7aWYoZilpZihlLmNoPT1mLmxlbmd0aCYmKGU9bmV3IHBhKGUubGluZSxlLmNoLTEpKSxlLmNoPjApZT1uZXcgcGEoZS5saW5lLGUuY2grMSksYS5yZXBsYWNlUmFuZ2UoZi5jaGFyQXQoZS5jaC0xKStmLmNoYXJBdChlLmNoLTIpLHBhKGUubGluZSxlLmNoLTIpLGUsIit0cmFuc3Bvc2UiKTtlbHNlIGlmKGUubGluZT5hLmRvYy5maXJzdCl7dmFyIGc9V2UoYS5kb2MsZS5saW5lLTEpLnRleHQ7ZyYmYS5yZXBsYWNlUmFuZ2UoZi5jaGFyQXQoMCkrIlxuIitnLmNoYXJBdChnLmxlbmd0aC0xKSxwYShlLmxpbmUtMSxnLmxlbmd0aC0xKSxwYShlLmxpbmUsMSksIit0cmFuc3Bvc2UiKX1jLnB1c2gobmV3IHZhKGUsZSkpfWEuc2V0U2VsZWN0aW9ucyhjKX0pfSxuZXdsaW5lQW5kSW5kZW50OmZ1bmN0aW9uKGEpe1BiKGEsZnVuY3Rpb24oKXtmb3IodmFyIGI9YS5saXN0U2VsZWN0aW9ucygpLmxlbmd0aCxjPTA7Yj5jO2MrKyl7dmFyIGQ9YS5saXN0U2VsZWN0aW9ucygpW2NdO2EucmVwbGFjZVJhbmdlKCJcbiIsZC5hbmNob3IsZC5oZWFkLCIraW5wdXQiKSxhLmluZGVudExpbmUoZC5mcm9tKCkubGluZSsxLG51bGwsITApLGlkKGEpfX0pfSx0b2dnbGVPdmVyd3JpdGU6ZnVuY3Rpb24oYSl7YS50b2dnbGVPdmVyd3JpdGUoKX19LEJkPXcua2V5TWFwPXt9O0JkLmJhc2ljPXtMZWZ0OiJnb0NoYXJMZWZ0IixSaWdodDoiZ29DaGFyUmlnaHQiLFVwOiJnb0xpbmVVcCIsRG93bjoiZ29MaW5lRG93biIsRW5kOiJnb0xpbmVFbmQiLEhvbWU6ImdvTGluZVN0YXJ0U21hcnQiLFBhZ2VVcDoiZ29QYWdlVXAiLFBhZ2VEb3duOiJnb1BhZ2VEb3duIixEZWxldGU6ImRlbENoYXJBZnRlciIsQmFja3NwYWNlOiJkZWxDaGFyQmVmb3JlIiwiU2hpZnQtQmFja3NwYWNlIjoiZGVsQ2hhckJlZm9yZSIsVGFiOiJkZWZhdWx0VGFiIiwiU2hpZnQtVGFiIjoiaW5kZW50QXV0byIsRW50ZXI6Im5ld2xpbmVBbmRJbmRlbnQiLEluc2VydDoidG9nZ2xlT3ZlcndyaXRlIixFc2M6InNpbmdsZVNlbGVjdGlvbiJ9LEJkLnBjRGVmYXVsdD17IkN0cmwtQSI6InNlbGVjdEFsbCIsIkN0cmwtRCI6ImRlbGV0ZUxpbmUiLCJDdHJsLVoiOiJ1bmRvIiwiU2hpZnQtQ3RybC1aIjoicmVkbyIsIkN0cmwtWSI6InJlZG8iLCJDdHJsLUhvbWUiOiJnb0RvY1N0YXJ0IiwiQ3RybC1FbmQiOiJnb0RvY0VuZCIsIkN0cmwtVXAiOiJnb0xpbmVVcCIsIkN0cmwtRG93biI6ImdvTGluZURvd24iLCJDdHJsLUxlZnQiOiJnb0dyb3VwTGVmdCIsIkN0cmwtUmlnaHQiOiJnb0dyb3VwUmlnaHQiLCJBbHQtTGVmdCI6ImdvTGluZVN0YXJ0IiwiQWx0LVJpZ2h0IjoiZ29MaW5lRW5kIiwiQ3RybC1CYWNrc3BhY2UiOiJkZWxHcm91cEJlZm9yZSIsIkN0cmwtRGVsZXRlIjoiZGVsR3JvdXBBZnRlciIsIkN0cmwtUyI6InNhdmUiLCJDdHJsLUYiOiJmaW5kIiwiQ3RybC1HIjoiZmluZE5leHQiLCJTaGlmdC1DdHJsLUciOiJmaW5kUHJldiIsIlNoaWZ0LUN0cmwtRiI6InJlcGxhY2UiLCJTaGlmdC1DdHJsLVIiOiJyZXBsYWNlQWxsIiwiQ3RybC1bIjoiaW5kZW50TGVzcyIsIkN0cmwtXSI6ImluZGVudE1vcmUiLCJDdHJsLVUiOiJ1bmRvU2VsZWN0aW9uIiwiU2hpZnQtQ3RybC1VIjoicmVkb1NlbGVjdGlvbiIsIkFsdC1VIjoicmVkb1NlbGVjdGlvbiIsZmFsbHRocm91Z2g6ImJhc2ljIn0sQmQuZW1hY3N5PXsiQ3RybC1GIjoiZ29DaGFyUmlnaHQiLCJDdHJsLUIiOiJnb0NoYXJMZWZ0IiwiQ3RybC1QIjoiZ29MaW5lVXAiLCJDdHJsLU4iOiJnb0xpbmVEb3duIiwiQWx0LUYiOiJnb1dvcmRSaWdodCIsIkFsdC1CIjoiZ29Xb3JkTGVmdCIsIkN0cmwtQSI6ImdvTGluZVN0YXJ0IiwiQ3RybC1FIjoiZ29MaW5lRW5kIiwiQ3RybC1WIjoiZ29QYWdlRG93biIsIlNoaWZ0LUN0cmwtViI6ImdvUGFnZVVwIiwiQ3RybC1EIjoiZGVsQ2hhckFmdGVyIiwiQ3RybC1IIjoiZGVsQ2hhckJlZm9yZSIsIkFsdC1EIjoiZGVsV29yZEFmdGVyIiwiQWx0LUJhY2tzcGFjZSI6ImRlbFdvcmRCZWZvcmUiLCJDdHJsLUsiOiJraWxsTGluZSIsIkN0cmwtVCI6InRyYW5zcG9zZUNoYXJzIn0sQmQubWFjRGVmYXVsdD17IkNtZC1BIjoic2VsZWN0QWxsIiwiQ21kLUQiOiJkZWxldGVMaW5lIiwiQ21kLVoiOiJ1bmRvIiwiU2hpZnQtQ21kLVoiOiJyZWRvIiwiQ21kLVkiOiJyZWRvIiwiQ21kLUhvbWUiOiJnb0RvY1N0YXJ0IiwiQ21kLVVwIjoiZ29Eb2NTdGFydCIsIkNtZC1FbmQiOiJnb0RvY0VuZCIsIkNtZC1Eb3duIjoiZ29Eb2NFbmQiLCJBbHQtTGVmdCI6ImdvR3JvdXBMZWZ0IiwiQWx0LVJpZ2h0IjoiZ29Hcm91cFJpZ2h0IiwiQ21kLUxlZnQiOiJnb0xpbmVMZWZ0IiwiQ21kLVJpZ2h0IjoiZ29MaW5lUmlnaHQiLCJBbHQtQmFja3NwYWNlIjoiZGVsR3JvdXBCZWZvcmUiLCJDdHJsLUFsdC1CYWNrc3BhY2UiOiJkZWxHcm91cEFmdGVyIiwiQWx0LURlbGV0ZSI6ImRlbEdyb3VwQWZ0ZXIiLCJDbWQtUyI6InNhdmUiLCJDbWQtRiI6ImZpbmQiLCJDbWQtRyI6ImZpbmROZXh0IiwiU2hpZnQtQ21kLUciOiJmaW5kUHJldiIsIkNtZC1BbHQtRiI6InJlcGxhY2UiLCJTaGlmdC1DbWQtQWx0LUYiOiJyZXBsYWNlQWxsIiwiQ21kLVsiOiJpbmRlbnRMZXNzIiwiQ21kLV0iOiJpbmRlbnRNb3JlIiwiQ21kLUJhY2tzcGFjZSI6ImRlbFdyYXBwZWRMaW5lTGVmdCIsIkNtZC1EZWxldGUiOiJkZWxXcmFwcGVkTGluZVJpZ2h0IiwiQ21kLVUiOiJ1bmRvU2VsZWN0aW9uIiwiU2hpZnQtQ21kLVUiOiJyZWRvU2VsZWN0aW9uIiwiQ3RybC1VcCI6ImdvRG9jU3RhcnQiLCJDdHJsLURvd24iOiJnb0RvY0VuZCIsZmFsbHRocm91Z2g6WyJiYXNpYyIsImVtYWNzeSJdfSxCZFsiZGVmYXVsdCJdPXA/QmQubWFjRGVmYXVsdDpCZC5wY0RlZmF1bHQsdy5ub3JtYWxpemVLZXlNYXA9ZnVuY3Rpb24oYSl7dmFyIGI9e307Zm9yKHZhciBjIGluIGEpaWYoYS5oYXNPd25Qcm9wZXJ0eShjKSl7dmFyIGQ9YVtjXTtpZigvXihuYW1lfGZhbGx0aHJvdWdofChkZXxhdCl0YWNoKSQvLnRlc3QoYykpY29udGludWU7aWYoIi4uLiI9PWQpe2RlbGV0ZSBhW2NdO2NvbnRpbnVlfWZvcih2YXIgZT1WZihjLnNwbGl0KCIgIiksQ2QpLGY9MDtmPGUubGVuZ3RoO2YrKyl7dmFyIGcsaDtmPT1lLmxlbmd0aC0xPyhoPWMsZz1kKTooaD1lLnNsaWNlKDAsZisxKS5qb2luKCIgIiksZz0iLi4uIik7dmFyIGk9YltoXTtpZihpKXtpZihpIT1nKXRocm93IG5ldyBFcnJvcigiSW5jb25zaXN0ZW50IGJpbmRpbmdzIGZvciAiK2gpfWVsc2UgYltoXT1nfWRlbGV0ZSBhW2NdfWZvcih2YXIgaiBpbiBiKWFbal09YltqXTtyZXR1cm4gYX07dmFyIERkPXcubG9va3VwS2V5PWZ1bmN0aW9uKGEsYixjLGQpe2I9R2QoYik7dmFyIGU9Yi5jYWxsP2IuY2FsbChhLGQpOmJbYV07aWYoZT09PSExKXJldHVybiJub3RoaW5nIjtpZigiLi4uIj09PWUpcmV0dXJuIm11bHRpIjtpZihudWxsIT1lJiZjKGUpKXJldHVybiJoYW5kbGVkIjtpZihiLmZhbGx0aHJvdWdoKXtpZigiW29iamVjdCBBcnJheV0iIT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYi5mYWxsdGhyb3VnaCkpcmV0dXJuIERkKGEsYi5mYWxsdGhyb3VnaCxjLGQpO2Zvcih2YXIgZj0wO2Y8Yi5mYWxsdGhyb3VnaC5sZW5ndGg7ZisrKXt2YXIgZz1EZChhLGIuZmFsbHRocm91Z2hbZl0sYyxkKTtpZihnKXJldHVybiBnfX19LEVkPXcuaXNNb2RpZmllcktleT1mdW5jdGlvbihhKXt2YXIgYj0ic3RyaW5nIj09dHlwZW9mIGE/YTpCZ1thLmtleUNvZGVdO3JldHVybiJDdHJsIj09Ynx8IkFsdCI9PWJ8fCJTaGlmdCI9PWJ8fCJNb2QiPT1ifSxGZD13LmtleU5hbWU9ZnVuY3Rpb24oYSxiKXtpZihpJiYzND09YS5rZXlDb2RlJiZhWyJjaGFyIl0pcmV0dXJuITE7dmFyIGM9QmdbYS5rZXlDb2RlXSxkPWM7cmV0dXJuIG51bGw9PWR8fGEuYWx0R3JhcGhLZXk/ITE6KGEuYWx0S2V5JiYiQWx0IiE9YyYmKGQ9IkFsdC0iK2QpLChzP2EubWV0YUtleTphLmN0cmxLZXkpJiYiQ3RybCIhPWMmJihkPSJDdHJsLSIrZCksKHM/YS5jdHJsS2V5OmEubWV0YUtleSkmJiJDbWQiIT1jJiYoZD0iQ21kLSIrZCksIWImJmEuc2hpZnRLZXkmJiJTaGlmdCIhPWMmJihkPSJTaGlmdC0iK2QpLGQpfTt3LmZyb21UZXh0QXJlYT1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGQoKXthLnZhbHVlPWkuZ2V0VmFsdWUoKX1pZihiPWI/WGYoYik6e30sYi52YWx1ZT1hLnZhbHVlLCFiLnRhYmluZGV4JiZhLnRhYmluZGV4JiYoYi50YWJpbmRleD1hLnRhYmluZGV4KSwhYi5wbGFjZWhvbGRlciYmYS5wbGFjZWhvbGRlciYmKGIucGxhY2Vob2xkZXI9YS5wbGFjZWhvbGRlciksbnVsbD09Yi5hdXRvZm9jdXMpe3ZhciBjPWlnKCk7Yi5hdXRvZm9jdXM9Yz09YXx8bnVsbCE9YS5nZXRBdHRyaWJ1dGUoImF1dG9mb2N1cyIpJiZjPT1kb2N1bWVudC5ib2R5fWlmKGEuZm9ybSYmKHlmKGEuZm9ybSwic3VibWl0IixkKSwhYi5sZWF2ZVN1Ym1pdE1ldGhvZEFsb25lKSl7dmFyIGU9YS5mb3JtLGY9ZS5zdWJtaXQ7dHJ5e3ZhciBnPWUuc3VibWl0PWZ1bmN0aW9uKCl7ZCgpLGUuc3VibWl0PWYsZS5zdWJtaXQoKSxlLnN1Ym1pdD1nfX1jYXRjaChoKXt9fWIuZmluaXNoSW5pdD1mdW5jdGlvbihiKXtiLnNhdmU9ZCxiLmdldFRleHRBcmVhPWZ1bmN0aW9uKCl7cmV0dXJuIGF9LGIudG9UZXh0QXJlYT1mdW5jdGlvbigpe2IudG9UZXh0QXJlYT1pc05hTixkKCksYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIuZ2V0V3JhcHBlckVsZW1lbnQoKSksYS5zdHlsZS5kaXNwbGF5PSIiLGEuZm9ybSYmKHpmKGEuZm9ybSwic3VibWl0IixkKSwiZnVuY3Rpb24iPT10eXBlb2YgYS5mb3JtLnN1Ym1pdCYmKGEuZm9ybS5zdWJtaXQ9ZikpfX0sYS5zdHlsZS5kaXNwbGF5PSJub25lIjt2YXIgaT13KGZ1bmN0aW9uKGIpe2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhLm5leHRTaWJsaW5nKX0sYik7cmV0dXJuIGl9O3ZhciBIZD13LlN0cmluZ1N0cmVhbT1mdW5jdGlvbihhLGIpe3RoaXMucG9zPXRoaXMuc3RhcnQ9MCx0aGlzLnN0cmluZz1hLHRoaXMudGFiU2l6ZT1ifHw4LHRoaXMubGFzdENvbHVtblBvcz10aGlzLmxhc3RDb2x1bW5WYWx1ZT0wLHRoaXMubGluZVN0YXJ0PTB9O0hkLnByb3RvdHlwZT17ZW9sOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zPj10aGlzLnN0cmluZy5sZW5ndGh9LHNvbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvcz09dGhpcy5saW5lU3RhcnR9LHBlZWs6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKXx8dm9pZCAwfSxuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zPHRoaXMuc3RyaW5nLmxlbmd0aD90aGlzLnN0cmluZy5jaGFyQXQodGhpcy5wb3MrKyk6dm9pZCAwfSxlYXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKTtpZigic3RyaW5nIj09dHlwZW9mIGEpdmFyIGM9Yj09YTtlbHNlIHZhciBjPWImJihhLnRlc3Q/YS50ZXN0KGIpOmEoYikpO3JldHVybiBjPygrK3RoaXMucG9zLGIpOnZvaWQgMH0sZWF0V2hpbGU6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMucG9zO3RoaXMuZWF0KGEpOyk7cmV0dXJuIHRoaXMucG9zPmJ9LGVhdFNwYWNlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMucG9zOy9bXHNcdTAwYTBdLy50ZXN0KHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLnBvcykpOykrK3RoaXMucG9zO3JldHVybiB0aGlzLnBvcz5hfSxza2lwVG9FbmQ6ZnVuY3Rpb24oKXt0aGlzLnBvcz10aGlzLnN0cmluZy5sZW5ndGh9LHNraXBUbzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnN0cmluZy5pbmRleE9mKGEsdGhpcy5wb3MpO3JldHVybiBiPi0xPyh0aGlzLnBvcz1iLCEwKTp2b2lkIDB9LGJhY2tVcDpmdW5jdGlvbihhKXt0aGlzLnBvcy09YX0sY29sdW1uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGFzdENvbHVtblBvczx0aGlzLnN0YXJ0JiYodGhpcy5sYXN0Q29sdW1uVmFsdWU9T2YodGhpcy5zdHJpbmcsdGhpcy5zdGFydCx0aGlzLnRhYlNpemUsdGhpcy5sYXN0Q29sdW1uUG9zLHRoaXMubGFzdENvbHVtblZhbHVlKSx0aGlzLmxhc3RDb2x1bW5Qb3M9dGhpcy5zdGFydCksdGhpcy5sYXN0Q29sdW1uVmFsdWUtKHRoaXMubGluZVN0YXJ0P09mKHRoaXMuc3RyaW5nLHRoaXMubGluZVN0YXJ0LHRoaXMudGFiU2l6ZSk6MCl9LGluZGVudGF0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIE9mKHRoaXMuc3RyaW5nLG51bGwsdGhpcy50YWJTaXplKS0odGhpcy5saW5lU3RhcnQ/T2YodGhpcy5zdHJpbmcsdGhpcy5saW5lU3RhcnQsdGhpcy50YWJTaXplKTowKX0sbWF0Y2g6ZnVuY3Rpb24oYSxiLGMpe2lmKCJzdHJpbmciIT10eXBlb2YgYSl7dmFyIGY9dGhpcy5zdHJpbmcuc2xpY2UodGhpcy5wb3MpLm1hdGNoKGEpO3JldHVybiBmJiZmLmluZGV4PjA/bnVsbDooZiYmYiE9PSExJiYodGhpcy5wb3MrPWZbMF0ubGVuZ3RoKSxmKX12YXIgZD1mdW5jdGlvbihhKXtyZXR1cm4gYz9hLnRvTG93ZXJDYXNlKCk6YX0sZT10aGlzLnN0cmluZy5zdWJzdHIodGhpcy5wb3MsYS5sZW5ndGgpO3JldHVybiBkKGUpPT1kKGEpPyhiIT09ITEmJih0aGlzLnBvcys9YS5sZW5ndGgpLCEwKTp2b2lkIDB9LGN1cnJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHJpbmcuc2xpY2UodGhpcy5zdGFydCx0aGlzLnBvcyl9LGhpZGVGaXJzdENoYXJzOmZ1bmN0aW9uKGEsYil7dGhpcy5saW5lU3RhcnQrPWE7dHJ5e3JldHVybiBiKCl9ZmluYWxseXt0aGlzLmxpbmVTdGFydC09YX19fTt2YXIgSWQ9dy5UZXh0TWFya2VyPWZ1bmN0aW9uKGEsYil7dGhpcy5saW5lcz1bXSx0aGlzLnR5cGU9Yix0aGlzLmRvYz1hfTtIZihJZCksSWQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7aWYoIXRoaXMuZXhwbGljaXRseUNsZWFyZWQpe3ZhciBhPXRoaXMuZG9jLmNtLGI9YSYmIWEuY3VyT3A7aWYoYiYmR2IoYSksR2YodGhpcywiY2xlYXIiKSl7dmFyIGM9dGhpcy5maW5kKCk7YyYmQ2YodGhpcywiY2xlYXIiLGMuZnJvbSxjLnRvKX1mb3IodmFyIGQ9bnVsbCxlPW51bGwsZj0wO2Y8dGhpcy5saW5lcy5sZW5ndGg7KytmKXt2YXIgZz10aGlzLmxpbmVzW2ZdLGg9UmQoZy5tYXJrZWRTcGFucyx0aGlzKTthJiYhdGhpcy5jb2xsYXBzZWQ/V2IoYSwkZShnKSwidGV4dCIpOmEmJihudWxsIT1oLnRvJiYoZT0kZShnKSksbnVsbCE9aC5mcm9tJiYoZD0kZShnKSkpLGcubWFya2VkU3BhbnM9U2QoZy5tYXJrZWRTcGFucyxoKSxudWxsPT1oLmZyb20mJnRoaXMuY29sbGFwc2VkJiYhbGUodGhpcy5kb2MsZykmJmEmJlplKGcsQ2IoYS5kaXNwbGF5KSl9aWYoYSYmdGhpcy5jb2xsYXBzZWQmJiFhLm9wdGlvbnMubGluZVdyYXBwaW5nKWZvcih2YXIgZj0wO2Y8dGhpcy5saW5lcy5sZW5ndGg7KytmKXt2YXIgaT1oZSh0aGlzLmxpbmVzW2ZdKSxqPUgoaSk7aj5hLmRpc3BsYXkubWF4TGluZUxlbmd0aCYmKGEuZGlzcGxheS5tYXhMaW5lPWksYS5kaXNwbGF5Lm1heExpbmVMZW5ndGg9aixhLmRpc3BsYXkubWF4TGluZUNoYW5nZWQ9ITApfW51bGwhPWQmJmEmJnRoaXMuY29sbGFwc2VkJiZWYihhLGQsZSsxKSx0aGlzLmxpbmVzLmxlbmd0aD0wLHRoaXMuZXhwbGljaXRseUNsZWFyZWQ9ITAsdGhpcy5hdG9taWMmJnRoaXMuZG9jLmNhbnRFZGl0JiYodGhpcy5kb2MuY2FudEVkaXQ9ITEsYSYmTmEoYS5kb2MpKSxhJiZDZihhLCJtYXJrZXJDbGVhcmVkIixhLHRoaXMpLGImJkliKGEpLHRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5jbGVhcigpfX0sSWQucHJvdG90eXBlLmZpbmQ9ZnVuY3Rpb24oYSxiKXtudWxsPT1hJiYiYm9va21hcmsiPT10aGlzLnR5cGUmJihhPTEpO2Zvcih2YXIgYyxkLGU9MDtlPHRoaXMubGluZXMubGVuZ3RoOysrZSl7dmFyIGY9dGhpcy5saW5lc1tlXSxnPVJkKGYubWFya2VkU3BhbnMsdGhpcyk7aWYobnVsbCE9Zy5mcm9tJiYoYz1wYShiP2Y6JGUoZiksZy5mcm9tKSwtMT09YSkpcmV0dXJuIGM7aWYobnVsbCE9Zy50byYmKGQ9cGEoYj9mOiRlKGYpLGcudG8pLDE9PWEpKXJldHVybiBkfXJldHVybiBjJiZ7ZnJvbTpjLHRvOmR9fSxJZC5wcm90b3R5cGUuY2hhbmdlZD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZmluZCgtMSwhMCksYj10aGlzLGM9dGhpcy5kb2MuY207YSYmYyYmUGIoYyxmdW5jdGlvbigpe3ZhciBkPWEubGluZSxlPSRlKGEubGluZSksZj1pYihjLGUpO2lmKGYmJihvYihmKSxjLmN1ck9wLnNlbGVjdGlvbkNoYW5nZWQ9Yy5jdXJPcC5mb3JjZVVwZGF0ZT0hMCksYy5jdXJPcC51cGRhdGVNYXhMaW5lPSEwLCFsZShiLmRvYyxkKSYmbnVsbCE9Yi5oZWlnaHQpe3ZhciBnPWIuaGVpZ2h0O2IuaGVpZ2h0PW51bGw7dmFyIGg9cGUoYiktZztoJiZaZShkLGQuaGVpZ2h0K2gpfX0pfSxJZC5wcm90b3R5cGUuYXR0YWNoTGluZT1mdW5jdGlvbihhKXtpZighdGhpcy5saW5lcy5sZW5ndGgmJnRoaXMuZG9jLmNtKXt2YXIgYj10aGlzLmRvYy5jbS5jdXJPcDtiLm1heWJlSGlkZGVuTWFya2VycyYmLTEhPVVmKGIubWF5YmVIaWRkZW5NYXJrZXJzLHRoaXMpfHwoYi5tYXliZVVuaGlkZGVuTWFya2Vyc3x8KGIubWF5YmVVbmhpZGRlbk1hcmtlcnM9W10pKS5wdXNoKHRoaXMpfXRoaXMubGluZXMucHVzaChhKX0sSWQucHJvdG90eXBlLmRldGFjaExpbmU9ZnVuY3Rpb24oYSl7aWYodGhpcy5saW5lcy5zcGxpY2UoVWYodGhpcy5saW5lcyxhKSwxKSwhdGhpcy5saW5lcy5sZW5ndGgmJnRoaXMuZG9jLmNtKXt2YXIgYj10aGlzLmRvYy5jbS5jdXJPcDsoYi5tYXliZUhpZGRlbk1hcmtlcnN8fChiLm1heWJlSGlkZGVuTWFya2Vycz1bXSkpLnB1c2godGhpcyl9fTt2YXIgSmQ9MCxMZD13LlNoYXJlZFRleHRNYXJrZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLm1hcmtlcnM9YSx0aGlzLnByaW1hcnk9Yjtmb3IodmFyIGM9MDtjPGEubGVuZ3RoOysrYylhW2NdLnBhcmVudD10aGlzfTtIZihMZCksTGQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7aWYoIXRoaXMuZXhwbGljaXRseUNsZWFyZWQpe3RoaXMuZXhwbGljaXRseUNsZWFyZWQ9ITA7Zm9yKHZhciBhPTA7YTx0aGlzLm1hcmtlcnMubGVuZ3RoOysrYSl0aGlzLm1hcmtlcnNbYV0uY2xlYXIoKTtDZih0aGlzLCJjbGVhciIpfX0sTGQucHJvdG90eXBlLmZpbmQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wcmltYXJ5LmZpbmQoYSxiKX07dmFyIG5lPXcuTGluZVdpZGdldD1mdW5jdGlvbihhLGIsYyl7aWYoYylmb3IodmFyIGQgaW4gYyljLmhhc093blByb3BlcnR5KGQpJiYodGhpc1tkXT1jW2RdKTt0aGlzLmNtPWEsdGhpcy5ub2RlPWJ9O0hmKG5lKSxuZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNtLGI9dGhpcy5saW5lLndpZGdldHMsYz10aGlzLmxpbmUsZD0kZShjKTtpZihudWxsIT1kJiZiKXtmb3IodmFyIGU9MDtlPGIubGVuZ3RoOysrZSliW2VdPT10aGlzJiZiLnNwbGljZShlLS0sMSk7Yi5sZW5ndGh8fChjLndpZGdldHM9bnVsbCk7dmFyIGY9cGUodGhpcyk7UGIoYSxmdW5jdGlvbigpe29lKGEsYywtZiksV2IoYSxkLCJ3aWRnZXQiKSxaZShjLE1hdGgubWF4KDAsYy5oZWlnaHQtZikpfSl9fSxuZS5wcm90b3R5cGUuY2hhbmdlZD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuaGVpZ2h0LGI9dGhpcy5jbSxjPXRoaXMubGluZTt0aGlzLmhlaWdodD1udWxsO3ZhciBkPXBlKHRoaXMpLWE7ZCYmUGIoYixmdW5jdGlvbigpe2IuY3VyT3AuZm9yY2VVcGRhdGU9ITAsb2UoYixjLGQpLFplKGMsYy5oZWlnaHQrZCl9KX07dmFyIHJlPXcuTGluZT1mdW5jdGlvbihhLGIsYyl7dGhpcy50ZXh0PWEsX2QodGhpcyxiKSx0aGlzLmhlaWdodD1jP2ModGhpcyk6MX07SGYocmUpLHJlLnByb3RvdHlwZS5saW5lTm89ZnVuY3Rpb24oKXtyZXR1cm4gJGUodGhpcyl9O3ZhciBDZT17fSxEZT17fTtPZS5wcm90b3R5cGU9e2NodW5rU2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxpbmVzLmxlbmd0aH0scmVtb3ZlSW5uZXI6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9YSxkPWErYjtkPmM7KytjKXt2YXIgZT10aGlzLmxpbmVzW2NdO3RoaXMuaGVpZ2h0LT1lLmhlaWdodCx0ZShlKSxDZihlLCJkZWxldGUiKX10aGlzLmxpbmVzLnNwbGljZShhLGIpfSxjb2xsYXBzZTpmdW5jdGlvbihhKXthLnB1c2guYXBwbHkoYSx0aGlzLmxpbmVzKX0saW5zZXJ0SW5uZXI6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuaGVpZ2h0Kz1jLHRoaXMubGluZXM9dGhpcy5saW5lcy5zbGljZSgwLGEpLmNvbmNhdChiKS5jb25jYXQodGhpcy5saW5lcy5zbGljZShhKSk7Zm9yKHZhciBkPTA7ZDxiLmxlbmd0aDsrK2QpYltkXS5wYXJlbnQ9dGhpc30saXRlck46ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hK2I7ZD5hOysrYSlpZihjKHRoaXMubGluZXNbYV0pKXJldHVybiEwfX0sUGUucHJvdG90eXBlPXtjaHVua1NpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaXplfSxyZW1vdmVJbm5lcjpmdW5jdGlvbihhLGIpe3RoaXMuc2l6ZS09Yjtmb3IodmFyIGM9MDtjPHRoaXMuY2hpbGRyZW4ubGVuZ3RoOysrYyl7dmFyIGQ9dGhpcy5jaGlsZHJlbltjXSxlPWQuY2h1bmtTaXplKCk7aWYoZT5hKXt2YXIgZj1NYXRoLm1pbihiLGUtYSksZz1kLmhlaWdodDtpZihkLnJlbW92ZUlubmVyKGEsZiksdGhpcy5oZWlnaHQtPWctZC5oZWlnaHQsZT09ZiYmKHRoaXMuY2hpbGRyZW4uc3BsaWNlKGMtLSwxKSxkLnBhcmVudD1udWxsKSwwPT0oYi09ZikpYnJlYWs7YT0wfWVsc2UgYS09ZX1pZih0aGlzLnNpemUtYjwyNSYmKHRoaXMuY2hpbGRyZW4ubGVuZ3RoPjF8fCEodGhpcy5jaGlsZHJlblswXWluc3RhbmNlb2YgT2UpKSl7dmFyIGg9W107dGhpcy5jb2xsYXBzZShoKSx0aGlzLmNoaWxkcmVuPVtuZXcgT2UoaCldLHRoaXMuY2hpbGRyZW5bMF0ucGFyZW50PXRoaXN9fSxjb2xsYXBzZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPHRoaXMuY2hpbGRyZW4ubGVuZ3RoOysrYil0aGlzLmNoaWxkcmVuW2JdLmNvbGxhcHNlKGEpfSxpbnNlcnRJbm5lcjpmdW5jdGlvbihhLGIsYyl7dGhpcy5zaXplKz1iLmxlbmd0aCx0aGlzLmhlaWdodCs9Yztmb3IodmFyIGQ9MDtkPHRoaXMuY2hpbGRyZW4ubGVuZ3RoOysrZCl7dmFyIGU9dGhpcy5jaGlsZHJlbltkXSxmPWUuY2h1bmtTaXplKCk7aWYoZj49YSl7aWYoZS5pbnNlcnRJbm5lcihhLGIsYyksZS5saW5lcyYmZS5saW5lcy5sZW5ndGg+NTApe2Zvcig7ZS5saW5lcy5sZW5ndGg+NTA7KXt2YXIgZz1lLmxpbmVzLnNwbGljZShlLmxpbmVzLmxlbmd0aC0yNSwyNSksaD1uZXcgT2UoZyk7ZS5oZWlnaHQtPWguaGVpZ2h0LHRoaXMuY2hpbGRyZW4uc3BsaWNlKGQrMSwwLGgpLGgucGFyZW50PXRoaXN9dGhpcy5tYXliZVNwaWxsKCl9YnJlYWt9YS09Zn19LG1heWJlU3BpbGw6ZnVuY3Rpb24oKXtpZighKHRoaXMuY2hpbGRyZW4ubGVuZ3RoPD0xMCkpe3ZhciBhPXRoaXM7ZG97dmFyIGI9YS5jaGlsZHJlbi5zcGxpY2UoYS5jaGlsZHJlbi5sZW5ndGgtNSw1KSxjPW5ldyBQZShiKTtpZihhLnBhcmVudCl7YS5zaXplLT1jLnNpemUsYS5oZWlnaHQtPWMuaGVpZ2h0O3ZhciBlPVVmKGEucGFyZW50LmNoaWxkcmVuLGEpO2EucGFyZW50LmNoaWxkcmVuLnNwbGljZShlKzEsMCxjKX1lbHNle3ZhciBkPW5ldyBQZShhLmNoaWxkcmVuKTtkLnBhcmVudD1hLGEuY2hpbGRyZW49W2QsY10sYT1kfWMucGFyZW50PWEucGFyZW50fXdoaWxlKGEuY2hpbGRyZW4ubGVuZ3RoPjEwKTthLnBhcmVudC5tYXliZVNwaWxsKCl9fSxpdGVyTjpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA7ZDx0aGlzLmNoaWxkcmVuLmxlbmd0aDsrK2Qpe3ZhciBlPXRoaXMuY2hpbGRyZW5bZF0sZj1lLmNodW5rU2l6ZSgpO2lmKGY+YSl7dmFyIGc9TWF0aC5taW4oYixmLWEpO2lmKGUuaXRlck4oYSxnLGMpKXJldHVybiEwO2lmKDA9PShiLT1nKSlicmVhazthPTB9ZWxzZSBhLT1mfX19O3ZhciBRZT0wLFJlPXcuRG9jPWZ1bmN0aW9uKGEsYixjKXtpZighKHRoaXMgaW5zdGFuY2VvZiBSZSkpcmV0dXJuIG5ldyBSZShhLGIsYyk7bnVsbD09YyYmKGM9MCksUGUuY2FsbCh0aGlzLFtuZXcgT2UoW25ldyByZSgiIixudWxsKV0pXSksdGhpcy5maXJzdD1jLHRoaXMuc2Nyb2xsVG9wPXRoaXMuc2Nyb2xsTGVmdD0wLHRoaXMuY2FudEVkaXQ9ITEsdGhpcy5jbGVhbkdlbmVyYXRpb249MSx0aGlzLmZyb250aWVyPWM7dmFyIGQ9cGEoYywwKTt0aGlzLnNlbD14YShkKSx0aGlzLmhpc3Rvcnk9bmV3IGNmKG51bGwpLHRoaXMuaWQ9KytRZSx0aGlzLm1vZGVPcHRpb249Yiwic3RyaW5nIj09dHlwZW9mIGEmJihhPXdnKGEpKSxOZSh0aGlzLHtmcm9tOmQsdG86ZCx0ZXh0OmF9KSxLYSh0aGlzLHhhKGQpLEtmKX07UmUucHJvdG90eXBlPVdmKFBlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6UmUsaXRlcjpmdW5jdGlvbihhLGIsYyl7Yz90aGlzLml0ZXJOKGEtdGhpcy5maXJzdCxiLWEsYyk6dGhpcy5pdGVyTih0aGlzLmZpcnN0LHRoaXMuZmlyc3QrdGhpcy5zaXplLGEpfSxpbnNlcnQ6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPTA7ZDxiLmxlbmd0aDsrK2QpYys9YltkXS5oZWlnaHQ7dGhpcy5pbnNlcnRJbm5lcihhLXRoaXMuZmlyc3QsYixjKX0scmVtb3ZlOmZ1bmN0aW9uKGEsYil7dGhpcy5yZW1vdmVJbm5lcihhLXRoaXMuZmlyc3QsYil9LGdldFZhbHVlOmZ1bmN0aW9uKGEpe3ZhciBiPVllKHRoaXMsdGhpcy5maXJzdCx0aGlzLmZpcnN0K3RoaXMuc2l6ZSk7cmV0dXJuIGE9PT0hMT9iOmIuam9pbihhfHwiXG4iKX0sc2V0VmFsdWU6U2IoZnVuY3Rpb24oYSl7dmFyIGI9cGEodGhpcy5maXJzdCwwKSxjPXRoaXMuZmlyc3QrdGhpcy5zaXplLTE7WWModGhpcyx7ZnJvbTpiLHRvOnBhKGMsV2UodGhpcyxjKS50ZXh0Lmxlbmd0aCksdGV4dDp3ZyhhKSxvcmlnaW46InNldFZhbHVlIixmdWxsOiEwfSwhMCksS2EodGhpcyx4YShiKSl9KSxyZXBsYWNlUmFuZ2U6ZnVuY3Rpb24oYSxiLGMsZCl7Yj16YSh0aGlzLGIpLGM9Yz96YSh0aGlzLGMpOmIsY2QodGhpcyxhLGIsYyxkKX0sZ2V0UmFuZ2U6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVhlKHRoaXMsemEodGhpcyxhKSx6YSh0aGlzLGIpKTtyZXR1cm4gYz09PSExP2Q6ZC5qb2luKGN8fCJcbiIpfSxnZXRMaW5lOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0TGluZUhhbmRsZShhKTtyZXR1cm4gYiYmYi50ZXh0fSxnZXRMaW5lSGFuZGxlOmZ1bmN0aW9uKGEpe3JldHVybiBCYSh0aGlzLGEpP1dlKHRoaXMsYSk6dm9pZCAwfSxnZXRMaW5lTnVtYmVyOmZ1bmN0aW9uKGEpe3JldHVybiAkZShhKX0sZ2V0TGluZUhhbmRsZVZpc3VhbFN0YXJ0OmZ1bmN0aW9uKGEpe3JldHVybiJudW1iZXIiPT10eXBlb2YgYSYmKGE9V2UodGhpcyxhKSksaGUoYSl9LGxpbmVDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemV9LGZpcnN0TGluZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpcnN0fSxsYXN0TGluZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpcnN0K3RoaXMuc2l6ZS0xfSxjbGlwUG9zOmZ1bmN0aW9uKGEpe3JldHVybiB6YSh0aGlzLGEpfSxnZXRDdXJzb3I6ZnVuY3Rpb24oYSl7dmFyIGMsYj10aGlzLnNlbC5wcmltYXJ5KCk7cmV0dXJuIGM9bnVsbD09YXx8ImhlYWQiPT1hP2IuaGVhZDoiYW5jaG9yIj09YT9iLmFuY2hvcjoiZW5kIj09YXx8InRvIj09YXx8YT09PSExP2IudG8oKTpiLmZyb20oKX0sbGlzdFNlbGVjdGlvbnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWwucmFuZ2VzfSxzb21ldGhpbmdTZWxlY3RlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbC5zb21ldGhpbmdTZWxlY3RlZCgpfSxzZXRDdXJzb3I6U2IoZnVuY3Rpb24oYSxiLGMpe0hhKHRoaXMsemEodGhpcywibnVtYmVyIj09dHlwZW9mIGE/cGEoYSxifHwwKTphKSxudWxsLGMpfSksc2V0U2VsZWN0aW9uOlNiKGZ1bmN0aW9uKGEsYixjKXtIYSh0aGlzLHphKHRoaXMsYSksemEodGhpcyxifHxhKSxjKX0pLGV4dGVuZFNlbGVjdGlvbjpTYihmdW5jdGlvbihhLGIsYyl7RWEodGhpcyx6YSh0aGlzLGEpLGImJnphKHRoaXMsYiksYyl9KSxleHRlbmRTZWxlY3Rpb25zOlNiKGZ1bmN0aW9uKGEsYil7RmEodGhpcyxDYSh0aGlzLGEsYikpfSksZXh0ZW5kU2VsZWN0aW9uc0J5OlNiKGZ1bmN0aW9uKGEsYil7RmEodGhpcyxWZih0aGlzLnNlbC5yYW5nZXMsYSksYil9KSxzZXRTZWxlY3Rpb25zOlNiKGZ1bmN0aW9uKGEsYixjKXtpZihhLmxlbmd0aCl7Zm9yKHZhciBkPTAsZT1bXTtkPGEubGVuZ3RoO2QrKyllW2RdPW5ldyB2YSh6YSh0aGlzLGFbZF0uYW5jaG9yKSx6YSh0aGlzLGFbZF0uaGVhZCkpO251bGw9PWImJihiPU1hdGgubWluKGEubGVuZ3RoLTEsdGhpcy5zZWwucHJpbUluZGV4KSksS2EodGhpcyx3YShlLGIpLGMpfX0pLGFkZFNlbGVjdGlvbjpTYihmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5zZWwucmFuZ2VzLnNsaWNlKDApO2QucHVzaChuZXcgdmEoemEodGhpcyxhKSx6YSh0aGlzLGJ8fGEpKSksS2EodGhpcyx3YShkLGQubGVuZ3RoLTEpLGMpfSksZ2V0U2VsZWN0aW9uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxiPXRoaXMuc2VsLnJhbmdlcyxkPTA7ZDxiLmxlbmd0aDtkKyspe3ZhciBlPVhlKHRoaXMsYltkXS5mcm9tKCksYltkXS50bygpKTtjPWM/Yy5jb25jYXQoZSk6ZX1yZXR1cm4gYT09PSExP2M6Yy5qb2luKGF8fCJcbiIpfSxnZXRTZWxlY3Rpb25zOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPXRoaXMuc2VsLnJhbmdlcyxkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPVhlKHRoaXMsY1tkXS5mcm9tKCksY1tkXS50bygpKTthIT09ITEmJihlPWUuam9pbihhfHwiXG4iKSksYltkXT1lfXJldHVybiBifSxyZXBsYWNlU2VsZWN0aW9uOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9W10sZT0wO2U8dGhpcy5zZWwucmFuZ2VzLmxlbmd0aDtlKyspZFtlXT1hO3RoaXMucmVwbGFjZVNlbGVjdGlvbnMoZCxiLGN8fCIraW5wdXQiKX0scmVwbGFjZVNlbGVjdGlvbnM6U2IoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1bXSxlPXRoaXMuc2VsLGY9MDtmPGUucmFuZ2VzLmxlbmd0aDtmKyspe3ZhciBnPWUucmFuZ2VzW2ZdO2RbZl09e2Zyb206Zy5mcm9tKCksdG86Zy50bygpLHRleHQ6d2coYVtmXSksb3JpZ2luOmN9fWZvcih2YXIgaD1iJiYiZW5kIiE9YiYmV2ModGhpcyxkLGIpLGY9ZC5sZW5ndGgtMTtmPj0wO2YtLSlZYyh0aGlzLGRbZl0pO2g/SmEodGhpcyxoKTp0aGlzLmNtJiZpZCh0aGlzLmNtKX0pLHVuZG86U2IoZnVuY3Rpb24oKXskYyh0aGlzLCJ1bmRvIil9KSxyZWRvOlNiKGZ1bmN0aW9uKCl7JGModGhpcywicmVkbyIpfSksdW5kb1NlbGVjdGlvbjpTYihmdW5jdGlvbigpeyRjKHRoaXMsInVuZG8iLCEwKX0pLHJlZG9TZWxlY3Rpb246U2IoZnVuY3Rpb24oKXskYyh0aGlzLCJyZWRvIiwhMCl9KSxzZXRFeHRlbmRpbmc6ZnVuY3Rpb24oYSl7dGhpcy5leHRlbmQ9YX0sZ2V0RXh0ZW5kaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXh0ZW5kfSxoaXN0b3J5U2l6ZTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmhpc3RvcnksYj0wLGM9MCxkPTA7ZDxhLmRvbmUubGVuZ3RoO2QrKylhLmRvbmVbZF0ucmFuZ2VzfHwrK2I7Zm9yKHZhciBkPTA7ZDxhLnVuZG9uZS5sZW5ndGg7ZCsrKWEudW5kb25lW2RdLnJhbmdlc3x8KytjO3JldHVybnt1bmRvOmIscmVkbzpjfX0sY2xlYXJIaXN0b3J5OmZ1bmN0aW9uKCl7dGhpcy5oaXN0b3J5PW5ldyBjZih0aGlzLmhpc3RvcnkubWF4R2VuZXJhdGlvbil9LG1hcmtDbGVhbjpmdW5jdGlvbigpe3RoaXMuY2xlYW5HZW5lcmF0aW9uPXRoaXMuY2hhbmdlR2VuZXJhdGlvbighMCl9LGNoYW5nZUdlbmVyYXRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJih0aGlzLmhpc3RvcnkubGFzdE9wPXRoaXMuaGlzdG9yeS5sYXN0U2VsT3A9dGhpcy5oaXN0b3J5Lmxhc3RPcmlnaW49bnVsbCksdGhpcy5oaXN0b3J5LmdlbmVyYXRpb259LGlzQ2xlYW46ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaGlzdG9yeS5nZW5lcmF0aW9uPT0oYXx8dGhpcy5jbGVhbkdlbmVyYXRpb24pfSxnZXRIaXN0b3J5OmZ1bmN0aW9uKCl7cmV0dXJue2RvbmU6b2YodGhpcy5oaXN0b3J5LmRvbmUpLHVuZG9uZTpvZih0aGlzLmhpc3RvcnkudW5kb25lKX19LHNldEhpc3Rvcnk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5oaXN0b3J5PW5ldyBjZih0aGlzLmhpc3RvcnkubWF4R2VuZXJhdGlvbik7Yi5kb25lPW9mKGEuZG9uZS5zbGljZSgwKSxudWxsLCEwKSxiLnVuZG9uZT1vZihhLnVuZG9uZS5zbGljZSgwKSxudWxsLCEwKX0sYWRkTGluZUNsYXNzOlNiKGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbGQodGhpcyxhLCJndXR0ZXIiPT1iPyJndXR0ZXIiOiJjbGFzcyIsZnVuY3Rpb24oYSl7dmFyIGQ9InRleHQiPT1iPyJ0ZXh0Q2xhc3MiOiJiYWNrZ3JvdW5kIj09Yj8iYmdDbGFzcyI6Imd1dHRlciI9PWI/Imd1dHRlckNsYXNzIjoid3JhcENsYXNzIjtpZihhW2RdKXtpZihqZyhjKS50ZXN0KGFbZF0pKXJldHVybiExO2FbZF0rPSIgIitjfWVsc2UgYVtkXT1jO3JldHVybiEwfSl9KSxyZW1vdmVMaW5lQ2xhc3M6U2IoZnVuY3Rpb24oYSxiLGMpe3JldHVybiBsZCh0aGlzLGEsImd1dHRlciI9PWI/Imd1dHRlciI6ImNsYXNzIixmdW5jdGlvbihhKXt2YXIgZD0idGV4dCI9PWI/InRleHRDbGFzcyI6ImJhY2tncm91bmQiPT1iPyJiZ0NsYXNzIjoiZ3V0dGVyIj09Yj8iZ3V0dGVyQ2xhc3MiOiJ3cmFwQ2xhc3MiLGU9YVtkXTtpZighZSlyZXR1cm4hMTtpZihudWxsPT1jKWFbZF09bnVsbDtlbHNle3ZhciBmPWUubWF0Y2goamcoYykpO2lmKCFmKXJldHVybiExO3ZhciBnPWYuaW5kZXgrZlswXS5sZW5ndGg7YVtkXT1lLnNsaWNlKDAsZi5pbmRleCkrKGYuaW5kZXgmJmchPWUubGVuZ3RoPyIgIjoiIikrZS5zbGljZShnKXx8bnVsbH1yZXR1cm4hMH0pfSksbWFya1RleHQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBLZCh0aGlzLHphKHRoaXMsYSksemEodGhpcyxiKSxjLCJyYW5nZSIpfSxzZXRCb29rbWFyazpmdW5jdGlvbihhLGIpe3ZhciBjPXtyZXBsYWNlZFdpdGg6YiYmKG51bGw9PWIubm9kZVR5cGU/Yi53aWRnZXQ6YiksaW5zZXJ0TGVmdDpiJiZiLmluc2VydExlZnQsCmNsZWFyV2hlbkVtcHR5OiExLHNoYXJlZDpiJiZiLnNoYXJlZH07cmV0dXJuIGE9emEodGhpcyxhKSxLZCh0aGlzLGEsYSxjLCJib29rbWFyayIpfSxmaW5kTWFya3NBdDpmdW5jdGlvbihhKXthPXphKHRoaXMsYSk7dmFyIGI9W10sYz1XZSh0aGlzLGEubGluZSkubWFya2VkU3BhbnM7aWYoYylmb3IodmFyIGQ9MDtkPGMubGVuZ3RoOysrZCl7dmFyIGU9Y1tkXTsobnVsbD09ZS5mcm9tfHxlLmZyb208PWEuY2gpJiYobnVsbD09ZS50b3x8ZS50bz49YS5jaCkmJmIucHVzaChlLm1hcmtlci5wYXJlbnR8fGUubWFya2VyKX1yZXR1cm4gYn0sZmluZE1hcmtzOmZ1bmN0aW9uKGEsYixjKXthPXphKHRoaXMsYSksYj16YSh0aGlzLGIpO3ZhciBkPVtdLGU9YS5saW5lO3JldHVybiB0aGlzLml0ZXIoYS5saW5lLGIubGluZSsxLGZ1bmN0aW9uKGYpe3ZhciBnPWYubWFya2VkU3BhbnM7aWYoZylmb3IodmFyIGg9MDtoPGcubGVuZ3RoO2grKyl7dmFyIGk9Z1toXTtlPT1hLmxpbmUmJmEuY2g+aS50b3x8bnVsbD09aS5mcm9tJiZlIT1hLmxpbmV8fGU9PWIubGluZSYmaS5mcm9tPmIuY2h8fGMmJiFjKGkubWFya2VyKXx8ZC5wdXNoKGkubWFya2VyLnBhcmVudHx8aS5tYXJrZXIpfSsrZX0pLGR9LGdldEFsbE1hcmtzOmZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIHRoaXMuaXRlcihmdW5jdGlvbihiKXt2YXIgYz1iLm1hcmtlZFNwYW5zO2lmKGMpZm9yKHZhciBkPTA7ZDxjLmxlbmd0aDsrK2QpbnVsbCE9Y1tkXS5mcm9tJiZhLnB1c2goY1tkXS5tYXJrZXIpfSksYX0scG9zRnJvbUluZGV4OmZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5maXJzdDtyZXR1cm4gdGhpcy5pdGVyKGZ1bmN0aW9uKGQpe3ZhciBlPWQudGV4dC5sZW5ndGgrMTtyZXR1cm4gZT5hPyhiPWEsITApOihhLT1lLHZvaWQrK2MpfSksemEodGhpcyxwYShjLGIpKX0saW5kZXhGcm9tUG9zOmZ1bmN0aW9uKGEpe2E9emEodGhpcyxhKTt2YXIgYj1hLmNoO3JldHVybiBhLmxpbmU8dGhpcy5maXJzdHx8YS5jaDwwPzA6KHRoaXMuaXRlcih0aGlzLmZpcnN0LGEubGluZSxmdW5jdGlvbihhKXtiKz1hLnRleHQubGVuZ3RoKzF9KSxiKX0sY29weTpmdW5jdGlvbihhKXt2YXIgYj1uZXcgUmUoWWUodGhpcyx0aGlzLmZpcnN0LHRoaXMuZmlyc3QrdGhpcy5zaXplKSx0aGlzLm1vZGVPcHRpb24sdGhpcy5maXJzdCk7cmV0dXJuIGIuc2Nyb2xsVG9wPXRoaXMuc2Nyb2xsVG9wLGIuc2Nyb2xsTGVmdD10aGlzLnNjcm9sbExlZnQsYi5zZWw9dGhpcy5zZWwsYi5leHRlbmQ9ITEsYSYmKGIuaGlzdG9yeS51bmRvRGVwdGg9dGhpcy5oaXN0b3J5LnVuZG9EZXB0aCxiLnNldEhpc3RvcnkodGhpcy5nZXRIaXN0b3J5KCkpKSxifSxsaW5rZWREb2M6ZnVuY3Rpb24oYSl7YXx8KGE9e30pO3ZhciBiPXRoaXMuZmlyc3QsYz10aGlzLmZpcnN0K3RoaXMuc2l6ZTtudWxsIT1hLmZyb20mJmEuZnJvbT5iJiYoYj1hLmZyb20pLG51bGwhPWEudG8mJmEudG88YyYmKGM9YS50byk7dmFyIGQ9bmV3IFJlKFllKHRoaXMsYixjKSxhLm1vZGV8fHRoaXMubW9kZU9wdGlvbixiKTtyZXR1cm4gYS5zaGFyZWRIaXN0JiYoZC5oaXN0b3J5PXRoaXMuaGlzdG9yeSksKHRoaXMubGlua2VkfHwodGhpcy5saW5rZWQ9W10pKS5wdXNoKHtkb2M6ZCxzaGFyZWRIaXN0OmEuc2hhcmVkSGlzdH0pLGQubGlua2VkPVt7ZG9jOnRoaXMsaXNQYXJlbnQ6ITAsc2hhcmVkSGlzdDphLnNoYXJlZEhpc3R9XSxPZChkLE5kKHRoaXMpKSxkfSx1bmxpbmtEb2M6ZnVuY3Rpb24oYSl7aWYoYSBpbnN0YW5jZW9mIHcmJihhPWEuZG9jKSx0aGlzLmxpbmtlZClmb3IodmFyIGI9MDtiPHRoaXMubGlua2VkLmxlbmd0aDsrK2Ipe3ZhciBjPXRoaXMubGlua2VkW2JdO2lmKGMuZG9jPT1hKXt0aGlzLmxpbmtlZC5zcGxpY2UoYiwxKSxhLnVubGlua0RvYyh0aGlzKSxQZChOZCh0aGlzKSk7YnJlYWt9fWlmKGEuaGlzdG9yeT09dGhpcy5oaXN0b3J5KXt2YXIgZD1bYS5pZF07VWUoYSxmdW5jdGlvbihhKXtkLnB1c2goYS5pZCl9LCEwKSxhLmhpc3Rvcnk9bmV3IGNmKG51bGwpLGEuaGlzdG9yeS5kb25lPW9mKHRoaXMuaGlzdG9yeS5kb25lLGQpLGEuaGlzdG9yeS51bmRvbmU9b2YodGhpcy5oaXN0b3J5LnVuZG9uZSxkKX19LGl0ZXJMaW5rZWREb2NzOmZ1bmN0aW9uKGEpe1VlKHRoaXMsYSl9LGdldE1vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb2RlfSxnZXRFZGl0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbX19KSxSZS5wcm90b3R5cGUuZWFjaExpbmU9UmUucHJvdG90eXBlLml0ZXI7dmFyIFNlPSJpdGVyIGluc2VydCByZW1vdmUgY29weSBnZXRFZGl0b3IiLnNwbGl0KCIgIik7Zm9yKHZhciBUZSBpbiBSZS5wcm90b3R5cGUpUmUucHJvdG90eXBlLmhhc093blByb3BlcnR5KFRlKSYmVWYoU2UsVGUpPDAmJih3LnByb3RvdHlwZVtUZV09ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkodGhpcy5kb2MsYXJndW1lbnRzKX19KFJlLnByb3RvdHlwZVtUZV0pKTtIZihSZSk7dmFyIHNmPXcuZV9wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0P2EucHJldmVudERlZmF1bHQoKTphLnJldHVyblZhbHVlPSExfSx0Zj13LmVfc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKGEpe2Euc3RvcFByb3BhZ2F0aW9uP2Euc3RvcFByb3BhZ2F0aW9uKCk6YS5jYW5jZWxCdWJibGU9ITB9LHZmPXcuZV9zdG9wPWZ1bmN0aW9uKGEpe3NmKGEpLHRmKGEpfSx5Zj13Lm9uPWZ1bmN0aW9uKGEsYixjKXtpZihhLmFkZEV2ZW50TGlzdGVuZXIpYS5hZGRFdmVudExpc3RlbmVyKGIsYywhMSk7ZWxzZSBpZihhLmF0dGFjaEV2ZW50KWEuYXR0YWNoRXZlbnQoIm9uIitiLGMpO2Vsc2V7dmFyIGQ9YS5faGFuZGxlcnN8fChhLl9oYW5kbGVycz17fSksZT1kW2JdfHwoZFtiXT1bXSk7ZS5wdXNoKGMpfX0semY9dy5vZmY9ZnVuY3Rpb24oYSxiLGMpe2lmKGEucmVtb3ZlRXZlbnRMaXN0ZW5lcilhLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixjLCExKTtlbHNlIGlmKGEuZGV0YWNoRXZlbnQpYS5kZXRhY2hFdmVudCgib24iK2IsYyk7ZWxzZXt2YXIgZD1hLl9oYW5kbGVycyYmYS5faGFuZGxlcnNbYl07aWYoIWQpcmV0dXJuO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7KytlKWlmKGRbZV09PWMpe2Quc3BsaWNlKGUsMSk7YnJlYWt9fX0sQWY9dy5zaWduYWw9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLl9oYW5kbGVycyYmYS5faGFuZGxlcnNbYl07aWYoYylmb3IodmFyIGQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpLGU9MDtlPGMubGVuZ3RoOysrZSljW2VdLmFwcGx5KG51bGwsZCl9LEJmPW51bGwsSWY9MzAsSmY9dy5QYXNzPXt0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJDb2RlTWlycm9yLlBhc3MifX0sS2Y9e3Njcm9sbDohMX0sTGY9e29yaWdpbjoiKm1vdXNlIn0sTWY9e29yaWdpbjoiK21vdmUifTtOZi5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGEsYil7Y2xlYXJUaW1lb3V0KHRoaXMuaWQpLHRoaXMuaWQ9c2V0VGltZW91dChiLGEpfTt2YXIgT2Y9dy5jb3VudENvbHVtbj1mdW5jdGlvbihhLGIsYyxkLGUpe251bGw9PWImJihiPWEuc2VhcmNoKC9bXlxzXHUwMGEwXS8pLC0xPT1iJiYoYj1hLmxlbmd0aCkpO2Zvcih2YXIgZj1kfHwwLGc9ZXx8MDs7KXt2YXIgaD1hLmluZGV4T2YoIgkiLGYpO2lmKDA+aHx8aD49YilyZXR1cm4gZysoYi1mKTtnKz1oLWYsZys9Yy1nJWMsZj1oKzF9fSxRZj1bIiJdLFRmPWZ1bmN0aW9uKGEpe2Euc2VsZWN0KCl9O24/VGY9ZnVuY3Rpb24oYSl7YS5zZWxlY3Rpb25TdGFydD0wLGEuc2VsZWN0aW9uRW5kPWEudmFsdWUubGVuZ3RofTpkJiYoVGY9ZnVuY3Rpb24oYSl7dHJ5e2Euc2VsZWN0KCl9Y2F0Y2goYil7fX0pO3ZhciBlZyxaZj0vW1x1MDBkZlx1MDU5MC1cdTA1ZjRcdTA2MDAtXHUwNmZmXHUzMDQwLVx1MzA5Zlx1MzBhMC1cdTMwZmZcdTM0MDAtXHU0ZGI1XHU0ZTAwLVx1OWZjY1x1YWMwMC1cdWQ3YWZdLywkZj13LmlzV29yZENoYXI9ZnVuY3Rpb24oYSl7cmV0dXJuL1x3Ly50ZXN0KGEpfHxhPiJceDgwIiYmKGEudG9VcHBlckNhc2UoKSE9YS50b0xvd2VyQ2FzZSgpfHxaZi50ZXN0KGEpKX0sYmc9L1tcdTAzMDAtXHUwMzZmXHUwNDgzLVx1MDQ4OVx1MDU5MS1cdTA1YmRcdTA1YmZcdTA1YzFcdTA1YzJcdTA1YzRcdTA1YzVcdTA1YzdcdTA2MTAtXHUwNjFhXHUwNjRiLVx1MDY1ZVx1MDY3MFx1MDZkNi1cdTA2ZGNcdTA2ZGUtXHUwNmU0XHUwNmU3XHUwNmU4XHUwNmVhLVx1MDZlZFx1MDcxMVx1MDczMC1cdTA3NGFcdTA3YTYtXHUwN2IwXHUwN2ViLVx1MDdmM1x1MDgxNi1cdTA4MTlcdTA4MWItXHUwODIzXHUwODI1LVx1MDgyN1x1MDgyOS1cdTA4MmRcdTA5MDAtXHUwOTAyXHUwOTNjXHUwOTQxLVx1MDk0OFx1MDk0ZFx1MDk1MS1cdTA5NTVcdTA5NjJcdTA5NjNcdTA5ODFcdTA5YmNcdTA5YmVcdTA5YzEtXHUwOWM0XHUwOWNkXHUwOWQ3XHUwOWUyXHUwOWUzXHUwYTAxXHUwYTAyXHUwYTNjXHUwYTQxXHUwYTQyXHUwYTQ3XHUwYTQ4XHUwYTRiLVx1MGE0ZFx1MGE1MVx1MGE3MFx1MGE3MVx1MGE3NVx1MGE4MVx1MGE4Mlx1MGFiY1x1MGFjMS1cdTBhYzVcdTBhYzdcdTBhYzhcdTBhY2RcdTBhZTJcdTBhZTNcdTBiMDFcdTBiM2NcdTBiM2VcdTBiM2ZcdTBiNDEtXHUwYjQ0XHUwYjRkXHUwYjU2XHUwYjU3XHUwYjYyXHUwYjYzXHUwYjgyXHUwYmJlXHUwYmMwXHUwYmNkXHUwYmQ3XHUwYzNlLVx1MGM0MFx1MGM0Ni1cdTBjNDhcdTBjNGEtXHUwYzRkXHUwYzU1XHUwYzU2XHUwYzYyXHUwYzYzXHUwY2JjXHUwY2JmXHUwY2MyXHUwY2M2XHUwY2NjXHUwY2NkXHUwY2Q1XHUwY2Q2XHUwY2UyXHUwY2UzXHUwZDNlXHUwZDQxLVx1MGQ0NFx1MGQ0ZFx1MGQ1N1x1MGQ2Mlx1MGQ2M1x1MGRjYVx1MGRjZlx1MGRkMi1cdTBkZDRcdTBkZDZcdTBkZGZcdTBlMzFcdTBlMzQtXHUwZTNhXHUwZTQ3LVx1MGU0ZVx1MGViMVx1MGViNC1cdTBlYjlcdTBlYmJcdTBlYmNcdTBlYzgtXHUwZWNkXHUwZjE4XHUwZjE5XHUwZjM1XHUwZjM3XHUwZjM5XHUwZjcxLVx1MGY3ZVx1MGY4MC1cdTBmODRcdTBmODZcdTBmODdcdTBmOTAtXHUwZjk3XHUwZjk5LVx1MGZiY1x1MGZjNlx1MTAyZC1cdTEwMzBcdTEwMzItXHUxMDM3XHUxMDM5XHUxMDNhXHUxMDNkXHUxMDNlXHUxMDU4XHUxMDU5XHUxMDVlLVx1MTA2MFx1MTA3MS1cdTEwNzRcdTEwODJcdTEwODVcdTEwODZcdTEwOGRcdTEwOWRcdTEzNWZcdTE3MTItXHUxNzE0XHUxNzMyLVx1MTczNFx1MTc1Mlx1MTc1M1x1MTc3Mlx1MTc3M1x1MTdiNy1cdTE3YmRcdTE3YzZcdTE3YzktXHUxN2QzXHUxN2RkXHUxODBiLVx1MTgwZFx1MThhOVx1MTkyMC1cdTE5MjJcdTE5MjdcdTE5MjhcdTE5MzJcdTE5MzktXHUxOTNiXHUxYTE3XHUxYTE4XHUxYTU2XHUxYTU4LVx1MWE1ZVx1MWE2MFx1MWE2Mlx1MWE2NS1cdTFhNmNcdTFhNzMtXHUxYTdjXHUxYTdmXHUxYjAwLVx1MWIwM1x1MWIzNFx1MWIzNi1cdTFiM2FcdTFiM2NcdTFiNDJcdTFiNmItXHUxYjczXHUxYjgwXHUxYjgxXHUxYmEyLVx1MWJhNVx1MWJhOFx1MWJhOVx1MWMyYy1cdTFjMzNcdTFjMzZcdTFjMzdcdTFjZDAtXHUxY2QyXHUxY2Q0LVx1MWNlMFx1MWNlMi1cdTFjZThcdTFjZWRcdTFkYzAtXHUxZGU2XHUxZGZkLVx1MWRmZlx1MjAwY1x1MjAwZFx1MjBkMC1cdTIwZjBcdTJjZWYtXHUyY2YxXHUyZGUwLVx1MmRmZlx1MzAyYS1cdTMwMmZcdTMwOTlcdTMwOWFcdWE2NmYtXHVhNjcyXHVhNjdjXHVhNjdkXHVhNmYwXHVhNmYxXHVhODAyXHVhODA2XHVhODBiXHVhODI1XHVhODI2XHVhOGM0XHVhOGUwLVx1YThmMVx1YTkyNi1cdWE5MmRcdWE5NDctXHVhOTUxXHVhOTgwLVx1YTk4Mlx1YTliM1x1YTliNi1cdWE5YjlcdWE5YmNcdWFhMjktXHVhYTJlXHVhYTMxXHVhYTMyXHVhYTM1XHVhYTM2XHVhYTQzXHVhYTRjXHVhYWIwXHVhYWIyLVx1YWFiNFx1YWFiN1x1YWFiOFx1YWFiZVx1YWFiZlx1YWFjMVx1YWJlNVx1YWJlOFx1YWJlZFx1ZGMwMC1cdWRmZmZcdWZiMWVcdWZlMDAtXHVmZTBmXHVmZTIwLVx1ZmUyNlx1ZmY5ZVx1ZmY5Zl0vO2VnPWRvY3VtZW50LmNyZWF0ZVJhbmdlP2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO3JldHVybiBkLnNldEVuZChhLGMpLGQuc2V0U3RhcnQoYSxiKSxkfTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZG9jdW1lbnQuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKTt0cnl7ZC5tb3ZlVG9FbGVtZW50VGV4dChhLnBhcmVudE5vZGUpfWNhdGNoKGUpe3JldHVybiBkfXJldHVybiBkLmNvbGxhcHNlKCEwKSxkLm1vdmVFbmQoImNoYXJhY3RlciIsYyksZC5tb3ZlU3RhcnQoImNoYXJhY3RlciIsYiksZH07dmFyIGhnPXcuY29udGFpbnM9ZnVuY3Rpb24oYSxiKXtpZihhLmNvbnRhaW5zKXJldHVybiBhLmNvbnRhaW5zKGIpO2Zvcig7Yj1iLnBhcmVudE5vZGU7KWlmKDExPT1iLm5vZGVUeXBlJiYoYj1iLmhvc3QpLGI9PWEpcmV0dXJuITB9O2QmJjExPmUmJihpZz1mdW5jdGlvbigpe3RyeXtyZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudH1jYXRjaChhKXtyZXR1cm4gZG9jdW1lbnQuYm9keX19KTt2YXIgc2csdWcsa2c9dy5ybUNsYXNzPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5jbGFzc05hbWUsZD1qZyhiKS5leGVjKGMpO2lmKGQpe3ZhciBlPWMuc2xpY2UoZC5pbmRleCtkWzBdLmxlbmd0aCk7YS5jbGFzc05hbWU9Yy5zbGljZSgwLGQuaW5kZXgpKyhlP2RbMV0rZToiIil9fSxsZz13LmFkZENsYXNzPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5jbGFzc05hbWU7amcoYikudGVzdChjKXx8KGEuY2xhc3NOYW1lKz0oYz8iICI6IiIpK2IpfSxvZz0hMSxyZz1mdW5jdGlvbigpe2lmKGQmJjk+ZSlyZXR1cm4hMTt2YXIgYT1kZygiZGl2Iik7cmV0dXJuImRyYWdnYWJsZSJpbiBhfHwiZHJhZ0Ryb3AiaW4gYX0oKSx3Zz13LnNwbGl0TGluZXM9MyE9IlxuXG5iIi5zcGxpdCgvXG4vKS5sZW5ndGg/ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz1bXSxkPWEubGVuZ3RoO2Q+PWI7KXt2YXIgZT1hLmluZGV4T2YoIlxuIixiKTstMT09ZSYmKGU9YS5sZW5ndGgpO3ZhciBmPWEuc2xpY2UoYiwiXHIiPT1hLmNoYXJBdChlLTEpP2UtMTplKSxnPWYuaW5kZXhPZigiXHIiKTstMSE9Zz8oYy5wdXNoKGYuc2xpY2UoMCxnKSksYis9ZysxKTooYy5wdXNoKGYpLGI9ZSsxKX1yZXR1cm4gY306ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3BsaXQoL1xyXG4/fFxuLyl9LHhnPXdpbmRvdy5nZXRTZWxlY3Rpb24/ZnVuY3Rpb24oYSl7dHJ5e3JldHVybiBhLnNlbGVjdGlvblN0YXJ0IT1hLnNlbGVjdGlvbkVuZH1jYXRjaChiKXtyZXR1cm4hMX19OmZ1bmN0aW9uKGEpe3RyeXt2YXIgYj1hLm93bmVyRG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCl9Y2F0Y2goYyl7fXJldHVybiBiJiZiLnBhcmVudEVsZW1lbnQoKT09YT8wIT1iLmNvbXBhcmVFbmRQb2ludHMoIlN0YXJ0VG9FbmQiLGIpOiExfSx5Zz1mdW5jdGlvbigpe3ZhciBhPWRnKCJkaXYiKTtyZXR1cm4ib25jb3B5ImluIGE/ITA6KGEuc2V0QXR0cmlidXRlKCJvbmNvcHkiLCJyZXR1cm47IiksImZ1bmN0aW9uIj09dHlwZW9mIGEub25jb3B5KX0oKSx6Zz1udWxsLEJnPXszOiJFbnRlciIsODoiQmFja3NwYWNlIiw5OiJUYWIiLDEzOiJFbnRlciIsMTY6IlNoaWZ0IiwxNzoiQ3RybCIsMTg6IkFsdCIsMTk6IlBhdXNlIiwyMDoiQ2Fwc0xvY2siLDI3OiJFc2MiLDMyOiJTcGFjZSIsMzM6IlBhZ2VVcCIsMzQ6IlBhZ2VEb3duIiwzNToiRW5kIiwzNjoiSG9tZSIsMzc6IkxlZnQiLDM4OiJVcCIsMzk6IlJpZ2h0Iiw0MDoiRG93biIsNDQ6IlByaW50U2NybiIsNDU6Ikluc2VydCIsNDY6IkRlbGV0ZSIsNTk6IjsiLDYxOiI9Iiw5MToiTW9kIiw5MjoiTW9kIiw5MzoiTW9kIiwxMDc6Ij0iLDEwOToiLSIsMTI3OiJEZWxldGUiLDE3MzoiLSIsMTg2OiI7IiwxODc6Ij0iLDE4ODoiLCIsMTg5OiItIiwxOTA6Ii4iLDE5MToiLyIsMTkyOiJgIiwyMTk6IlsiLDIyMDoiXFwiLDIyMToiXSIsMjIyOiInIiw2MzIzMjoiVXAiLDYzMjMzOiJEb3duIiw2MzIzNDoiTGVmdCIsNjMyMzU6IlJpZ2h0Iiw2MzI3MjoiRGVsZXRlIiw2MzI3MzoiSG9tZSIsNjMyNzU6IkVuZCIsNjMyNzY6IlBhZ2VVcCIsNjMyNzc6IlBhZ2VEb3duIiw2MzMwMjoiSW5zZXJ0In07dy5rZXlOYW1lcz1CZyxmdW5jdGlvbigpe2Zvcih2YXIgYT0wOzEwPmE7YSsrKUJnW2ErNDhdPUJnW2ErOTZdPVN0cmluZyhhKTtmb3IodmFyIGE9NjU7OTA+PWE7YSsrKUJnW2FdPVN0cmluZy5mcm9tQ2hhckNvZGUoYSk7Zm9yKHZhciBhPTE7MTI+PWE7YSsrKUJnW2ErMTExXT1CZ1thKzYzMjM1XT0iRiIrYX0oKTt2YXIgTGcsUWc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBjKGMpe3JldHVybiAyNDc+PWM/YS5jaGFyQXQoYyk6Yz49MTQyNCYmMTUyND49Yz8iUiI6Yz49MTUzNiYmMTc3Mz49Yz9iLmNoYXJBdChjLTE1MzYpOmM+PTE3NzQmJjIyMjA+PWM/InIiOmM+PTgxOTImJjgyMDM+PWM/InciOjgyMDQ9PWM/ImIiOiJMIn1mdW5jdGlvbiBqKGEsYixjKXt0aGlzLmxldmVsPWEsdGhpcy5mcm9tPWIsdGhpcy50bz1jfXZhciBhPSJiYmJiYmJiYmJ0c3R3c2JiYmJiYmJiYmJiYmJic3NzdHdOTiUlJU5OTk5OTixOLE4xMTExMTExMTExTk5OTk5OTkxMTExMTExMTExMTExMTExMTExMTExMTExMTk5OTk5OTExMTExMTExMTExMTExMTExMTExMTExMTExOTk5OYmJiYmJic2JiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiLE4lJSUlTk5OTkxOTk5OTiUlMTFOTE5OTjFMTk5OTk5MTExMTExMTExMTExMTExMTExMTExMTE5MTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTiIsYj0icnJycnJycnJycnJyLHJOTm1tbW1tbXJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJybW1tbW1tbW1tbW1tbW1ycnJycnJybm5ubm5ubm5ubiVubnJycm1ycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycm1tbW1tbW1tbW1tbW1tbW1tbW1ObW1tbSIsZD0vW1x1MDU5MC1cdTA1ZjRcdTA2MDAtXHUwNmZmXHUwNzAwLVx1MDhhY10vLGU9L1tzdHdOXS8sZj0vW0xScl0vLGc9L1tMYjFuXS8saD0vWzFuXS8saT0iTCI7cmV0dXJuIGZ1bmN0aW9uKGEpe2lmKCFkLnRlc3QoYSkpcmV0dXJuITE7Zm9yKHZhciBtLGI9YS5sZW5ndGgsaz1bXSxsPTA7Yj5sOysrbClrLnB1c2gobT1jKGEuY2hhckNvZGVBdChsKSkpO2Zvcih2YXIgbD0wLG49aTtiPmw7KytsKXt2YXIgbT1rW2xdOyJtIj09bT9rW2xdPW46bj1tfWZvcih2YXIgbD0wLG89aTtiPmw7KytsKXt2YXIgbT1rW2xdOyIxIj09bSYmInIiPT1vP2tbbF09Im4iOmYudGVzdChtKSYmKG89bSwiciI9PW0mJihrW2xdPSJSIikpfWZvcih2YXIgbD0xLG49a1swXTtiLTE+bDsrK2wpe3ZhciBtPWtbbF07IisiPT1tJiYiMSI9PW4mJiIxIj09a1tsKzFdP2tbbF09IjEiOiIsIiE9bXx8biE9a1tsKzFdfHwiMSIhPW4mJiJuIiE9bnx8KGtbbF09biksbj1tfWZvcih2YXIgbD0wO2I+bDsrK2wpe3ZhciBtPWtbbF07aWYoIiwiPT1tKWtbbF09Ik4iO2Vsc2UgaWYoIiUiPT1tKXtmb3IodmFyIHA9bCsxO2I+cCYmIiUiPT1rW3BdOysrcCk7Zm9yKHZhciBxPWwmJiIhIj09a1tsLTFdfHxiPnAmJiIxIj09a1twXT8iMSI6Ik4iLHI9bDtwPnI7KytyKWtbcl09cTtsPXAtMX19Zm9yKHZhciBsPTAsbz1pO2I+bDsrK2wpe3ZhciBtPWtbbF07IkwiPT1vJiYiMSI9PW0/a1tsXT0iTCI6Zi50ZXN0KG0pJiYobz1tKX1mb3IodmFyIGw9MDtiPmw7KytsKWlmKGUudGVzdChrW2xdKSl7Zm9yKHZhciBwPWwrMTtiPnAmJmUudGVzdChrW3BdKTsrK3ApO2Zvcih2YXIgcz0iTCI9PShsP2tbbC0xXTppKSx0PSJMIj09KGI+cD9rW3BdOmkpLHE9c3x8dD8iTCI6IlIiLHI9bDtwPnI7KytyKWtbcl09cTtsPXAtMX1mb3IodmFyIHYsdT1bXSxsPTA7Yj5sOylpZihnLnRlc3Qoa1tsXSkpe3ZhciB3PWw7Zm9yKCsrbDtiPmwmJmcudGVzdChrW2xdKTsrK2wpO3UucHVzaChuZXcgaigwLHcsbCkpfWVsc2V7dmFyIHg9bCx5PXUubGVuZ3RoO2ZvcigrK2w7Yj5sJiYiTCIhPWtbbF07KytsKTtmb3IodmFyIHI9eDtsPnI7KWlmKGgudGVzdChrW3JdKSl7cj54JiZ1LnNwbGljZSh5LDAsbmV3IGooMSx4LHIpKTt2YXIgej1yO2ZvcigrK3I7bD5yJiZoLnRlc3Qoa1tyXSk7KytyKTt1LnNwbGljZSh5LDAsbmV3IGooMix6LHIpKSx4PXJ9ZWxzZSsrcjtsPngmJnUuc3BsaWNlKHksMCxuZXcgaigxLHgsbCkpfXJldHVybiAxPT11WzBdLmxldmVsJiYodj1hLm1hdGNoKC9eXHMrLykpJiYodVswXS5mcm9tPXZbMF0ubGVuZ3RoLHUudW5zaGlmdChuZXcgaigwLDAsdlswXS5sZW5ndGgpKSksMT09U2YodSkubGV2ZWwmJih2PWEubWF0Y2goL1xzKyQvKSkmJihTZih1KS50by09dlswXS5sZW5ndGgsdS5wdXNoKG5ldyBqKDAsYi12WzBdLmxlbmd0aCxiKSkpLHVbMF0ubGV2ZWwhPVNmKHUpLmxldmVsJiZ1LnB1c2gobmV3IGoodVswXS5sZXZlbCxiLGIpKSx1fX0oKTtyZXR1cm4gdy52ZXJzaW9uPSI0LjEzLjAiLHd9KTsK"></script>
    <script src="data:application/x-javascript;base64,Ly8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnMKLy8gRGlzdHJpYnV0ZWQgdW5kZXIgYW4gTUlUIGxpY2Vuc2U6IGh0dHA6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFCgovLyBUT0RPIGFjdHVhbGx5IHJlY29nbml6ZSBzeW50YXggb2YgVHlwZVNjcmlwdCBjb25zdHJ1Y3RzCgooZnVuY3Rpb24obW9kKSB7CiAgaWYgKHR5cGVvZiBleHBvcnRzID09ICJvYmplY3QiICYmIHR5cGVvZiBtb2R1bGUgPT0gIm9iamVjdCIpIC8vIENvbW1vbkpTCiAgICBtb2QocmVxdWlyZSgiLi4vLi4vbGliL2NvZGVtaXJyb3IiKSk7CiAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PSAiZnVuY3Rpb24iICYmIGRlZmluZS5hbWQpIC8vIEFNRAogICAgZGVmaW5lKFsiLi4vLi4vbGliL2NvZGVtaXJyb3IiXSwgbW9kKTsKICBlbHNlIC8vIFBsYWluIGJyb3dzZXIgZW52CiAgICBtb2QoQ29kZU1pcnJvcik7Cn0pKGZ1bmN0aW9uKENvZGVNaXJyb3IpIHsKInVzZSBzdHJpY3QiOwoKQ29kZU1pcnJvci5kZWZpbmVNb2RlKCJqYXZhc2NyaXB0IiwgZnVuY3Rpb24oY29uZmlnLCBwYXJzZXJDb25maWcpIHsKICB2YXIgaW5kZW50VW5pdCA9IGNvbmZpZy5pbmRlbnRVbml0OwogIHZhciBzdGF0ZW1lbnRJbmRlbnQgPSBwYXJzZXJDb25maWcuc3RhdGVtZW50SW5kZW50OwogIHZhciBqc29ubGRNb2RlID0gcGFyc2VyQ29uZmlnLmpzb25sZDsKICB2YXIganNvbk1vZGUgPSBwYXJzZXJDb25maWcuanNvbiB8fCBqc29ubGRNb2RlOwogIHZhciBpc1RTID0gcGFyc2VyQ29uZmlnLnR5cGVzY3JpcHQ7CiAgdmFyIHdvcmRSRSA9IHBhcnNlckNvbmZpZy53b3JkQ2hhcmFjdGVycyB8fCAvW1x3JFx4YTEtXHVmZmZmXS87CgogIC8vIFRva2VuaXplcgoKICB2YXIga2V5d29yZHMgPSBmdW5jdGlvbigpewogICAgZnVuY3Rpb24ga3codHlwZSkge3JldHVybiB7dHlwZTogdHlwZSwgc3R5bGU6ICJrZXl3b3JkIn07fQogICAgdmFyIEEgPSBrdygia2V5d29yZCBhIiksIEIgPSBrdygia2V5d29yZCBiIiksIEMgPSBrdygia2V5d29yZCBjIik7CiAgICB2YXIgb3BlcmF0b3IgPSBrdygib3BlcmF0b3IiKSwgYXRvbSA9IHt0eXBlOiAiYXRvbSIsIHN0eWxlOiAiYXRvbSJ9OwoKICAgIHZhciBqc0tleXdvcmRzID0gewogICAgICAiaWYiOiBrdygiaWYiKSwgIndoaWxlIjogQSwgIndpdGgiOiBBLCAiZWxzZSI6IEIsICJkbyI6IEIsICJ0cnkiOiBCLCAiZmluYWxseSI6IEIsCiAgICAgICJyZXR1cm4iOiBDLCAiYnJlYWsiOiBDLCAiY29udGludWUiOiBDLCAibmV3IjogQywgImRlbGV0ZSI6IEMsICJ0aHJvdyI6IEMsICJkZWJ1Z2dlciI6IEMsCiAgICAgICJ2YXIiOiBrdygidmFyIiksICJjb25zdCI6IGt3KCJ2YXIiKSwgImxldCI6IGt3KCJ2YXIiKSwKICAgICAgImZ1bmN0aW9uIjoga3coImZ1bmN0aW9uIiksICJjYXRjaCI6IGt3KCJjYXRjaCIpLAogICAgICAiZm9yIjoga3coImZvciIpLCAic3dpdGNoIjoga3coInN3aXRjaCIpLCAiY2FzZSI6IGt3KCJjYXNlIiksICJkZWZhdWx0Ijoga3coImRlZmF1bHQiKSwKICAgICAgImluIjogb3BlcmF0b3IsICJ0eXBlb2YiOiBvcGVyYXRvciwgImluc3RhbmNlb2YiOiBvcGVyYXRvciwKICAgICAgInRydWUiOiBhdG9tLCAiZmFsc2UiOiBhdG9tLCAibnVsbCI6IGF0b20sICJ1bmRlZmluZWQiOiBhdG9tLCAiTmFOIjogYXRvbSwgIkluZmluaXR5IjogYXRvbSwKICAgICAgInRoaXMiOiBrdygidGhpcyIpLCAibW9kdWxlIjoga3coIm1vZHVsZSIpLCAiY2xhc3MiOiBrdygiY2xhc3MiKSwgInN1cGVyIjoga3coImF0b20iKSwKICAgICAgInlpZWxkIjogQywgImV4cG9ydCI6IGt3KCJleHBvcnQiKSwgImltcG9ydCI6IGt3KCJpbXBvcnQiKSwgImV4dGVuZHMiOiBDCiAgICB9OwoKICAgIC8vIEV4dGVuZCB0aGUgJ25vcm1hbCcga2V5d29yZHMgd2l0aCB0aGUgVHlwZVNjcmlwdCBsYW5ndWFnZSBleHRlbnNpb25zCiAgICBpZiAoaXNUUykgewogICAgICB2YXIgdHlwZSA9IHt0eXBlOiAidmFyaWFibGUiLCBzdHlsZTogInZhcmlhYmxlLTMifTsKICAgICAgdmFyIHRzS2V5d29yZHMgPSB7CiAgICAgICAgLy8gb2JqZWN0LWxpa2UgdGhpbmdzCiAgICAgICAgImludGVyZmFjZSI6IGt3KCJpbnRlcmZhY2UiKSwKICAgICAgICAiZXh0ZW5kcyI6IGt3KCJleHRlbmRzIiksCiAgICAgICAgImNvbnN0cnVjdG9yIjoga3coImNvbnN0cnVjdG9yIiksCgogICAgICAgIC8vIHNjb3BlIG1vZGlmaWVycwogICAgICAgICJwdWJsaWMiOiBrdygicHVibGljIiksCiAgICAgICAgInByaXZhdGUiOiBrdygicHJpdmF0ZSIpLAogICAgICAgICJwcm90ZWN0ZWQiOiBrdygicHJvdGVjdGVkIiksCiAgICAgICAgInN0YXRpYyI6IGt3KCJzdGF0aWMiKSwKCiAgICAgICAgLy8gdHlwZXMKICAgICAgICAic3RyaW5nIjogdHlwZSwgIm51bWJlciI6IHR5cGUsICJib29sIjogdHlwZSwgImFueSI6IHR5cGUKICAgICAgfTsKCiAgICAgIGZvciAodmFyIGF0dHIgaW4gdHNLZXl3b3JkcykgewogICAgICAgIGpzS2V5d29yZHNbYXR0cl0gPSB0c0tleXdvcmRzW2F0dHJdOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGpzS2V5d29yZHM7CiAgfSgpOwoKICB2YXIgaXNPcGVyYXRvckNoYXIgPSAvWytcLSomJT08PiE/fH5eXS87CiAgdmFyIGlzSnNvbmxkS2V5d29yZCA9IC9eQChjb250ZXh0fGlkfHZhbHVlfGxhbmd1YWdlfHR5cGV8Y29udGFpbmVyfGxpc3R8c2V0fHJldmVyc2V8aW5kZXh8YmFzZXx2b2NhYnxncmFwaCkiLzsKCiAgZnVuY3Rpb24gcmVhZFJlZ2V4cChzdHJlYW0pIHsKICAgIHZhciBlc2NhcGVkID0gZmFsc2UsIG5leHQsIGluU2V0ID0gZmFsc2U7CiAgICB3aGlsZSAoKG5leHQgPSBzdHJlYW0ubmV4dCgpKSAhPSBudWxsKSB7CiAgICAgIGlmICghZXNjYXBlZCkgewogICAgICAgIGlmIChuZXh0ID09ICIvIiAmJiAhaW5TZXQpIHJldHVybjsKICAgICAgICBpZiAobmV4dCA9PSAiWyIpIGluU2V0ID0gdHJ1ZTsKICAgICAgICBlbHNlIGlmIChpblNldCAmJiBuZXh0ID09ICJdIikgaW5TZXQgPSBmYWxzZTsKICAgICAgfQogICAgICBlc2NhcGVkID0gIWVzY2FwZWQgJiYgbmV4dCA9PSAiXFwiOwogICAgfQogIH0KCiAgLy8gVXNlZCBhcyBzY3JhdGNoIHZhcmlhYmxlcyB0byBjb21tdW5pY2F0ZSBtdWx0aXBsZSB2YWx1ZXMgd2l0aG91dAogIC8vIGNvbnNpbmcgdXAgdG9ucyBvZiBvYmplY3RzLgogIHZhciB0eXBlLCBjb250ZW50OwogIGZ1bmN0aW9uIHJldCh0cCwgc3R5bGUsIGNvbnQpIHsKICAgIHR5cGUgPSB0cDsgY29udGVudCA9IGNvbnQ7CiAgICByZXR1cm4gc3R5bGU7CiAgfQogIGZ1bmN0aW9uIHRva2VuQmFzZShzdHJlYW0sIHN0YXRlKSB7CiAgICB2YXIgY2ggPSBzdHJlYW0ubmV4dCgpOwogICAgaWYgKGNoID09ICciJyB8fCBjaCA9PSAiJyIpIHsKICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlblN0cmluZyhjaCk7CiAgICAgIHJldHVybiBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTsKICAgIH0gZWxzZSBpZiAoY2ggPT0gIi4iICYmIHN0cmVhbS5tYXRjaCgvXlxkKyg/OltlRV1bK1wtXT9cZCspPy8pKSB7CiAgICAgIHJldHVybiByZXQoIm51bWJlciIsICJudW1iZXIiKTsKICAgIH0gZWxzZSBpZiAoY2ggPT0gIi4iICYmIHN0cmVhbS5tYXRjaCgiLi4iKSkgewogICAgICByZXR1cm4gcmV0KCJzcHJlYWQiLCAibWV0YSIpOwogICAgfSBlbHNlIGlmICgvW1xbXF17fVwoXCksO1w6XC5dLy50ZXN0KGNoKSkgewogICAgICByZXR1cm4gcmV0KGNoKTsKICAgIH0gZWxzZSBpZiAoY2ggPT0gIj0iICYmIHN0cmVhbS5lYXQoIj4iKSkgewogICAgICByZXR1cm4gcmV0KCI9PiIsICJvcGVyYXRvciIpOwogICAgfSBlbHNlIGlmIChjaCA9PSAiMCIgJiYgc3RyZWFtLmVhdCgveC9pKSkgewogICAgICBzdHJlYW0uZWF0V2hpbGUoL1tcZGEtZl0vaSk7CiAgICAgIHJldHVybiByZXQoIm51bWJlciIsICJudW1iZXIiKTsKICAgIH0gZWxzZSBpZiAoL1xkLy50ZXN0KGNoKSkgewogICAgICBzdHJlYW0ubWF0Y2goL15cZCooPzpcLlxkKik/KD86W2VFXVsrXC1dP1xkKyk/Lyk7CiAgICAgIHJldHVybiByZXQoIm51bWJlciIsICJudW1iZXIiKTsKICAgIH0gZWxzZSBpZiAoY2ggPT0gIi8iKSB7CiAgICAgIGlmIChzdHJlYW0uZWF0KCIqIikpIHsKICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuQ29tbWVudDsKICAgICAgICByZXR1cm4gdG9rZW5Db21tZW50KHN0cmVhbSwgc3RhdGUpOwogICAgICB9IGVsc2UgaWYgKHN0cmVhbS5lYXQoIi8iKSkgewogICAgICAgIHN0cmVhbS5za2lwVG9FbmQoKTsKICAgICAgICByZXR1cm4gcmV0KCJjb21tZW50IiwgImNvbW1lbnQiKTsKICAgICAgfSBlbHNlIGlmIChzdGF0ZS5sYXN0VHlwZSA9PSAib3BlcmF0b3IiIHx8IHN0YXRlLmxhc3RUeXBlID09ICJrZXl3b3JkIGMiIHx8CiAgICAgICAgICAgICAgIHN0YXRlLmxhc3RUeXBlID09ICJzb2YiIHx8IC9eW1xbe31cKCw7Ol0kLy50ZXN0KHN0YXRlLmxhc3RUeXBlKSkgewogICAgICAgIHJlYWRSZWdleHAoc3RyZWFtKTsKICAgICAgICBzdHJlYW0ubWF0Y2goL15cYigoW2dpbXl1XSkoPyFbZ2lteXVdKlwyKSkrXGIvKTsKICAgICAgICByZXR1cm4gcmV0KCJyZWdleHAiLCAic3RyaW5nLTIiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzdHJlYW0uZWF0V2hpbGUoaXNPcGVyYXRvckNoYXIpOwogICAgICAgIHJldHVybiByZXQoIm9wZXJhdG9yIiwgIm9wZXJhdG9yIiwgc3RyZWFtLmN1cnJlbnQoKSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoY2ggPT0gImAiKSB7CiAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5RdWFzaTsKICAgICAgcmV0dXJuIHRva2VuUXVhc2koc3RyZWFtLCBzdGF0ZSk7CiAgICB9IGVsc2UgaWYgKGNoID09ICIjIikgewogICAgICBzdHJlYW0uc2tpcFRvRW5kKCk7CiAgICAgIHJldHVybiByZXQoImVycm9yIiwgImVycm9yIik7CiAgICB9IGVsc2UgaWYgKGlzT3BlcmF0b3JDaGFyLnRlc3QoY2gpKSB7CiAgICAgIHN0cmVhbS5lYXRXaGlsZShpc09wZXJhdG9yQ2hhcik7CiAgICAgIHJldHVybiByZXQoIm9wZXJhdG9yIiwgIm9wZXJhdG9yIiwgc3RyZWFtLmN1cnJlbnQoKSk7CiAgICB9IGVsc2UgaWYgKHdvcmRSRS50ZXN0KGNoKSkgewogICAgICBzdHJlYW0uZWF0V2hpbGUod29yZFJFKTsKICAgICAgdmFyIHdvcmQgPSBzdHJlYW0uY3VycmVudCgpLCBrbm93biA9IGtleXdvcmRzLnByb3BlcnR5SXNFbnVtZXJhYmxlKHdvcmQpICYmIGtleXdvcmRzW3dvcmRdOwogICAgICByZXR1cm4gKGtub3duICYmIHN0YXRlLmxhc3RUeXBlICE9ICIuIikgPyByZXQoa25vd24udHlwZSwga25vd24uc3R5bGUsIHdvcmQpIDoKICAgICAgICAgICAgICAgICAgICAgcmV0KCJ2YXJpYWJsZSIsICJ2YXJpYWJsZSIsIHdvcmQpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gdG9rZW5TdHJpbmcocXVvdGUpIHsKICAgIHJldHVybiBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7CiAgICAgIHZhciBlc2NhcGVkID0gZmFsc2UsIG5leHQ7CiAgICAgIGlmIChqc29ubGRNb2RlICYmIHN0cmVhbS5wZWVrKCkgPT0gIkAiICYmIHN0cmVhbS5tYXRjaChpc0pzb25sZEtleXdvcmQpKXsKICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuQmFzZTsKICAgICAgICByZXR1cm4gcmV0KCJqc29ubGQta2V5d29yZCIsICJtZXRhIik7CiAgICAgIH0KICAgICAgd2hpbGUgKChuZXh0ID0gc3RyZWFtLm5leHQoKSkgIT0gbnVsbCkgewogICAgICAgIGlmIChuZXh0ID09IHF1b3RlICYmICFlc2NhcGVkKSBicmVhazsKICAgICAgICBlc2NhcGVkID0gIWVzY2FwZWQgJiYgbmV4dCA9PSAiXFwiOwogICAgICB9CiAgICAgIGlmICghZXNjYXBlZCkgc3RhdGUudG9rZW5pemUgPSB0b2tlbkJhc2U7CiAgICAgIHJldHVybiByZXQoInN0cmluZyIsICJzdHJpbmciKTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiB0b2tlbkNvbW1lbnQoc3RyZWFtLCBzdGF0ZSkgewogICAgdmFyIG1heWJlRW5kID0gZmFsc2UsIGNoOwogICAgd2hpbGUgKGNoID0gc3RyZWFtLm5leHQoKSkgewogICAgICBpZiAoY2ggPT0gIi8iICYmIG1heWJlRW5kKSB7CiAgICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlbkJhc2U7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgbWF5YmVFbmQgPSAoY2ggPT0gIioiKTsKICAgIH0KICAgIHJldHVybiByZXQoImNvbW1lbnQiLCAiY29tbWVudCIpOwogIH0KCiAgZnVuY3Rpb24gdG9rZW5RdWFzaShzdHJlYW0sIHN0YXRlKSB7CiAgICB2YXIgZXNjYXBlZCA9IGZhbHNlLCBuZXh0OwogICAgd2hpbGUgKChuZXh0ID0gc3RyZWFtLm5leHQoKSkgIT0gbnVsbCkgewogICAgICBpZiAoIWVzY2FwZWQgJiYgKG5leHQgPT0gImAiIHx8IG5leHQgPT0gIiQiICYmIHN0cmVhbS5lYXQoInsiKSkpIHsKICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuQmFzZTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBlc2NhcGVkID0gIWVzY2FwZWQgJiYgbmV4dCA9PSAiXFwiOwogICAgfQogICAgcmV0dXJuIHJldCgicXVhc2kiLCAic3RyaW5nLTIiLCBzdHJlYW0uY3VycmVudCgpKTsKICB9CgogIHZhciBicmFja2V0cyA9ICIoW3t9XSkiOwogIC8vIFRoaXMgaXMgYSBjcnVkZSBsb29rYWhlYWQgdHJpY2sgdG8gdHJ5IGFuZCBub3RpY2UgdGhhdCB3ZSdyZQogIC8vIHBhcnNpbmcgdGhlIGFyZ3VtZW50IHBhdHRlcm5zIGZvciBhIGZhdC1hcnJvdyBmdW5jdGlvbiBiZWZvcmUgd2UKICAvLyBhY3R1YWxseSBoaXQgdGhlIGFycm93IHRva2VuLiBJdCBvbmx5IHdvcmtzIGlmIHRoZSBhcnJvdyBpcyBvbgogIC8vIHRoZSBzYW1lIGxpbmUgYXMgdGhlIGFyZ3VtZW50cyBhbmQgdGhlcmUncyBubyBzdHJhbmdlIG5vaXNlCiAgLy8gKGNvbW1lbnRzKSBpbiBiZXR3ZWVuLiBGYWxsYmFjayBpcyB0byBvbmx5IG5vdGljZSB3aGVuIHdlIGhpdCB0aGUKICAvLyBhcnJvdywgYW5kIG5vdCBkZWNsYXJlIHRoZSBhcmd1bWVudHMgYXMgbG9jYWxzIGZvciB0aGUgYXJyb3cKICAvLyBib2R5LgogIGZ1bmN0aW9uIGZpbmRGYXRBcnJvdyhzdHJlYW0sIHN0YXRlKSB7CiAgICBpZiAoc3RhdGUuZmF0QXJyb3dBdCkgc3RhdGUuZmF0QXJyb3dBdCA9IG51bGw7CiAgICB2YXIgYXJyb3cgPSBzdHJlYW0uc3RyaW5nLmluZGV4T2YoIj0+Iiwgc3RyZWFtLnN0YXJ0KTsKICAgIGlmIChhcnJvdyA8IDApIHJldHVybjsKCiAgICB2YXIgZGVwdGggPSAwLCBzYXdTb21ldGhpbmcgPSBmYWxzZTsKICAgIGZvciAodmFyIHBvcyA9IGFycm93IC0gMTsgcG9zID49IDA7IC0tcG9zKSB7CiAgICAgIHZhciBjaCA9IHN0cmVhbS5zdHJpbmcuY2hhckF0KHBvcyk7CiAgICAgIHZhciBicmFja2V0ID0gYnJhY2tldHMuaW5kZXhPZihjaCk7CiAgICAgIGlmIChicmFja2V0ID49IDAgJiYgYnJhY2tldCA8IDMpIHsKICAgICAgICBpZiAoIWRlcHRoKSB7ICsrcG9zOyBicmVhazsgfQogICAgICAgIGlmICgtLWRlcHRoID09IDApIGJyZWFrOwogICAgICB9IGVsc2UgaWYgKGJyYWNrZXQgPj0gMyAmJiBicmFja2V0IDwgNikgewogICAgICAgICsrZGVwdGg7CiAgICAgIH0gZWxzZSBpZiAod29yZFJFLnRlc3QoY2gpKSB7CiAgICAgICAgc2F3U29tZXRoaW5nID0gdHJ1ZTsKICAgICAgfSBlbHNlIGlmICgvWyInXC9dLy50ZXN0KGNoKSkgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmIChzYXdTb21ldGhpbmcgJiYgIWRlcHRoKSB7CiAgICAgICAgKytwb3M7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIGlmIChzYXdTb21ldGhpbmcgJiYgIWRlcHRoKSBzdGF0ZS5mYXRBcnJvd0F0ID0gcG9zOwogIH0KCiAgLy8gUGFyc2VyCgogIHZhciBhdG9taWNUeXBlcyA9IHsiYXRvbSI6IHRydWUsICJudW1iZXIiOiB0cnVlLCAidmFyaWFibGUiOiB0cnVlLCAic3RyaW5nIjogdHJ1ZSwgInJlZ2V4cCI6IHRydWUsICJ0aGlzIjogdHJ1ZSwgImpzb25sZC1rZXl3b3JkIjogdHJ1ZX07CgogIGZ1bmN0aW9uIEpTTGV4aWNhbChpbmRlbnRlZCwgY29sdW1uLCB0eXBlLCBhbGlnbiwgcHJldiwgaW5mbykgewogICAgdGhpcy5pbmRlbnRlZCA9IGluZGVudGVkOwogICAgdGhpcy5jb2x1bW4gPSBjb2x1bW47CiAgICB0aGlzLnR5cGUgPSB0eXBlOwogICAgdGhpcy5wcmV2ID0gcHJldjsKICAgIHRoaXMuaW5mbyA9IGluZm87CiAgICBpZiAoYWxpZ24gIT0gbnVsbCkgdGhpcy5hbGlnbiA9IGFsaWduOwogIH0KCiAgZnVuY3Rpb24gaW5TY29wZShzdGF0ZSwgdmFybmFtZSkgewogICAgZm9yICh2YXIgdiA9IHN0YXRlLmxvY2FsVmFyczsgdjsgdiA9IHYubmV4dCkKICAgICAgaWYgKHYubmFtZSA9PSB2YXJuYW1lKSByZXR1cm4gdHJ1ZTsKICAgIGZvciAodmFyIGN4ID0gc3RhdGUuY29udGV4dDsgY3g7IGN4ID0gY3gucHJldikgewogICAgICBmb3IgKHZhciB2ID0gY3gudmFyczsgdjsgdiA9IHYubmV4dCkKICAgICAgICBpZiAodi5uYW1lID09IHZhcm5hbWUpIHJldHVybiB0cnVlOwogICAgfQogIH0KCiAgZnVuY3Rpb24gcGFyc2VKUyhzdGF0ZSwgc3R5bGUsIHR5cGUsIGNvbnRlbnQsIHN0cmVhbSkgewogICAgdmFyIGNjID0gc3RhdGUuY2M7CiAgICAvLyBDb21tdW5pY2F0ZSBvdXIgY29udGV4dCB0byB0aGUgY29tYmluYXRvcnMuCiAgICAvLyAoTGVzcyB3YXN0ZWZ1bCB0aGFuIGNvbnNpbmcgdXAgYSBodW5kcmVkIGNsb3N1cmVzIG9uIGV2ZXJ5IGNhbGwuKQogICAgY3guc3RhdGUgPSBzdGF0ZTsgY3guc3RyZWFtID0gc3RyZWFtOyBjeC5tYXJrZWQgPSBudWxsLCBjeC5jYyA9IGNjOyBjeC5zdHlsZSA9IHN0eWxlOwoKICAgIGlmICghc3RhdGUubGV4aWNhbC5oYXNPd25Qcm9wZXJ0eSgiYWxpZ24iKSkKICAgICAgc3RhdGUubGV4aWNhbC5hbGlnbiA9IHRydWU7CgogICAgd2hpbGUodHJ1ZSkgewogICAgICB2YXIgY29tYmluYXRvciA9IGNjLmxlbmd0aCA/IGNjLnBvcCgpIDoganNvbk1vZGUgPyBleHByZXNzaW9uIDogc3RhdGVtZW50OwogICAgICBpZiAoY29tYmluYXRvcih0eXBlLCBjb250ZW50KSkgewogICAgICAgIHdoaWxlKGNjLmxlbmd0aCAmJiBjY1tjYy5sZW5ndGggLSAxXS5sZXgpCiAgICAgICAgICBjYy5wb3AoKSgpOwogICAgICAgIGlmIChjeC5tYXJrZWQpIHJldHVybiBjeC5tYXJrZWQ7CiAgICAgICAgaWYgKHR5cGUgPT0gInZhcmlhYmxlIiAmJiBpblNjb3BlKHN0YXRlLCBjb250ZW50KSkgcmV0dXJuICJ2YXJpYWJsZS0yIjsKICAgICAgICByZXR1cm4gc3R5bGU7CiAgICAgIH0KICAgIH0KICB9CgogIC8vIENvbWJpbmF0b3IgdXRpbHMKCiAgdmFyIGN4ID0ge3N0YXRlOiBudWxsLCBjb2x1bW46IG51bGwsIG1hcmtlZDogbnVsbCwgY2M6IG51bGx9OwogIGZ1bmN0aW9uIHBhc3MoKSB7CiAgICBmb3IgKHZhciBpID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBjeC5jYy5wdXNoKGFyZ3VtZW50c1tpXSk7CiAgfQogIGZ1bmN0aW9uIGNvbnQoKSB7CiAgICBwYXNzLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgZnVuY3Rpb24gcmVnaXN0ZXIodmFybmFtZSkgewogICAgZnVuY3Rpb24gaW5MaXN0KGxpc3QpIHsKICAgICAgZm9yICh2YXIgdiA9IGxpc3Q7IHY7IHYgPSB2Lm5leHQpCiAgICAgICAgaWYgKHYubmFtZSA9PSB2YXJuYW1lKSByZXR1cm4gdHJ1ZTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgdmFyIHN0YXRlID0gY3guc3RhdGU7CiAgICBpZiAoc3RhdGUuY29udGV4dCkgewogICAgICBjeC5tYXJrZWQgPSAiZGVmIjsKICAgICAgaWYgKGluTGlzdChzdGF0ZS5sb2NhbFZhcnMpKSByZXR1cm47CiAgICAgIHN0YXRlLmxvY2FsVmFycyA9IHtuYW1lOiB2YXJuYW1lLCBuZXh0OiBzdGF0ZS5sb2NhbFZhcnN9OwogICAgfSBlbHNlIHsKICAgICAgaWYgKGluTGlzdChzdGF0ZS5nbG9iYWxWYXJzKSkgcmV0dXJuOwogICAgICBpZiAocGFyc2VyQ29uZmlnLmdsb2JhbFZhcnMpCiAgICAgICAgc3RhdGUuZ2xvYmFsVmFycyA9IHtuYW1lOiB2YXJuYW1lLCBuZXh0OiBzdGF0ZS5nbG9iYWxWYXJzfTsKICAgIH0KICB9CgogIC8vIENvbWJpbmF0b3JzCgogIHZhciBkZWZhdWx0VmFycyA9IHtuYW1lOiAidGhpcyIsIG5leHQ6IHtuYW1lOiAiYXJndW1lbnRzIn19OwogIGZ1bmN0aW9uIHB1c2hjb250ZXh0KCkgewogICAgY3guc3RhdGUuY29udGV4dCA9IHtwcmV2OiBjeC5zdGF0ZS5jb250ZXh0LCB2YXJzOiBjeC5zdGF0ZS5sb2NhbFZhcnN9OwogICAgY3guc3RhdGUubG9jYWxWYXJzID0gZGVmYXVsdFZhcnM7CiAgfQogIGZ1bmN0aW9uIHBvcGNvbnRleHQoKSB7CiAgICBjeC5zdGF0ZS5sb2NhbFZhcnMgPSBjeC5zdGF0ZS5jb250ZXh0LnZhcnM7CiAgICBjeC5zdGF0ZS5jb250ZXh0ID0gY3guc3RhdGUuY29udGV4dC5wcmV2OwogIH0KICBmdW5jdGlvbiBwdXNobGV4KHR5cGUsIGluZm8pIHsKICAgIHZhciByZXN1bHQgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIHN0YXRlID0gY3guc3RhdGUsIGluZGVudCA9IHN0YXRlLmluZGVudGVkOwogICAgICBpZiAoc3RhdGUubGV4aWNhbC50eXBlID09ICJzdGF0IikgaW5kZW50ID0gc3RhdGUubGV4aWNhbC5pbmRlbnRlZDsKICAgICAgZWxzZSBmb3IgKHZhciBvdXRlciA9IHN0YXRlLmxleGljYWw7IG91dGVyICYmIG91dGVyLnR5cGUgPT0gIikiICYmIG91dGVyLmFsaWduOyBvdXRlciA9IG91dGVyLnByZXYpCiAgICAgICAgaW5kZW50ID0gb3V0ZXIuaW5kZW50ZWQ7CiAgICAgIHN0YXRlLmxleGljYWwgPSBuZXcgSlNMZXhpY2FsKGluZGVudCwgY3guc3RyZWFtLmNvbHVtbigpLCB0eXBlLCBudWxsLCBzdGF0ZS5sZXhpY2FsLCBpbmZvKTsKICAgIH07CiAgICByZXN1bHQubGV4ID0gdHJ1ZTsKICAgIHJldHVybiByZXN1bHQ7CiAgfQogIGZ1bmN0aW9uIHBvcGxleCgpIHsKICAgIHZhciBzdGF0ZSA9IGN4LnN0YXRlOwogICAgaWYgKHN0YXRlLmxleGljYWwucHJldikgewogICAgICBpZiAoc3RhdGUubGV4aWNhbC50eXBlID09ICIpIikKICAgICAgICBzdGF0ZS5pbmRlbnRlZCA9IHN0YXRlLmxleGljYWwuaW5kZW50ZWQ7CiAgICAgIHN0YXRlLmxleGljYWwgPSBzdGF0ZS5sZXhpY2FsLnByZXY7CiAgICB9CiAgfQogIHBvcGxleC5sZXggPSB0cnVlOwoKICBmdW5jdGlvbiBleHBlY3Qod2FudGVkKSB7CiAgICBmdW5jdGlvbiBleHAodHlwZSkgewogICAgICBpZiAodHlwZSA9PSB3YW50ZWQpIHJldHVybiBjb250KCk7CiAgICAgIGVsc2UgaWYgKHdhbnRlZCA9PSAiOyIpIHJldHVybiBwYXNzKCk7CiAgICAgIGVsc2UgcmV0dXJuIGNvbnQoZXhwKTsKICAgIH07CiAgICByZXR1cm4gZXhwOwogIH0KCiAgZnVuY3Rpb24gc3RhdGVtZW50KHR5cGUsIHZhbHVlKSB7CiAgICBpZiAodHlwZSA9PSAidmFyIikgcmV0dXJuIGNvbnQocHVzaGxleCgidmFyZGVmIiwgdmFsdWUubGVuZ3RoKSwgdmFyZGVmLCBleHBlY3QoIjsiKSwgcG9wbGV4KTsKICAgIGlmICh0eXBlID09ICJrZXl3b3JkIGEiKSByZXR1cm4gY29udChwdXNobGV4KCJmb3JtIiksIGV4cHJlc3Npb24sIHN0YXRlbWVudCwgcG9wbGV4KTsKICAgIGlmICh0eXBlID09ICJrZXl3b3JkIGIiKSByZXR1cm4gY29udChwdXNobGV4KCJmb3JtIiksIHN0YXRlbWVudCwgcG9wbGV4KTsKICAgIGlmICh0eXBlID09ICJ7IikgcmV0dXJuIGNvbnQocHVzaGxleCgifSIpLCBibG9jaywgcG9wbGV4KTsKICAgIGlmICh0eXBlID09ICI7IikgcmV0dXJuIGNvbnQoKTsKICAgIGlmICh0eXBlID09ICJpZiIpIHsKICAgICAgaWYgKGN4LnN0YXRlLmxleGljYWwuaW5mbyA9PSAiZWxzZSIgJiYgY3guc3RhdGUuY2NbY3guc3RhdGUuY2MubGVuZ3RoIC0gMV0gPT0gcG9wbGV4KQogICAgICAgIGN4LnN0YXRlLmNjLnBvcCgpKCk7CiAgICAgIHJldHVybiBjb250KHB1c2hsZXgoImZvcm0iKSwgZXhwcmVzc2lvbiwgc3RhdGVtZW50LCBwb3BsZXgsIG1heWJlZWxzZSk7CiAgICB9CiAgICBpZiAodHlwZSA9PSAiZnVuY3Rpb24iKSByZXR1cm4gY29udChmdW5jdGlvbmRlZik7CiAgICBpZiAodHlwZSA9PSAiZm9yIikgcmV0dXJuIGNvbnQocHVzaGxleCgiZm9ybSIpLCBmb3JzcGVjLCBzdGF0ZW1lbnQsIHBvcGxleCk7CiAgICBpZiAodHlwZSA9PSAidmFyaWFibGUiKSByZXR1cm4gY29udChwdXNobGV4KCJzdGF0IiksIG1heWJlbGFiZWwpOwogICAgaWYgKHR5cGUgPT0gInN3aXRjaCIpIHJldHVybiBjb250KHB1c2hsZXgoImZvcm0iKSwgZXhwcmVzc2lvbiwgcHVzaGxleCgifSIsICJzd2l0Y2giKSwgZXhwZWN0KCJ7IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2ssIHBvcGxleCwgcG9wbGV4KTsKICAgIGlmICh0eXBlID09ICJjYXNlIikgcmV0dXJuIGNvbnQoZXhwcmVzc2lvbiwgZXhwZWN0KCI6IikpOwogICAgaWYgKHR5cGUgPT0gImRlZmF1bHQiKSByZXR1cm4gY29udChleHBlY3QoIjoiKSk7CiAgICBpZiAodHlwZSA9PSAiY2F0Y2giKSByZXR1cm4gY29udChwdXNobGV4KCJmb3JtIiksIHB1c2hjb250ZXh0LCBleHBlY3QoIigiKSwgZnVuYXJnLCBleHBlY3QoIikiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlbWVudCwgcG9wbGV4LCBwb3Bjb250ZXh0KTsKICAgIGlmICh0eXBlID09ICJtb2R1bGUiKSByZXR1cm4gY29udChwdXNobGV4KCJmb3JtIiksIHB1c2hjb250ZXh0LCBhZnRlck1vZHVsZSwgcG9wY29udGV4dCwgcG9wbGV4KTsKICAgIGlmICh0eXBlID09ICJjbGFzcyIpIHJldHVybiBjb250KHB1c2hsZXgoImZvcm0iKSwgY2xhc3NOYW1lLCBwb3BsZXgpOwogICAgaWYgKHR5cGUgPT0gImV4cG9ydCIpIHJldHVybiBjb250KHB1c2hsZXgoImZvcm0iKSwgYWZ0ZXJFeHBvcnQsIHBvcGxleCk7CiAgICBpZiAodHlwZSA9PSAiaW1wb3J0IikgcmV0dXJuIGNvbnQocHVzaGxleCgiZm9ybSIpLCBhZnRlckltcG9ydCwgcG9wbGV4KTsKICAgIHJldHVybiBwYXNzKHB1c2hsZXgoInN0YXQiKSwgZXhwcmVzc2lvbiwgZXhwZWN0KCI7IiksIHBvcGxleCk7CiAgfQogIGZ1bmN0aW9uIGV4cHJlc3Npb24odHlwZSkgewogICAgcmV0dXJuIGV4cHJlc3Npb25Jbm5lcih0eXBlLCBmYWxzZSk7CiAgfQogIGZ1bmN0aW9uIGV4cHJlc3Npb25Ob0NvbW1hKHR5cGUpIHsKICAgIHJldHVybiBleHByZXNzaW9uSW5uZXIodHlwZSwgdHJ1ZSk7CiAgfQogIGZ1bmN0aW9uIGV4cHJlc3Npb25Jbm5lcih0eXBlLCBub0NvbW1hKSB7CiAgICBpZiAoY3guc3RhdGUuZmF0QXJyb3dBdCA9PSBjeC5zdHJlYW0uc3RhcnQpIHsKICAgICAgdmFyIGJvZHkgPSBub0NvbW1hID8gYXJyb3dCb2R5Tm9Db21tYSA6IGFycm93Qm9keTsKICAgICAgaWYgKHR5cGUgPT0gIigiKSByZXR1cm4gY29udChwdXNoY29udGV4dCwgcHVzaGxleCgiKSIpLCBjb21tYXNlcChwYXR0ZXJuLCAiKSIpLCBwb3BsZXgsIGV4cGVjdCgiPT4iKSwgYm9keSwgcG9wY29udGV4dCk7CiAgICAgIGVsc2UgaWYgKHR5cGUgPT0gInZhcmlhYmxlIikgcmV0dXJuIHBhc3MocHVzaGNvbnRleHQsIHBhdHRlcm4sIGV4cGVjdCgiPT4iKSwgYm9keSwgcG9wY29udGV4dCk7CiAgICB9CgogICAgdmFyIG1heWJlb3AgPSBub0NvbW1hID8gbWF5YmVvcGVyYXRvck5vQ29tbWEgOiBtYXliZW9wZXJhdG9yQ29tbWE7CiAgICBpZiAoYXRvbWljVHlwZXMuaGFzT3duUHJvcGVydHkodHlwZSkpIHJldHVybiBjb250KG1heWJlb3ApOwogICAgaWYgKHR5cGUgPT0gImZ1bmN0aW9uIikgcmV0dXJuIGNvbnQoZnVuY3Rpb25kZWYsIG1heWJlb3ApOwogICAgaWYgKHR5cGUgPT0gImtleXdvcmQgYyIpIHJldHVybiBjb250KG5vQ29tbWEgPyBtYXliZWV4cHJlc3Npb25Ob0NvbW1hIDogbWF5YmVleHByZXNzaW9uKTsKICAgIGlmICh0eXBlID09ICIoIikgcmV0dXJuIGNvbnQocHVzaGxleCgiKSIpLCBtYXliZWV4cHJlc3Npb24sIGNvbXByZWhlbnNpb24sIGV4cGVjdCgiKSIpLCBwb3BsZXgsIG1heWJlb3ApOwogICAgaWYgKHR5cGUgPT0gIm9wZXJhdG9yIiB8fCB0eXBlID09ICJzcHJlYWQiKSByZXR1cm4gY29udChub0NvbW1hID8gZXhwcmVzc2lvbk5vQ29tbWEgOiBleHByZXNzaW9uKTsKICAgIGlmICh0eXBlID09ICJbIikgcmV0dXJuIGNvbnQocHVzaGxleCgiXSIpLCBhcnJheUxpdGVyYWwsIHBvcGxleCwgbWF5YmVvcCk7CiAgICBpZiAodHlwZSA9PSAieyIpIHJldHVybiBjb250Q29tbWFzZXAob2JqcHJvcCwgIn0iLCBudWxsLCBtYXliZW9wKTsKICAgIGlmICh0eXBlID09ICJxdWFzaSIpIHsgcmV0dXJuIHBhc3MocXVhc2ksIG1heWJlb3ApOyB9CiAgICByZXR1cm4gY29udCgpOwogIH0KICBmdW5jdGlvbiBtYXliZWV4cHJlc3Npb24odHlwZSkgewogICAgaWYgKHR5cGUubWF0Y2goL1s7XH1cKVxdLF0vKSkgcmV0dXJuIHBhc3MoKTsKICAgIHJldHVybiBwYXNzKGV4cHJlc3Npb24pOwogIH0KICBmdW5jdGlvbiBtYXliZWV4cHJlc3Npb25Ob0NvbW1hKHR5cGUpIHsKICAgIGlmICh0eXBlLm1hdGNoKC9bO1x9XClcXSxdLykpIHJldHVybiBwYXNzKCk7CiAgICByZXR1cm4gcGFzcyhleHByZXNzaW9uTm9Db21tYSk7CiAgfQoKICBmdW5jdGlvbiBtYXliZW9wZXJhdG9yQ29tbWEodHlwZSwgdmFsdWUpIHsKICAgIGlmICh0eXBlID09ICIsIikgcmV0dXJuIGNvbnQoZXhwcmVzc2lvbik7CiAgICByZXR1cm4gbWF5YmVvcGVyYXRvck5vQ29tbWEodHlwZSwgdmFsdWUsIGZhbHNlKTsKICB9CiAgZnVuY3Rpb24gbWF5YmVvcGVyYXRvck5vQ29tbWEodHlwZSwgdmFsdWUsIG5vQ29tbWEpIHsKICAgIHZhciBtZSA9IG5vQ29tbWEgPT0gZmFsc2UgPyBtYXliZW9wZXJhdG9yQ29tbWEgOiBtYXliZW9wZXJhdG9yTm9Db21tYTsKICAgIHZhciBleHByID0gbm9Db21tYSA9PSBmYWxzZSA/IGV4cHJlc3Npb24gOiBleHByZXNzaW9uTm9Db21tYTsKICAgIGlmICh0eXBlID09ICI9PiIpIHJldHVybiBjb250KHB1c2hjb250ZXh0LCBub0NvbW1hID8gYXJyb3dCb2R5Tm9Db21tYSA6IGFycm93Qm9keSwgcG9wY29udGV4dCk7CiAgICBpZiAodHlwZSA9PSAib3BlcmF0b3IiKSB7CiAgICAgIGlmICgvXCtcK3wtLS8udGVzdCh2YWx1ZSkpIHJldHVybiBjb250KG1lKTsKICAgICAgaWYgKHZhbHVlID09ICI/IikgcmV0dXJuIGNvbnQoZXhwcmVzc2lvbiwgZXhwZWN0KCI6IiksIGV4cHIpOwogICAgICByZXR1cm4gY29udChleHByKTsKICAgIH0KICAgIGlmICh0eXBlID09ICJxdWFzaSIpIHsgcmV0dXJuIHBhc3MocXVhc2ksIG1lKTsgfQogICAgaWYgKHR5cGUgPT0gIjsiKSByZXR1cm47CiAgICBpZiAodHlwZSA9PSAiKCIpIHJldHVybiBjb250Q29tbWFzZXAoZXhwcmVzc2lvbk5vQ29tbWEsICIpIiwgImNhbGwiLCBtZSk7CiAgICBpZiAodHlwZSA9PSAiLiIpIHJldHVybiBjb250KHByb3BlcnR5LCBtZSk7CiAgICBpZiAodHlwZSA9PSAiWyIpIHJldHVybiBjb250KHB1c2hsZXgoIl0iKSwgbWF5YmVleHByZXNzaW9uLCBleHBlY3QoIl0iKSwgcG9wbGV4LCBtZSk7CiAgfQogIGZ1bmN0aW9uIHF1YXNpKHR5cGUsIHZhbHVlKSB7CiAgICBpZiAodHlwZSAhPSAicXVhc2kiKSByZXR1cm4gcGFzcygpOwogICAgaWYgKHZhbHVlLnNsaWNlKHZhbHVlLmxlbmd0aCAtIDIpICE9ICIkeyIpIHJldHVybiBjb250KHF1YXNpKTsKICAgIHJldHVybiBjb250KGV4cHJlc3Npb24sIGNvbnRpbnVlUXVhc2kpOwogIH0KICBmdW5jdGlvbiBjb250aW51ZVF1YXNpKHR5cGUpIHsKICAgIGlmICh0eXBlID09ICJ9IikgewogICAgICBjeC5tYXJrZWQgPSAic3RyaW5nLTIiOwogICAgICBjeC5zdGF0ZS50b2tlbml6ZSA9IHRva2VuUXVhc2k7CiAgICAgIHJldHVybiBjb250KHF1YXNpKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gYXJyb3dCb2R5KHR5cGUpIHsKICAgIGZpbmRGYXRBcnJvdyhjeC5zdHJlYW0sIGN4LnN0YXRlKTsKICAgIHJldHVybiBwYXNzKHR5cGUgPT0gInsiID8gc3RhdGVtZW50IDogZXhwcmVzc2lvbik7CiAgfQogIGZ1bmN0aW9uIGFycm93Qm9keU5vQ29tbWEodHlwZSkgewogICAgZmluZEZhdEFycm93KGN4LnN0cmVhbSwgY3guc3RhdGUpOwogICAgcmV0dXJuIHBhc3ModHlwZSA9PSAieyIgPyBzdGF0ZW1lbnQgOiBleHByZXNzaW9uTm9Db21tYSk7CiAgfQogIGZ1bmN0aW9uIG1heWJlbGFiZWwodHlwZSkgewogICAgaWYgKHR5cGUgPT0gIjoiKSByZXR1cm4gY29udChwb3BsZXgsIHN0YXRlbWVudCk7CiAgICByZXR1cm4gcGFzcyhtYXliZW9wZXJhdG9yQ29tbWEsIGV4cGVjdCgiOyIpLCBwb3BsZXgpOwogIH0KICBmdW5jdGlvbiBwcm9wZXJ0eSh0eXBlKSB7CiAgICBpZiAodHlwZSA9PSAidmFyaWFibGUiKSB7Y3gubWFya2VkID0gInByb3BlcnR5IjsgcmV0dXJuIGNvbnQoKTt9CiAgfQogIGZ1bmN0aW9uIG9ianByb3AodHlwZSwgdmFsdWUpIHsKICAgIGlmICh0eXBlID09ICJ2YXJpYWJsZSIgfHwgY3guc3R5bGUgPT0gImtleXdvcmQiKSB7CiAgICAgIGN4Lm1hcmtlZCA9ICJwcm9wZXJ0eSI7CiAgICAgIGlmICh2YWx1ZSA9PSAiZ2V0IiB8fCB2YWx1ZSA9PSAic2V0IikgcmV0dXJuIGNvbnQoZ2V0dGVyU2V0dGVyKTsKICAgICAgcmV0dXJuIGNvbnQoYWZ0ZXJwcm9wKTsKICAgIH0gZWxzZSBpZiAodHlwZSA9PSAibnVtYmVyIiB8fCB0eXBlID09ICJzdHJpbmciKSB7CiAgICAgIGN4Lm1hcmtlZCA9IGpzb25sZE1vZGUgPyAicHJvcGVydHkiIDogKGN4LnN0eWxlICsgIiBwcm9wZXJ0eSIpOwogICAgICByZXR1cm4gY29udChhZnRlcnByb3ApOwogICAgfSBlbHNlIGlmICh0eXBlID09ICJqc29ubGQta2V5d29yZCIpIHsKICAgICAgcmV0dXJuIGNvbnQoYWZ0ZXJwcm9wKTsKICAgIH0gZWxzZSBpZiAodHlwZSA9PSAiWyIpIHsKICAgICAgcmV0dXJuIGNvbnQoZXhwcmVzc2lvbiwgZXhwZWN0KCJdIiksIGFmdGVycHJvcCk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIGdldHRlclNldHRlcih0eXBlKSB7CiAgICBpZiAodHlwZSAhPSAidmFyaWFibGUiKSByZXR1cm4gcGFzcyhhZnRlcnByb3ApOwogICAgY3gubWFya2VkID0gInByb3BlcnR5IjsKICAgIHJldHVybiBjb250KGZ1bmN0aW9uZGVmKTsKICB9CiAgZnVuY3Rpb24gYWZ0ZXJwcm9wKHR5cGUpIHsKICAgIGlmICh0eXBlID09ICI6IikgcmV0dXJuIGNvbnQoZXhwcmVzc2lvbk5vQ29tbWEpOwogICAgaWYgKHR5cGUgPT0gIigiKSByZXR1cm4gcGFzcyhmdW5jdGlvbmRlZik7CiAgfQogIGZ1bmN0aW9uIGNvbW1hc2VwKHdoYXQsIGVuZCkgewogICAgZnVuY3Rpb24gcHJvY2VlZCh0eXBlKSB7CiAgICAgIGlmICh0eXBlID09ICIsIikgewogICAgICAgIHZhciBsZXggPSBjeC5zdGF0ZS5sZXhpY2FsOwogICAgICAgIGlmIChsZXguaW5mbyA9PSAiY2FsbCIpIGxleC5wb3MgPSAobGV4LnBvcyB8fCAwKSArIDE7CiAgICAgICAgcmV0dXJuIGNvbnQod2hhdCwgcHJvY2VlZCk7CiAgICAgIH0KICAgICAgaWYgKHR5cGUgPT0gZW5kKSByZXR1cm4gY29udCgpOwogICAgICByZXR1cm4gY29udChleHBlY3QoZW5kKSk7CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24odHlwZSkgewogICAgICBpZiAodHlwZSA9PSBlbmQpIHJldHVybiBjb250KCk7CiAgICAgIHJldHVybiBwYXNzKHdoYXQsIHByb2NlZWQpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gY29udENvbW1hc2VwKHdoYXQsIGVuZCwgaW5mbykgewogICAgZm9yICh2YXIgaSA9IDM7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspCiAgICAgIGN4LmNjLnB1c2goYXJndW1lbnRzW2ldKTsKICAgIHJldHVybiBjb250KHB1c2hsZXgoZW5kLCBpbmZvKSwgY29tbWFzZXAod2hhdCwgZW5kKSwgcG9wbGV4KTsKICB9CiAgZnVuY3Rpb24gYmxvY2sodHlwZSkgewogICAgaWYgKHR5cGUgPT0gIn0iKSByZXR1cm4gY29udCgpOwogICAgcmV0dXJuIHBhc3Moc3RhdGVtZW50LCBibG9jayk7CiAgfQogIGZ1bmN0aW9uIG1heWJldHlwZSh0eXBlKSB7CiAgICBpZiAoaXNUUyAmJiB0eXBlID09ICI6IikgcmV0dXJuIGNvbnQodHlwZWRlZik7CiAgfQogIGZ1bmN0aW9uIHR5cGVkZWYodHlwZSkgewogICAgaWYgKHR5cGUgPT0gInZhcmlhYmxlIil7Y3gubWFya2VkID0gInZhcmlhYmxlLTMiOyByZXR1cm4gY29udCgpO30KICB9CiAgZnVuY3Rpb24gdmFyZGVmKCkgewogICAgcmV0dXJuIHBhc3MocGF0dGVybiwgbWF5YmV0eXBlLCBtYXliZUFzc2lnbiwgdmFyZGVmQ29udCk7CiAgfQogIGZ1bmN0aW9uIHBhdHRlcm4odHlwZSwgdmFsdWUpIHsKICAgIGlmICh0eXBlID09ICJ2YXJpYWJsZSIpIHsgcmVnaXN0ZXIodmFsdWUpOyByZXR1cm4gY29udCgpOyB9CiAgICBpZiAodHlwZSA9PSAiWyIpIHJldHVybiBjb250Q29tbWFzZXAocGF0dGVybiwgIl0iKTsKICAgIGlmICh0eXBlID09ICJ7IikgcmV0dXJuIGNvbnRDb21tYXNlcChwcm9wcGF0dGVybiwgIn0iKTsKICB9CiAgZnVuY3Rpb24gcHJvcHBhdHRlcm4odHlwZSwgdmFsdWUpIHsKICAgIGlmICh0eXBlID09ICJ2YXJpYWJsZSIgJiYgIWN4LnN0cmVhbS5tYXRjaCgvXlxzKjovLCBmYWxzZSkpIHsKICAgICAgcmVnaXN0ZXIodmFsdWUpOwogICAgICByZXR1cm4gY29udChtYXliZUFzc2lnbik7CiAgICB9CiAgICBpZiAodHlwZSA9PSAidmFyaWFibGUiKSBjeC5tYXJrZWQgPSAicHJvcGVydHkiOwogICAgcmV0dXJuIGNvbnQoZXhwZWN0KCI6IiksIHBhdHRlcm4sIG1heWJlQXNzaWduKTsKICB9CiAgZnVuY3Rpb24gbWF5YmVBc3NpZ24oX3R5cGUsIHZhbHVlKSB7CiAgICBpZiAodmFsdWUgPT0gIj0iKSByZXR1cm4gY29udChleHByZXNzaW9uTm9Db21tYSk7CiAgfQogIGZ1bmN0aW9uIHZhcmRlZkNvbnQodHlwZSkgewogICAgaWYgKHR5cGUgPT0gIiwiKSByZXR1cm4gY29udCh2YXJkZWYpOwogIH0KICBmdW5jdGlvbiBtYXliZWVsc2UodHlwZSwgdmFsdWUpIHsKICAgIGlmICh0eXBlID09ICJrZXl3b3JkIGIiICYmIHZhbHVlID09ICJlbHNlIikgcmV0dXJuIGNvbnQocHVzaGxleCgiZm9ybSIsICJlbHNlIiksIHN0YXRlbWVudCwgcG9wbGV4KTsKICB9CiAgZnVuY3Rpb24gZm9yc3BlYyh0eXBlKSB7CiAgICBpZiAodHlwZSA9PSAiKCIpIHJldHVybiBjb250KHB1c2hsZXgoIikiKSwgZm9yc3BlYzEsIGV4cGVjdCgiKSIpLCBwb3BsZXgpOwogIH0KICBmdW5jdGlvbiBmb3JzcGVjMSh0eXBlKSB7CiAgICBpZiAodHlwZSA9PSAidmFyIikgcmV0dXJuIGNvbnQodmFyZGVmLCBleHBlY3QoIjsiKSwgZm9yc3BlYzIpOwogICAgaWYgKHR5cGUgPT0gIjsiKSByZXR1cm4gY29udChmb3JzcGVjMik7CiAgICBpZiAodHlwZSA9PSAidmFyaWFibGUiKSByZXR1cm4gY29udChmb3JtYXliZWlub2YpOwogICAgcmV0dXJuIHBhc3MoZXhwcmVzc2lvbiwgZXhwZWN0KCI7IiksIGZvcnNwZWMyKTsKICB9CiAgZnVuY3Rpb24gZm9ybWF5YmVpbm9mKF90eXBlLCB2YWx1ZSkgewogICAgaWYgKHZhbHVlID09ICJpbiIgfHwgdmFsdWUgPT0gIm9mIikgeyBjeC5tYXJrZWQgPSAia2V5d29yZCI7IHJldHVybiBjb250KGV4cHJlc3Npb24pOyB9CiAgICByZXR1cm4gY29udChtYXliZW9wZXJhdG9yQ29tbWEsIGZvcnNwZWMyKTsKICB9CiAgZnVuY3Rpb24gZm9yc3BlYzIodHlwZSwgdmFsdWUpIHsKICAgIGlmICh0eXBlID09ICI7IikgcmV0dXJuIGNvbnQoZm9yc3BlYzMpOwogICAgaWYgKHZhbHVlID09ICJpbiIgfHwgdmFsdWUgPT0gIm9mIikgeyBjeC5tYXJrZWQgPSAia2V5d29yZCI7IHJldHVybiBjb250KGV4cHJlc3Npb24pOyB9CiAgICByZXR1cm4gcGFzcyhleHByZXNzaW9uLCBleHBlY3QoIjsiKSwgZm9yc3BlYzMpOwogIH0KICBmdW5jdGlvbiBmb3JzcGVjMyh0eXBlKSB7CiAgICBpZiAodHlwZSAhPSAiKSIpIGNvbnQoZXhwcmVzc2lvbik7CiAgfQogIGZ1bmN0aW9uIGZ1bmN0aW9uZGVmKHR5cGUsIHZhbHVlKSB7CiAgICBpZiAodmFsdWUgPT0gIioiKSB7Y3gubWFya2VkID0gImtleXdvcmQiOyByZXR1cm4gY29udChmdW5jdGlvbmRlZik7fQogICAgaWYgKHR5cGUgPT0gInZhcmlhYmxlIikge3JlZ2lzdGVyKHZhbHVlKTsgcmV0dXJuIGNvbnQoZnVuY3Rpb25kZWYpO30KICAgIGlmICh0eXBlID09ICIoIikgcmV0dXJuIGNvbnQocHVzaGNvbnRleHQsIHB1c2hsZXgoIikiKSwgY29tbWFzZXAoZnVuYXJnLCAiKSIpLCBwb3BsZXgsIHN0YXRlbWVudCwgcG9wY29udGV4dCk7CiAgfQogIGZ1bmN0aW9uIGZ1bmFyZyh0eXBlKSB7CiAgICBpZiAodHlwZSA9PSAic3ByZWFkIikgcmV0dXJuIGNvbnQoZnVuYXJnKTsKICAgIHJldHVybiBwYXNzKHBhdHRlcm4sIG1heWJldHlwZSk7CiAgfQogIGZ1bmN0aW9uIGNsYXNzTmFtZSh0eXBlLCB2YWx1ZSkgewogICAgaWYgKHR5cGUgPT0gInZhcmlhYmxlIikge3JlZ2lzdGVyKHZhbHVlKTsgcmV0dXJuIGNvbnQoY2xhc3NOYW1lQWZ0ZXIpO30KICB9CiAgZnVuY3Rpb24gY2xhc3NOYW1lQWZ0ZXIodHlwZSwgdmFsdWUpIHsKICAgIGlmICh2YWx1ZSA9PSAiZXh0ZW5kcyIpIHJldHVybiBjb250KGV4cHJlc3Npb24sIGNsYXNzTmFtZUFmdGVyKTsKICAgIGlmICh0eXBlID09ICJ7IikgcmV0dXJuIGNvbnQocHVzaGxleCgifSIpLCBjbGFzc0JvZHksIHBvcGxleCk7CiAgfQogIGZ1bmN0aW9uIGNsYXNzQm9keSh0eXBlLCB2YWx1ZSkgewogICAgaWYgKHR5cGUgPT0gInZhcmlhYmxlIiB8fCBjeC5zdHlsZSA9PSAia2V5d29yZCIpIHsKICAgICAgY3gubWFya2VkID0gInByb3BlcnR5IjsKICAgICAgaWYgKHZhbHVlID09ICJnZXQiIHx8IHZhbHVlID09ICJzZXQiKSByZXR1cm4gY29udChjbGFzc0dldHRlclNldHRlciwgZnVuY3Rpb25kZWYsIGNsYXNzQm9keSk7CiAgICAgIHJldHVybiBjb250KGZ1bmN0aW9uZGVmLCBjbGFzc0JvZHkpOwogICAgfQogICAgaWYgKHZhbHVlID09ICIqIikgewogICAgICBjeC5tYXJrZWQgPSAia2V5d29yZCI7CiAgICAgIHJldHVybiBjb250KGNsYXNzQm9keSk7CiAgICB9CiAgICBpZiAodHlwZSA9PSAiOyIpIHJldHVybiBjb250KGNsYXNzQm9keSk7CiAgICBpZiAodHlwZSA9PSAifSIpIHJldHVybiBjb250KCk7CiAgfQogIGZ1bmN0aW9uIGNsYXNzR2V0dGVyU2V0dGVyKHR5cGUpIHsKICAgIGlmICh0eXBlICE9ICJ2YXJpYWJsZSIpIHJldHVybiBwYXNzKCk7CiAgICBjeC5tYXJrZWQgPSAicHJvcGVydHkiOwogICAgcmV0dXJuIGNvbnQoKTsKICB9CiAgZnVuY3Rpb24gYWZ0ZXJNb2R1bGUodHlwZSwgdmFsdWUpIHsKICAgIGlmICh0eXBlID09ICJzdHJpbmciKSByZXR1cm4gY29udChzdGF0ZW1lbnQpOwogICAgaWYgKHR5cGUgPT0gInZhcmlhYmxlIikgeyByZWdpc3Rlcih2YWx1ZSk7IHJldHVybiBjb250KG1heWJlRnJvbSk7IH0KICB9CiAgZnVuY3Rpb24gYWZ0ZXJFeHBvcnQoX3R5cGUsIHZhbHVlKSB7CiAgICBpZiAodmFsdWUgPT0gIioiKSB7IGN4Lm1hcmtlZCA9ICJrZXl3b3JkIjsgcmV0dXJuIGNvbnQobWF5YmVGcm9tLCBleHBlY3QoIjsiKSk7IH0KICAgIGlmICh2YWx1ZSA9PSAiZGVmYXVsdCIpIHsgY3gubWFya2VkID0gImtleXdvcmQiOyByZXR1cm4gY29udChleHByZXNzaW9uLCBleHBlY3QoIjsiKSk7IH0KICAgIHJldHVybiBwYXNzKHN0YXRlbWVudCk7CiAgfQogIGZ1bmN0aW9uIGFmdGVySW1wb3J0KHR5cGUpIHsKICAgIGlmICh0eXBlID09ICJzdHJpbmciKSByZXR1cm4gY29udCgpOwogICAgcmV0dXJuIHBhc3MoaW1wb3J0U3BlYywgbWF5YmVGcm9tKTsKICB9CiAgZnVuY3Rpb24gaW1wb3J0U3BlYyh0eXBlLCB2YWx1ZSkgewogICAgaWYgKHR5cGUgPT0gInsiKSByZXR1cm4gY29udENvbW1hc2VwKGltcG9ydFNwZWMsICJ9Iik7CiAgICBpZiAodHlwZSA9PSAidmFyaWFibGUiKSByZWdpc3Rlcih2YWx1ZSk7CiAgICByZXR1cm4gY29udCgpOwogIH0KICBmdW5jdGlvbiBtYXliZUZyb20oX3R5cGUsIHZhbHVlKSB7CiAgICBpZiAodmFsdWUgPT0gImZyb20iKSB7IGN4Lm1hcmtlZCA9ICJrZXl3b3JkIjsgcmV0dXJuIGNvbnQoZXhwcmVzc2lvbik7IH0KICB9CiAgZnVuY3Rpb24gYXJyYXlMaXRlcmFsKHR5cGUpIHsKICAgIGlmICh0eXBlID09ICJdIikgcmV0dXJuIGNvbnQoKTsKICAgIHJldHVybiBwYXNzKGV4cHJlc3Npb25Ob0NvbW1hLCBtYXliZUFycmF5Q29tcHJlaGVuc2lvbik7CiAgfQogIGZ1bmN0aW9uIG1heWJlQXJyYXlDb21wcmVoZW5zaW9uKHR5cGUpIHsKICAgIGlmICh0eXBlID09ICJmb3IiKSByZXR1cm4gcGFzcyhjb21wcmVoZW5zaW9uLCBleHBlY3QoIl0iKSk7CiAgICBpZiAodHlwZSA9PSAiLCIpIHJldHVybiBjb250KGNvbW1hc2VwKG1heWJlZXhwcmVzc2lvbk5vQ29tbWEsICJdIikpOwogICAgcmV0dXJuIHBhc3MoY29tbWFzZXAoZXhwcmVzc2lvbk5vQ29tbWEsICJdIikpOwogIH0KICBmdW5jdGlvbiBjb21wcmVoZW5zaW9uKHR5cGUpIHsKICAgIGlmICh0eXBlID09ICJmb3IiKSByZXR1cm4gY29udChmb3JzcGVjLCBjb21wcmVoZW5zaW9uKTsKICAgIGlmICh0eXBlID09ICJpZiIpIHJldHVybiBjb250KGV4cHJlc3Npb24sIGNvbXByZWhlbnNpb24pOwogIH0KCiAgZnVuY3Rpb24gaXNDb250aW51ZWRTdGF0ZW1lbnQoc3RhdGUsIHRleHRBZnRlcikgewogICAgcmV0dXJuIHN0YXRlLmxhc3RUeXBlID09ICJvcGVyYXRvciIgfHwgc3RhdGUubGFzdFR5cGUgPT0gIiwiIHx8CiAgICAgIGlzT3BlcmF0b3JDaGFyLnRlc3QodGV4dEFmdGVyLmNoYXJBdCgwKSkgfHwKICAgICAgL1ssLl0vLnRlc3QodGV4dEFmdGVyLmNoYXJBdCgwKSk7CiAgfQoKICAvLyBJbnRlcmZhY2UKCiAgcmV0dXJuIHsKICAgIHN0YXJ0U3RhdGU6IGZ1bmN0aW9uKGJhc2Vjb2x1bW4pIHsKICAgICAgdmFyIHN0YXRlID0gewogICAgICAgIHRva2VuaXplOiB0b2tlbkJhc2UsCiAgICAgICAgbGFzdFR5cGU6ICJzb2YiLAogICAgICAgIGNjOiBbXSwKICAgICAgICBsZXhpY2FsOiBuZXcgSlNMZXhpY2FsKChiYXNlY29sdW1uIHx8IDApIC0gaW5kZW50VW5pdCwgMCwgImJsb2NrIiwgZmFsc2UpLAogICAgICAgIGxvY2FsVmFyczogcGFyc2VyQ29uZmlnLmxvY2FsVmFycywKICAgICAgICBjb250ZXh0OiBwYXJzZXJDb25maWcubG9jYWxWYXJzICYmIHt2YXJzOiBwYXJzZXJDb25maWcubG9jYWxWYXJzfSwKICAgICAgICBpbmRlbnRlZDogMAogICAgICB9OwogICAgICBpZiAocGFyc2VyQ29uZmlnLmdsb2JhbFZhcnMgJiYgdHlwZW9mIHBhcnNlckNvbmZpZy5nbG9iYWxWYXJzID09ICJvYmplY3QiKQogICAgICAgIHN0YXRlLmdsb2JhbFZhcnMgPSBwYXJzZXJDb25maWcuZ2xvYmFsVmFyczsKICAgICAgcmV0dXJuIHN0YXRlOwogICAgfSwKCiAgICB0b2tlbjogZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkgewogICAgICBpZiAoc3RyZWFtLnNvbCgpKSB7CiAgICAgICAgaWYgKCFzdGF0ZS5sZXhpY2FsLmhhc093blByb3BlcnR5KCJhbGlnbiIpKQogICAgICAgICAgc3RhdGUubGV4aWNhbC5hbGlnbiA9IGZhbHNlOwogICAgICAgIHN0YXRlLmluZGVudGVkID0gc3RyZWFtLmluZGVudGF0aW9uKCk7CiAgICAgICAgZmluZEZhdEFycm93KHN0cmVhbSwgc3RhdGUpOwogICAgICB9CiAgICAgIGlmIChzdGF0ZS50b2tlbml6ZSAhPSB0b2tlbkNvbW1lbnQgJiYgc3RyZWFtLmVhdFNwYWNlKCkpIHJldHVybiBudWxsOwogICAgICB2YXIgc3R5bGUgPSBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTsKICAgICAgaWYgKHR5cGUgPT0gImNvbW1lbnQiKSByZXR1cm4gc3R5bGU7CiAgICAgIHN0YXRlLmxhc3RUeXBlID0gdHlwZSA9PSAib3BlcmF0b3IiICYmIChjb250ZW50ID09ICIrKyIgfHwgY29udGVudCA9PSAiLS0iKSA/ICJpbmNkZWMiIDogdHlwZTsKICAgICAgcmV0dXJuIHBhcnNlSlMoc3RhdGUsIHN0eWxlLCB0eXBlLCBjb250ZW50LCBzdHJlYW0pOwogICAgfSwKCiAgICBpbmRlbnQ6IGZ1bmN0aW9uKHN0YXRlLCB0ZXh0QWZ0ZXIpIHsKICAgICAgaWYgKHN0YXRlLnRva2VuaXplID09IHRva2VuQ29tbWVudCkgcmV0dXJuIENvZGVNaXJyb3IuUGFzczsKICAgICAgaWYgKHN0YXRlLnRva2VuaXplICE9IHRva2VuQmFzZSkgcmV0dXJuIDA7CiAgICAgIHZhciBmaXJzdENoYXIgPSB0ZXh0QWZ0ZXIgJiYgdGV4dEFmdGVyLmNoYXJBdCgwKSwgbGV4aWNhbCA9IHN0YXRlLmxleGljYWw7CiAgICAgIC8vIEtsdWRnZSB0byBwcmV2ZW50ICdtYXliZWxzZScgZnJvbSBibG9ja2luZyBsZXhpY2FsIHNjb3BlIHBvcHMKICAgICAgaWYgKCEvXlxzKmVsc2VcYi8udGVzdCh0ZXh0QWZ0ZXIpKSBmb3IgKHZhciBpID0gc3RhdGUuY2MubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHsKICAgICAgICB2YXIgYyA9IHN0YXRlLmNjW2ldOwogICAgICAgIGlmIChjID09IHBvcGxleCkgbGV4aWNhbCA9IGxleGljYWwucHJldjsKICAgICAgICBlbHNlIGlmIChjICE9IG1heWJlZWxzZSkgYnJlYWs7CiAgICAgIH0KICAgICAgaWYgKGxleGljYWwudHlwZSA9PSAic3RhdCIgJiYgZmlyc3RDaGFyID09ICJ9IikgbGV4aWNhbCA9IGxleGljYWwucHJldjsKICAgICAgaWYgKHN0YXRlbWVudEluZGVudCAmJiBsZXhpY2FsLnR5cGUgPT0gIikiICYmIGxleGljYWwucHJldi50eXBlID09ICJzdGF0IikKICAgICAgICBsZXhpY2FsID0gbGV4aWNhbC5wcmV2OwogICAgICB2YXIgdHlwZSA9IGxleGljYWwudHlwZSwgY2xvc2luZyA9IGZpcnN0Q2hhciA9PSB0eXBlOwoKICAgICAgaWYgKHR5cGUgPT0gInZhcmRlZiIpIHJldHVybiBsZXhpY2FsLmluZGVudGVkICsgKHN0YXRlLmxhc3RUeXBlID09ICJvcGVyYXRvciIgfHwgc3RhdGUubGFzdFR5cGUgPT0gIiwiID8gbGV4aWNhbC5pbmZvICsgMSA6IDApOwogICAgICBlbHNlIGlmICh0eXBlID09ICJmb3JtIiAmJiBmaXJzdENoYXIgPT0gInsiKSByZXR1cm4gbGV4aWNhbC5pbmRlbnRlZDsKICAgICAgZWxzZSBpZiAodHlwZSA9PSAiZm9ybSIpIHJldHVybiBsZXhpY2FsLmluZGVudGVkICsgaW5kZW50VW5pdDsKICAgICAgZWxzZSBpZiAodHlwZSA9PSAic3RhdCIpCiAgICAgICAgcmV0dXJuIGxleGljYWwuaW5kZW50ZWQgKyAoaXNDb250aW51ZWRTdGF0ZW1lbnQoc3RhdGUsIHRleHRBZnRlcikgPyBzdGF0ZW1lbnRJbmRlbnQgfHwgaW5kZW50VW5pdCA6IDApOwogICAgICBlbHNlIGlmIChsZXhpY2FsLmluZm8gPT0gInN3aXRjaCIgJiYgIWNsb3NpbmcgJiYgcGFyc2VyQ29uZmlnLmRvdWJsZUluZGVudFN3aXRjaCAhPSBmYWxzZSkKICAgICAgICByZXR1cm4gbGV4aWNhbC5pbmRlbnRlZCArICgvXig/OmNhc2V8ZGVmYXVsdClcYi8udGVzdCh0ZXh0QWZ0ZXIpID8gaW5kZW50VW5pdCA6IDIgKiBpbmRlbnRVbml0KTsKICAgICAgZWxzZSBpZiAobGV4aWNhbC5hbGlnbikgcmV0dXJuIGxleGljYWwuY29sdW1uICsgKGNsb3NpbmcgPyAwIDogMSk7CiAgICAgIGVsc2UgcmV0dXJuIGxleGljYWwuaW5kZW50ZWQgKyAoY2xvc2luZyA/IDAgOiBpbmRlbnRVbml0KTsKICAgIH0sCgogICAgZWxlY3RyaWNJbnB1dDogL15ccyooPzpjYXNlIC4qPzp8ZGVmYXVsdDp8XHt8XH0pJC8sCiAgICBibG9ja0NvbW1lbnRTdGFydDoganNvbk1vZGUgPyBudWxsIDogIi8qIiwKICAgIGJsb2NrQ29tbWVudEVuZDoganNvbk1vZGUgPyBudWxsIDogIiovIiwKICAgIGxpbmVDb21tZW50OiBqc29uTW9kZSA/IG51bGwgOiAiLy8iLAogICAgZm9sZDogImJyYWNlIiwKCiAgICBoZWxwZXJUeXBlOiBqc29uTW9kZSA/ICJqc29uIiA6ICJqYXZhc2NyaXB0IiwKICAgIGpzb25sZE1vZGU6IGpzb25sZE1vZGUsCiAgICBqc29uTW9kZToganNvbk1vZGUKICB9Owp9KTsKCkNvZGVNaXJyb3IucmVnaXN0ZXJIZWxwZXIoIndvcmRDaGFycyIsICJqYXZhc2NyaXB0IiwgL1tcdyRdLyk7CgpDb2RlTWlycm9yLmRlZmluZU1JTUUoInRleHQvamF2YXNjcmlwdCIsICJqYXZhc2NyaXB0Iik7CkNvZGVNaXJyb3IuZGVmaW5lTUlNRSgidGV4dC9lY21hc2NyaXB0IiwgImphdmFzY3JpcHQiKTsKQ29kZU1pcnJvci5kZWZpbmVNSU1FKCJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0IiwgImphdmFzY3JpcHQiKTsKQ29kZU1pcnJvci5kZWZpbmVNSU1FKCJhcHBsaWNhdGlvbi94LWphdmFzY3JpcHQiLCAiamF2YXNjcmlwdCIpOwpDb2RlTWlycm9yLmRlZmluZU1JTUUoImFwcGxpY2F0aW9uL2VjbWFzY3JpcHQiLCAiamF2YXNjcmlwdCIpOwpDb2RlTWlycm9yLmRlZmluZU1JTUUoImFwcGxpY2F0aW9uL2pzb24iLCB7bmFtZTogImphdmFzY3JpcHQiLCBqc29uOiB0cnVlfSk7CkNvZGVNaXJyb3IuZGVmaW5lTUlNRSgiYXBwbGljYXRpb24veC1qc29uIiwge25hbWU6ICJqYXZhc2NyaXB0IiwganNvbjogdHJ1ZX0pOwpDb2RlTWlycm9yLmRlZmluZU1JTUUoImFwcGxpY2F0aW9uL2xkK2pzb24iLCB7bmFtZTogImphdmFzY3JpcHQiLCBqc29ubGQ6IHRydWV9KTsKQ29kZU1pcnJvci5kZWZpbmVNSU1FKCJ0ZXh0L3R5cGVzY3JpcHQiLCB7IG5hbWU6ICJqYXZhc2NyaXB0IiwgdHlwZXNjcmlwdDogdHJ1ZSB9KTsKQ29kZU1pcnJvci5kZWZpbmVNSU1FKCJhcHBsaWNhdGlvbi90eXBlc2NyaXB0IiwgeyBuYW1lOiAiamF2YXNjcmlwdCIsIHR5cGVzY3JpcHQ6IHRydWUgfSk7Cgp9KTsK"></script>
    <style>
    body{background:#eee;color:#333}img{border:0}a.self{font-weight:700;text-decoration:none;color:#444;border-bottom:1px solid #aaa}p,select,label,.blurb,a.turn-off-codemirror{font:13px/1.231 arial,sans-serif;*font-size:small}a.turn-off-codemirror{margin-left:25px}button.submit{width:100%;padding:10px 0;cursor:pointer;margin:0}button.submit em{font-size:11px;font-style:normal;color:#999}label{cursor:pointer}select{width:220px}table#options{float:right}table#options td{vertical-align:top;padding-left:10px}.col-6{width:50%;float:left}#about{float:left}#about p{margin:0 6px 6px 0}.uses li{padding-top:3px;line-height:150%}.uses li.sep{margin-top:8px}#testresults{display:none;font-family:monaco,"lucida console","courier new",monospace}.CodeMirror{border:1px solid #ccc;height:450px;font-size:90%;margin-bottom:6px;background:#fff}p{margin-left:40px;margin-right:40px}a{white-space:nowrap;color:#36d}.contributor-sep{clear:left;border-top:1px solid #ccc;padding-top:8px}h2{margin-top:32px;margin-left:40px;margin-bottom:0;font-size:20px;font-weight:400}
    </style>
    <script src="data:application/x-javascript;base64,LyohIGpRdWVyeSB2MS4xMS4zIHwgKGMpIDIwMDUsIDIwMTUgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gfCBqcXVlcnkub3JnL2xpY2Vuc2UgKi8KIWZ1bmN0aW9uKGEsYil7Im9iamVjdCI9PXR5cGVvZiBtb2R1bGUmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YS5kb2N1bWVudD9iKGEsITApOmZ1bmN0aW9uKGEpe2lmKCFhLmRvY3VtZW50KXRocm93IG5ldyBFcnJvcigialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudCIpO3JldHVybiBiKGEpfTpiKGEpfSgidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcyxmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9Yy5zbGljZSxlPWMuY29uY2F0LGY9Yy5wdXNoLGc9Yy5pbmRleE9mLGg9e30saT1oLnRvU3RyaW5nLGo9aC5oYXNPd25Qcm9wZXJ0eSxrPXt9LGw9IjEuMTEuMyIsbT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgbS5mbi5pbml0KGEsYil9LG49L15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nLG89L14tbXMtLyxwPS8tKFtcZGEtel0pL2dpLHE9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfTttLmZuPW0ucHJvdG90eXBlPXtqcXVlcnk6bCxjb25zdHJ1Y3RvcjptLHNlbGVjdG9yOiIiLGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gZC5jYWxsKHRoaXMpfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWE/MD5hP3RoaXNbYSt0aGlzLmxlbmd0aF06dGhpc1thXTpkLmNhbGwodGhpcyl9LHB1c2hTdGFjazpmdW5jdGlvbihhKXt2YXIgYj1tLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxhKTtyZXR1cm4gYi5wcmV2T2JqZWN0PXRoaXMsYi5jb250ZXh0PXRoaXMuY29udGV4dCxifSxlYWNoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG0uZWFjaCh0aGlzLGEsYil9LG1hcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobS5tYXAodGhpcyxmdW5jdGlvbihiLGMpe3JldHVybiBhLmNhbGwoYixjLGIpfSkpfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhkLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGVuZ3RoLGM9K2ErKDA+YT9iOjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhjPj0wJiZiPmM/W3RoaXNbY11dOltdKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcihudWxsKX0scHVzaDpmLHNvcnQ6Yy5zb3J0LHNwbGljZTpjLnNwbGljZX0sbS5leHRlbmQ9bS5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZz1hcmd1bWVudHNbMF18fHt9LGg9MSxpPWFyZ3VtZW50cy5sZW5ndGgsaj0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgZyYmKGo9ZyxnPWFyZ3VtZW50c1toXXx8e30saCsrKSwib2JqZWN0Ij09dHlwZW9mIGd8fG0uaXNGdW5jdGlvbihnKXx8KGc9e30pLGg9PT1pJiYoZz10aGlzLGgtLSk7aT5oO2grKylpZihudWxsIT0oZT1hcmd1bWVudHNbaF0pKWZvcihkIGluIGUpYT1nW2RdLGM9ZVtkXSxnIT09YyYmKGomJmMmJihtLmlzUGxhaW5PYmplY3QoYyl8fChiPW0uaXNBcnJheShjKSkpPyhiPyhiPSExLGY9YSYmbS5pc0FycmF5KGEpP2E6W10pOmY9YSYmbS5pc1BsYWluT2JqZWN0KGEpP2E6e30sZ1tkXT1tLmV4dGVuZChqLGYsYykpOnZvaWQgMCE9PWMmJihnW2RdPWMpKTtyZXR1cm4gZ30sbS5leHRlbmQoe2V4cGFuZG86ImpRdWVyeSIrKGwrTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXEQvZywiIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuImZ1bmN0aW9uIj09PW0udHlwZShhKX0saXNBcnJheTpBcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4iYXJyYXkiPT09bS50eXBlKGEpfSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09YS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihhKXtyZXR1cm4hbS5pc0FycmF5KGEpJiZhLXBhcnNlRmxvYXQoYSkrMT49MH0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtmb3IoYiBpbiBhKXJldHVybiExO3JldHVybiEwfSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiO2lmKCFhfHwib2JqZWN0IiE9PW0udHlwZShhKXx8YS5ub2RlVHlwZXx8bS5pc1dpbmRvdyhhKSlyZXR1cm4hMTt0cnl7aWYoYS5jb25zdHJ1Y3RvciYmIWouY2FsbChhLCJjb25zdHJ1Y3RvciIpJiYhai5jYWxsKGEuY29uc3RydWN0b3IucHJvdG90eXBlLCJpc1Byb3RvdHlwZU9mIikpcmV0dXJuITF9Y2F0Y2goYyl7cmV0dXJuITF9aWYoay5vd25MYXN0KWZvcihiIGluIGEpcmV0dXJuIGouY2FsbChhLGIpO2ZvcihiIGluIGEpO3JldHVybiB2b2lkIDA9PT1ifHxqLmNhbGwoYSxiKX0sdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9hKyIiOiJvYmplY3QiPT10eXBlb2YgYXx8ImZ1bmN0aW9uIj09dHlwZW9mIGE/aFtpLmNhbGwoYSldfHwib2JqZWN0Ijp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihiKXtiJiZtLnRyaW0oYikmJihhLmV4ZWNTY3JpcHR8fGZ1bmN0aW9uKGIpe2EuZXZhbC5jYWxsKGEsYil9KShiKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UobywibXMtIikucmVwbGFjZShwLHEpfSxub2RlTmFtZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9MCxmPWEubGVuZ3RoLGc9cihhKTtpZihjKXtpZihnKXtmb3IoO2Y+ZTtlKyspaWYoZD1iLmFwcGx5KGFbZV0sYyksZD09PSExKWJyZWFrfWVsc2UgZm9yKGUgaW4gYSlpZihkPWIuYXBwbHkoYVtlXSxjKSxkPT09ITEpYnJlYWt9ZWxzZSBpZihnKXtmb3IoO2Y+ZTtlKyspaWYoZD1iLmNhbGwoYVtlXSxlLGFbZV0pLGQ9PT0hMSlicmVha31lbHNlIGZvcihlIGluIGEpaWYoZD1iLmNhbGwoYVtlXSxlLGFbZV0pLGQ9PT0hMSlicmVhaztyZXR1cm4gYX0sdHJpbTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT8iIjooYSsiIikucmVwbGFjZShuLCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8W107cmV0dXJuIG51bGwhPWEmJihyKE9iamVjdChhKSk/bS5tZXJnZShjLCJzdHJpbmciPT10eXBlb2YgYT9bYV06YSk6Zi5jYWxsKGMsYSkpLGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2lmKGIpe2lmKGcpcmV0dXJuIGcuY2FsbChiLGEsYyk7Zm9yKGQ9Yi5sZW5ndGgsYz1jPzA+Yz9NYXRoLm1heCgwLGQrYyk6YzowO2Q+YztjKyspaWYoYyBpbiBiJiZiW2NdPT09YSlyZXR1cm4gY31yZXR1cm4tMX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz0rYi5sZW5ndGgsZD0wLGU9YS5sZW5ndGg7d2hpbGUoYz5kKWFbZSsrXT1iW2QrK107aWYoYyE9PWMpd2hpbGUodm9pZCAwIT09YltkXSlhW2UrK109YltkKytdO3JldHVybiBhLmxlbmd0aD1lLGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCxlPVtdLGY9MCxnPWEubGVuZ3RoLGg9IWM7Zz5mO2YrKylkPSFiKGFbZl0sZiksZCE9PWgmJmUucHVzaChhW2ZdKTtyZXR1cm4gZX0sbWFwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxmPTAsZz1hLmxlbmd0aCxoPXIoYSksaT1bXTtpZihoKWZvcig7Zz5mO2YrKylkPWIoYVtmXSxmLGMpLG51bGwhPWQmJmkucHVzaChkKTtlbHNlIGZvcihmIGluIGEpZD1iKGFbZl0sZixjKSxudWxsIT1kJiZpLnB1c2goZCk7cmV0dXJuIGUuYXBwbHkoW10saSl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBjLGUsZjtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGImJihmPWFbYl0sYj1hLGE9ZiksbS5pc0Z1bmN0aW9uKGEpPyhjPWQuY2FsbChhcmd1bWVudHMsMiksZT1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsYy5jb25jYXQoZC5jYWxsKGFyZ3VtZW50cykpKX0sZS5ndWlkPWEuZ3VpZD1hLmd1aWR8fG0uZ3VpZCsrLGUpOnZvaWQgMH0sbm93OmZ1bmN0aW9uKCl7cmV0dXJuK25ldyBEYXRlfSxzdXBwb3J0Omt9KSxtLmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IiLnNwbGl0KCIgIiksZnVuY3Rpb24oYSxiKXtoWyJbb2JqZWN0ICIrYisiXSJdPWIudG9Mb3dlckNhc2UoKX0pO2Z1bmN0aW9uIHIoYSl7dmFyIGI9Imxlbmd0aCJpbiBhJiZhLmxlbmd0aCxjPW0udHlwZShhKTtyZXR1cm4iZnVuY3Rpb24iPT09Y3x8bS5pc1dpbmRvdyhhKT8hMToxPT09YS5ub2RlVHlwZSYmYj8hMDoiYXJyYXkiPT09Y3x8MD09PWJ8fCJudW1iZXIiPT10eXBlb2YgYiYmYj4wJiZiLTEgaW4gYX12YXIgcz1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpLGosayxsLG0sbixvLHAscSxyLHMsdCx1PSJzaXp6bGUiKzEqbmV3IERhdGUsdj1hLmRvY3VtZW50LHc9MCx4PTAseT1oYSgpLHo9aGEoKSxBPWhhKCksQj1mdW5jdGlvbihhLGIpe3JldHVybiBhPT09YiYmKGw9ITApLDB9LEM9MTw8MzEsRD17fS5oYXNPd25Qcm9wZXJ0eSxFPVtdLEY9RS5wb3AsRz1FLnB1c2gsSD1FLnB1c2gsST1FLnNsaWNlLEo9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspaWYoYVtjXT09PWIpcmV0dXJuIGM7cmV0dXJuLTF9LEs9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIixMPSJbXFx4MjBcXHRcXHJcXG5cXGZdIixNPSIoPzpcXFxcLnxbXFx3LV18W15cXHgwMC1cXHhhMF0pKyIsTj1NLnJlcGxhY2UoInciLCJ3IyIpLE89IlxcWyIrTCsiKigiK00rIikoPzoiK0wrIiooWypeJHwhfl0/PSkiK0wrIiooPzonKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcInwoIitOKyIpKXwpIitMKyIqXFxdIixQPSI6KCIrTSsiKSg/OlxcKCgoJygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCIpfCgoPzpcXFxcLnxbXlxcXFwoKVtcXF1dfCIrTysiKSopfC4qKVxcKXwpIixRPW5ldyBSZWdFeHAoTCsiKyIsImciKSxSPW5ldyBSZWdFeHAoIl4iK0wrIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIrTCsiKyQiLCJnIiksUz1uZXcgUmVnRXhwKCJeIitMKyIqLCIrTCsiKiIpLFQ9bmV3IFJlZ0V4cCgiXiIrTCsiKihbPit+XXwiK0wrIikiK0wrIioiKSxVPW5ldyBSZWdFeHAoIj0iK0wrIiooW15cXF0nXCJdKj8pIitMKyIqXFxdIiwiZyIpLFY9bmV3IFJlZ0V4cChQKSxXPW5ldyBSZWdFeHAoIl4iK04rIiQiKSxYPXtJRDpuZXcgUmVnRXhwKCJeIygiK00rIikiKSxDTEFTUzpuZXcgUmVnRXhwKCJeXFwuKCIrTSsiKSIpLFRBRzpuZXcgUmVnRXhwKCJeKCIrTS5yZXBsYWNlKCJ3IiwidyoiKSsiKSIpLEFUVFI6bmV3IFJlZ0V4cCgiXiIrTyksUFNFVURPOm5ldyBSZWdFeHAoIl4iK1ApLENISUxEOm5ldyBSZWdFeHAoIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIrTCsiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIrTCsiKig/OihbKy1dfCkiK0wrIiooXFxkKyl8KSkiK0wrIipcXCl8KSIsImkiKSxib29sOm5ldyBSZWdFeHAoIl4oPzoiK0srIikkIiwiaSIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKCJeIitMKyIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiK0wrIiooKD86LVxcZCk/XFxkKikiK0wrIipcXCl8KSg/PVteLV18JCkiLCJpIil9LFk9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxaPS9eaFxkJC9pLCQ9L15bXntdK1x7XHMqXFtuYXRpdmUgXHcvLF89L14oPzojKFtcdy1dKyl8KFx3Kyl8XC4oW1x3LV0rKSkkLyxhYT0vWyt+XS8sYmE9Lyd8XFwvZyxjYT1uZXcgUmVnRXhwKCJcXFxcKFtcXGRhLWZdezEsNn0iK0wrIj98KCIrTCsiKXwuKSIsImlnIiksZGE9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSIweCIrYi02NTUzNjtyZXR1cm4gZCE9PWR8fGM/YjowPmQ/U3RyaW5nLmZyb21DaGFyQ29kZShkKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQ+PjEwfDU1Mjk2LDEwMjMmZHw1NjMyMCl9LGVhPWZ1bmN0aW9uKCl7bSgpfTt0cnl7SC5hcHBseShFPUkuY2FsbCh2LmNoaWxkTm9kZXMpLHYuY2hpbGROb2RlcyksRVt2LmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChmYSl7SD17YXBwbHk6RS5sZW5ndGg/ZnVuY3Rpb24oYSxiKXtHLmFwcGx5KGEsSS5jYWxsKGIpKX06ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aCxkPTA7d2hpbGUoYVtjKytdPWJbZCsrXSk7YS5sZW5ndGg9Yy0xfX19ZnVuY3Rpb24gZ2EoYSxiLGQsZSl7dmFyIGYsaCxqLGssbCxvLHIscyx3LHg7aWYoKGI/Yi5vd25lckRvY3VtZW50fHxiOnYpIT09biYmbShiKSxiPWJ8fG4sZD1kfHxbXSxrPWIubm9kZVR5cGUsInN0cmluZyIhPXR5cGVvZiBhfHwhYXx8MSE9PWsmJjkhPT1rJiYxMSE9PWspcmV0dXJuIGQ7aWYoIWUmJnApe2lmKDExIT09ayYmKGY9Xy5leGVjKGEpKSlpZihqPWZbMV0pe2lmKDk9PT1rKXtpZihoPWIuZ2V0RWxlbWVudEJ5SWQoaiksIWh8fCFoLnBhcmVudE5vZGUpcmV0dXJuIGQ7aWYoaC5pZD09PWopcmV0dXJuIGQucHVzaChoKSxkfWVsc2UgaWYoYi5vd25lckRvY3VtZW50JiYoaD1iLm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaikpJiZ0KGIsaCkmJmguaWQ9PT1qKXJldHVybiBkLnB1c2goaCksZH1lbHNle2lmKGZbMl0pcmV0dXJuIEguYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpKSxkO2lmKChqPWZbM10pJiZjLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEguYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoaikpLGR9aWYoYy5xc2EmJighcXx8IXEudGVzdChhKSkpe2lmKHM9cj11LHc9Yix4PTEhPT1rJiZhLDE9PT1rJiYib2JqZWN0IiE9PWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7bz1nKGEpLChyPWIuZ2V0QXR0cmlidXRlKCJpZCIpKT9zPXIucmVwbGFjZShiYSwiXFwkJiIpOmIuc2V0QXR0cmlidXRlKCJpZCIscykscz0iW2lkPSciK3MrIiddICIsbD1vLmxlbmd0aDt3aGlsZShsLS0pb1tsXT1zK3JhKG9bbF0pO3c9YWEudGVzdChhKSYmcGEoYi5wYXJlbnROb2RlKXx8Yix4PW8uam9pbigiLCIpfWlmKHgpdHJ5e3JldHVybiBILmFwcGx5KGQsdy5xdWVyeVNlbGVjdG9yQWxsKHgpKSxkfWNhdGNoKHkpe31maW5hbGx5e3J8fGIucmVtb3ZlQXR0cmlidXRlKCJpZCIpfX19cmV0dXJuIGkoYS5yZXBsYWNlKFIsIiQxIiksYixkLGUpfWZ1bmN0aW9uIGhhKCl7dmFyIGE9W107ZnVuY3Rpb24gYihjLGUpe3JldHVybiBhLnB1c2goYysiICIpPmQuY2FjaGVMZW5ndGgmJmRlbGV0ZSBiW2Euc2hpZnQoKV0sYltjKyIgIl09ZX1yZXR1cm4gYn1mdW5jdGlvbiBpYShhKXtyZXR1cm4gYVt1XT0hMCxhfWZ1bmN0aW9uIGphKGEpe3ZhciBiPW4uY3JlYXRlRWxlbWVudCgiZGl2Iik7dHJ5e3JldHVybiEhYShiKX1jYXRjaChjKXtyZXR1cm4hMX1maW5hbGx5e2IucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbH19ZnVuY3Rpb24ga2EoYSxiKXt2YXIgYz1hLnNwbGl0KCJ8IiksZT1hLmxlbmd0aDt3aGlsZShlLS0pZC5hdHRySGFuZGxlW2NbZV1dPWJ9ZnVuY3Rpb24gbGEoYSxiKXt2YXIgYz1iJiZhLGQ9YyYmMT09PWEubm9kZVR5cGUmJjE9PT1iLm5vZGVUeXBlJiYofmIuc291cmNlSW5kZXh8fEMpLSh+YS5zb3VyY2VJbmRleHx8Qyk7aWYoZClyZXR1cm4gZDtpZihjKXdoaWxlKGM9Yy5uZXh0U2libGluZylpZihjPT09YilyZXR1cm4tMTtyZXR1cm4gYT8xOi0xfWZ1bmN0aW9uIG1hKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PWMmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG5hKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKCJpbnB1dCI9PT1jfHwiYnV0dG9uIj09PWMpJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBvYShhKXtyZXR1cm4gaWEoZnVuY3Rpb24oYil7cmV0dXJuIGI9K2IsaWEoZnVuY3Rpb24oYyxkKXt2YXIgZSxmPWEoW10sYy5sZW5ndGgsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pY1tlPWZbZ11dJiYoY1tlXT0hKGRbZV09Y1tlXSkpfSl9KX1mdW5jdGlvbiBwYShhKXtyZXR1cm4gYSYmInVuZGVmaW5lZCIhPXR5cGVvZiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lJiZhfWM9Z2Euc3VwcG9ydD17fSxmPWdhLmlzWE1MPWZ1bmN0aW9uKGEpe3ZhciBiPWEmJihhLm93bmVyRG9jdW1lbnR8fGEpLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gYj8iSFRNTCIhPT1iLm5vZGVOYW1lOiExfSxtPWdhLnNldERvY3VtZW50PWZ1bmN0aW9uKGEpe3ZhciBiLGUsZz1hP2Eub3duZXJEb2N1bWVudHx8YTp2O3JldHVybiBnIT09biYmOT09PWcubm9kZVR5cGUmJmcuZG9jdW1lbnRFbGVtZW50PyhuPWcsbz1nLmRvY3VtZW50RWxlbWVudCxlPWcuZGVmYXVsdFZpZXcsZSYmZSE9PWUudG9wJiYoZS5hZGRFdmVudExpc3RlbmVyP2UuYWRkRXZlbnRMaXN0ZW5lcigidW5sb2FkIixlYSwhMSk6ZS5hdHRhY2hFdmVudCYmZS5hdHRhY2hFdmVudCgib251bmxvYWQiLGVhKSkscD0hZihnKSxjLmF0dHJpYnV0ZXM9amEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2xhc3NOYW1lPSJpIiwhYS5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpfSksYy5nZXRFbGVtZW50c0J5VGFnTmFtZT1qYShmdW5jdGlvbihhKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChnLmNyZWF0ZUNvbW1lbnQoIiIpKSwhYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aH0pLGMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT0kLnRlc3QoZy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSxjLmdldEJ5SWQ9amEoZnVuY3Rpb24oYSl7cmV0dXJuIG8uYXBwZW5kQ2hpbGQoYSkuaWQ9dSwhZy5nZXRFbGVtZW50c0J5TmFtZXx8IWcuZ2V0RWxlbWVudHNCeU5hbWUodSkubGVuZ3RofSksYy5nZXRCeUlkPyhkLmZpbmQuSUQ9ZnVuY3Rpb24oYSxiKXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIGIuZ2V0RWxlbWVudEJ5SWQmJnApe3ZhciBjPWIuZ2V0RWxlbWVudEJ5SWQoYSk7cmV0dXJuIGMmJmMucGFyZW50Tm9kZT9bY106W119fSxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoY2EsZGEpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoImlkIik9PT1ifX0pOihkZWxldGUgZC5maW5kLklELGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShjYSxkYSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBjPSJ1bmRlZmluZWQiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGVOb2RlJiZhLmdldEF0dHJpYnV0ZU5vZGUoImlkIik7cmV0dXJuIGMmJmMudmFsdWU9PT1ifX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZT9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOmMucXNhP2IucXVlcnlTZWxlY3RvckFsbChhKTp2b2lkIDB9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPTAsZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKCIqIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7cmV0dXJuIHA/Yi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpOnZvaWQgMH0scj1bXSxxPVtdLChjLnFzYT0kLnRlc3QoZy5xdWVyeVNlbGVjdG9yQWxsKSkmJihqYShmdW5jdGlvbihhKXtvLmFwcGVuZENoaWxkKGEpLmlubmVySFRNTD0iPGEgaWQ9JyIrdSsiJz48L2E+PHNlbGVjdCBpZD0nIit1KyItXGZdJyBtc2FsbG93Y2FwdHVyZT0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PiIsYS5xdWVyeVNlbGVjdG9yQWxsKCJbbXNhbGxvd2NhcHR1cmVePScnXSIpLmxlbmd0aCYmcS5wdXNoKCJbKl4kXT0iK0wrIiooPzonJ3xcIlwiKSIpLGEucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aHx8cS5wdXNoKCJcXFsiK0wrIiooPzp2YWx1ZXwiK0srIikiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIltpZH49Iit1KyItXSIpLmxlbmd0aHx8cS5wdXNoKCJ+PSIpLGEucXVlcnlTZWxlY3RvckFsbCgiOmNoZWNrZWQiKS5sZW5ndGh8fHEucHVzaCgiOmNoZWNrZWQiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoImEjIit1KyIrKiIpLmxlbmd0aHx8cS5wdXNoKCIuIy4rWyt+XSIpfSksamEoZnVuY3Rpb24oYSl7dmFyIGI9Zy5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2Iuc2V0QXR0cmlidXRlKCJ0eXBlIiwiaGlkZGVuIiksYS5hcHBlbmRDaGlsZChiKS5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJEIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJbbmFtZT1kXSIpLmxlbmd0aCYmcS5wdXNoKCJuYW1lIitMKyIqWypeJHwhfl0/PSIpLGEucXVlcnlTZWxlY3RvckFsbCgiOmVuYWJsZWQiKS5sZW5ndGh8fHEucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKSxxLnB1c2goIiwuKjoiKX0pKSwoYy5tYXRjaGVzU2VsZWN0b3I9JC50ZXN0KHM9by5tYXRjaGVzfHxvLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8by5tb3pNYXRjaGVzU2VsZWN0b3J8fG8ub01hdGNoZXNTZWxlY3Rvcnx8by5tc01hdGNoZXNTZWxlY3RvcikpJiZqYShmdW5jdGlvbihhKXtjLmRpc2Nvbm5lY3RlZE1hdGNoPXMuY2FsbChhLCJkaXYiKSxzLmNhbGwoYSwiW3MhPScnXTp4Iiksci5wdXNoKCIhPSIsUCl9KSxxPXEubGVuZ3RoJiZuZXcgUmVnRXhwKHEuam9pbigifCIpKSxyPXIubGVuZ3RoJiZuZXcgUmVnRXhwKHIuam9pbigifCIpKSxiPSQudGVzdChvLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSx0PWJ8fCQudGVzdChvLmNvbnRhaW5zKT9mdW5jdGlvbihhLGIpe3ZhciBjPTk9PT1hLm5vZGVUeXBlP2EuZG9jdW1lbnRFbGVtZW50OmEsZD1iJiZiLnBhcmVudE5vZGU7cmV0dXJuIGE9PT1kfHwhKCFkfHwxIT09ZC5ub2RlVHlwZXx8IShjLmNvbnRhaW5zP2MuY29udGFpbnMoZCk6YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihkKSkpfTpmdW5jdGlvbihhLGIpe2lmKGIpd2hpbGUoYj1iLnBhcmVudE5vZGUpaWYoYj09PWEpcmV0dXJuITA7cmV0dXJuITF9LEI9Yj9mdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGQ9IWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24tIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247cmV0dXJuIGQ/ZDooZD0oYS5vd25lckRvY3VtZW50fHxhKT09PShiLm93bmVyRG9jdW1lbnR8fGIpP2EuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYik6MSwxJmR8fCFjLnNvcnREZXRhY2hlZCYmYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihhKT09PWQ/YT09PWd8fGEub3duZXJEb2N1bWVudD09PXYmJnQodixhKT8tMTpiPT09Z3x8Yi5vd25lckRvY3VtZW50PT09diYmdCh2LGIpPzE6az9KKGssYSktSihrLGIpOjA6NCZkPy0xOjEpfTpmdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGMsZD0wLGU9YS5wYXJlbnROb2RlLGY9Yi5wYXJlbnROb2RlLGg9W2FdLGk9W2JdO2lmKCFlfHwhZilyZXR1cm4gYT09PWc/LTE6Yj09PWc/MTplPy0xOmY/MTprP0ooayxhKS1KKGssYik6MDtpZihlPT09ZilyZXR1cm4gbGEoYSxiKTtjPWE7d2hpbGUoYz1jLnBhcmVudE5vZGUpaC51bnNoaWZ0KGMpO2M9Yjt3aGlsZShjPWMucGFyZW50Tm9kZSlpLnVuc2hpZnQoYyk7d2hpbGUoaFtkXT09PWlbZF0pZCsrO3JldHVybiBkP2xhKGhbZF0saVtkXSk6aFtkXT09PXY/LTE6aVtkXT09PXY/MTowfSxnKTpufSxnYS5tYXRjaGVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGdhKGEsbnVsbCxudWxsLGIpfSxnYS5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oYSxiKXtpZigoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksYj1iLnJlcGxhY2UoVSwiPSckMSddIiksISghYy5tYXRjaGVzU2VsZWN0b3J8fCFwfHxyJiZyLnRlc3QoYil8fHEmJnEudGVzdChiKSkpdHJ5e3ZhciBkPXMuY2FsbChhLGIpO2lmKGR8fGMuZGlzY29ubmVjdGVkTWF0Y2h8fGEuZG9jdW1lbnQmJjExIT09YS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gZH1jYXRjaChlKXt9cmV0dXJuIGdhKGIsbixudWxsLFthXSkubGVuZ3RoPjB9LGdhLmNvbnRhaW5zPWZ1bmN0aW9uKGEsYil7cmV0dXJuKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLHQoYSxiKX0sZ2EuYXR0cj1mdW5jdGlvbihhLGIpeyhhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKTt2YXIgZT1kLmF0dHJIYW5kbGVbYi50b0xvd2VyQ2FzZSgpXSxmPWUmJkQuY2FsbChkLmF0dHJIYW5kbGUsYi50b0xvd2VyQ2FzZSgpKT9lKGEsYiwhcCk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1mP2Y6Yy5hdHRyaWJ1dGVzfHwhcD9hLmdldEF0dHJpYnV0ZShiKTooZj1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZmLnNwZWNpZmllZD9mLnZhbHVlOm51bGx9LGdhLmVycm9yPWZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIithKX0sZ2EudW5pcXVlU29ydD1mdW5jdGlvbihhKXt2YXIgYixkPVtdLGU9MCxmPTA7aWYobD0hYy5kZXRlY3REdXBsaWNhdGVzLGs9IWMuc29ydFN0YWJsZSYmYS5zbGljZSgwKSxhLnNvcnQoQiksbCl7d2hpbGUoYj1hW2YrK10pYj09PWFbZl0mJihlPWQucHVzaChmKSk7d2hpbGUoZS0tKWEuc3BsaWNlKGRbZV0sMSl9cmV0dXJuIGs9bnVsbCxhfSxlPWdhLmdldFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz0iIixkPTAsZj1hLm5vZGVUeXBlO2lmKGYpe2lmKDE9PT1mfHw5PT09Znx8MTE9PT1mKXtpZigic3RyaW5nIj09dHlwZW9mIGEudGV4dENvbnRlbnQpcmV0dXJuIGEudGV4dENvbnRlbnQ7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWMrPWUoYSl9ZWxzZSBpZigzPT09Znx8ND09PWYpcmV0dXJuIGEubm9kZVZhbHVlfWVsc2Ugd2hpbGUoYj1hW2QrK10pYys9ZShiKTtyZXR1cm4gY30sZD1nYS5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzppYSxtYXRjaDpYLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7Ij4iOntkaXI6InBhcmVudE5vZGUiLGZpcnN0OiEwfSwiICI6e2RpcjoicGFyZW50Tm9kZSJ9LCIrIjp7ZGlyOiJwcmV2aW91c1NpYmxpbmciLGZpcnN0OiEwfSwifiI6e2RpcjoicHJldmlvdXNTaWJsaW5nIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnJlcGxhY2UoY2EsZGEpLGFbM109KGFbM118fGFbNF18fGFbNV18fCIiKS5yZXBsYWNlKGNhLGRhKSwifj0iPT09YVsyXSYmKGFbM109IiAiK2FbM10rIiAiKSxhLnNsaWNlKDAsNCl9LENISUxEOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0udG9Mb3dlckNhc2UoKSwibnRoIj09PWFbMV0uc2xpY2UoMCwzKT8oYVszXXx8Z2EuZXJyb3IoYVswXSksYVs0XT0rKGFbNF0/YVs1XSsoYVs2XXx8MSk6MiooImV2ZW4iPT09YVszXXx8Im9kZCI9PT1hWzNdKSksYVs1XT0rKGFbN10rYVs4XXx8Im9kZCI9PT1hWzNdKSk6YVszXSYmZ2EuZXJyb3IoYVswXSksYX0sUFNFVURPOmZ1bmN0aW9uKGEpe3ZhciBiLGM9IWFbNl0mJmFbMl07cmV0dXJuIFguQ0hJTEQudGVzdChhWzBdKT9udWxsOihhWzNdP2FbMl09YVs0XXx8YVs1XXx8IiI6YyYmVi50ZXN0KGMpJiYoYj1nKGMsITApKSYmKGI9Yy5pbmRleE9mKCIpIixjLmxlbmd0aC1iKS1jLmxlbmd0aCkmJihhWzBdPWFbMF0uc2xpY2UoMCxiKSxhWzJdPWMuc2xpY2UoMCxiKSksYS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShjYSxkYSkudG9Mb3dlckNhc2UoKTtyZXR1cm4iKiI9PT1hP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1ifX0sQ0xBU1M6ZnVuY3Rpb24oYSl7dmFyIGI9eVthKyIgIl07cmV0dXJuIGJ8fChiPW5ldyBSZWdFeHAoIihefCIrTCsiKSIrYSsiKCIrTCsifCQpIikpJiZ5KGEsZnVuY3Rpb24oYSl7cmV0dXJuIGIudGVzdCgic3RyaW5nIj09dHlwZW9mIGEuY2xhc3NOYW1lJiZhLmNsYXNzTmFtZXx8InVuZGVmaW5lZCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKX0pfSxBVFRSOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9Z2EuYXR0cihkLGEpO3JldHVybiBudWxsPT1lPyIhPSI9PT1iOmI/KGUrPSIiLCI9Ij09PWI/ZT09PWM6IiE9Ij09PWI/ZSE9PWM6Il49Ij09PWI/YyYmMD09PWUuaW5kZXhPZihjKToiKj0iPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6IiQ9Ij09PWI/YyYmZS5zbGljZSgtYy5sZW5ndGgpPT09Yzoifj0iPT09Yj8oIiAiK2UucmVwbGFjZShRLCIgIikrIiAiKS5pbmRleE9mKGMpPi0xOiJ8PSI9PT1iP2U9PT1jfHxlLnNsaWNlKDAsYy5sZW5ndGgrMSk9PT1jKyItIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPSJudGgiIT09YS5zbGljZSgwLDMpLGc9Imxhc3QiIT09YS5zbGljZSgtNCksaD0ib2YtdHlwZSI9PT1iO3JldHVybiAxPT09ZCYmMD09PWU/ZnVuY3Rpb24oYSl7cmV0dXJuISFhLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbSxuLG8scD1mIT09Zz8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoO2lmKHEpe2lmKGYpe3doaWxlKHApe2w9Yjt3aGlsZShsPWxbcF0paWYoaD9sLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1yOjE9PT1sLm5vZGVUeXBlKXJldHVybiExO289cD0ib25seSI9PT1hJiYhbyYmIm5leHRTaWJsaW5nIn1yZXR1cm4hMH1pZihvPVtnP3EuZmlyc3RDaGlsZDpxLmxhc3RDaGlsZF0sZyYmcyl7az1xW3VdfHwocVt1XT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLG09alswXT09PXcmJmpbMl0sbD1uJiZxLmNoaWxkTm9kZXNbbl07d2hpbGUobD0rK24mJmwmJmxbcF18fChtPW49MCl8fG8ucG9wKCkpaWYoMT09PWwubm9kZVR5cGUmJisrbSYmbD09PWIpe2tbYV09W3csbixtXTticmVha319ZWxzZSBpZihzJiYoaj0oYlt1XXx8KGJbdV09e30pKVthXSkmJmpbMF09PT13KW09alsxXTtlbHNlIHdoaWxlKGw9KytuJiZsJiZsW3BdfHwobT1uPTApfHxvLnBvcCgpKWlmKChoP2wubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PWwubm9kZVR5cGUpJiYrK20mJihzJiYoKGxbdV18fChsW3VdPXt9KSlbYV09W3csbV0pLGw9PT1iKSlicmVhaztyZXR1cm4gbS09ZSxtPT09ZHx8bSVkPT09MCYmbS9kPj0wfX19LFBTRVVETzpmdW5jdGlvbihhLGIpe3ZhciBjLGU9ZC5wc2V1ZG9zW2FdfHxkLnNldEZpbHRlcnNbYS50b0xvd2VyQ2FzZSgpXXx8Z2EuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIithKTtyZXR1cm4gZVt1XT9lKGIpOmUubGVuZ3RoPjE/KGM9W2EsYSwiIixiXSxkLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoYS50b0xvd2VyQ2FzZSgpKT9pYShmdW5jdGlvbihhLGMpe3ZhciBkLGY9ZShhLGIpLGc9Zi5sZW5ndGg7d2hpbGUoZy0tKWQ9SihhLGZbZ10pLGFbZF09IShjW2RdPWZbZ10pfSk6ZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSwwLGMpfSk6ZX19LHBzZXVkb3M6e25vdDppYShmdW5jdGlvbihhKXt2YXIgYj1bXSxjPVtdLGQ9aChhLnJlcGxhY2UoUiwiJDEiKSk7cmV0dXJuIGRbdV0/aWEoZnVuY3Rpb24oYSxiLGMsZSl7dmFyIGYsZz1kKGEsbnVsbCxlLFtdKSxoPWEubGVuZ3RoO3doaWxlKGgtLSkoZj1nW2hdKSYmKGFbaF09IShiW2hdPWYpKX0pOmZ1bmN0aW9uKGEsZSxmKXtyZXR1cm4gYlswXT1hLGQoYixudWxsLGYsYyksYlswXT1udWxsLCFjLnBvcCgpfX0pLGhhczppYShmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGdhKGEsYikubGVuZ3RoPjB9fSksY29udGFpbnM6aWEoZnVuY3Rpb24oYSl7cmV0dXJuIGE9YS5yZXBsYWNlKGNhLGRhKSxmdW5jdGlvbihiKXtyZXR1cm4oYi50ZXh0Q29udGVudHx8Yi5pbm5lclRleHR8fGUoYikpLmluZGV4T2YoYSk+LTF9fSksbGFuZzppYShmdW5jdGlvbihhKXtyZXR1cm4gVy50ZXN0KGF8fCIiKXx8Z2EuZXJyb3IoInVuc3VwcG9ydGVkIGxhbmc6ICIrYSksYT1hLnJlcGxhY2UoY2EsZGEpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24oYil7dmFyIGM7ZG8gaWYoYz1wP2IubGFuZzpiLmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8Yi5nZXRBdHRyaWJ1dGUoImxhbmciKSlyZXR1cm4gYz1jLnRvTG93ZXJDYXNlKCksYz09PWF8fDA9PT1jLmluZGV4T2YoYSsiLSIpO3doaWxlKChiPWIucGFyZW50Tm9kZSkmJjE9PT1iLm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24oYil7dmFyIGM9YS5sb2NhdGlvbiYmYS5sb2NhdGlvbi5oYXNoO3JldHVybiBjJiZjLnNsaWNlKDEpPT09Yi5pZH0scm9vdDpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW99LGZvY3VzOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09bi5hY3RpdmVFbGVtZW50JiYoIW4uaGFzRm9jdXN8fG4uaGFzRm9jdXMoKSkmJiEhKGEudHlwZXx8YS5ocmVmfHx+YS50YWJJbmRleCl9LGVuYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT0hMX0sZGlzYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT0hMH0sY2hlY2tlZDpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PWImJiEhYS5jaGVja2VkfHwib3B0aW9uIj09PWImJiEhYS5zZWxlY3RlZH0sc2VsZWN0ZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsYS5zZWxlY3RlZD09PSEwfSxlbXB0eTpmdW5jdGlvbihhKXtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpaWYoYS5ub2RlVHlwZTw2KXJldHVybiExO3JldHVybiEwfSxwYXJlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIWQucHNldWRvcy5lbXB0eShhKX0saGVhZGVyOmZ1bmN0aW9uKGEpe3JldHVybiBaLnRlc3QoYS5ub2RlTmFtZSl9LGlucHV0OmZ1bmN0aW9uKGEpe3JldHVybiBZLnRlc3QoYS5ub2RlTmFtZSl9LGJ1dHRvbjpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PWImJiJidXR0b24iPT09YS50eXBlfHwiYnV0dG9uIj09PWJ9LHRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuImlucHV0Ij09PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmInRleHQiPT09YS50eXBlJiYobnVsbD09KGI9YS5nZXRBdHRyaWJ1dGUoInR5cGUiKSl8fCJ0ZXh0Ij09PWIudG9Mb3dlckNhc2UoKSl9LGZpcnN0Om9hKGZ1bmN0aW9uKCl7cmV0dXJuWzBdfSksbGFzdDpvYShmdW5jdGlvbihhLGIpe3JldHVybltiLTFdfSksZXE6b2EoZnVuY3Rpb24oYSxiLGMpe3JldHVyblswPmM/YytiOmNdfSksZXZlbjpvYShmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2I+YztjKz0yKWEucHVzaChjKTtyZXR1cm4gYX0pLG9kZDpvYShmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0xO2I+YztjKz0yKWEucHVzaChjKTtyZXR1cm4gYX0pLGx0Om9hKGZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MD5jP2MrYjpjOy0tZD49MDspYS5wdXNoKGQpO3JldHVybiBhfSksZ3Q6b2EoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7KytkPGI7KWEucHVzaChkKTtyZXR1cm4gYX0pfX0sZC5wc2V1ZG9zLm50aD1kLnBzZXVkb3MuZXE7Zm9yKGIgaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0pZC5wc2V1ZG9zW2JdPW1hKGIpO2ZvcihiIGlue3N1Ym1pdDohMCxyZXNldDohMH0pZC5wc2V1ZG9zW2JdPW5hKGIpO2Z1bmN0aW9uIHFhKCl7fXFhLnByb3RvdHlwZT1kLmZpbHRlcnM9ZC5wc2V1ZG9zLGQuc2V0RmlsdGVycz1uZXcgcWEsZz1nYS50b2tlbml6ZT1mdW5jdGlvbihhLGIpe3ZhciBjLGUsZixnLGgsaSxqLGs9elthKyIgIl07aWYoaylyZXR1cm4gYj8wOmsuc2xpY2UoMCk7aD1hLGk9W10saj1kLnByZUZpbHRlcjt3aGlsZShoKXsoIWN8fChlPVMuZXhlYyhoKSkpJiYoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1ULmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFIsIiAiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1YW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/Z2EuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiByYShhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9IiI7Yz5iO2IrKylkKz1hW2JdLnZhbHVlO3JldHVybiBkfWZ1bmN0aW9uIHNhKGEsYixjKXt2YXIgZD1iLmRpcixlPWMmJiJwYXJlbnROb2RlIj09PWQsZj14Kys7cmV0dXJuIGIuZmlyc3Q/ZnVuY3Rpb24oYixjLGYpe3doaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSlyZXR1cm4gYShiLGMsZil9OmZ1bmN0aW9uKGIsYyxnKXt2YXIgaCxpLGo9W3csZl07aWYoZyl7d2hpbGUoYj1iW2RdKWlmKCgxPT09Yi5ub2RlVHlwZXx8ZSkmJmEoYixjLGcpKXJldHVybiEwfWVsc2Ugd2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxlKXtpZihpPWJbdV18fChiW3VdPXt9KSwoaD1pW2RdKSYmaFswXT09PXcmJmhbMV09PT1mKXJldHVybiBqWzJdPWhbMl07aWYoaVtkXT1qLGpbMl09YShiLGMsZykpcmV0dXJuITB9fX1mdW5jdGlvbiB0YShhKXtyZXR1cm4gYS5sZW5ndGg+MT9mdW5jdGlvbihiLGMsZCl7dmFyIGU9YS5sZW5ndGg7d2hpbGUoZS0tKWlmKCFhW2VdKGIsYyxkKSlyZXR1cm4hMTtyZXR1cm4hMH06YVswXX1mdW5jdGlvbiB1YShhLGIsYyl7Zm9yKHZhciBkPTAsZT1iLmxlbmd0aDtlPmQ7ZCsrKWdhKGEsYltkXSxjKTtyZXR1cm4gY31mdW5jdGlvbiB2YShhLGIsYyxkLGUpe2Zvcih2YXIgZixnPVtdLGg9MCxpPWEubGVuZ3RoLGo9bnVsbCE9YjtpPmg7aCsrKShmPWFbaF0pJiYoIWN8fGMoZixkLGUpKSYmKGcucHVzaChmKSxqJiZiLnB1c2goaCkpO3JldHVybiBnfWZ1bmN0aW9uIHdhKGEsYixjLGQsZSxmKXtyZXR1cm4gZCYmIWRbdV0mJihkPXdhKGQpKSxlJiYhZVt1XSYmKGU9d2EoZSxmKSksaWEoZnVuY3Rpb24oZixnLGgsaSl7dmFyIGosayxsLG09W10sbj1bXSxvPWcubGVuZ3RoLHA9Znx8dWEoYnx8IioiLGgubm9kZVR5cGU/W2hdOmgsW10pLHE9IWF8fCFmJiZiP3A6dmEocCxtLGEsaCxpKSxyPWM/ZXx8KGY/YTpvfHxkKT9bXTpnOnE7aWYoYyYmYyhxLHIsaCxpKSxkKXtqPXZhKHIsbiksZChqLFtdLGgsaSksaz1qLmxlbmd0aDt3aGlsZShrLS0pKGw9altrXSkmJihyW25ba11dPSEocVtuW2tdXT1sKSl9aWYoZil7aWYoZXx8YSl7aWYoZSl7aj1bXSxrPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmai5wdXNoKHFba109bCk7ZShudWxsLHI9W10saixpKX1rPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmKGo9ZT9KKGYsbCk6bVtrXSk+LTEmJihmW2pdPSEoZ1tqXT1sKSl9fWVsc2Ugcj12YShyPT09Zz9yLnNwbGljZShvLHIubGVuZ3RoKTpyKSxlP2UobnVsbCxnLHIsaSk6SC5hcHBseShnLHIpfSl9ZnVuY3Rpb24geGEoYSl7Zm9yKHZhciBiLGMsZSxmPWEubGVuZ3RoLGc9ZC5yZWxhdGl2ZVthWzBdLnR5cGVdLGg9Z3x8ZC5yZWxhdGl2ZVsiICJdLGk9Zz8xOjAsaz1zYShmdW5jdGlvbihhKXtyZXR1cm4gYT09PWJ9LGgsITApLGw9c2EoZnVuY3Rpb24oYSl7cmV0dXJuIEooYixhKT4tMX0saCwhMCksbT1bZnVuY3Rpb24oYSxjLGQpe3ZhciBlPSFnJiYoZHx8YyE9PWopfHwoKGI9Yykubm9kZVR5cGU/ayhhLGMsZCk6bChhLGMsZCkpO3JldHVybiBiPW51bGwsZX1dO2Y+aTtpKyspaWYoYz1kLnJlbGF0aXZlW2FbaV0udHlwZV0pbT1bc2EodGEobSksYyldO2Vsc2V7aWYoYz1kLmZpbHRlclthW2ldLnR5cGVdLmFwcGx5KG51bGwsYVtpXS5tYXRjaGVzKSxjW3VdKXtmb3IoZT0rK2k7Zj5lO2UrKylpZihkLnJlbGF0aXZlW2FbZV0udHlwZV0pYnJlYWs7cmV0dXJuIHdhKGk+MSYmdGEobSksaT4xJiZyYShhLnNsaWNlKDAsaS0xKS5jb25jYXQoe3ZhbHVlOiIgIj09PWFbaS0yXS50eXBlPyIqIjoiIn0pKS5yZXBsYWNlKFIsIiQxIiksYyxlPmkmJnhhKGEuc2xpY2UoaSxlKSksZj5lJiZ4YShhPWEuc2xpY2UoZSkpLGY+ZSYmcmEoYSkpfW0ucHVzaChjKX1yZXR1cm4gdGEobSl9ZnVuY3Rpb24geWEoYSxiKXt2YXIgYz1iLmxlbmd0aD4wLGU9YS5sZW5ndGg+MCxmPWZ1bmN0aW9uKGYsZyxoLGksayl7dmFyIGwsbSxvLHA9MCxxPSIwIixyPWYmJltdLHM9W10sdD1qLHU9Znx8ZSYmZC5maW5kLlRBRygiKiIsayksdj13Kz1udWxsPT10PzE6TWF0aC5yYW5kb20oKXx8LjEseD11Lmxlbmd0aDtmb3IoayYmKGo9ZyE9PW4mJmcpO3EhPT14JiZudWxsIT0obD11W3FdKTtxKyspe2lmKGUmJmwpe209MDt3aGlsZShvPWFbbSsrXSlpZihvKGwsZyxoKSl7aS5wdXNoKGwpO2JyZWFrfWsmJih3PXYpfWMmJigobD0hbyYmbCkmJnAtLSxmJiZyLnB1c2gobCkpfWlmKHArPXEsYyYmcSE9PXApe209MDt3aGlsZShvPWJbbSsrXSlvKHIscyxnLGgpO2lmKGYpe2lmKHA+MCl3aGlsZShxLS0pcltxXXx8c1txXXx8KHNbcV09Ri5jYWxsKGkpKTtzPXZhKHMpfUguYXBwbHkoaSxzKSxrJiYhZiYmcy5sZW5ndGg+MCYmcCtiLmxlbmd0aD4xJiZnYS51bmlxdWVTb3J0KGkpfXJldHVybiBrJiYodz12LGo9dCkscn07cmV0dXJuIGM/aWEoZik6Zn1yZXR1cm4gaD1nYS5jb21waWxlPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPVtdLGY9QVthKyIgIl07aWYoIWYpe2J8fChiPWcoYSkpLGM9Yi5sZW5ndGg7d2hpbGUoYy0tKWY9eGEoYltjXSksZlt1XT9kLnB1c2goZik6ZS5wdXNoKGYpO2Y9QShhLHlhKGUsZCkpLGYuc2VsZWN0b3I9YX1yZXR1cm4gZn0saT1nYS5zZWxlY3Q9ZnVuY3Rpb24oYSxiLGUsZil7dmFyIGksaixrLGwsbSxuPSJmdW5jdGlvbiI9PXR5cGVvZiBhJiZhLG89IWYmJmcoYT1uLnNlbGVjdG9yfHxhKTtpZihlPWV8fFtdLDE9PT1vLmxlbmd0aCl7aWYoaj1vWzBdPW9bMF0uc2xpY2UoMCksai5sZW5ndGg+MiYmIklEIj09PShrPWpbMF0pLnR5cGUmJmMuZ2V0QnlJZCYmOT09PWIubm9kZVR5cGUmJnAmJmQucmVsYXRpdmVbalsxXS50eXBlXSl7aWYoYj0oZC5maW5kLklEKGsubWF0Y2hlc1swXS5yZXBsYWNlKGNhLGRhKSxiKXx8W10pWzBdLCFiKXJldHVybiBlO24mJihiPWIucGFyZW50Tm9kZSksYT1hLnNsaWNlKGouc2hpZnQoKS52YWx1ZS5sZW5ndGgpfWk9WC5uZWVkc0NvbnRleHQudGVzdChhKT8wOmoubGVuZ3RoO3doaWxlKGktLSl7aWYoaz1qW2ldLGQucmVsYXRpdmVbbD1rLnR5cGVdKWJyZWFrO2lmKChtPWQuZmluZFtsXSkmJihmPW0oay5tYXRjaGVzWzBdLnJlcGxhY2UoY2EsZGEpLGFhLnRlc3QoalswXS50eXBlKSYmcGEoYi5wYXJlbnROb2RlKXx8YikpKXtpZihqLnNwbGljZShpLDEpLGE9Zi5sZW5ndGgmJnJhKGopLCFhKXJldHVybiBILmFwcGx5KGUsZiksZTticmVha319fXJldHVybihufHxoKGEsbykpKGYsYiwhcCxlLGFhLnRlc3QoYSkmJnBhKGIucGFyZW50Tm9kZSl8fGIpLGV9LGMuc29ydFN0YWJsZT11LnNwbGl0KCIiKS5zb3J0KEIpLmpvaW4oIiIpPT09dSxjLmRldGVjdER1cGxpY2F0ZXM9ISFsLG0oKSxjLnNvcnREZXRhY2hlZD1qYShmdW5jdGlvbihhKXtyZXR1cm4gMSZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG4uY3JlYXRlRWxlbWVudCgiZGl2IikpfSksamEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPSI8YSBocmVmPScjJz48L2E+IiwiIyI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIil9KXx8a2EoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYz92b2lkIDA6YS5nZXRBdHRyaWJ1dGUoYiwidHlwZSI9PT1iLnRvTG93ZXJDYXNlKCk/MToyKX0pLGMuYXR0cmlidXRlcyYmamEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPSI8aW5wdXQvPiIsYS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSwiIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIil9KXx8a2EoInZhbHVlIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGN8fCJpbnB1dCIhPT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk/dm9pZCAwOmEuZGVmYXVsdFZhbHVlfSksamEoZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWEuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpfSl8fGthKEssZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBjP3ZvaWQgMDphW2JdPT09ITA/Yi50b0xvd2VyQ2FzZSgpOihkPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmQuc3BlY2lmaWVkP2QudmFsdWU6bnVsbH0pLGdhfShhKTttLmZpbmQ9cyxtLmV4cHI9cy5zZWxlY3RvcnMsbS5leHByWyI6Il09bS5leHByLnBzZXVkb3MsbS51bmlxdWU9cy51bmlxdWVTb3J0LG0udGV4dD1zLmdldFRleHQsbS5pc1hNTERvYz1zLmlzWE1MLG0uY29udGFpbnM9cy5jb250YWluczt2YXIgdD1tLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LHU9L148KFx3KylccypcLz8+KD86PFwvXDE+fCkkLyx2PS9eLlteOiNcW1wuLF0qJC87ZnVuY3Rpb24gdyhhLGIsYyl7aWYobS5pc0Z1bmN0aW9uKGIpKXJldHVybiBtLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiEhYi5jYWxsKGEsZCxhKSE9PWN9KTtpZihiLm5vZGVUeXBlKXJldHVybiBtLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWIhPT1jfSk7aWYoInN0cmluZyI9PXR5cGVvZiBiKXtpZih2LnRlc3QoYikpcmV0dXJuIG0uZmlsdGVyKGIsYSxjKTtiPW0uZmlsdGVyKGIsYSl9cmV0dXJuIG0uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBtLmluQXJyYXkoYSxiKT49MCE9PWN9KX1tLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9Ijpub3QoIithKyIpIiksMT09PWIubGVuZ3RoJiYxPT09ZC5ub2RlVHlwZT9tLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGQsYSk/W2RdOltdOm0uZmluZC5tYXRjaGVzKGEsbS5ncmVwKGIsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfSkpfSxtLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXt2YXIgYixjPVtdLGQ9dGhpcyxlPWQubGVuZ3RoO2lmKCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2sobShhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2U+YjtiKyspaWYobS5jb250YWlucyhkW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihiPTA7ZT5iO2IrKyltLmZpbmQoYSxkW2JdLGMpO3JldHVybiBjPXRoaXMucHVzaFN0YWNrKGU+MT9tLnVuaXF1ZShjKTpjKSxjLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcisiICIrYTphLGN9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sodyh0aGlzLGF8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sodyh0aGlzLGF8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEhdyh0aGlzLCJzdHJpbmciPT10eXBlb2YgYSYmdC50ZXN0KGEpP20oYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgeCx5PWEuZG9jdW1lbnQsej0vXig/OlxzKig8W1x3XFddKz4pW14+XSp8IyhbXHctXSopKSQvLEE9bS5mbi5pbml0PWZ1bmN0aW9uKGEsYil7dmFyIGMsZDtpZighYSlyZXR1cm4gdGhpcztpZigic3RyaW5nIj09dHlwZW9mIGEpe2lmKGM9IjwiPT09YS5jaGFyQXQoMCkmJiI+Ij09PWEuY2hhckF0KGEubGVuZ3RoLTEpJiZhLmxlbmd0aD49Mz9bbnVsbCxhLG51bGxdOnouZXhlYyhhKSwhY3x8IWNbMV0mJmIpcmV0dXJuIWJ8fGIuanF1ZXJ5PyhifHx4KS5maW5kKGEpOnRoaXMuY29uc3RydWN0b3IoYikuZmluZChhKTtpZihjWzFdKXtpZihiPWIgaW5zdGFuY2VvZiBtP2JbMF06YixtLm1lcmdlKHRoaXMsbS5wYXJzZUhUTUwoY1sxXSxiJiZiLm5vZGVUeXBlP2Iub3duZXJEb2N1bWVudHx8Yjp5LCEwKSksdS50ZXN0KGNbMV0pJiZtLmlzUGxhaW5PYmplY3QoYikpZm9yKGMgaW4gYiltLmlzRnVuY3Rpb24odGhpc1tjXSk/dGhpc1tjXShiW2NdKTp0aGlzLmF0dHIoYyxiW2NdKTtyZXR1cm4gdGhpc31pZihkPXkuZ2V0RWxlbWVudEJ5SWQoY1syXSksZCYmZC5wYXJlbnROb2RlKXtpZihkLmlkIT09Y1syXSlyZXR1cm4geC5maW5kKGEpO3RoaXMubGVuZ3RoPTEsdGhpc1swXT1kfXJldHVybiB0aGlzLmNvbnRleHQ9eSx0aGlzLnNlbGVjdG9yPWEsdGhpc31yZXR1cm4gYS5ub2RlVHlwZT8odGhpcy5jb250ZXh0PXRoaXNbMF09YSx0aGlzLmxlbmd0aD0xLHRoaXMpOm0uaXNGdW5jdGlvbihhKT8idW5kZWZpbmVkIiE9dHlwZW9mIHgucmVhZHk/eC5yZWFkeShhKTphKG0pOih2b2lkIDAhPT1hLnNlbGVjdG9yJiYodGhpcy5zZWxlY3Rvcj1hLnNlbGVjdG9yLHRoaXMuY29udGV4dD1hLmNvbnRleHQpLG0ubWFrZUFycmF5KGEsdGhpcykpfTtBLnByb3RvdHlwZT1tLmZuLHg9bSh5KTt2YXIgQj0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxDPXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O20uZXh0ZW5kKHtkaXI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9YVtiXTt3aGlsZShlJiY5IT09ZS5ub2RlVHlwZSYmKHZvaWQgMD09PWN8fDEhPT1lLm5vZGVUeXBlfHwhbShlKS5pcyhjKSkpMT09PWUubm9kZVR5cGUmJmQucHVzaChlKSxlPWVbYl07cmV0dXJuIGR9LHNpYmxpbmc6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W107YTthPWEubmV4dFNpYmxpbmcpMT09PWEubm9kZVR5cGUmJmEhPT1iJiZjLnB1c2goYSk7cmV0dXJuIGN9fSksbS5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYixjPW0oYSx0aGlzKSxkPWMubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7ZD5iO2IrKylpZihtLmNvbnRhaW5zKHRoaXMsY1tiXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT10aGlzLmxlbmd0aCxmPVtdLGc9dC50ZXN0KGEpfHwic3RyaW5nIiE9dHlwZW9mIGE/bShhLGJ8fHRoaXMuY29udGV4dCk6MDtlPmQ7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmbS5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP20udW5pcXVlKGYpOmYpfSxpbmRleDpmdW5jdGlvbihhKXtyZXR1cm4gYT8ic3RyaW5nIj09dHlwZW9mIGE/bS5pbkFycmF5KHRoaXNbMF0sbShhKSk6bS5pbkFycmF5KGEuanF1ZXJ5P2FbMF06YSx0aGlzKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnB1c2hTdGFjayhtLnVuaXF1ZShtLm1lcmdlKHRoaXMuZ2V0KCksbShhLGIpKSkpfSxhZGRCYWNrOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFkZChudWxsPT1hP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGEpKX19KTtmdW5jdGlvbiBEKGEsYil7ZG8gYT1hW2JdO3doaWxlKGEmJjEhPT1hLm5vZGVUeXBlKTtyZXR1cm4gYX1tLmVhY2goe3BhcmVudDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJjExIT09Yi5ub2RlVHlwZT9iOm51bGx9LHBhcmVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIG0uZGlyKGEsInBhcmVudE5vZGUiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbS5kaXIoYSwicGFyZW50Tm9kZSIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEQoYSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gRChhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihhKXtyZXR1cm4gbS5kaXIoYSwibmV4dFNpYmxpbmciKX0scHJldkFsbDpmdW5jdGlvbihhKXtyZXR1cm4gbS5kaXIoYSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG0uZGlyKGEsIm5leHRTaWJsaW5nIixjKX0scHJldlVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbS5kaXIoYSwicHJldmlvdXNTaWJsaW5nIixjKX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIG0uc2libGluZygoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIG0uc2libGluZyhhLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gbS5ub2RlTmFtZShhLCJpZnJhbWUiKT9hLmNvbnRlbnREb2N1bWVudHx8YS5jb250ZW50V2luZG93LmRvY3VtZW50Om0ubWVyZ2UoW10sYS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGEsYil7bS5mblthXT1mdW5jdGlvbihjLGQpe3ZhciBlPW0ubWFwKHRoaXMsYixjKTtyZXR1cm4iVW50aWwiIT09YS5zbGljZSgtNSkmJihkPWMpLGQmJiJzdHJpbmciPT10eXBlb2YgZCYmKGU9bS5maWx0ZXIoZCxlKSksdGhpcy5sZW5ndGg+MSYmKENbYV18fChlPW0udW5pcXVlKGUpKSxCLnRlc3QoYSkmJihlPWUucmV2ZXJzZSgpKSksdGhpcy5wdXNoU3RhY2soZSl9fSk7dmFyIEU9L1xTKy9nLEY9e307ZnVuY3Rpb24gRyhhKXt2YXIgYj1GW2FdPXt9O3JldHVybiBtLmVhY2goYS5tYXRjaChFKXx8W10sZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSksYn1tLkNhbGxiYWNrcz1mdW5jdGlvbihhKXthPSJzdHJpbmciPT10eXBlb2YgYT9GW2FdfHxHKGEpOm0uZXh0ZW5kKHt9LGEpO3ZhciBiLGMsZCxlLGYsZyxoPVtdLGk9IWEub25jZSYmW10saj1mdW5jdGlvbihsKXtmb3IoYz1hLm1lbW9yeSYmbCxkPSEwLGY9Z3x8MCxnPTAsZT1oLmxlbmd0aCxiPSEwO2gmJmU+ZjtmKyspaWYoaFtmXS5hcHBseShsWzBdLGxbMV0pPT09ITEmJmEuc3RvcE9uRmFsc2Upe2M9ITE7YnJlYWt9Yj0hMSxoJiYoaT9pLmxlbmd0aCYmaihpLnNoaWZ0KCkpOmM/aD1bXTprLmRpc2FibGUoKSl9LGs9e2FkZDpmdW5jdGlvbigpe2lmKGgpe3ZhciBkPWgubGVuZ3RoOyFmdW5jdGlvbiBmKGIpe20uZWFjaChiLGZ1bmN0aW9uKGIsYyl7dmFyIGQ9bS50eXBlKGMpOyJmdW5jdGlvbiI9PT1kP2EudW5pcXVlJiZrLmhhcyhjKXx8aC5wdXNoKGMpOmMmJmMubGVuZ3RoJiYic3RyaW5nIiE9PWQmJmYoYyl9KX0oYXJndW1lbnRzKSxiP2U9aC5sZW5ndGg6YyYmKGc9ZCxqKGMpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGgmJm0uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxjKXt2YXIgZDt3aGlsZSgoZD1tLmluQXJyYXkoYyxoLGQpKT4tMSloLnNwbGljZShkLDEpLGImJihlPj1kJiZlLS0sZj49ZCYmZi0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9tLmluQXJyYXkoYSxoKT4tMTohKCFofHwhaC5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBoPVtdLGU9MCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGg9aT1jPXZvaWQgMCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFofSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGk9dm9pZCAwLGN8fGsuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiFpfSxmaXJlV2l0aDpmdW5jdGlvbihhLGMpe3JldHVybiFofHxkJiYhaXx8KGM9Y3x8W10sYz1bYSxjLnNsaWNlP2Muc2xpY2UoKTpjXSxiP2kucHVzaChjKTpqKGMpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGsuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFkfX07cmV0dXJuIGt9LG0uZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihhKXt2YXIgYj1bWyJyZXNvbHZlIiwiZG9uZSIsbS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIixtLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVqZWN0ZWQiXSxbIm5vdGlmeSIsInByb2dyZXNzIixtLkNhbGxiYWNrcygibWVtb3J5IildXSxjPSJwZW5kaW5nIixkPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBjfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gZS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7cmV0dXJuIG0uRGVmZXJyZWQoZnVuY3Rpb24oYyl7bS5lYWNoKGIsZnVuY3Rpb24oYixmKXt2YXIgZz1tLmlzRnVuY3Rpb24oYVtiXSkmJmFbYl07ZVtmWzFdXShmdW5jdGlvbigpe3ZhciBhPWcmJmcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EmJm0uaXNGdW5jdGlvbihhLnByb21pc2UpP2EucHJvbWlzZSgpLmRvbmUoYy5yZXNvbHZlKS5mYWlsKGMucmVqZWN0KS5wcm9ncmVzcyhjLm5vdGlmeSk6Y1tmWzBdKyJXaXRoIl0odGhpcz09PWQ/Yy5wcm9taXNlKCk6dGhpcyxnP1thXTphcmd1bWVudHMpfSl9KSxhPW51bGx9KS5wcm9taXNlKCl9LHByb21pc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWE/bS5leHRlbmQoYSxkKTpkfX0sZT17fTtyZXR1cm4gZC5waXBlPWQudGhlbixtLmVhY2goYixmdW5jdGlvbihhLGYpe3ZhciBnPWZbMl0saD1mWzNdO2RbZlsxXV09Zy5hZGQsaCYmZy5hZGQoZnVuY3Rpb24oKXtjPWh9LGJbMV5hXVsyXS5kaXNhYmxlLGJbMl1bMl0ubG9jayksZVtmWzBdXT1mdW5jdGlvbigpe3JldHVybiBlW2ZbMF0rIldpdGgiXSh0aGlzPT09ZT9kOnRoaXMsYXJndW1lbnRzKSx0aGlzfSxlW2ZbMF0rIldpdGgiXT1nLmZpcmVXaXRofSksZC5wcm9taXNlKGUpLGEmJmEuY2FsbChlLGUpLGV9LHdoZW46ZnVuY3Rpb24oYSl7dmFyIGI9MCxjPWQuY2FsbChhcmd1bWVudHMpLGU9Yy5sZW5ndGgsZj0xIT09ZXx8YSYmbS5pc0Z1bmN0aW9uKGEucHJvbWlzZSk/ZTowLGc9MT09PWY/YTptLkRlZmVycmVkKCksaD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGUpe2JbYV09dGhpcyxjW2FdPWFyZ3VtZW50cy5sZW5ndGg+MT9kLmNhbGwoYXJndW1lbnRzKTplLGM9PT1pP2cubm90aWZ5V2l0aChiLGMpOi0tZnx8Zy5yZXNvbHZlV2l0aChiLGMpfX0saSxqLGs7aWYoZT4xKWZvcihpPW5ldyBBcnJheShlKSxqPW5ldyBBcnJheShlKSxrPW5ldyBBcnJheShlKTtlPmI7YisrKWNbYl0mJm0uaXNGdW5jdGlvbihjW2JdLnByb21pc2UpP2NbYl0ucHJvbWlzZSgpLmRvbmUoaChiLGssYykpLmZhaWwoZy5yZWplY3QpLnByb2dyZXNzKGgoYixqLGkpKTotLWY7cmV0dXJuIGZ8fGcucmVzb2x2ZVdpdGgoayxjKSxnLnByb21pc2UoKX19KTt2YXIgSDttLmZuLnJlYWR5PWZ1bmN0aW9uKGEpe3JldHVybiBtLnJlYWR5LnByb21pc2UoKS5kb25lKGEpLHRoaXN9LG0uZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLGhvbGRSZWFkeTpmdW5jdGlvbihhKXthP20ucmVhZHlXYWl0Kys6bS5yZWFkeSghMCl9LHJlYWR5OmZ1bmN0aW9uKGEpe2lmKGE9PT0hMD8hLS1tLnJlYWR5V2FpdDohbS5pc1JlYWR5KXtpZigheS5ib2R5KXJldHVybiBzZXRUaW1lb3V0KG0ucmVhZHkpO20uaXNSZWFkeT0hMCxhIT09ITAmJi0tbS5yZWFkeVdhaXQ+MHx8KEgucmVzb2x2ZVdpdGgoeSxbbV0pLG0uZm4udHJpZ2dlckhhbmRsZXImJihtKHkpLnRyaWdnZXJIYW5kbGVyKCJyZWFkeSIpLG0oeSkub2ZmKCJyZWFkeSIpKSl9fX0pO2Z1bmN0aW9uIEkoKXt5LmFkZEV2ZW50TGlzdGVuZXI/KHkucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsSiwhMSksYS5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixKLCExKSk6KHkuZGV0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsSiksYS5kZXRhY2hFdmVudCgib25sb2FkIixKKSl9ZnVuY3Rpb24gSigpeyh5LmFkZEV2ZW50TGlzdGVuZXJ8fCJsb2FkIj09PWV2ZW50LnR5cGV8fCJjb21wbGV0ZSI9PT15LnJlYWR5U3RhdGUpJiYoSSgpLG0ucmVhZHkoKSl9bS5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKGIpe2lmKCFIKWlmKEg9bS5EZWZlcnJlZCgpLCJjb21wbGV0ZSI9PT15LnJlYWR5U3RhdGUpc2V0VGltZW91dChtLnJlYWR5KTtlbHNlIGlmKHkuYWRkRXZlbnRMaXN0ZW5lcil5LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLEosITEpLGEuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsSiwhMSk7ZWxzZXt5LmF0dGFjaEV2ZW50KCJvbnJlYWR5c3RhdGVjaGFuZ2UiLEopLGEuYXR0YWNoRXZlbnQoIm9ubG9hZCIsSik7dmFyIGM9ITE7dHJ5e2M9bnVsbD09YS5mcmFtZUVsZW1lbnQmJnkuZG9jdW1lbnRFbGVtZW50fWNhdGNoKGQpe31jJiZjLmRvU2Nyb2xsJiYhZnVuY3Rpb24gZSgpe2lmKCFtLmlzUmVhZHkpe3RyeXtjLmRvU2Nyb2xsKCJsZWZ0Iil9Y2F0Y2goYSl7cmV0dXJuIHNldFRpbWVvdXQoZSw1MCl9SSgpLG0ucmVhZHkoKX19KCl9cmV0dXJuIEgucHJvbWlzZShiKX07dmFyIEs9InVuZGVmaW5lZCIsTDtmb3IoTCBpbiBtKGspKWJyZWFrO2sub3duTGFzdD0iMCIhPT1MLGsuaW5saW5lQmxvY2tOZWVkc0xheW91dD0hMSxtKGZ1bmN0aW9uKCl7dmFyIGEsYixjLGQ7Yz15LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF0sYyYmYy5zdHlsZSYmKGI9eS5jcmVhdGVFbGVtZW50KCJkaXYiKSxkPXkuY3JlYXRlRWxlbWVudCgiZGl2IiksZC5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweCIsYy5hcHBlbmRDaGlsZChkKS5hcHBlbmRDaGlsZChiKSx0eXBlb2YgYi5zdHlsZS56b29tIT09SyYmKGIuc3R5bGUuY3NzVGV4dD0iZGlzcGxheTppbmxpbmU7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzoxcHg7d2lkdGg6MXB4O3pvb206MSIsay5pbmxpbmVCbG9ja05lZWRzTGF5b3V0PWE9Mz09PWIub2Zmc2V0V2lkdGgsYSYmKGMuc3R5bGUuem9vbT0xKSksYy5yZW1vdmVDaGlsZChkKSl9KSxmdW5jdGlvbigpe3ZhciBhPXkuY3JlYXRlRWxlbWVudCgiZGl2Iik7aWYobnVsbD09ay5kZWxldGVFeHBhbmRvKXtrLmRlbGV0ZUV4cGFuZG89ITA7dHJ5e2RlbGV0ZSBhLnRlc3R9Y2F0Y2goYil7ay5kZWxldGVFeHBhbmRvPSExfX1hPW51bGx9KCksbS5hY2NlcHREYXRhPWZ1bmN0aW9uKGEpe3ZhciBiPW0ubm9EYXRhWyhhLm5vZGVOYW1lKyIgIikudG9Mb3dlckNhc2UoKV0sYz0rYS5ub2RlVHlwZXx8MTtyZXR1cm4gMSE9PWMmJjkhPT1jPyExOiFifHxiIT09ITAmJmEuZ2V0QXR0cmlidXRlKCJjbGFzc2lkIik9PT1ifTt2YXIgTT0vXig/Olx7W1x3XFddKlx9fFxbW1x3XFddKlxdKSQvLE49LyhbQS1aXSkvZztmdW5jdGlvbiBPKGEsYixjKXtpZih2b2lkIDA9PT1jJiYxPT09YS5ub2RlVHlwZSl7dmFyIGQ9ImRhdGEtIitiLnJlcGxhY2UoTiwiLSQxIikudG9Mb3dlckNhc2UoKTtpZihjPWEuZ2V0QXR0cmlidXRlKGQpLCJzdHJpbmciPT10eXBlb2YgYyl7dHJ5e2M9InRydWUiPT09Yz8hMDoiZmFsc2UiPT09Yz8hMToibnVsbCI9PT1jP251bGw6K2MrIiI9PT1jPytjOk0udGVzdChjKT9tLnBhcnNlSlNPTihjKTpjfWNhdGNoKGUpe31tLmRhdGEoYSxiLGMpfWVsc2UgYz12b2lkIDB9cmV0dXJuIGN9ZnVuY3Rpb24gUChhKXt2YXIgYjtmb3IoYiBpbiBhKWlmKCgiZGF0YSIhPT1ifHwhbS5pc0VtcHR5T2JqZWN0KGFbYl0pKSYmInRvSlNPTiIhPT1iKXJldHVybiExOwoKcmV0dXJuITB9ZnVuY3Rpb24gUShhLGIsZCxlKXtpZihtLmFjY2VwdERhdGEoYSkpe3ZhciBmLGcsaD1tLmV4cGFuZG8saT1hLm5vZGVUeXBlLGo9aT9tLmNhY2hlOmEsaz1pP2FbaF06YVtoXSYmaDtpZihrJiZqW2tdJiYoZXx8altrXS5kYXRhKXx8dm9pZCAwIT09ZHx8InN0cmluZyIhPXR5cGVvZiBiKXJldHVybiBrfHwoaz1pP2FbaF09Yy5wb3AoKXx8bS5ndWlkKys6aCksaltrXXx8KGpba109aT97fTp7dG9KU09OOm0ubm9vcH0pLCgib2JqZWN0Ij09dHlwZW9mIGJ8fCJmdW5jdGlvbiI9PXR5cGVvZiBiKSYmKGU/altrXT1tLmV4dGVuZChqW2tdLGIpOmpba10uZGF0YT1tLmV4dGVuZChqW2tdLmRhdGEsYikpLGc9altrXSxlfHwoZy5kYXRhfHwoZy5kYXRhPXt9KSxnPWcuZGF0YSksdm9pZCAwIT09ZCYmKGdbbS5jYW1lbENhc2UoYildPWQpLCJzdHJpbmciPT10eXBlb2YgYj8oZj1nW2JdLG51bGw9PWYmJihmPWdbbS5jYW1lbENhc2UoYildKSk6Zj1nLGZ9fWZ1bmN0aW9uIFIoYSxiLGMpe2lmKG0uYWNjZXB0RGF0YShhKSl7dmFyIGQsZSxmPWEubm9kZVR5cGUsZz1mP20uY2FjaGU6YSxoPWY/YVttLmV4cGFuZG9dOm0uZXhwYW5kbztpZihnW2hdKXtpZihiJiYoZD1jP2dbaF06Z1toXS5kYXRhKSl7bS5pc0FycmF5KGIpP2I9Yi5jb25jYXQobS5tYXAoYixtLmNhbWVsQ2FzZSkpOmIgaW4gZD9iPVtiXTooYj1tLmNhbWVsQ2FzZShiKSxiPWIgaW4gZD9bYl06Yi5zcGxpdCgiICIpKSxlPWIubGVuZ3RoO3doaWxlKGUtLSlkZWxldGUgZFtiW2VdXTtpZihjPyFQKGQpOiFtLmlzRW1wdHlPYmplY3QoZCkpcmV0dXJufShjfHwoZGVsZXRlIGdbaF0uZGF0YSxQKGdbaF0pKSkmJihmP20uY2xlYW5EYXRhKFthXSwhMCk6ay5kZWxldGVFeHBhbmRvfHxnIT1nLndpbmRvdz9kZWxldGUgZ1toXTpnW2hdPW51bGwpfX19bS5leHRlbmQoe2NhY2hlOnt9LG5vRGF0YTp7ImFwcGxldCAiOiEwLCJlbWJlZCAiOiEwLCJvYmplY3QgIjoiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwIn0saGFzRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gYT1hLm5vZGVUeXBlP20uY2FjaGVbYVttLmV4cGFuZG9dXTphW20uZXhwYW5kb10sISFhJiYhUChhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIFEoYSxiLGMpfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFIoYSxiKX0sX2RhdGE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBRKGEsYixjLCEwKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUihhLGIsITApfX0pLG0uZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9dGhpc1swXSxnPWYmJmYuYXR0cmlidXRlcztpZih2b2lkIDA9PT1hKXtpZih0aGlzLmxlbmd0aCYmKGU9bS5kYXRhKGYpLDE9PT1mLm5vZGVUeXBlJiYhbS5fZGF0YShmLCJwYXJzZWRBdHRycyIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoImRhdGEtIikmJihkPW0uY2FtZWxDYXNlKGQuc2xpY2UoNSkpLE8oZixkLGVbZF0pKSk7bS5fZGF0YShmLCJwYXJzZWRBdHRycyIsITApfXJldHVybiBlfXJldHVybiJvYmplY3QiPT10eXBlb2YgYT90aGlzLmVhY2goZnVuY3Rpb24oKXttLmRhdGEodGhpcyxhKX0pOmFyZ3VtZW50cy5sZW5ndGg+MT90aGlzLmVhY2goZnVuY3Rpb24oKXttLmRhdGEodGhpcyxhLGIpfSk6Zj9PKGYsYSxtLmRhdGEoZixhKSk6dm9pZCAwfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXttLnJlbW92ZURhdGEodGhpcyxhKX0pfX0pLG0uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGE/KGI9KGJ8fCJmeCIpKyJxdWV1ZSIsZD1tLl9kYXRhKGEsYiksYyYmKCFkfHxtLmlzQXJyYXkoYyk/ZD1tLl9kYXRhKGEsYixtLm1ha2VBcnJheShjKSk6ZC5wdXNoKGMpKSxkfHxbXSk6dm9pZCAwfSxkZXF1ZXVlOmZ1bmN0aW9uKGEsYil7Yj1ifHwiZngiO3ZhciBjPW0ucXVldWUoYSxiKSxkPWMubGVuZ3RoLGU9Yy5zaGlmdCgpLGY9bS5fcXVldWVIb29rcyhhLGIpLGc9ZnVuY3Rpb24oKXttLmRlcXVldWUoYSxiKX07ImlucHJvZ3Jlc3MiPT09ZSYmKGU9Yy5zaGlmdCgpLGQtLSksZSYmKCJmeCI9PT1iJiZjLnVuc2hpZnQoImlucHJvZ3Jlc3MiKSxkZWxldGUgZi5zdG9wLGUuY2FsbChhLGcsZikpLCFkJiZmJiZmLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iKyJxdWV1ZUhvb2tzIjtyZXR1cm4gbS5fZGF0YShhLGMpfHxtLl9kYXRhKGEsYyx7ZW1wdHk6bS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7bS5fcmVtb3ZlRGF0YShhLGIrInF1ZXVlIiksbS5fcmVtb3ZlRGF0YShhLGMpfSl9KX19KSxtLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0yO3JldHVybiJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPSJmeCIsYy0tKSxhcmd1bWVudHMubGVuZ3RoPGM/bS5xdWV1ZSh0aGlzWzBdLGEpOnZvaWQgMD09PWI/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1tLnF1ZXVlKHRoaXMsYSxiKTttLl9xdWV1ZUhvb2tzKHRoaXMsYSksImZ4Ij09PWEmJiJpbnByb2dyZXNzIiE9PWNbMF0mJm0uZGVxdWV1ZSh0aGlzLGEpfSl9LGRlcXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe20uZGVxdWV1ZSh0aGlzLGEpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVldWUoYXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTEsZT1tLkRlZmVycmVkKCksZj10aGlzLGc9dGhpcy5sZW5ndGgsaD1mdW5jdGlvbigpey0tZHx8ZS5yZXNvbHZlV2l0aChmLFtmXSl9OyJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHwiZngiO3doaWxlKGctLSljPW0uX2RhdGEoZltnXSxhKyJxdWV1ZUhvb2tzIiksYyYmYy5lbXB0eSYmKGQrKyxjLmVtcHR5LmFkZChoKSk7cmV0dXJuIGgoKSxlLnByb21pc2UoYil9fSk7dmFyIFM9L1srLV0/KD86XGQqXC58KVxkKyg/OltlRV1bKy1dP1xkK3wpLy5zb3VyY2UsVD1bIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdLFU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1ifHxhLCJub25lIj09PW0uY3NzKGEsImRpc3BsYXkiKXx8IW0uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfSxWPW0uYWNjZXNzPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoPTAsaT1hLmxlbmd0aCxqPW51bGw9PWM7aWYoIm9iamVjdCI9PT1tLnR5cGUoYykpe2U9ITA7Zm9yKGggaW4gYyltLmFjY2VzcyhhLGIsaCxjW2hdLCEwLGYsZyl9ZWxzZSBpZih2b2lkIDAhPT1kJiYoZT0hMCxtLmlzRnVuY3Rpb24oZCl8fChnPSEwKSxqJiYoZz8oYi5jYWxsKGEsZCksYj1udWxsKTooaj1iLGI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBqLmNhbGwobShhKSxjKX0pKSxiKSlmb3IoO2k+aDtoKyspYihhW2hdLGMsZz9kOmQuY2FsbChhW2hdLGgsYihhW2hdLGMpKSk7cmV0dXJuIGU/YTpqP2IuY2FsbChhKTppP2IoYVswXSxjKTpmfSxXPS9eKD86Y2hlY2tib3h8cmFkaW8pJC9pOyFmdW5jdGlvbigpe3ZhciBhPXkuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxiPXkuY3JlYXRlRWxlbWVudCgiZGl2IiksYz15LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihiLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixrLmxlYWRpbmdXaGl0ZXNwYWNlPTM9PT1iLmZpcnN0Q2hpbGQubm9kZVR5cGUsay50Ym9keT0hYi5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKS5sZW5ndGgsay5odG1sU2VyaWFsaXplPSEhYi5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLmxlbmd0aCxrLmh0bWw1Q2xvbmU9Ijw6bmF2PjwvOm5hdj4iIT09eS5jcmVhdGVFbGVtZW50KCJuYXYiKS5jbG9uZU5vZGUoITApLm91dGVySFRNTCxhLnR5cGU9ImNoZWNrYm94IixhLmNoZWNrZWQ9ITAsYy5hcHBlbmRDaGlsZChhKSxrLmFwcGVuZENoZWNrZWQ9YS5jaGVja2VkLGIuaW5uZXJIVE1MPSI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+IixrLm5vQ2xvbmVDaGVja2VkPSEhYi5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWUsYy5hcHBlbmRDaGlsZChiKSxiLmlubmVySFRNTD0iPGlucHV0IHR5cGU9J3JhZGlvJyBjaGVja2VkPSdjaGVja2VkJyBuYW1lPSd0Jy8+IixrLmNoZWNrQ2xvbmU9Yi5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsay5ub0Nsb25lRXZlbnQ9ITAsYi5hdHRhY2hFdmVudCYmKGIuYXR0YWNoRXZlbnQoIm9uY2xpY2siLGZ1bmN0aW9uKCl7ay5ub0Nsb25lRXZlbnQ9ITF9KSxiLmNsb25lTm9kZSghMCkuY2xpY2soKSksbnVsbD09ay5kZWxldGVFeHBhbmRvKXtrLmRlbGV0ZUV4cGFuZG89ITA7dHJ5e2RlbGV0ZSBiLnRlc3R9Y2F0Y2goZCl7ay5kZWxldGVFeHBhbmRvPSExfX19KCksZnVuY3Rpb24oKXt2YXIgYixjLGQ9eS5jcmVhdGVFbGVtZW50KCJkaXYiKTtmb3IoYiBpbntzdWJtaXQ6ITAsY2hhbmdlOiEwLGZvY3VzaW46ITB9KWM9Im9uIitiLChrW2IrIkJ1YmJsZXMiXT1jIGluIGEpfHwoZC5zZXRBdHRyaWJ1dGUoYywidCIpLGtbYisiQnViYmxlcyJdPWQuYXR0cmlidXRlc1tjXS5leHBhbmRvPT09ITEpO2Q9bnVsbH0oKTt2YXIgWD0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYSkkL2ksWT0vXmtleS8sWj0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnUpfGNsaWNrLywkPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxfPS9eKFteLl0qKSg/OlwuKC4rKXwpJC87ZnVuY3Rpb24gYWEoKXtyZXR1cm4hMH1mdW5jdGlvbiBiYSgpe3JldHVybiExfWZ1bmN0aW9uIGNhKCl7dHJ5e3JldHVybiB5LmFjdGl2ZUVsZW1lbnR9Y2F0Y2goYSl7fX1tLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbixvLHAscSxyPW0uX2RhdGEoYSk7aWYocil7Yy5oYW5kbGVyJiYoaT1jLGM9aS5oYW5kbGVyLGU9aS5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW0uZ3VpZCsrKSwoZz1yLmV2ZW50cyl8fChnPXIuZXZlbnRzPXt9KSwoaz1yLmhhbmRsZSl8fChrPXIuaGFuZGxlPWZ1bmN0aW9uKGEpe3JldHVybiB0eXBlb2YgbT09PUt8fGEmJm0uZXZlbnQudHJpZ2dlcmVkPT09YS50eXBlP3ZvaWQgMDptLmV2ZW50LmRpc3BhdGNoLmFwcGx5KGsuZWxlbSxhcmd1bWVudHMpfSxrLmVsZW09YSksYj0oYnx8IiIpLm1hdGNoKEUpfHxbIiJdLGg9Yi5sZW5ndGg7d2hpbGUoaC0tKWY9Xy5leGVjKGJbaF0pfHxbXSxvPXE9ZlsxXSxwPShmWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksbyYmKGo9bS5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShlP2ouZGVsZWdhdGVUeXBlOmouYmluZFR5cGUpfHxvLGo9bS5ldmVudC5zcGVjaWFsW29dfHx7fSxsPW0uZXh0ZW5kKHt0eXBlOm8sb3JpZ1R5cGU6cSxkYXRhOmQsaGFuZGxlcjpjLGd1aWQ6Yy5ndWlkLHNlbGVjdG9yOmUsbmVlZHNDb250ZXh0OmUmJm0uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChlKSxuYW1lc3BhY2U6cC5qb2luKCIuIil9LGkpLChuPWdbb10pfHwobj1nW29dPVtdLG4uZGVsZWdhdGVDb3VudD0wLGouc2V0dXAmJmouc2V0dXAuY2FsbChhLGQscCxrKSE9PSExfHwoYS5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihvLGssITEpOmEuYXR0YWNoRXZlbnQmJmEuYXR0YWNoRXZlbnQoIm9uIitvLGspKSksai5hZGQmJihqLmFkZC5jYWxsKGEsbCksbC5oYW5kbGVyLmd1aWR8fChsLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP24uc3BsaWNlKG4uZGVsZWdhdGVDb3VudCsrLDAsbCk6bi5wdXNoKGwpLG0uZXZlbnQuZ2xvYmFsW29dPSEwKTthPW51bGx9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxuLG8scCxxLHI9bS5oYXNEYXRhKGEpJiZtLl9kYXRhKGEpO2lmKHImJihrPXIuZXZlbnRzKSl7Yj0oYnx8IiIpLm1hdGNoKEUpfHxbIiJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWlmKGg9Xy5leGVjKGJbal0pfHxbXSxvPXE9aFsxXSxwPShoWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksbyl7bD1tLmV2ZW50LnNwZWNpYWxbb118fHt9LG89KGQ/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG8sbj1rW29dfHxbXSxoPWhbMl0mJm5ldyBSZWdFeHAoIihefFxcLikiK3Auam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIiksaT1mPW4ubGVuZ3RoO3doaWxlKGYtLSlnPW5bZl0sIWUmJnEhPT1nLm9yaWdUeXBlfHxjJiZjLmd1aWQhPT1nLmd1aWR8fGgmJiFoLnRlc3QoZy5uYW1lc3BhY2UpfHxkJiZkIT09Zy5zZWxlY3RvciYmKCIqKiIhPT1kfHwhZy5zZWxlY3Rvcil8fChuLnNwbGljZShmLDEpLGcuc2VsZWN0b3ImJm4uZGVsZWdhdGVDb3VudC0tLGwucmVtb3ZlJiZsLnJlbW92ZS5jYWxsKGEsZykpO2kmJiFuLmxlbmd0aCYmKGwudGVhcmRvd24mJmwudGVhcmRvd24uY2FsbChhLHAsci5oYW5kbGUpIT09ITF8fG0ucmVtb3ZlRXZlbnQoYSxvLHIuaGFuZGxlKSxkZWxldGUga1tvXSl9ZWxzZSBmb3IobyBpbiBrKW0uZXZlbnQucmVtb3ZlKGEsbytiW2pdLGMsZCwhMCk7bS5pc0VtcHR5T2JqZWN0KGspJiYoZGVsZXRlIHIuaGFuZGxlLG0uX3JlbW92ZURhdGEoYSwiZXZlbnRzIikpfX0sdHJpZ2dlcjpmdW5jdGlvbihiLGMsZCxlKXt2YXIgZixnLGgsaSxrLGwsbixvPVtkfHx5XSxwPWouY2FsbChiLCJ0eXBlIik/Yi50eXBlOmIscT1qLmNhbGwoYiwibmFtZXNwYWNlIik/Yi5uYW1lc3BhY2Uuc3BsaXQoIi4iKTpbXTtpZihoPWw9ZD1kfHx5LDMhPT1kLm5vZGVUeXBlJiY4IT09ZC5ub2RlVHlwZSYmISQudGVzdChwK20uZXZlbnQudHJpZ2dlcmVkKSYmKHAuaW5kZXhPZigiLiIpPj0wJiYocT1wLnNwbGl0KCIuIikscD1xLnNoaWZ0KCkscS5zb3J0KCkpLGc9cC5pbmRleE9mKCI6Iik8MCYmIm9uIitwLGI9YlttLmV4cGFuZG9dP2I6bmV3IG0uRXZlbnQocCwib2JqZWN0Ij09dHlwZW9mIGImJmIpLGIuaXNUcmlnZ2VyPWU/MjozLGIubmFtZXNwYWNlPXEuam9pbigiLiIpLGIubmFtZXNwYWNlX3JlPWIubmFtZXNwYWNlP25ldyBSZWdFeHAoIihefFxcLikiK3Euam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbCxiLnJlc3VsdD12b2lkIDAsYi50YXJnZXR8fChiLnRhcmdldD1kKSxjPW51bGw9PWM/W2JdOm0ubWFrZUFycmF5KGMsW2JdKSxrPW0uZXZlbnQuc3BlY2lhbFtwXXx8e30sZXx8IWsudHJpZ2dlcnx8ay50cmlnZ2VyLmFwcGx5KGQsYykhPT0hMSkpe2lmKCFlJiYhay5ub0J1YmJsZSYmIW0uaXNXaW5kb3coZCkpe2ZvcihpPWsuZGVsZWdhdGVUeXBlfHxwLCQudGVzdChpK3ApfHwoaD1oLnBhcmVudE5vZGUpO2g7aD1oLnBhcmVudE5vZGUpby5wdXNoKGgpLGw9aDtsPT09KGQub3duZXJEb2N1bWVudHx8eSkmJm8ucHVzaChsLmRlZmF1bHRWaWV3fHxsLnBhcmVudFdpbmRvd3x8YSl9bj0wO3doaWxlKChoPW9bbisrXSkmJiFiLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpYi50eXBlPW4+MT9pOmsuYmluZFR5cGV8fHAsZj0obS5fZGF0YShoLCJldmVudHMiKXx8e30pW2IudHlwZV0mJm0uX2RhdGEoaCwiaGFuZGxlIiksZiYmZi5hcHBseShoLGMpLGY9ZyYmaFtnXSxmJiZmLmFwcGx5JiZtLmFjY2VwdERhdGEoaCkmJihiLnJlc3VsdD1mLmFwcGx5KGgsYyksYi5yZXN1bHQ9PT0hMSYmYi5wcmV2ZW50RGVmYXVsdCgpKTtpZihiLnR5cGU9cCwhZSYmIWIuaXNEZWZhdWx0UHJldmVudGVkKCkmJighay5fZGVmYXVsdHx8ay5fZGVmYXVsdC5hcHBseShvLnBvcCgpLGMpPT09ITEpJiZtLmFjY2VwdERhdGEoZCkmJmcmJmRbcF0mJiFtLmlzV2luZG93KGQpKXtsPWRbZ10sbCYmKGRbZ109bnVsbCksbS5ldmVudC50cmlnZ2VyZWQ9cDt0cnl7ZFtwXSgpfWNhdGNoKHIpe31tLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsbCYmKGRbZ109bCl9cmV0dXJuIGIucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1tLmV2ZW50LmZpeChhKTt2YXIgYixjLGUsZixnLGg9W10saT1kLmNhbGwoYXJndW1lbnRzKSxqPShtLl9kYXRhKHRoaXMsImV2ZW50cyIpfHx7fSlbYS50eXBlXXx8W10saz1tLmV2ZW50LnNwZWNpYWxbYS50eXBlXXx8e307aWYoaVswXT1hLGEuZGVsZWdhdGVUYXJnZXQ9dGhpcywhay5wcmVEaXNwYXRjaHx8ay5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsYSkhPT0hMSl7aD1tLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxhLGopLGI9MDt3aGlsZSgoZj1oW2IrK10pJiYhYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXthLmN1cnJlbnRUYXJnZXQ9Zi5lbGVtLGc9MDt3aGlsZSgoZT1mLmhhbmRsZXJzW2crK10pJiYhYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSghYS5uYW1lc3BhY2VfcmV8fGEubmFtZXNwYWNlX3JlLnRlc3QoZS5uYW1lc3BhY2UpKSYmKGEuaGFuZGxlT2JqPWUsYS5kYXRhPWUuZGF0YSxjPSgobS5ldmVudC5zcGVjaWFsW2Uub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxlLmhhbmRsZXIpLmFwcGx5KGYuZWxlbSxpKSx2b2lkIDAhPT1jJiYoYS5yZXN1bHQ9Yyk9PT0hMSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGsucG9zdERpc3BhdGNoJiZrLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsYSksYS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9W10saD1iLmRlbGVnYXRlQ291bnQsaT1hLnRhcmdldDtpZihoJiZpLm5vZGVUeXBlJiYoIWEuYnV0dG9ufHwiY2xpY2siIT09YS50eXBlKSlmb3IoO2khPXRoaXM7aT1pLnBhcmVudE5vZGV8fHRoaXMpaWYoMT09PWkubm9kZVR5cGUmJihpLmRpc2FibGVkIT09ITB8fCJjbGljayIhPT1hLnR5cGUpKXtmb3IoZT1bXSxmPTA7aD5mO2YrKylkPWJbZl0sYz1kLnNlbGVjdG9yKyIgIix2b2lkIDA9PT1lW2NdJiYoZVtjXT1kLm5lZWRzQ29udGV4dD9tKGMsdGhpcykuaW5kZXgoaSk+PTA6bS5maW5kKGMsdGhpcyxudWxsLFtpXSkubGVuZ3RoKSxlW2NdJiZlLnB1c2goZCk7ZS5sZW5ndGgmJmcucHVzaCh7ZWxlbTppLGhhbmRsZXJzOmV9KX1yZXR1cm4gaDxiLmxlbmd0aCYmZy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6Yi5zbGljZShoKX0pLGd9LGZpeDpmdW5jdGlvbihhKXtpZihhW20uZXhwYW5kb10pcmV0dXJuIGE7dmFyIGIsYyxkLGU9YS50eXBlLGY9YSxnPXRoaXMuZml4SG9va3NbZV07Z3x8KHRoaXMuZml4SG9va3NbZV09Zz1aLnRlc3QoZSk/dGhpcy5tb3VzZUhvb2tzOlkudGVzdChlKT90aGlzLmtleUhvb2tzOnt9KSxkPWcucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQoZy5wcm9wcyk6dGhpcy5wcm9wcyxhPW5ldyBtLkV2ZW50KGYpLGI9ZC5sZW5ndGg7d2hpbGUoYi0tKWM9ZFtiXSxhW2NdPWZbY107cmV0dXJuIGEudGFyZ2V0fHwoYS50YXJnZXQ9Zi5zcmNFbGVtZW50fHx5KSwzPT09YS50YXJnZXQubm9kZVR5cGUmJihhLnRhcmdldD1hLnRhcmdldC5wYXJlbnROb2RlKSxhLm1ldGFLZXk9ISFhLm1ldGFLZXksZy5maWx0ZXI/Zy5maWx0ZXIoYSxmKTphfSxwcm9wczoiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoIi5zcGxpdCgiICIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczoiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZSIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YS53aGljaCYmKGEud2hpY2g9bnVsbCE9Yi5jaGFyQ29kZT9iLmNoYXJDb2RlOmIua2V5Q29kZSksYX19LG1vdXNlSG9va3M6e3Byb3BzOiJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgZnJvbUVsZW1lbnQgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnQiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9Yi5idXR0b24sZz1iLmZyb21FbGVtZW50O3JldHVybiBudWxsPT1hLnBhZ2VYJiZudWxsIT1iLmNsaWVudFgmJihkPWEudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fHksZT1kLmRvY3VtZW50RWxlbWVudCxjPWQuYm9keSxhLnBhZ2VYPWIuY2xpZW50WCsoZSYmZS5zY3JvbGxMZWZ0fHxjJiZjLnNjcm9sbExlZnR8fDApLShlJiZlLmNsaWVudExlZnR8fGMmJmMuY2xpZW50TGVmdHx8MCksYS5wYWdlWT1iLmNsaWVudFkrKGUmJmUuc2Nyb2xsVG9wfHxjJiZjLnNjcm9sbFRvcHx8MCktKGUmJmUuY2xpZW50VG9wfHxjJiZjLmNsaWVudFRvcHx8MCkpLCFhLnJlbGF0ZWRUYXJnZXQmJmcmJihhLnJlbGF0ZWRUYXJnZXQ9Zz09PWEudGFyZ2V0P2IudG9FbGVtZW50OmcpLGEud2hpY2h8fHZvaWQgMD09PWZ8fChhLndoaWNoPTEmZj8xOjImZj8zOjQmZj8yOjApLGF9fSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzIT09Y2EoKSYmdGhpcy5mb2N1cyl0cnl7cmV0dXJuIHRoaXMuZm9jdXMoKSwhMX1jYXRjaChhKXt9fSxkZWxlZ2F0ZVR5cGU6ImZvY3VzaW4ifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM9PT1jYSgpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiBtLm5vZGVOYW1lKHRoaXMsImlucHV0IikmJiJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2s/KHRoaXMuY2xpY2soKSwhMSk6dm9pZCAwfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gbS5ub2RlTmFtZShhLnRhcmdldCwiYSIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7dm9pZCAwIT09YS5yZXN1bHQmJmEub3JpZ2luYWxFdmVudCYmKGEub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1hLnJlc3VsdCl9fX0sc2ltdWxhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9bS5leHRlbmQobmV3IG0uRXZlbnQsYyx7dHlwZTphLGlzU2ltdWxhdGVkOiEwLG9yaWdpbmFsRXZlbnQ6e319KTtkP20uZXZlbnQudHJpZ2dlcihlLG51bGwsYik6bS5ldmVudC5kaXNwYXRjaC5jYWxsKGIsZSksZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmYy5wcmV2ZW50RGVmYXVsdCgpfX0sbS5yZW1vdmVFdmVudD15LnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYywhMSl9OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0ib24iK2I7YS5kZXRhY2hFdmVudCYmKHR5cGVvZiBhW2RdPT09SyYmKGFbZF09bnVsbCksYS5kZXRhY2hFdmVudChkLGMpKX0sbS5FdmVudD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgbS5FdmVudD8oYSYmYS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9YSx0aGlzLnR5cGU9YS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWEuZGVmYXVsdFByZXZlbnRlZHx8dm9pZCAwPT09YS5kZWZhdWx0UHJldmVudGVkJiZhLnJldHVyblZhbHVlPT09ITE/YWE6YmEpOnRoaXMudHlwZT1hLGImJm0uZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fG0ubm93KCksdm9pZCh0aGlzW20uZXhwYW5kb109ITApKTpuZXcgbS5FdmVudChhLGIpfSxtLkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOmJhLGlzUHJvcGFnYXRpb25TdG9wcGVkOmJhLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOmJhLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPWFhLGEmJihhLnByZXZlbnREZWZhdWx0P2EucHJldmVudERlZmF1bHQoKTphLnJldHVyblZhbHVlPSExKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9YWEsYSYmKGEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpLGEuY2FuY2VsQnViYmxlPSEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9YWEsYSYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24mJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LG0uZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oYSxiKXttLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybighZXx8ZSE9PWQmJiFtLmNvbnRhaW5zKGQsZSkpJiYoYS50eXBlPWYub3JpZ1R5cGUsYz1mLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGEudHlwZT1iKSxjfX19KSxrLnN1Ym1pdEJ1YmJsZXN8fChtLmV2ZW50LnNwZWNpYWwuc3VibWl0PXtzZXR1cDpmdW5jdGlvbigpe3JldHVybiBtLm5vZGVOYW1lKHRoaXMsImZvcm0iKT8hMTp2b2lkIG0uZXZlbnQuYWRkKHRoaXMsImNsaWNrLl9zdWJtaXQga2V5cHJlc3MuX3N1Ym1pdCIsZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQsYz1tLm5vZGVOYW1lKGIsImlucHV0Iil8fG0ubm9kZU5hbWUoYiwiYnV0dG9uIik/Yi5mb3JtOnZvaWQgMDtjJiYhbS5fZGF0YShjLCJzdWJtaXRCdWJibGVzIikmJihtLmV2ZW50LmFkZChjLCJzdWJtaXQuX3N1Ym1pdCIsZnVuY3Rpb24oYSl7YS5fc3VibWl0X2J1YmJsZT0hMH0pLG0uX2RhdGEoYywic3VibWl0QnViYmxlcyIsITApKX0pfSxwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YS5fc3VibWl0X2J1YmJsZSYmKGRlbGV0ZSBhLl9zdWJtaXRfYnViYmxlLHRoaXMucGFyZW50Tm9kZSYmIWEuaXNUcmlnZ2VyJiZtLmV2ZW50LnNpbXVsYXRlKCJzdWJtaXQiLHRoaXMucGFyZW50Tm9kZSxhLCEwKSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7cmV0dXJuIG0ubm9kZU5hbWUodGhpcywiZm9ybSIpPyExOnZvaWQgbS5ldmVudC5yZW1vdmUodGhpcywiLl9zdWJtaXQiKX19KSxrLmNoYW5nZUJ1YmJsZXN8fChtLmV2ZW50LnNwZWNpYWwuY2hhbmdlPXtzZXR1cDpmdW5jdGlvbigpe3JldHVybiBYLnRlc3QodGhpcy5ub2RlTmFtZSk/KCgiY2hlY2tib3giPT09dGhpcy50eXBlfHwicmFkaW8iPT09dGhpcy50eXBlKSYmKG0uZXZlbnQuYWRkKHRoaXMsInByb3BlcnR5Y2hhbmdlLl9jaGFuZ2UiLGZ1bmN0aW9uKGEpeyJjaGVja2VkIj09PWEub3JpZ2luYWxFdmVudC5wcm9wZXJ0eU5hbWUmJih0aGlzLl9qdXN0X2NoYW5nZWQ9ITApfSksbS5ldmVudC5hZGQodGhpcywiY2xpY2suX2NoYW5nZSIsZnVuY3Rpb24oYSl7dGhpcy5fanVzdF9jaGFuZ2VkJiYhYS5pc1RyaWdnZXImJih0aGlzLl9qdXN0X2NoYW5nZWQ9ITEpLG0uZXZlbnQuc2ltdWxhdGUoImNoYW5nZSIsdGhpcyxhLCEwKX0pKSwhMSk6dm9pZCBtLmV2ZW50LmFkZCh0aGlzLCJiZWZvcmVhY3RpdmF0ZS5fY2hhbmdlIixmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldDtYLnRlc3QoYi5ub2RlTmFtZSkmJiFtLl9kYXRhKGIsImNoYW5nZUJ1YmJsZXMiKSYmKG0uZXZlbnQuYWRkKGIsImNoYW5nZS5fY2hhbmdlIixmdW5jdGlvbihhKXshdGhpcy5wYXJlbnROb2RlfHxhLmlzU2ltdWxhdGVkfHxhLmlzVHJpZ2dlcnx8bS5ldmVudC5zaW11bGF0ZSgiY2hhbmdlIix0aGlzLnBhcmVudE5vZGUsYSwhMCl9KSxtLl9kYXRhKGIsImNoYW5nZUJ1YmJsZXMiLCEwKSl9KX0saGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0O3JldHVybiB0aGlzIT09Ynx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fCJyYWRpbyIhPT1iLnR5cGUmJiJjaGVja2JveCIhPT1iLnR5cGU/YS5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfSx0ZWFyZG93bjpmdW5jdGlvbigpe3JldHVybiBtLmV2ZW50LnJlbW92ZSh0aGlzLCIuX2NoYW5nZSIpLCFYLnRlc3QodGhpcy5ub2RlTmFtZSl9fSksay5mb2N1c2luQnViYmxlc3x8bS5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe20uZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxtLmV2ZW50LmZpeChhKSwhMCl9O20uZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1tLl9kYXRhKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksbS5fZGF0YShkLGIsKGV8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPW0uX2RhdGEoZCxiKS0xO2U/bS5fZGF0YShkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLG0uX3JlbW92ZURhdGEoZCxiKSl9fX0pLG0uZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGc7aWYoIm9iamVjdCI9PXR5cGVvZiBhKXsic3RyaW5nIiE9dHlwZW9mIGImJihjPWN8fGIsYj12b2lkIDApO2ZvcihmIGluIGEpdGhpcy5vbihmLGIsYyxhW2ZdLGUpO3JldHVybiB0aGlzfWlmKG51bGw9PWMmJm51bGw9PWQ/KGQ9YixjPWI9dm9pZCAwKTpudWxsPT1kJiYoInN0cmluZyI9PXR5cGVvZiBiPyhkPWMsYz12b2lkIDApOihkPWMsYz1iLGI9dm9pZCAwKSksZD09PSExKWQ9YmE7ZWxzZSBpZighZClyZXR1cm4gdGhpcztyZXR1cm4gMT09PWUmJihnPWQsZD1mdW5jdGlvbihhKXtyZXR1cm4gbSgpLm9mZihhKSxnLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZC5ndWlkPWcuZ3VpZHx8KGcuZ3VpZD1tLmd1aWQrKykpLHRoaXMuZWFjaChmdW5jdGlvbigpe20uZXZlbnQuYWRkKHRoaXMsYSxkLGMsYil9KX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm9uKGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixtKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlKyIuIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgYSl7Zm9yKGUgaW4gYSl0aGlzLm9mZihlLGIsYVtlXSk7cmV0dXJuIHRoaXN9cmV0dXJuKGI9PT0hMXx8ImZ1bmN0aW9uIj09dHlwZW9mIGIpJiYoYz1iLGI9dm9pZCAwKSxjPT09ITEmJihjPWJhKSx0aGlzLmVhY2goZnVuY3Rpb24oKXttLmV2ZW50LnJlbW92ZSh0aGlzLGEsYyxiKX0pfSx0cmlnZ2VyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe20uZXZlbnQudHJpZ2dlcihhLGIsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzWzBdO3JldHVybiBjP20uZXZlbnQudHJpZ2dlcihhLGIsYywhMCk6dm9pZCAwfX0pO2Z1bmN0aW9uIGRhKGEpe3ZhciBiPWVhLnNwbGl0KCJ8IiksYz1hLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihjLmNyZWF0ZUVsZW1lbnQpd2hpbGUoYi5sZW5ndGgpYy5jcmVhdGVFbGVtZW50KGIucG9wKCkpO3JldHVybiBjfXZhciBlYT0iYWJicnxhcnRpY2xlfGFzaWRlfGF1ZGlvfGJkaXxjYW52YXN8ZGF0YXxkYXRhbGlzdHxkZXRhaWxzfGZpZ2NhcHRpb258ZmlndXJlfGZvb3RlcnxoZWFkZXJ8aGdyb3VwfG1hcmt8bWV0ZXJ8bmF2fG91dHB1dHxwcm9ncmVzc3xzZWN0aW9ufHN1bW1hcnl8dGltZXx2aWRlbyIsZmE9LyBqUXVlcnlcZCs9Iig/Om51bGx8XGQrKSIvZyxnYT1uZXcgUmVnRXhwKCI8KD86IitlYSsiKVtcXHMvPl0iLCJpIiksaGE9L15ccysvLGlhPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzpdKylbXj5dKilcLz4vZ2ksamE9LzwoW1x3Ol0rKS8sa2E9Lzx0Ym9keS9pLGxhPS88fCYjP1x3KzsvLG1hPS88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksbmE9L2NoZWNrZWRccyooPzpbXj1dfD1ccyouY2hlY2tlZC4pL2ksb2E9L14kfFwvKD86amF2YXxlY21hKXNjcmlwdC9pLHBhPS9edHJ1ZVwvKC4qKS8scWE9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nLHJhPXtvcHRpb246WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSxsZWdlbmQ6WzEsIjxmaWVsZHNldD4iLCI8L2ZpZWxkc2V0PiJdLGFyZWE6WzEsIjxtYXA+IiwiPC9tYXA+Il0scGFyYW06WzEsIjxvYmplY3Q+IiwiPC9vYmplY3Q+Il0sdGhlYWQ6WzEsIjx0YWJsZT4iLCI8L3RhYmxlPiJdLHRyOlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSxjb2w6WzIsIjx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3RhYmxlPiJdLHRkOlszLCI8dGFibGU+PHRib2R5Pjx0cj4iLCI8L3RyPjwvdGJvZHk+PC90YWJsZT4iXSxfZGVmYXVsdDprLmh0bWxTZXJpYWxpemU/WzAsIiIsIiJdOlsxLCJYPGRpdj4iLCI8L2Rpdj4iXX0sc2E9ZGEoeSksdGE9c2EuYXBwZW5kQ2hpbGQoeS5jcmVhdGVFbGVtZW50KCJkaXYiKSk7cmEub3B0Z3JvdXA9cmEub3B0aW9uLHJhLnRib2R5PXJhLnRmb290PXJhLmNvbGdyb3VwPXJhLmNhcHRpb249cmEudGhlYWQscmEudGg9cmEudGQ7ZnVuY3Rpb24gdWEoYSxiKXt2YXIgYyxkLGU9MCxmPXR5cGVvZiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lIT09Sz9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGJ8fCIqIik6dHlwZW9mIGEucXVlcnlTZWxlY3RvckFsbCE9PUs/YS5xdWVyeVNlbGVjdG9yQWxsKGJ8fCIqIik6dm9pZCAwO2lmKCFmKWZvcihmPVtdLGM9YS5jaGlsZE5vZGVzfHxhO251bGwhPShkPWNbZV0pO2UrKykhYnx8bS5ub2RlTmFtZShkLGIpP2YucHVzaChkKTptLm1lcmdlKGYsdWEoZCxiKSk7cmV0dXJuIHZvaWQgMD09PWJ8fGImJm0ubm9kZU5hbWUoYSxiKT9tLm1lcmdlKFthXSxmKTpmfWZ1bmN0aW9uIHZhKGEpe1cudGVzdChhLnR5cGUpJiYoYS5kZWZhdWx0Q2hlY2tlZD1hLmNoZWNrZWQpfWZ1bmN0aW9uIHdhKGEsYil7cmV0dXJuIG0ubm9kZU5hbWUoYSwidGFibGUiKSYmbS5ub2RlTmFtZSgxMSE9PWIubm9kZVR5cGU/YjpiLmZpcnN0Q2hpbGQsInRyIik/YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKVswXXx8YS5hcHBlbmRDaGlsZChhLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGJvZHkiKSk6YX1mdW5jdGlvbiB4YShhKXtyZXR1cm4gYS50eXBlPShudWxsIT09bS5maW5kLmF0dHIoYSwidHlwZSIpKSsiLyIrYS50eXBlLGF9ZnVuY3Rpb24geWEoYSl7dmFyIGI9cGEuZXhlYyhhLnR5cGUpO3JldHVybiBiP2EudHlwZT1iWzFdOmEucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksYX1mdW5jdGlvbiB6YShhLGIpe2Zvcih2YXIgYyxkPTA7bnVsbCE9KGM9YVtkXSk7ZCsrKW0uX2RhdGEoYywiZ2xvYmFsRXZhbCIsIWJ8fG0uX2RhdGEoYltkXSwiZ2xvYmFsRXZhbCIpKX1mdW5jdGlvbiBBYShhLGIpe2lmKDE9PT1iLm5vZGVUeXBlJiZtLmhhc0RhdGEoYSkpe3ZhciBjLGQsZSxmPW0uX2RhdGEoYSksZz1tLl9kYXRhKGIsZiksaD1mLmV2ZW50cztpZihoKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGMgaW4gaClmb3IoZD0wLGU9aFtjXS5sZW5ndGg7ZT5kO2QrKyltLmV2ZW50LmFkZChiLGMsaFtjXVtkXSl9Zy5kYXRhJiYoZy5kYXRhPW0uZXh0ZW5kKHt9LGcuZGF0YSkpfX1mdW5jdGlvbiBCYShhLGIpe3ZhciBjLGQsZTtpZigxPT09Yi5ub2RlVHlwZSl7aWYoYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksIWsubm9DbG9uZUV2ZW50JiZiW20uZXhwYW5kb10pe2U9bS5fZGF0YShiKTtmb3IoZCBpbiBlLmV2ZW50cyltLnJlbW92ZUV2ZW50KGIsZCxlLmhhbmRsZSk7Yi5yZW1vdmVBdHRyaWJ1dGUobS5leHBhbmRvKX0ic2NyaXB0Ij09PWMmJmIudGV4dCE9PWEudGV4dD8oeGEoYikudGV4dD1hLnRleHQseWEoYikpOiJvYmplY3QiPT09Yz8oYi5wYXJlbnROb2RlJiYoYi5vdXRlckhUTUw9YS5vdXRlckhUTUwpLGsuaHRtbDVDbG9uZSYmYS5pbm5lckhUTUwmJiFtLnRyaW0oYi5pbm5lckhUTUwpJiYoYi5pbm5lckhUTUw9YS5pbm5lckhUTUwpKToiaW5wdXQiPT09YyYmVy50ZXN0KGEudHlwZSk/KGIuZGVmYXVsdENoZWNrZWQ9Yi5jaGVja2VkPWEuY2hlY2tlZCxiLnZhbHVlIT09YS52YWx1ZSYmKGIudmFsdWU9YS52YWx1ZSkpOiJvcHRpb24iPT09Yz9iLmRlZmF1bHRTZWxlY3RlZD1iLnNlbGVjdGVkPWEuZGVmYXVsdFNlbGVjdGVkOigiaW5wdXQiPT09Y3x8InRleHRhcmVhIj09PWMpJiYoYi5kZWZhdWx0VmFsdWU9YS5kZWZhdWx0VmFsdWUpfX1tLmV4dGVuZCh7Y2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaT1tLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKTtpZihrLmh0bWw1Q2xvbmV8fG0uaXNYTUxEb2MoYSl8fCFnYS50ZXN0KCI8IithLm5vZGVOYW1lKyI+Iik/Zj1hLmNsb25lTm9kZSghMCk6KHRhLmlubmVySFRNTD1hLm91dGVySFRNTCx0YS5yZW1vdmVDaGlsZChmPXRhLmZpcnN0Q2hpbGQpKSwhKGsubm9DbG9uZUV2ZW50JiZrLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxtLmlzWE1MRG9jKGEpKSlmb3IoZD11YShmKSxoPXVhKGEpLGc9MDtudWxsIT0oZT1oW2ddKTsrK2cpZFtnXSYmQmEoZSxkW2ddKTtpZihiKWlmKGMpZm9yKGg9aHx8dWEoYSksZD1kfHx1YShmKSxnPTA7bnVsbCE9KGU9aFtnXSk7ZysrKUFhKGUsZFtnXSk7ZWxzZSBBYShhLGYpO3JldHVybiBkPXVhKGYsInNjcmlwdCIpLGQubGVuZ3RoPjAmJnphKGQsIWkmJnVhKGEsInNjcmlwdCIpKSxkPWg9ZT1udWxsLGZ9LGJ1aWxkRnJhZ21lbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7Zm9yKHZhciBlLGYsZyxoLGksaixsLG49YS5sZW5ndGgsbz1kYShiKSxwPVtdLHE9MDtuPnE7cSsrKWlmKGY9YVtxXSxmfHwwPT09ZilpZigib2JqZWN0Ij09PW0udHlwZShmKSltLm1lcmdlKHAsZi5ub2RlVHlwZT9bZl06Zik7ZWxzZSBpZihsYS50ZXN0KGYpKXtoPWh8fG8uYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KCJkaXYiKSksaT0oamEuZXhlYyhmKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKSxsPXJhW2ldfHxyYS5fZGVmYXVsdCxoLmlubmVySFRNTD1sWzFdK2YucmVwbGFjZShpYSwiPCQxPjwvJDI+IikrbFsyXSxlPWxbMF07d2hpbGUoZS0tKWg9aC5sYXN0Q2hpbGQ7aWYoIWsubGVhZGluZ1doaXRlc3BhY2UmJmhhLnRlc3QoZikmJnAucHVzaChiLmNyZWF0ZVRleHROb2RlKGhhLmV4ZWMoZilbMF0pKSwhay50Ym9keSl7Zj0idGFibGUiIT09aXx8a2EudGVzdChmKT8iPHRhYmxlPiIhPT1sWzFdfHxrYS50ZXN0KGYpPzA6aDpoLmZpcnN0Q2hpbGQsZT1mJiZmLmNoaWxkTm9kZXMubGVuZ3RoO3doaWxlKGUtLSltLm5vZGVOYW1lKGo9Zi5jaGlsZE5vZGVzW2VdLCJ0Ym9keSIpJiYhai5jaGlsZE5vZGVzLmxlbmd0aCYmZi5yZW1vdmVDaGlsZChqKX1tLm1lcmdlKHAsaC5jaGlsZE5vZGVzKSxoLnRleHRDb250ZW50PSIiO3doaWxlKGguZmlyc3RDaGlsZCloLnJlbW92ZUNoaWxkKGguZmlyc3RDaGlsZCk7aD1vLmxhc3RDaGlsZH1lbHNlIHAucHVzaChiLmNyZWF0ZVRleHROb2RlKGYpKTtoJiZvLnJlbW92ZUNoaWxkKGgpLGsuYXBwZW5kQ2hlY2tlZHx8bS5ncmVwKHVhKHAsImlucHV0IiksdmEpLHE9MDt3aGlsZShmPXBbcSsrXSlpZigoIWR8fC0xPT09bS5pbkFycmF5KGYsZCkpJiYoZz1tLmNvbnRhaW5zKGYub3duZXJEb2N1bWVudCxmKSxoPXVhKG8uYXBwZW5kQ2hpbGQoZiksInNjcmlwdCIpLGcmJnphKGgpLGMpKXtlPTA7d2hpbGUoZj1oW2UrK10pb2EudGVzdChmLnR5cGV8fCIiKSYmYy5wdXNoKGYpfXJldHVybiBoPW51bGwsb30sY2xlYW5EYXRhOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBkLGUsZixnLGg9MCxpPW0uZXhwYW5kbyxqPW0uY2FjaGUsbD1rLmRlbGV0ZUV4cGFuZG8sbj1tLmV2ZW50LnNwZWNpYWw7bnVsbCE9KGQ9YVtoXSk7aCsrKWlmKChifHxtLmFjY2VwdERhdGEoZCkpJiYoZj1kW2ldLGc9ZiYmaltmXSkpe2lmKGcuZXZlbnRzKWZvcihlIGluIGcuZXZlbnRzKW5bZV0/bS5ldmVudC5yZW1vdmUoZCxlKTptLnJlbW92ZUV2ZW50KGQsZSxnLmhhbmRsZSk7altmXSYmKGRlbGV0ZSBqW2ZdLGw/ZGVsZXRlIGRbaV06dHlwZW9mIGQucmVtb3ZlQXR0cmlidXRlIT09Sz9kLnJlbW92ZUF0dHJpYnV0ZShpKTpkW2ldPW51bGwsYy5wdXNoKGYpKX19fSksbS5mbi5leHRlbmQoe3RleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFYodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9tLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmFwcGVuZCgodGhpc1swXSYmdGhpc1swXS5vd25lckRvY3VtZW50fHx5KS5jcmVhdGVUZXh0Tm9kZShhKSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj13YSh0aGlzLGEpO2IuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPXdhKHRoaXMsYSk7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9KX0scmVtb3ZlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9YT9tLmZpbHRlcihhLHRoaXMpOnRoaXMsZT0wO251bGwhPShjPWRbZV0pO2UrKylifHwxIT09Yy5ub2RlVHlwZXx8bS5jbGVhbkRhdGEodWEoYykpLGMucGFyZW50Tm9kZSYmKGImJm0uY29udGFpbnMoYy5vd25lckRvY3VtZW50LGMpJiZ6YSh1YShjLCJzY3JpcHQiKSksYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpKTtyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKyl7MT09PWEubm9kZVR5cGUmJm0uY2xlYW5EYXRhKHVhKGEsITEpKTt3aGlsZShhLmZpcnN0Q2hpbGQpYS5yZW1vdmVDaGlsZChhLmZpcnN0Q2hpbGQpO2Eub3B0aW9ucyYmbS5ub2RlTmFtZShhLCJzZWxlY3QiKSYmKGEub3B0aW9ucy5sZW5ndGg9MCl9cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bnVsbD09YT8hMTphLGI9bnVsbD09Yj9hOmIsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gbS5jbG9uZSh0aGlzLGEsYil9KX0saHRtbDpmdW5jdGlvbihhKXtyZXR1cm4gVih0aGlzLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXNbMF18fHt9LGM9MCxkPXRoaXMubGVuZ3RoO2lmKHZvaWQgMD09PWEpcmV0dXJuIDE9PT1iLm5vZGVUeXBlP2IuaW5uZXJIVE1MLnJlcGxhY2UoZmEsIiIpOnZvaWQgMDtpZighKCJzdHJpbmciIT10eXBlb2YgYXx8bWEudGVzdChhKXx8IWsuaHRtbFNlcmlhbGl6ZSYmZ2EudGVzdChhKXx8IWsubGVhZGluZ1doaXRlc3BhY2UmJmhhLnRlc3QoYSl8fHJhWyhqYS5leGVjKGEpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSkpe2E9YS5yZXBsYWNlKGlhLCI8JDE+PC8kMj4iKTt0cnl7Zm9yKDtkPmM7YysrKWI9dGhpc1tjXXx8e30sMT09PWIubm9kZVR5cGUmJihtLmNsZWFuRGF0YSh1YShiLCExKSksYi5pbm5lckhUTUw9YSk7Yj0wfWNhdGNoKGUpe319YiYmdGhpcy5lbXB0eSgpLmFwcGVuZChhKX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYil7YT10aGlzLnBhcmVudE5vZGUsbS5jbGVhbkRhdGEodWEodGhpcykpLGEmJmEucmVwbGFjZUNoaWxkKGIsdGhpcyl9KSxhJiYoYS5sZW5ndGh8fGEubm9kZVR5cGUpP3RoaXM6dGhpcy5yZW1vdmUoKX0sZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlbW92ZShhLCEwKX0sZG9tTWFuaXA6ZnVuY3Rpb24oYSxiKXthPWUuYXBwbHkoW10sYSk7dmFyIGMsZCxmLGcsaCxpLGo9MCxsPXRoaXMubGVuZ3RoLG49dGhpcyxvPWwtMSxwPWFbMF0scT1tLmlzRnVuY3Rpb24ocCk7aWYocXx8bD4xJiYic3RyaW5nIj09dHlwZW9mIHAmJiFrLmNoZWNrQ2xvbmUmJm5hLnRlc3QocCkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZD1uLmVxKGMpO3EmJihhWzBdPXAuY2FsbCh0aGlzLGMsZC5odG1sKCkpKSxkLmRvbU1hbmlwKGEsYil9KTtpZihsJiYoaT1tLmJ1aWxkRnJhZ21lbnQoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQsITEsdGhpcyksYz1pLmZpcnN0Q2hpbGQsMT09PWkuY2hpbGROb2Rlcy5sZW5ndGgmJihpPWMpLGMpKXtmb3IoZz1tLm1hcCh1YShpLCJzY3JpcHQiKSx4YSksZj1nLmxlbmd0aDtsPmo7aisrKWQ9aSxqIT09byYmKGQ9bS5jbG9uZShkLCEwLCEwKSxmJiZtLm1lcmdlKGcsdWEoZCwic2NyaXB0IikpKSxiLmNhbGwodGhpc1tqXSxkLGopO2lmKGYpZm9yKGg9Z1tnLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LG0ubWFwKGcseWEpLGo9MDtmPmo7aisrKWQ9Z1tqXSxvYS50ZXN0KGQudHlwZXx8IiIpJiYhbS5fZGF0YShkLCJnbG9iYWxFdmFsIikmJm0uY29udGFpbnMoaCxkKSYmKGQuc3JjP20uX2V2YWxVcmwmJm0uX2V2YWxVcmwoZC5zcmMpOm0uZ2xvYmFsRXZhbCgoZC50ZXh0fHxkLnRleHRDb250ZW50fHxkLmlubmVySFRNTHx8IiIpLnJlcGxhY2UocWEsIiIpKSk7aT1jPW51bGx9cmV0dXJuIHRoaXN9fSksbS5lYWNoKHthcHBlbmRUbzoiYXBwZW5kIixwcmVwZW5kVG86InByZXBlbmQiLGluc2VydEJlZm9yZToiYmVmb3JlIixpbnNlcnRBZnRlcjoiYWZ0ZXIiLHJlcGxhY2VBbGw6InJlcGxhY2VXaXRoIn0sZnVuY3Rpb24oYSxiKXttLmZuW2FdPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkPTAsZT1bXSxnPW0oYSksaD1nLmxlbmd0aC0xO2g+PWQ7ZCsrKWM9ZD09PWg/dGhpczp0aGlzLmNsb25lKCEwKSxtKGdbZF0pW2JdKGMpLGYuYXBwbHkoZSxjLmdldCgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZSl9fSk7dmFyIENhLERhPXt9O2Z1bmN0aW9uIEVhKGIsYyl7dmFyIGQsZT1tKGMuY3JlYXRlRWxlbWVudChiKSkuYXBwZW5kVG8oYy5ib2R5KSxmPWEuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUmJihkPWEuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUoZVswXSkpP2QuZGlzcGxheTptLmNzcyhlWzBdLCJkaXNwbGF5Iik7cmV0dXJuIGUuZGV0YWNoKCksZn1mdW5jdGlvbiBGYShhKXt2YXIgYj15LGM9RGFbYV07cmV0dXJuIGN8fChjPUVhKGEsYiksIm5vbmUiIT09YyYmY3x8KENhPShDYXx8bSgiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPiIpKS5hcHBlbmRUbyhiLmRvY3VtZW50RWxlbWVudCksYj0oQ2FbMF0uY29udGVudFdpbmRvd3x8Q2FbMF0uY29udGVudERvY3VtZW50KS5kb2N1bWVudCxiLndyaXRlKCksYi5jbG9zZSgpLGM9RWEoYSxiKSxDYS5kZXRhY2goKSksRGFbYV09YyksY30hZnVuY3Rpb24oKXt2YXIgYTtrLnNocmlua1dyYXBCbG9ja3M9ZnVuY3Rpb24oKXtpZihudWxsIT1hKXJldHVybiBhO2E9ITE7dmFyIGIsYyxkO3JldHVybiBjPXkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXSxjJiZjLnN0eWxlPyhiPXkuY3JlYXRlRWxlbWVudCgiZGl2IiksZD15LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGQuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHgiLGMuYXBwZW5kQ2hpbGQoZCkuYXBwZW5kQ2hpbGQoYiksdHlwZW9mIGIuc3R5bGUuem9vbSE9PUsmJihiLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MXB4O3dpZHRoOjFweDt6b29tOjEiLGIuYXBwZW5kQ2hpbGQoeS5jcmVhdGVFbGVtZW50KCJkaXYiKSkuc3R5bGUud2lkdGg9IjVweCIsYT0zIT09Yi5vZmZzZXRXaWR0aCksYy5yZW1vdmVDaGlsZChkKSxhKTp2b2lkIDB9fSgpO3ZhciBHYT0vXm1hcmdpbi8sSGE9bmV3IFJlZ0V4cCgiXigiK1MrIikoPyFweClbYS16JV0rJCIsImkiKSxJYSxKYSxLYT0vXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC87YS5nZXRDb21wdXRlZFN0eWxlPyhJYT1mdW5jdGlvbihiKXtyZXR1cm4gYi5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3Lm9wZW5lcj9iLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShiLG51bGwpOmEuZ2V0Q29tcHV0ZWRTdHlsZShiLG51bGwpfSxKYT1mdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLnN0eWxlO3JldHVybiBjPWN8fElhKGEpLGc9Yz9jLmdldFByb3BlcnR5VmFsdWUoYil8fGNbYl06dm9pZCAwLGMmJigiIiE9PWd8fG0uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfHwoZz1tLnN0eWxlKGEsYikpLEhhLnRlc3QoZykmJkdhLnRlc3QoYikmJihkPWgud2lkdGgsZT1oLm1pbldpZHRoLGY9aC5tYXhXaWR0aCxoLm1pbldpZHRoPWgubWF4V2lkdGg9aC53aWR0aD1nLGc9Yy53aWR0aCxoLndpZHRoPWQsaC5taW5XaWR0aD1lLGgubWF4V2lkdGg9ZikpLHZvaWQgMD09PWc/ZzpnKyIifSk6eS5kb2N1bWVudEVsZW1lbnQuY3VycmVudFN0eWxlJiYoSWE9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY3VycmVudFN0eWxlfSxKYT1mdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLnN0eWxlO3JldHVybiBjPWN8fElhKGEpLGc9Yz9jW2JdOnZvaWQgMCxudWxsPT1nJiZoJiZoW2JdJiYoZz1oW2JdKSxIYS50ZXN0KGcpJiYhS2EudGVzdChiKSYmKGQ9aC5sZWZ0LGU9YS5ydW50aW1lU3R5bGUsZj1lJiZlLmxlZnQsZiYmKGUubGVmdD1hLmN1cnJlbnRTdHlsZS5sZWZ0KSxoLmxlZnQ9ImZvbnRTaXplIj09PWI/IjFlbSI6ZyxnPWgucGl4ZWxMZWZ0KyJweCIsaC5sZWZ0PWQsZiYmKGUubGVmdD1mKSksdm9pZCAwPT09Zz9nOmcrIiJ8fCJhdXRvIn0pO2Z1bmN0aW9uIExhKGEsYil7cmV0dXJue2dldDpmdW5jdGlvbigpe3ZhciBjPWEoKTtpZihudWxsIT1jKXJldHVybiBjP3ZvaWQgZGVsZXRlIHRoaXMuZ2V0Oih0aGlzLmdldD1iKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX0hZnVuY3Rpb24oKXt2YXIgYixjLGQsZSxmLGcsaDtpZihiPXkuY3JlYXRlRWxlbWVudCgiZGl2IiksYi5pbm5lckhUTUw9IiAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9Jy9hJz5hPC9hPjxpbnB1dCB0eXBlPSdjaGVja2JveCcvPiIsZD1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJhIilbMF0sYz1kJiZkLnN0eWxlKXtjLmNzc1RleHQ9ImZsb2F0OmxlZnQ7b3BhY2l0eTouNSIsay5vcGFjaXR5PSIwLjUiPT09Yy5vcGFjaXR5LGsuY3NzRmxvYXQ9ISFjLmNzc0Zsb2F0LGIuc3R5bGUuYmFja2dyb3VuZENsaXA9ImNvbnRlbnQtYm94IixiLmNsb25lTm9kZSghMCkuc3R5bGUuYmFja2dyb3VuZENsaXA9IiIsay5jbGVhckNsb25lU3R5bGU9ImNvbnRlbnQtYm94Ij09PWIuc3R5bGUuYmFja2dyb3VuZENsaXAsay5ib3hTaXppbmc9IiI9PT1jLmJveFNpemluZ3x8IiI9PT1jLk1vekJveFNpemluZ3x8IiI9PT1jLldlYmtpdEJveFNpemluZyxtLmV4dGVuZChrLHtyZWxpYWJsZUhpZGRlbk9mZnNldHM6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09ZyYmaSgpLGd9LGJveFNpemluZ1JlbGlhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWYmJmkoKSxmfSxwaXhlbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWUmJmkoKSxlfSxyZWxpYWJsZU1hcmdpblJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWgmJmkoKSxofX0pO2Z1bmN0aW9uIGkoKXt2YXIgYixjLGQsaTtjPXkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXSxjJiZjLnN0eWxlJiYoYj15LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGQ9eS5jcmVhdGVFbGVtZW50KCJkaXYiKSxkLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOmFic29sdXRlO2JvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4IixjLmFwcGVuZENoaWxkKGQpLmFwcGVuZENoaWxkKGIpLGIuc3R5bGUuY3NzVGV4dD0iLXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7LW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luLXRvcDoxJTt0b3A6MSU7Ym9yZGVyOjFweDtwYWRkaW5nOjFweDt3aWR0aDo0cHg7cG9zaXRpb246YWJzb2x1dGUiLGU9Zj0hMSxoPSEwLGEuZ2V0Q29tcHV0ZWRTdHlsZSYmKGU9IjElIiE9PShhLmdldENvbXB1dGVkU3R5bGUoYixudWxsKXx8e30pLnRvcCxmPSI0cHgiPT09KGEuZ2V0Q29tcHV0ZWRTdHlsZShiLG51bGwpfHx7d2lkdGg6IjRweCJ9KS53aWR0aCxpPWIuYXBwZW5kQ2hpbGQoeS5jcmVhdGVFbGVtZW50KCJkaXYiKSksaS5zdHlsZS5jc3NUZXh0PWIuc3R5bGUuY3NzVGV4dD0iLXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDtib3gtc2l6aW5nOmNvbnRlbnQtYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowIixpLnN0eWxlLm1hcmdpblJpZ2h0PWkuc3R5bGUud2lkdGg9IjAiLGIuc3R5bGUud2lkdGg9IjFweCIsaD0hcGFyc2VGbG9hdCgoYS5nZXRDb21wdXRlZFN0eWxlKGksbnVsbCl8fHt9KS5tYXJnaW5SaWdodCksYi5yZW1vdmVDaGlsZChpKSksYi5pbm5lckhUTUw9Ijx0YWJsZT48dHI+PHRkPjwvdGQ+PHRkPnQ8L3RkPjwvdHI+PC90YWJsZT4iLGk9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGQiKSxpWzBdLnN0eWxlLmNzc1RleHQ9Im1hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MDtkaXNwbGF5Om5vbmUiLGc9MD09PWlbMF0ub2Zmc2V0SGVpZ2h0LGcmJihpWzBdLnN0eWxlLmRpc3BsYXk9IiIsaVsxXS5zdHlsZS5kaXNwbGF5PSJub25lIixnPTA9PT1pWzBdLm9mZnNldEhlaWdodCksYy5yZW1vdmVDaGlsZChkKSl9fX0oKSxtLnN3YXA9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnPXt9O2ZvcihmIGluIGIpZ1tmXT1hLnN0eWxlW2ZdLGEuc3R5bGVbZl09YltmXTtlPWMuYXBwbHkoYSxkfHxbXSk7Zm9yKGYgaW4gYilhLnN0eWxlW2ZdPWdbZl07cmV0dXJuIGV9O3ZhciBNYT0vYWxwaGFcKFteKV0qXCkvaSxOYT0vb3BhY2l0eVxzKj1ccyooW14pXSopLyxPYT0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sUGE9bmV3IFJlZ0V4cCgiXigiK1MrIikoLiopJCIsImkiKSxRYT1uZXcgUmVnRXhwKCJeKFsrLV0pPSgiK1MrIikiLCJpIiksUmE9e3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdmlzaWJpbGl0eToiaGlkZGVuIixkaXNwbGF5OiJibG9jayJ9LFNhPXtsZXR0ZXJTcGFjaW5nOiIwIixmb250V2VpZ2h0OiI0MDAifSxUYT1bIldlYmtpdCIsIk8iLCJNb3oiLCJtcyJdO2Z1bmN0aW9uIFVhKGEsYil7aWYoYiBpbiBhKXJldHVybiBiO3ZhciBjPWIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYi5zbGljZSgxKSxkPWIsZT1UYS5sZW5ndGg7d2hpbGUoZS0tKWlmKGI9VGFbZV0rYyxiIGluIGEpcmV0dXJuIGI7cmV0dXJuIGR9ZnVuY3Rpb24gVmEoYSxiKXtmb3IodmFyIGMsZCxlLGY9W10sZz0wLGg9YS5sZW5ndGg7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGZbZ109bS5fZGF0YShkLCJvbGRkaXNwbGF5IiksYz1kLnN0eWxlLmRpc3BsYXksYj8oZltnXXx8Im5vbmUiIT09Y3x8KGQuc3R5bGUuZGlzcGxheT0iIiksIiI9PT1kLnN0eWxlLmRpc3BsYXkmJlUoZCkmJihmW2ddPW0uX2RhdGEoZCwib2xkZGlzcGxheSIsRmEoZC5ub2RlTmFtZSkpKSk6KGU9VShkKSwoYyYmIm5vbmUiIT09Y3x8IWUpJiZtLl9kYXRhKGQsIm9sZGRpc3BsYXkiLGU/YzptLmNzcyhkLCJkaXNwbGF5IikpKSk7Zm9yKGc9MDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoYiYmIm5vbmUiIT09ZC5zdHlsZS5kaXNwbGF5JiYiIiE9PWQuc3R5bGUuZGlzcGxheXx8KGQuc3R5bGUuZGlzcGxheT1iP2ZbZ118fCIiOiJub25lIikpO3JldHVybiBhfWZ1bmN0aW9uIFdhKGEsYixjKXt2YXIgZD1QYS5leGVjKGIpO3JldHVybiBkP01hdGgubWF4KDAsZFsxXS0oY3x8MCkpKyhkWzJdfHwicHgiKTpifWZ1bmN0aW9uIFhhKGEsYixjLGQsZSl7Zm9yKHZhciBmPWM9PT0oZD8iYm9yZGVyIjoiY29udGVudCIpPzQ6IndpZHRoIj09PWI/MTowLGc9MDs0PmY7Zis9MikibWFyZ2luIj09PWMmJihnKz1tLmNzcyhhLGMrVFtmXSwhMCxlKSksZD8oImNvbnRlbnQiPT09YyYmKGctPW0uY3NzKGEsInBhZGRpbmciK1RbZl0sITAsZSkpLCJtYXJnaW4iIT09YyYmKGctPW0uY3NzKGEsImJvcmRlciIrVFtmXSsiV2lkdGgiLCEwLGUpKSk6KGcrPW0uY3NzKGEsInBhZGRpbmciK1RbZl0sITAsZSksInBhZGRpbmciIT09YyYmKGcrPW0uY3NzKGEsImJvcmRlciIrVFtmXSsiV2lkdGgiLCEwLGUpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gWWEoYSxiLGMpe3ZhciBkPSEwLGU9IndpZHRoIj09PWI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodCxmPUlhKGEpLGc9ay5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09PW0uY3NzKGEsImJveFNpemluZyIsITEsZik7aWYoMD49ZXx8bnVsbD09ZSl7aWYoZT1KYShhLGIsZiksKDA+ZXx8bnVsbD09ZSkmJihlPWEuc3R5bGVbYl0pLEhhLnRlc3QoZSkpcmV0dXJuIGU7ZD1nJiYoay5ib3hTaXppbmdSZWxpYWJsZSgpfHxlPT09YS5zdHlsZVtiXSksZT1wYXJzZUZsb2F0KGUpfHwwfXJldHVybiBlK1hhKGEsYixjfHwoZz8iYm9yZGVyIjoiY29udGVudCIpLGQsZikrInB4In1tLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihhLGIpe2lmKGIpe3ZhciBjPUphKGEsIm9wYWNpdHkiKTtyZXR1cm4iIj09PWM/IjEiOmN9fX19LGNzc051bWJlcjp7Y29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6eyJmbG9hdCI6ay5jc3NGbG9hdD8iY3NzRmxvYXQiOiJzdHlsZUZsb2F0In0sc3R5bGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYoYSYmMyE9PWEubm9kZVR5cGUmJjghPT1hLm5vZGVUeXBlJiZhLnN0eWxlKXt2YXIgZSxmLGcsaD1tLmNhbWVsQ2FzZShiKSxpPWEuc3R5bGU7aWYoYj1tLmNzc1Byb3BzW2hdfHwobS5jc3NQcm9wc1toXT1VYShpLGgpKSxnPW0uY3NzSG9va3NbYl18fG0uY3NzSG9va3NbaF0sdm9pZCAwPT09YylyZXR1cm4gZyYmImdldCJpbiBnJiZ2b2lkIDAhPT0oZT1nLmdldChhLCExLGQpKT9lOmlbYl07aWYoZj10eXBlb2YgYywic3RyaW5nIj09PWYmJihlPVFhLmV4ZWMoYykpJiYoYz0oZVsxXSsxKSplWzJdK3BhcnNlRmxvYXQobS5jc3MoYSxiKSksZj0ibnVtYmVyIiksbnVsbCE9YyYmYz09PWMmJigibnVtYmVyIiE9PWZ8fG0uY3NzTnVtYmVyW2hdfHwoYys9InB4Iiksay5jbGVhckNsb25lU3R5bGV8fCIiIT09Y3x8MCE9PWIuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwoaVtiXT0iaW5oZXJpdCIpLCEoZyYmInNldCJpbiBnJiZ2b2lkIDA9PT0oYz1nLnNldChhLGMsZCkpKSkpdHJ5e2lbYl09Y31jYXRjaChqKXt9fX0sY3NzOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZyxoPW0uY2FtZWxDYXNlKGIpO3JldHVybiBiPW0uY3NzUHJvcHNbaF18fChtLmNzc1Byb3BzW2hdPVVhKGEuc3R5bGUsaCkpLGc9bS5jc3NIb29rc1tiXXx8bS5jc3NIb29rc1toXSxnJiYiZ2V0ImluIGcmJihmPWcuZ2V0KGEsITAsYykpLHZvaWQgMD09PWYmJihmPUphKGEsYixkKSksIm5vcm1hbCI9PT1mJiZiIGluIFNhJiYoZj1TYVtiXSksIiI9PT1jfHxjPyhlPXBhcnNlRmxvYXQoZiksYz09PSEwfHxtLmlzTnVtZXJpYyhlKT9lfHwwOmYpOmZ9fSksbS5lYWNoKFsiaGVpZ2h0Iiwid2lkdGgiXSxmdW5jdGlvbihhLGIpe20uY3NzSG9va3NbYl09e2dldDpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGM/T2EudGVzdChtLmNzcyhhLCJkaXNwbGF5IikpJiYwPT09YS5vZmZzZXRXaWR0aD9tLnN3YXAoYSxSYSxmdW5jdGlvbigpe3JldHVybiBZYShhLGIsZCl9KTpZYShhLGIsZCk6dm9pZCAwfSxzZXQ6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWQmJklhKGEpO3JldHVybiBXYShhLGMsZD9YYShhLGIsZCxrLmJveFNpemluZyYmImJvcmRlci1ib3giPT09bS5jc3MoYSwiYm94U2l6aW5nIiwhMSxlKSxlKTowKX19fSksay5vcGFjaXR5fHwobS5jc3NIb29rcy5vcGFjaXR5PXtnZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gTmEudGVzdCgoYiYmYS5jdXJyZW50U3R5bGU/YS5jdXJyZW50U3R5bGUuZmlsdGVyOmEuc3R5bGUuZmlsdGVyKXx8IiIpPy4wMSpwYXJzZUZsb2F0KFJlZ0V4cC4kMSkrIiI6Yj8iMSI6IiJ9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjPWEuc3R5bGUsZD1hLmN1cnJlbnRTdHlsZSxlPW0uaXNOdW1lcmljKGIpPyJhbHBoYShvcGFjaXR5PSIrMTAwKmIrIikiOiIiLGY9ZCYmZC5maWx0ZXJ8fGMuZmlsdGVyfHwiIjtjLnpvb209MSwoYj49MXx8IiI9PT1iKSYmIiI9PT1tLnRyaW0oZi5yZXBsYWNlKE1hLCIiKSkmJmMucmVtb3ZlQXR0cmlidXRlJiYoYy5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpLCIiPT09Ynx8ZCYmIWQuZmlsdGVyKXx8KGMuZmlsdGVyPU1hLnRlc3QoZik/Zi5yZXBsYWNlKE1hLGUpOmYrIiAiK2UpfX0pLG0uY3NzSG9va3MubWFyZ2luUmlnaHQ9TGEoay5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/bS5zd2FwKGEse2Rpc3BsYXk6ImlubGluZS1ibG9jayJ9LEphLFthLCJtYXJnaW5SaWdodCJdKTp2b2lkIDB9KSxtLmVhY2goe21hcmdpbjoiIixwYWRkaW5nOiIiLGJvcmRlcjoiV2lkdGgifSxmdW5jdGlvbihhLGIpe20uY3NzSG9va3NbYStiXT17ZXhwYW5kOmZ1bmN0aW9uKGMpe2Zvcih2YXIgZD0wLGU9e30sZj0ic3RyaW5nIj09dHlwZW9mIGM/Yy5zcGxpdCgiICIpOltjXTs0PmQ7ZCsrKWVbYStUW2RdK2JdPWZbZF18fGZbZC0yXXx8ZlswXTtyZXR1cm4gZX19LEdhLnRlc3QoYSl8fChtLmNzc0hvb2tzW2ErYl0uc2V0PVdhKX0pLG0uZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVih0aGlzLGZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9e30sZz0wO2lmKG0uaXNBcnJheShiKSl7Zm9yKGQ9SWEoYSksZT1iLmxlbmd0aDtlPmc7ZysrKWZbYltnXV09bS5jc3MoYSxiW2ddLCExLGQpO3JldHVybiBmfXJldHVybiB2b2lkIDAhPT1jP20uc3R5bGUoYSxiLGMpOm0uY3NzKGEsYil9LGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIFZhKHRoaXMsITApfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIFZhKHRoaXMpfSx0b2dnbGU6ZnVuY3Rpb24oYSl7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgYT9hP3RoaXMuc2hvdygpOnRoaXMuaGlkZSgpOnRoaXMuZWFjaChmdW5jdGlvbigpe1UodGhpcyk/bSh0aGlzKS5zaG93KCk6bSh0aGlzKS5oaWRlKCl9KX19KTtmdW5jdGlvbiBaYShhLGIsYyxkLGUpewpyZXR1cm4gbmV3IFphLnByb3RvdHlwZS5pbml0KGEsYixjLGQsZSl9bS5Ud2Vlbj1aYSxaYS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlphLGluaXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuZWxlbT1hLHRoaXMucHJvcD1jLHRoaXMuZWFzaW5nPWV8fCJzd2luZyIsdGhpcy5vcHRpb25zPWIsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPWQsdGhpcy51bml0PWZ8fChtLmNzc051bWJlcltjXT8iIjoicHgiKX0sY3VyOmZ1bmN0aW9uKCl7dmFyIGE9WmEucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGEmJmEuZ2V0P2EuZ2V0KHRoaXMpOlphLnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihhKXt2YXIgYixjPVphLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiB0aGlzLm9wdGlvbnMuZHVyYXRpb24/dGhpcy5wb3M9Yj1tLmVhc2luZ1t0aGlzLmVhc2luZ10oYSx0aGlzLm9wdGlvbnMuZHVyYXRpb24qYSwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTp0aGlzLnBvcz1iPWEsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKmIrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksYyYmYy5zZXQ/Yy5zZXQodGhpcyk6WmEucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0sWmEucHJvdG90eXBlLmluaXQucHJvdG90eXBlPVphLnByb3RvdHlwZSxaYS5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIG51bGw9PWEuZWxlbVthLnByb3BdfHxhLmVsZW0uc3R5bGUmJm51bGwhPWEuZWxlbS5zdHlsZVthLnByb3BdPyhiPW0uY3NzKGEuZWxlbSxhLnByb3AsIiIpLGImJiJhdXRvIiE9PWI/YjowKTphLmVsZW1bYS5wcm9wXX0sc2V0OmZ1bmN0aW9uKGEpe20uZnguc3RlcFthLnByb3BdP20uZnguc3RlcFthLnByb3BdKGEpOmEuZWxlbS5zdHlsZSYmKG51bGwhPWEuZWxlbS5zdHlsZVttLmNzc1Byb3BzW2EucHJvcF1dfHxtLmNzc0hvb2tzW2EucHJvcF0pP20uc3R5bGUoYS5lbGVtLGEucHJvcCxhLm5vdythLnVuaXQpOmEuZWxlbVthLnByb3BdPWEubm93fX19LFphLnByb3BIb29rcy5zY3JvbGxUb3A9WmEucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihhKXthLmVsZW0ubm9kZVR5cGUmJmEuZWxlbS5wYXJlbnROb2RlJiYoYS5lbGVtW2EucHJvcF09YS5ub3cpfX0sbS5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYX0sc3dpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuLjUtTWF0aC5jb3MoYSpNYXRoLlBJKS8yfX0sbS5meD1aYS5wcm90b3R5cGUuaW5pdCxtLmZ4LnN0ZXA9e307dmFyICRhLF9hLGFiPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxiYj1uZXcgUmVnRXhwKCJeKD86KFsrLV0pPXwpKCIrUysiKShbYS16JV0qKSQiLCJpIiksY2I9L3F1ZXVlSG9va3MkLyxkYj1baWJdLGViPXsiKiI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVUd2VlbihhLGIpLGQ9Yy5jdXIoKSxlPWJiLmV4ZWMoYiksZj1lJiZlWzNdfHwobS5jc3NOdW1iZXJbYV0/IiI6InB4IiksZz0obS5jc3NOdW1iZXJbYV18fCJweCIhPT1mJiYrZCkmJmJiLmV4ZWMobS5jc3MoYy5lbGVtLGEpKSxoPTEsaT0yMDtpZihnJiZnWzNdIT09Zil7Zj1mfHxnWzNdLGU9ZXx8W10sZz0rZHx8MTtkbyBoPWh8fCIuNSIsZy89aCxtLnN0eWxlKGMuZWxlbSxhLGcrZik7d2hpbGUoaCE9PShoPWMuY3VyKCkvZCkmJjEhPT1oJiYtLWkpfXJldHVybiBlJiYoZz1jLnN0YXJ0PStnfHwrZHx8MCxjLnVuaXQ9ZixjLmVuZD1lWzFdP2crKGVbMV0rMSkqZVsyXTorZVsyXSksY31dfTtmdW5jdGlvbiBmYigpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JGE9dm9pZCAwfSksJGE9bS5ub3coKX1mdW5jdGlvbiBnYihhLGIpe3ZhciBjLGQ9e2hlaWdodDphfSxlPTA7Zm9yKGI9Yj8xOjA7ND5lO2UrPTItYiljPVRbZV0sZFsibWFyZ2luIitjXT1kWyJwYWRkaW5nIitjXT1hO3JldHVybiBiJiYoZC5vcGFjaXR5PWQud2lkdGg9YSksZH1mdW5jdGlvbiBoYihhLGIsYyl7Zm9yKHZhciBkLGU9KGViW2JdfHxbXSkuY29uY2F0KGViWyIqIl0pLGY9MCxnPWUubGVuZ3RoO2c+ZjtmKyspaWYoZD1lW2ZdLmNhbGwoYyxiLGEpKXJldHVybiBkfWZ1bmN0aW9uIGliKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixsLG49dGhpcyxvPXt9LHA9YS5zdHlsZSxxPWEubm9kZVR5cGUmJlUoYSkscj1tLl9kYXRhKGEsImZ4c2hvdyIpO2MucXVldWV8fChoPW0uX3F1ZXVlSG9va3MoYSwiZngiKSxudWxsPT1oLnVucXVldWVkJiYoaC51bnF1ZXVlZD0wLGk9aC5lbXB0eS5maXJlLGguZW1wdHkuZmlyZT1mdW5jdGlvbigpe2gudW5xdWV1ZWR8fGkoKX0pLGgudW5xdWV1ZWQrKyxuLmFsd2F5cyhmdW5jdGlvbigpe24uYWx3YXlzKGZ1bmN0aW9uKCl7aC51bnF1ZXVlZC0tLG0ucXVldWUoYSwiZngiKS5sZW5ndGh8fGguZW1wdHkuZmlyZSgpfSl9KSksMT09PWEubm9kZVR5cGUmJigiaGVpZ2h0ImluIGJ8fCJ3aWR0aCJpbiBiKSYmKGMub3ZlcmZsb3c9W3Aub3ZlcmZsb3cscC5vdmVyZmxvd1gscC5vdmVyZmxvd1ldLGo9bS5jc3MoYSwiZGlzcGxheSIpLGw9Im5vbmUiPT09aj9tLl9kYXRhKGEsIm9sZGRpc3BsYXkiKXx8RmEoYS5ub2RlTmFtZSk6aiwiaW5saW5lIj09PWwmJiJub25lIj09PW0uY3NzKGEsImZsb2F0IikmJihrLmlubGluZUJsb2NrTmVlZHNMYXlvdXQmJiJpbmxpbmUiIT09RmEoYS5ub2RlTmFtZSk/cC56b29tPTE6cC5kaXNwbGF5PSJpbmxpbmUtYmxvY2siKSksYy5vdmVyZmxvdyYmKHAub3ZlcmZsb3c9ImhpZGRlbiIsay5zaHJpbmtXcmFwQmxvY2tzKCl8fG4uYWx3YXlzKGZ1bmN0aW9uKCl7cC5vdmVyZmxvdz1jLm92ZXJmbG93WzBdLHAub3ZlcmZsb3dYPWMub3ZlcmZsb3dbMV0scC5vdmVyZmxvd1k9Yy5vdmVyZmxvd1syXX0pKTtmb3IoZCBpbiBiKWlmKGU9YltkXSxhYi5leGVjKGUpKXtpZihkZWxldGUgYltkXSxmPWZ8fCJ0b2dnbGUiPT09ZSxlPT09KHE/ImhpZGUiOiJzaG93Iikpe2lmKCJzaG93IiE9PWV8fCFyfHx2b2lkIDA9PT1yW2RdKWNvbnRpbnVlO3E9ITB9b1tkXT1yJiZyW2RdfHxtLnN0eWxlKGEsZCl9ZWxzZSBqPXZvaWQgMDtpZihtLmlzRW1wdHlPYmplY3QobykpImlubGluZSI9PT0oIm5vbmUiPT09aj9GYShhLm5vZGVOYW1lKTpqKSYmKHAuZGlzcGxheT1qKTtlbHNle3I/ImhpZGRlbiJpbiByJiYocT1yLmhpZGRlbik6cj1tLl9kYXRhKGEsImZ4c2hvdyIse30pLGYmJihyLmhpZGRlbj0hcSkscT9tKGEpLnNob3coKTpuLmRvbmUoZnVuY3Rpb24oKXttKGEpLmhpZGUoKX0pLG4uZG9uZShmdW5jdGlvbigpe3ZhciBiO20uX3JlbW92ZURhdGEoYSwiZnhzaG93Iik7Zm9yKGIgaW4gbyltLnN0eWxlKGEsYixvW2JdKX0pO2ZvcihkIGluIG8pZz1oYihxP3JbZF06MCxkLG4pLGQgaW4gcnx8KHJbZF09Zy5zdGFydCxxJiYoZy5lbmQ9Zy5zdGFydCxnLnN0YXJ0PSJ3aWR0aCI9PT1kfHwiaGVpZ2h0Ij09PWQ/MTowKSl9fWZ1bmN0aW9uIGpiKGEsYil7dmFyIGMsZCxlLGYsZztmb3IoYyBpbiBhKWlmKGQ9bS5jYW1lbENhc2UoYyksZT1iW2RdLGY9YVtjXSxtLmlzQXJyYXkoZikmJihlPWZbMV0sZj1hW2NdPWZbMF0pLGMhPT1kJiYoYVtkXT1mLGRlbGV0ZSBhW2NdKSxnPW0uY3NzSG9va3NbZF0sZyYmImV4cGFuZCJpbiBnKXtmPWcuZXhwYW5kKGYpLGRlbGV0ZSBhW2RdO2ZvcihjIGluIGYpYyBpbiBhfHwoYVtjXT1mW2NdLGJbY109ZSl9ZWxzZSBiW2RdPWV9ZnVuY3Rpb24ga2IoYSxiLGMpe3ZhciBkLGUsZj0wLGc9ZGIubGVuZ3RoLGg9bS5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSBpLmVsZW19KSxpPWZ1bmN0aW9uKCl7aWYoZSlyZXR1cm4hMTtmb3IodmFyIGI9JGF8fGZiKCksYz1NYXRoLm1heCgwLGouc3RhcnRUaW1lK2ouZHVyYXRpb24tYiksZD1jL2ouZHVyYXRpb258fDAsZj0xLWQsZz0wLGk9ai50d2VlbnMubGVuZ3RoO2k+ZztnKyspai50d2VlbnNbZ10ucnVuKGYpO3JldHVybiBoLm5vdGlmeVdpdGgoYSxbaixmLGNdKSwxPmYmJmk/YzooaC5yZXNvbHZlV2l0aChhLFtqXSksITEpfSxqPWgucHJvbWlzZSh7ZWxlbTphLHByb3BzOm0uZXh0ZW5kKHt9LGIpLG9wdHM6bS5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e319LGMpLG9yaWdpbmFsUHJvcGVydGllczpiLG9yaWdpbmFsT3B0aW9uczpjLHN0YXJ0VGltZTokYXx8ZmIoKSxkdXJhdGlvbjpjLmR1cmF0aW9uLHR3ZWVuczpbXSxjcmVhdGVUd2VlbjpmdW5jdGlvbihiLGMpe3ZhciBkPW0uVHdlZW4oYSxqLm9wdHMsYixjLGoub3B0cy5zcGVjaWFsRWFzaW5nW2JdfHxqLm9wdHMuZWFzaW5nKTtyZXR1cm4gai50d2VlbnMucHVzaChkKSxkfSxzdG9wOmZ1bmN0aW9uKGIpe3ZhciBjPTAsZD1iP2oudHdlZW5zLmxlbmd0aDowO2lmKGUpcmV0dXJuIHRoaXM7Zm9yKGU9ITA7ZD5jO2MrKylqLnR3ZWVuc1tjXS5ydW4oMSk7cmV0dXJuIGI/aC5yZXNvbHZlV2l0aChhLFtqLGJdKTpoLnJlamVjdFdpdGgoYSxbaixiXSksdGhpc319KSxrPWoucHJvcHM7Zm9yKGpiKGssai5vcHRzLnNwZWNpYWxFYXNpbmcpO2c+ZjtmKyspaWYoZD1kYltmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIGQ7cmV0dXJuIG0ubWFwKGssaGIsaiksbS5pc0Z1bmN0aW9uKGoub3B0cy5zdGFydCkmJmoub3B0cy5zdGFydC5jYWxsKGEsaiksbS5meC50aW1lcihtLmV4dGVuZChpLHtlbGVtOmEsYW5pbTpqLHF1ZXVlOmoub3B0cy5xdWV1ZX0pKSxqLnByb2dyZXNzKGoub3B0cy5wcm9ncmVzcykuZG9uZShqLm9wdHMuZG9uZSxqLm9wdHMuY29tcGxldGUpLmZhaWwoai5vcHRzLmZhaWwpLmFsd2F5cyhqLm9wdHMuYWx3YXlzKX1tLkFuaW1hdGlvbj1tLmV4dGVuZChrYix7dHdlZW5lcjpmdW5jdGlvbihhLGIpe20uaXNGdW5jdGlvbihhKT8oYj1hLGE9WyIqIl0pOmE9YS5zcGxpdCgiICIpO2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWM9YVtkXSxlYltjXT1lYltjXXx8W10sZWJbY10udW5zaGlmdChiKX0scHJlZmlsdGVyOmZ1bmN0aW9uKGEsYil7Yj9kYi51bnNoaWZ0KGEpOmRiLnB1c2goYSl9fSksbS5zcGVlZD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YSYmIm9iamVjdCI9PXR5cGVvZiBhP20uZXh0ZW5kKHt9LGEpOntjb21wbGV0ZTpjfHwhYyYmYnx8bS5pc0Z1bmN0aW9uKGEpJiZhLGR1cmF0aW9uOmEsZWFzaW5nOmMmJmJ8fGImJiFtLmlzRnVuY3Rpb24oYikmJmJ9O3JldHVybiBkLmR1cmF0aW9uPW0uZngub2ZmPzA6Im51bWJlciI9PXR5cGVvZiBkLmR1cmF0aW9uP2QuZHVyYXRpb246ZC5kdXJhdGlvbiBpbiBtLmZ4LnNwZWVkcz9tLmZ4LnNwZWVkc1tkLmR1cmF0aW9uXTptLmZ4LnNwZWVkcy5fZGVmYXVsdCwobnVsbD09ZC5xdWV1ZXx8ZC5xdWV1ZT09PSEwKSYmKGQucXVldWU9ImZ4IiksZC5vbGQ9ZC5jb21wbGV0ZSxkLmNvbXBsZXRlPWZ1bmN0aW9uKCl7bS5pc0Z1bmN0aW9uKGQub2xkKSYmZC5vbGQuY2FsbCh0aGlzKSxkLnF1ZXVlJiZtLmRlcXVldWUodGhpcyxkLnF1ZXVlKX0sZH0sbS5mbi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5maWx0ZXIoVSkuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTpifSxhLGMsZCl9LGFuaW1hdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9bS5pc0VtcHR5T2JqZWN0KGEpLGY9bS5zcGVlZChiLGMsZCksZz1mdW5jdGlvbigpe3ZhciBiPWtiKHRoaXMsbS5leHRlbmQoe30sYSksZik7KGV8fG0uX2RhdGEodGhpcywiZmluaXNoIikpJiZiLnN0b3AoITApfTtyZXR1cm4gZy5maW5pc2g9ZyxlfHxmLnF1ZXVlPT09ITE/dGhpcy5lYWNoKGcpOnRoaXMucXVldWUoZi5xdWV1ZSxnKX0sc3RvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdG9wO2RlbGV0ZSBhLnN0b3AsYihjKX07cmV0dXJuInN0cmluZyIhPXR5cGVvZiBhJiYoYz1iLGI9YSxhPXZvaWQgMCksYiYmYSE9PSExJiZ0aGlzLnF1ZXVlKGF8fCJmeCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPSEwLGU9bnVsbCE9YSYmYSsicXVldWVIb29rcyIsZj1tLnRpbWVycyxnPW0uX2RhdGEodGhpcyk7aWYoZSlnW2VdJiZnW2VdLnN0b3AmJmQoZ1tlXSk7ZWxzZSBmb3IoZSBpbiBnKWdbZV0mJmdbZV0uc3RvcCYmY2IudGVzdChlKSYmZChnW2VdKTtmb3IoZT1mLmxlbmd0aDtlLS07KWZbZV0uZWxlbSE9PXRoaXN8fG51bGwhPWEmJmZbZV0ucXVldWUhPT1hfHwoZltlXS5hbmltLnN0b3AoYyksYj0hMSxmLnNwbGljZShlLDEpKTsoYnx8IWMpJiZtLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8ImZ4IiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsYz1tLl9kYXRhKHRoaXMpLGQ9Y1thKyJxdWV1ZSJdLGU9Y1thKyJxdWV1ZUhvb2tzIl0sZj1tLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbS5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxtLmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bS5mbltiXTttLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8ImJvb2xlYW4iPT10eXBlb2YgYT9jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUoZ2IoYiwhMCksYSxkLGUpfX0pLG0uZWFjaCh7c2xpZGVEb3duOmdiKCJzaG93Iiksc2xpZGVVcDpnYigiaGlkZSIpLHNsaWRlVG9nZ2xlOmdiKCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKGEsYil7bS5mblthXT1mdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMuYW5pbWF0ZShiLGEsYyxkKX19KSxtLnRpbWVycz1bXSxtLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgYSxiPW0udGltZXJzLGM9MDtmb3IoJGE9bS5ub3coKTtjPGIubGVuZ3RoO2MrKylhPWJbY10sYSgpfHxiW2NdIT09YXx8Yi5zcGxpY2UoYy0tLDEpO2IubGVuZ3RofHxtLmZ4LnN0b3AoKSwkYT12b2lkIDB9LG0uZngudGltZXI9ZnVuY3Rpb24oYSl7bS50aW1lcnMucHVzaChhKSxhKCk/bS5meC5zdGFydCgpOm0udGltZXJzLnBvcCgpfSxtLmZ4LmludGVydmFsPTEzLG0uZnguc3RhcnQ9ZnVuY3Rpb24oKXtfYXx8KF9hPXNldEludGVydmFsKG0uZngudGljayxtLmZ4LmludGVydmFsKSl9LG0uZnguc3RvcD1mdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwoX2EpLF9hPW51bGx9LG0uZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LG0uZm4uZGVsYXk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1tLmZ4P20uZnguc3BlZWRzW2FdfHxhOmEsYj1ifHwiZngiLHRoaXMucXVldWUoYixmdW5jdGlvbihiLGMpe3ZhciBkPXNldFRpbWVvdXQoYixhKTtjLnN0b3A9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoZCl9fSl9LGZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZTtiPXkuY3JlYXRlRWxlbWVudCgiZGl2IiksYi5zZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIsInQiKSxiLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixkPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXSxjPXkuY3JlYXRlRWxlbWVudCgic2VsZWN0IiksZT1jLmFwcGVuZENoaWxkKHkuY3JlYXRlRWxlbWVudCgib3B0aW9uIikpLGE9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKVswXSxkLnN0eWxlLmNzc1RleHQ9InRvcDoxcHgiLGsuZ2V0U2V0QXR0cmlidXRlPSJ0IiE9PWIuY2xhc3NOYW1lLGsuc3R5bGU9L3RvcC8udGVzdChkLmdldEF0dHJpYnV0ZSgic3R5bGUiKSksay5ocmVmTm9ybWFsaXplZD0iL2EiPT09ZC5nZXRBdHRyaWJ1dGUoImhyZWYiKSxrLmNoZWNrT249ISFhLnZhbHVlLGsub3B0U2VsZWN0ZWQ9ZS5zZWxlY3RlZCxrLmVuY3R5cGU9ISF5LmNyZWF0ZUVsZW1lbnQoImZvcm0iKS5lbmN0eXBlLGMuZGlzYWJsZWQ9ITAsay5vcHREaXNhYmxlZD0hZS5kaXNhYmxlZCxhPXkuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxhLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSxrLmlucHV0PSIiPT09YS5nZXRBdHRyaWJ1dGUoInZhbHVlIiksYS52YWx1ZT0idCIsYS5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYWRpbyIpLGsucmFkaW9WYWx1ZT0idCI9PT1hLnZhbHVlfSgpO3ZhciBsYj0vXHIvZzttLmZuLmV4dGVuZCh7dmFsOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQ9bS5pc0Z1bmN0aW9uKGEpLHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZTsxPT09dGhpcy5ub2RlVHlwZSYmKGU9ZD9hLmNhbGwodGhpcyxjLG0odGhpcykudmFsKCkpOmEsbnVsbD09ZT9lPSIiOiJudW1iZXIiPT10eXBlb2YgZT9lKz0iIjptLmlzQXJyYXkoZSkmJihlPW0ubWFwKGUsZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/IiI6YSsiIn0pKSxiPW0udmFsSG9va3NbdGhpcy50eXBlXXx8bS52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJiJzZXQiaW4gYiYmdm9pZCAwIT09Yi5zZXQodGhpcyxlLCJ2YWx1ZSIpfHwodGhpcy52YWx1ZT1lKSl9KTtpZihlKXJldHVybiBiPW0udmFsSG9va3NbZS50eXBlXXx8bS52YWxIb29rc1tlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJiJnZXQiaW4gYiYmdm9pZCAwIT09KGM9Yi5nZXQoZSwidmFsdWUiKSk/YzooYz1lLnZhbHVlLCJzdHJpbmciPT10eXBlb2YgYz9jLnJlcGxhY2UobGIsIiIpOm51bGw9PWM/IiI6Yyl9fX0pLG0uZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bS5maW5kLmF0dHIoYSwidmFsdWUiKTtyZXR1cm4gbnVsbCE9Yj9iOm0udHJpbShtLnRleHQoYSkpfX0sc2VsZWN0OntnZXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGMsZD1hLm9wdGlvbnMsZT1hLnNlbGVjdGVkSW5kZXgsZj0ic2VsZWN0LW9uZSI9PT1hLnR5cGV8fDA+ZSxnPWY/bnVsbDpbXSxoPWY/ZSsxOmQubGVuZ3RoLGk9MD5lP2g6Zj9lOjA7aD5pO2krKylpZihjPWRbaV0sISghYy5zZWxlY3RlZCYmaSE9PWV8fChrLm9wdERpc2FibGVkP2MuZGlzYWJsZWQ6bnVsbCE9PWMuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpKXx8Yy5wYXJlbnROb2RlLmRpc2FibGVkJiZtLm5vZGVOYW1lKGMucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe2lmKGI9bShjKS52YWwoKSxmKXJldHVybiBiO2cucHVzaChiKX1yZXR1cm4gZ30sc2V0OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPWEub3B0aW9ucyxmPW0ubWFrZUFycmF5KGIpLGc9ZS5sZW5ndGg7d2hpbGUoZy0tKWlmKGQ9ZVtnXSxtLmluQXJyYXkobS52YWxIb29rcy5vcHRpb24uZ2V0KGQpLGYpPj0wKXRyeXtkLnNlbGVjdGVkPWM9ITB9Y2F0Y2goaCl7ZC5zY3JvbGxIZWlnaHR9ZWxzZSBkLnNlbGVjdGVkPSExO3JldHVybiBjfHwoYS5zZWxlY3RlZEluZGV4PS0xKSxlfX19fSksbS5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7bS52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG0uaXNBcnJheShiKT9hLmNoZWNrZWQ9bS5pbkFycmF5KG0oYSkudmFsKCksYik+PTA6dm9pZCAwfX0say5jaGVja09ufHwobS52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PT1hLmdldEF0dHJpYnV0ZSgidmFsdWUiKT8ib24iOmEudmFsdWV9KX0pO3ZhciBtYixuYixvYj1tLmV4cHIuYXR0ckhhbmRsZSxwYj0vXig/OmNoZWNrZWR8c2VsZWN0ZWQpJC9pLHFiPWsuZ2V0U2V0QXR0cmlidXRlLHJiPWsuaW5wdXQ7bS5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVih0aGlzLG0uYXR0cixhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bS5yZW1vdmVBdHRyKHRoaXMsYSl9KX19KSxtLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoYSYmMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4gdHlwZW9mIGEuZ2V0QXR0cmlidXRlPT09Sz9tLnByb3AoYSxiLGMpOigxPT09ZiYmbS5pc1hNTERvYyhhKXx8KGI9Yi50b0xvd2VyQ2FzZSgpLGQ9bS5hdHRySG9va3NbYl18fChtLmV4cHIubWF0Y2guYm9vbC50ZXN0KGIpP25iOm1iKSksdm9pZCAwPT09Yz9kJiYiZ2V0ImluIGQmJm51bGwhPT0oZT1kLmdldChhLGIpKT9lOihlPW0uZmluZC5hdHRyKGEsYiksbnVsbD09ZT92b2lkIDA6ZSk6bnVsbCE9PWM/ZCYmInNldCJpbiBkJiZ2b2lkIDAhPT0oZT1kLnNldChhLGMsYikpP2U6KGEuc2V0QXR0cmlidXRlKGIsYysiIiksYyk6dm9pZCBtLnJlbW92ZUF0dHIoYSxiKSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9MCxmPWImJmIubWF0Y2goRSk7aWYoZiYmMT09PWEubm9kZVR5cGUpd2hpbGUoYz1mW2UrK10pZD1tLnByb3BGaXhbY118fGMsbS5leHByLm1hdGNoLmJvb2wudGVzdChjKT9yYiYmcWJ8fCFwYi50ZXN0KGMpP2FbZF09ITE6YVttLmNhbWVsQ2FzZSgiZGVmYXVsdC0iK2MpXT1hW2RdPSExOm0uYXR0cihhLGMsIiIpLGEucmVtb3ZlQXR0cmlidXRlKHFiP2M6ZCl9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGEsYil7aWYoIWsucmFkaW9WYWx1ZSYmInJhZGlvIj09PWImJm0ubm9kZU5hbWUoYSwiaW5wdXQiKSl7dmFyIGM9YS52YWx1ZTtyZXR1cm4gYS5zZXRBdHRyaWJ1dGUoInR5cGUiLGIpLGMmJihhLnZhbHVlPWMpLGJ9fX19fSksbmI9e3NldDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGI9PT0hMT9tLnJlbW92ZUF0dHIoYSxjKTpyYiYmcWJ8fCFwYi50ZXN0KGMpP2Euc2V0QXR0cmlidXRlKCFxYiYmbS5wcm9wRml4W2NdfHxjLGMpOmFbbS5jYW1lbENhc2UoImRlZmF1bHQtIitjKV09YVtjXT0hMCxjfX0sbS5lYWNoKG0uZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXHcrL2cpLGZ1bmN0aW9uKGEsYil7dmFyIGM9b2JbYl18fG0uZmluZC5hdHRyO29iW2JdPXJiJiZxYnx8IXBiLnRlc3QoYik/ZnVuY3Rpb24oYSxiLGQpe3ZhciBlLGY7cmV0dXJuIGR8fChmPW9iW2JdLG9iW2JdPWUsZT1udWxsIT1jKGEsYixkKT9iLnRvTG93ZXJDYXNlKCk6bnVsbCxvYltiXT1mKSxlfTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dm9pZCAwOmFbbS5jYW1lbENhc2UoImRlZmF1bHQtIitiKV0/Yi50b0xvd2VyQ2FzZSgpOm51bGx9fSkscmImJnFifHwobS5hdHRySG9va3MudmFsdWU9e3NldDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG0ubm9kZU5hbWUoYSwiaW5wdXQiKT92b2lkKGEuZGVmYXVsdFZhbHVlPWIpOm1iJiZtYi5zZXQoYSxiLGMpfX0pLHFifHwobWI9e3NldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5nZXRBdHRyaWJ1dGVOb2RlKGMpO3JldHVybiBkfHxhLnNldEF0dHJpYnV0ZU5vZGUoZD1hLm93bmVyRG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKGMpKSxkLnZhbHVlPWIrPSIiLCJ2YWx1ZSI9PT1jfHxiPT09YS5nZXRBdHRyaWJ1dGUoYyk/Yjp2b2lkIDB9fSxvYi5pZD1vYi5uYW1lPW9iLmNvb3Jkcz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGM/dm9pZCAwOihkPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJiIiIT09ZC52YWx1ZT9kLnZhbHVlOm51bGx9LG0udmFsSG9va3MuYnV0dG9uPXtnZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmdldEF0dHJpYnV0ZU5vZGUoYik7cmV0dXJuIGMmJmMuc3BlY2lmaWVkP2MudmFsdWU6dm9pZCAwfSxzZXQ6bWIuc2V0fSxtLmF0dHJIb29rcy5jb250ZW50ZWRpdGFibGU9e3NldDpmdW5jdGlvbihhLGIsYyl7bWIuc2V0KGEsIiI9PT1iPyExOmIsYyl9fSxtLmVhY2goWyJ3aWR0aCIsImhlaWdodCJdLGZ1bmN0aW9uKGEsYil7bS5hdHRySG9va3NbYl09e3NldDpmdW5jdGlvbihhLGMpe3JldHVybiIiPT09Yz8oYS5zZXRBdHRyaWJ1dGUoYiwiYXV0byIpLGMpOnZvaWQgMH19fSkpLGsuc3R5bGV8fChtLmF0dHJIb29rcy5zdHlsZT17Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLnN0eWxlLmNzc1RleHR8fHZvaWQgMH0sc2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuc3R5bGUuY3NzVGV4dD1iKyIifX0pO3ZhciBzYj0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0KSQvaSx0Yj0vXig/OmF8YXJlYSkkL2k7bS5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVih0aGlzLG0ucHJvcCxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihhKXtyZXR1cm4gYT1tLnByb3BGaXhbYV18fGEsdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dHJ5e3RoaXNbYV09dm9pZCAwLGRlbGV0ZSB0aGlzW2FdfWNhdGNoKGIpe319KX19KSxtLmV4dGVuZCh7cHJvcEZpeDp7ImZvciI6Imh0bWxGb3IiLCJjbGFzcyI6ImNsYXNzTmFtZSJ9LHByb3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnPWEubm9kZVR5cGU7aWYoYSYmMyE9PWcmJjghPT1nJiYyIT09ZylyZXR1cm4gZj0xIT09Z3x8IW0uaXNYTUxEb2MoYSksZiYmKGI9bS5wcm9wRml4W2JdfHxiLGU9bS5wcm9wSG9va3NbYl0pLHZvaWQgMCE9PWM/ZSYmInNldCJpbiBlJiZ2b2lkIDAhPT0oZD1lLnNldChhLGMsYikpP2Q6YVtiXT1jOmUmJiJnZXQiaW4gZSYmbnVsbCE9PShkPWUuZ2V0KGEsYikpP2Q6YVtiXX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPW0uZmluZC5hdHRyKGEsInRhYmluZGV4Iik7cmV0dXJuIGI/cGFyc2VJbnQoYiwxMCk6c2IudGVzdChhLm5vZGVOYW1lKXx8dGIudGVzdChhLm5vZGVOYW1lKSYmYS5ocmVmPzA6LTF9fX19KSxrLmhyZWZOb3JtYWxpemVkfHxtLmVhY2goWyJocmVmIiwic3JjIl0sZnVuY3Rpb24oYSxiKXttLnByb3BIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShiLDQpfX19KSxrLm9wdFNlbGVjdGVkfHwobS5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJihiLnNlbGVjdGVkSW5kZXgsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCksbnVsbH19KSxtLmVhY2goWyJ0YWJJbmRleCIsInJlYWRPbmx5IiwibWF4TGVuZ3RoIiwiY2VsbFNwYWNpbmciLCJjZWxsUGFkZGluZyIsInJvd1NwYW4iLCJjb2xTcGFuIiwidXNlTWFwIiwiZnJhbWVCb3JkZXIiLCJjb250ZW50RWRpdGFibGUiXSxmdW5jdGlvbigpe20ucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXN9KSxrLmVuY3R5cGV8fChtLnByb3BGaXguZW5jdHlwZT0iZW5jb2RpbmciKTt2YXIgdWI9L1tcdFxyXG5cZl0vZzttLmZuLmV4dGVuZCh7YWRkQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGg9MCxpPXRoaXMubGVuZ3RoLGo9InN0cmluZyI9PXR5cGVvZiBhJiZhO2lmKG0uaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe20odGhpcykuYWRkQ2xhc3MoYS5jYWxsKHRoaXMsYix0aGlzLmNsYXNzTmFtZSkpfSk7aWYoailmb3IoYj0oYXx8IiIpLm1hdGNoKEUpfHxbXTtpPmg7aCsrKWlmKGM9dGhpc1toXSxkPTE9PT1jLm5vZGVUeXBlJiYoYy5jbGFzc05hbWU/KCIgIitjLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UodWIsIiAiKToiICIpKXtmPTA7d2hpbGUoZT1iW2YrK10pZC5pbmRleE9mKCIgIitlKyIgIik8MCYmKGQrPWUrIiAiKTtnPW0udHJpbShkKSxjLmNsYXNzTmFtZSE9PWcmJihjLmNsYXNzTmFtZT1nKX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGg9MCxpPXRoaXMubGVuZ3RoLGo9MD09PWFyZ3VtZW50cy5sZW5ndGh8fCJzdHJpbmciPT10eXBlb2YgYSYmYTtpZihtLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXttKHRoaXMpLnJlbW92ZUNsYXNzKGEuY2FsbCh0aGlzLGIsdGhpcy5jbGFzc05hbWUpKX0pO2lmKGopZm9yKGI9KGF8fCIiKS5tYXRjaChFKXx8W107aT5oO2grKylpZihjPXRoaXNbaF0sZD0xPT09Yy5ub2RlVHlwZSYmKGMuY2xhc3NOYW1lPygiICIrYy5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKHViLCIgIik6IiIpKXtmPTA7d2hpbGUoZT1iW2YrK10pd2hpbGUoZC5pbmRleE9mKCIgIitlKyIgIik+PTApZD1kLnJlcGxhY2UoIiAiK2UrIiAiLCIgIik7Zz1hP20udHJpbShkKToiIixjLmNsYXNzTmFtZSE9PWcmJihjLmNsYXNzTmFtZT1nKX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz10eXBlb2YgYTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBiJiYic3RyaW5nIj09PWM/Yj90aGlzLmFkZENsYXNzKGEpOnRoaXMucmVtb3ZlQ2xhc3MoYSk6dGhpcy5lYWNoKG0uaXNGdW5jdGlvbihhKT9mdW5jdGlvbihjKXttKHRoaXMpLnRvZ2dsZUNsYXNzKGEuY2FsbCh0aGlzLGMsdGhpcy5jbGFzc05hbWUsYiksYil9OmZ1bmN0aW9uKCl7aWYoInN0cmluZyI9PT1jKXt2YXIgYixkPTAsZT1tKHRoaXMpLGY9YS5tYXRjaChFKXx8W107d2hpbGUoYj1mW2QrK10pZS5oYXNDbGFzcyhiKT9lLnJlbW92ZUNsYXNzKGIpOmUuYWRkQ2xhc3MoYil9ZWxzZShjPT09S3x8ImJvb2xlYW4iPT09YykmJih0aGlzLmNsYXNzTmFtZSYmbS5fZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGE9PT0hMT8iIjptLl9kYXRhKHRoaXMsIl9fY2xhc3NOYW1lX18iKXx8IiIpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0iICIrYSsiICIsYz0wLGQ9dGhpcy5sZW5ndGg7ZD5jO2MrKylpZigxPT09dGhpc1tjXS5ub2RlVHlwZSYmKCIgIit0aGlzW2NdLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UodWIsIiAiKS5pbmRleE9mKGIpPj0wKXJldHVybiEwO3JldHVybiExfX0pLG0uZWFjaCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudSIuc3BsaXQoIiAiKSxmdW5jdGlvbihhLGIpe20uZm5bYl09ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24oYixudWxsLGEsYyk6dGhpcy50cmlnZ2VyKGIpfX0pLG0uZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoYSkubW91c2VsZWF2ZShifHxhKX0sYmluZDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMub24oYSxudWxsLGIsYyl9LHVuYmluZDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm9mZihhLG51bGwsYil9LGRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm9uKGIsYSxjLGQpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vZmYoYSwiKioiKTp0aGlzLm9mZihiLGF8fCIqKiIsYyl9fSk7dmFyIHZiPW0ubm93KCksd2I9L1w/Lyx4Yj0vKCwpfChcW3x7KXwofXxdKXwiKD86W14iXFxcclxuXXxcXFsiXFxcL2JmbnJ0XXxcXHVbXGRhLWZBLUZdezR9KSoiXHMqOj98dHJ1ZXxmYWxzZXxudWxsfC0/KD8hMFxkKVxkKyg/OlwuXGQrfCkoPzpbZUVdWystXT9cZCt8KS9nO20ucGFyc2VKU09OPWZ1bmN0aW9uKGIpe2lmKGEuSlNPTiYmYS5KU09OLnBhcnNlKXJldHVybiBhLkpTT04ucGFyc2UoYisiIik7dmFyIGMsZD1udWxsLGU9bS50cmltKGIrIiIpO3JldHVybiBlJiYhbS50cmltKGUucmVwbGFjZSh4YixmdW5jdGlvbihhLGIsZSxmKXtyZXR1cm4gYyYmYiYmKGQ9MCksMD09PWQ/YTooYz1lfHxiLGQrPSFmLSFlLCIiKX0pKT9GdW5jdGlvbigicmV0dXJuICIrZSkoKTptLmVycm9yKCJJbnZhbGlkIEpTT046ICIrYil9LG0ucGFyc2VYTUw9ZnVuY3Rpb24oYil7dmFyIGMsZDtpZighYnx8InN0cmluZyIhPXR5cGVvZiBiKXJldHVybiBudWxsO3RyeXthLkRPTVBhcnNlcj8oZD1uZXcgRE9NUGFyc2VyLGM9ZC5wYXJzZUZyb21TdHJpbmcoYiwidGV4dC94bWwiKSk6KGM9bmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKSxjLmFzeW5jPSJmYWxzZSIsYy5sb2FkWE1MKGIpKX1jYXRjaChlKXtjPXZvaWQgMH1yZXR1cm4gYyYmYy5kb2N1bWVudEVsZW1lbnQmJiFjLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aHx8bS5lcnJvcigiSW52YWxpZCBYTUw6ICIrYiksY307dmFyIHliLHpiLEFiPS8jLiokLyxCYj0vKFs/Jl0pXz1bXiZdKi8sQ2I9L14oLio/KTpbIFx0XSooW15cclxuXSopXHI/JC9nbSxEYj0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxFYj0vXig/OkdFVHxIRUFEKSQvLEZiPS9eXC9cLy8sR2I9L14oW1x3ListXSs6KSg/OlwvXC8oPzpbXlwvPyNdKkB8KShbXlwvPyM6XSopKD86OihcZCspfCl8KS8sSGI9e30sSWI9e30sSmI9IiovIi5jb25jYXQoIioiKTt0cnl7emI9bG9jYXRpb24uaHJlZn1jYXRjaChLYil7emI9eS5jcmVhdGVFbGVtZW50KCJhIiksemIuaHJlZj0iIix6Yj16Yi5ocmVmfXliPUdiLmV4ZWMoemIudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIExiKGEpe3JldHVybiBmdW5jdGlvbihiLGMpeyJzdHJpbmciIT10eXBlb2YgYiYmKGM9YixiPSIqIik7dmFyIGQsZT0wLGY9Yi50b0xvd2VyQ2FzZSgpLm1hdGNoKEUpfHxbXTtpZihtLmlzRnVuY3Rpb24oYykpd2hpbGUoZD1mW2UrK10pIisiPT09ZC5jaGFyQXQoMCk/KGQ9ZC5zbGljZSgxKXx8IioiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24gTWIoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09SWI7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxtLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlWyIqIl0mJmcoIioiKX1mdW5jdGlvbiBOYihhLGIpe3ZhciBjLGQsZT1tLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGQgaW4gYil2b2lkIDAhPT1iW2RdJiYoKGVbZF0/YTpjfHwoYz17fSkpW2RdPWJbZF0pO3JldHVybiBjJiZtLmV4dGVuZCghMCxhLGMpLGF9ZnVuY3Rpb24gT2IoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKCIqIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWUmJihlPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihlKWZvcihnIGluIGgpaWYoaFtnXSYmaFtnXS50ZXN0KGUpKXtpLnVuc2hpZnQoZyk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGcgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tnKyIgIitpWzBdXSl7Zj1nO2JyZWFrfWR8fChkPWcpfWY9Znx8ZH1yZXR1cm4gZj8oZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdKTp2b2lkIDB9ZnVuY3Rpb24gUGIoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZigiKiI9PT1mKWY9aTtlbHNlIGlmKCIqIiE9PWkmJmkhPT1mKXtpZihnPWpbaSsiICIrZl18fGpbIiogIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdCgiICIpLGhbMV09PT1mJiYoZz1qW2krIiAiK2hbMF1dfHxqWyIqICIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhWyJ0aHJvd3MiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmc/bDoiTm8gY29udmVyc2lvbiBmcm9tICIraSsiIHRvICIrZn19fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTpifX1tLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6emIsdHlwZToiR0VUIixpc0xvY2FsOkRiLnRlc3QoeWJbMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZToiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IixhY2NlcHRzOnsiKiI6SmIsdGV4dDoidGV4dC9wbGFpbiIsaHRtbDoidGV4dC9odG1sIix4bWw6ImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwiLGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCJ9LGNvbnRlbnRzOnt4bWw6L3htbC8saHRtbDovaHRtbC8sanNvbjovanNvbi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3BvbnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQiLGpzb246InJlc3BvbnNlSlNPTiJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOlN0cmluZywidGV4dCBodG1sIjohMCwidGV4dCBqc29uIjptLnBhcnNlSlNPTiwidGV4dCB4bWwiOm0ucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihhLGIpe3JldHVybiBiP05iKE5iKGEsbS5hamF4U2V0dGluZ3MpLGIpOk5iKG0uYWpheFNldHRpbmdzLGEpfSxhamF4UHJlZmlsdGVyOkxiKEhiKSxhamF4VHJhbnNwb3J0OkxiKEliKSxhamF4OmZ1bmN0aW9uKGEsYil7Im9iamVjdCI9PXR5cGVvZiBhJiYoYj1hLGE9dm9pZCAwKSxiPWJ8fHt9O3ZhciBjLGQsZSxmLGcsaCxpLGosaz1tLmFqYXhTZXR1cCh7fSxiKSxsPWsuY29udGV4dHx8ayxuPWsuY29udGV4dCYmKGwubm9kZVR5cGV8fGwuanF1ZXJ5KT9tKGwpOm0uZXZlbnQsbz1tLkRlZmVycmVkKCkscD1tLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxxPWsuc3RhdHVzQ29kZXx8e30scj17fSxzPXt9LHQ9MCx1PSJjYW5jZWxlZCIsdj17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKDI9PT10KXtpZighail7aj17fTt3aGlsZShiPUNiLmV4ZWMoZikpaltiWzFdLnRvTG93ZXJDYXNlKCldPWJbMl19Yj1qW2EudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PWI/bnVsbDpifSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXQ/ZjpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS50b0xvd2VyQ2FzZSgpO3JldHVybiB0fHwoYT1zW2NdPXNbY118fGEsclthXT1iKSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGEpe3JldHVybiB0fHwoay5taW1lVHlwZT1hKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEpaWYoMj50KWZvcihiIGluIGEpcVtiXT1bcVtiXSxhW2JdXTtlbHNlIHYuYWx3YXlzKGFbdi5zdGF0dXNdKTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YXx8dTtyZXR1cm4gaSYmaS5hYm9ydChiKSx4KDAsYiksdGhpc319O2lmKG8ucHJvbWlzZSh2KS5jb21wbGV0ZT1wLmFkZCx2LnN1Y2Nlc3M9di5kb25lLHYuZXJyb3I9di5mYWlsLGsudXJsPSgoYXx8ay51cmx8fHpiKSsiIikucmVwbGFjZShBYiwiIikucmVwbGFjZShGYix5YlsxXSsiLy8iKSxrLnR5cGU9Yi5tZXRob2R8fGIudHlwZXx8ay5tZXRob2R8fGsudHlwZSxrLmRhdGFUeXBlcz1tLnRyaW0oay5kYXRhVHlwZXx8IioiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKEUpfHxbIiJdLG51bGw9PWsuY3Jvc3NEb21haW4mJihjPUdiLmV4ZWMoay51cmwudG9Mb3dlckNhc2UoKSksay5jcm9zc0RvbWFpbj0hKCFjfHxjWzFdPT09eWJbMV0mJmNbMl09PT15YlsyXSYmKGNbM118fCgiaHR0cDoiPT09Y1sxXT8iODAiOiI0NDMiKSk9PT0oeWJbM118fCgiaHR0cDoiPT09eWJbMV0/IjgwIjoiNDQzIikpKSksay5kYXRhJiZrLnByb2Nlc3NEYXRhJiYic3RyaW5nIiE9dHlwZW9mIGsuZGF0YSYmKGsuZGF0YT1tLnBhcmFtKGsuZGF0YSxrLnRyYWRpdGlvbmFsKSksTWIoSGIsayxiLHYpLDI9PT10KXJldHVybiB2O2g9bS5ldmVudCYmay5nbG9iYWwsaCYmMD09PW0uYWN0aXZlKysmJm0uZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0Iiksay50eXBlPWsudHlwZS50b1VwcGVyQ2FzZSgpLGsuaGFzQ29udGVudD0hRWIudGVzdChrLnR5cGUpLGU9ay51cmwsay5oYXNDb250ZW50fHwoay5kYXRhJiYoZT1rLnVybCs9KHdiLnRlc3QoZSk/IiYiOiI/Iikray5kYXRhLGRlbGV0ZSBrLmRhdGEpLGsuY2FjaGU9PT0hMSYmKGsudXJsPUJiLnRlc3QoZSk/ZS5yZXBsYWNlKEJiLCIkMV89Iit2YisrKTplKyh3Yi50ZXN0KGUpPyImIjoiPyIpKyJfPSIrdmIrKykpLGsuaWZNb2RpZmllZCYmKG0ubGFzdE1vZGlmaWVkW2VdJiZ2LnNldFJlcXVlc3RIZWFkZXIoIklmLU1vZGlmaWVkLVNpbmNlIixtLmxhc3RNb2RpZmllZFtlXSksbS5ldGFnW2VdJiZ2LnNldFJlcXVlc3RIZWFkZXIoIklmLU5vbmUtTWF0Y2giLG0uZXRhZ1tlXSkpLChrLmRhdGEmJmsuaGFzQ29udGVudCYmay5jb250ZW50VHlwZSE9PSExfHxiLmNvbnRlbnRUeXBlKSYmdi5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLGsuY29udGVudFR5cGUpLHYuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IixrLmRhdGFUeXBlc1swXSYmay5hY2NlcHRzW2suZGF0YVR5cGVzWzBdXT9rLmFjY2VwdHNbay5kYXRhVHlwZXNbMF1dKygiKiIhPT1rLmRhdGFUeXBlc1swXT8iLCAiK0piKyI7IHE9MC4wMSI6IiIpOmsuYWNjZXB0c1siKiJdKTtmb3IoZCBpbiBrLmhlYWRlcnMpdi5zZXRSZXF1ZXN0SGVhZGVyKGQsay5oZWFkZXJzW2RdKTtpZihrLmJlZm9yZVNlbmQmJihrLmJlZm9yZVNlbmQuY2FsbChsLHYsayk9PT0hMXx8Mj09PXQpKXJldHVybiB2LmFib3J0KCk7dT0iYWJvcnQiO2ZvcihkIGlue3N1Y2Nlc3M6MSxlcnJvcjoxLGNvbXBsZXRlOjF9KXZbZF0oa1tkXSk7aWYoaT1NYihJYixrLGIsdikpe3YucmVhZHlTdGF0ZT0xLGgmJm4udHJpZ2dlcigiYWpheFNlbmQiLFt2LGtdKSxrLmFzeW5jJiZrLnRpbWVvdXQ+MCYmKGc9c2V0VGltZW91dChmdW5jdGlvbigpe3YuYWJvcnQoInRpbWVvdXQiKX0say50aW1lb3V0KSk7dHJ5e3Q9MSxpLnNlbmQocix4KX1jYXRjaCh3KXtpZighKDI+dCkpdGhyb3cgdzt4KC0xLHcpfX1lbHNlIHgoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIHgoYSxiLGMsZCl7dmFyIGoscixzLHUsdyx4PWI7MiE9PXQmJih0PTIsZyYmY2xlYXJUaW1lb3V0KGcpLGk9dm9pZCAwLGY9ZHx8IiIsdi5yZWFkeVN0YXRlPWE+MD80OjAsaj1hPj0yMDAmJjMwMD5hfHwzMDQ9PT1hLGMmJih1PU9iKGssdixjKSksdT1QYihrLHUsdixqKSxqPyhrLmlmTW9kaWZpZWQmJih3PXYuZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKSx3JiYobS5sYXN0TW9kaWZpZWRbZV09dyksdz12LmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIiksdyYmKG0uZXRhZ1tlXT13KSksMjA0PT09YXx8IkhFQUQiPT09ay50eXBlP3g9Im5vY29udGVudCI6MzA0PT09YT94PSJub3Rtb2RpZmllZCI6KHg9dS5zdGF0ZSxyPXUuZGF0YSxzPXUuZXJyb3Isaj0hcykpOihzPXgsKGF8fCF4KSYmKHg9ImVycm9yIiwwPmEmJihhPTApKSksdi5zdGF0dXM9YSx2LnN0YXR1c1RleHQ9KGJ8fHgpKyIiLGo/by5yZXNvbHZlV2l0aChsLFtyLHgsdl0pOm8ucmVqZWN0V2l0aChsLFt2LHgsc10pLHYuc3RhdHVzQ29kZShxKSxxPXZvaWQgMCxoJiZuLnRyaWdnZXIoaj8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFt2LGssaj9yOnNdKSxwLmZpcmVXaXRoKGwsW3YseF0pLGgmJihuLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW3Ysa10pLC0tbS5hY3RpdmV8fG0uZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiB2fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbS5nZXQoYSxiLGMsImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG0uZ2V0KGEsdm9pZCAwLGIsInNjcmlwdCIpfX0pLG0uZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihhLGIpe21bYl09ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIG0uaXNGdW5jdGlvbihjKSYmKGU9ZXx8ZCxkPWMsYz12b2lkIDApLG0uYWpheCh7dXJsOmEsdHlwZTpiLGRhdGFUeXBlOmUsZGF0YTpjLHN1Y2Nlc3M6ZH0pfX0pLG0uX2V2YWxVcmw9ZnVuY3Rpb24oYSl7cmV0dXJuIG0uYWpheCh7dXJsOmEsdHlwZToiR0VUIixkYXRhVHlwZToic2NyaXB0Iixhc3luYzohMSxnbG9iYWw6ITEsInRocm93cyI6ITB9KX0sbS5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oYSl7aWYobS5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bSh0aGlzKS53cmFwQWxsKGEuY2FsbCh0aGlzLGIpKX0pO2lmKHRoaXNbMF0pe3ZhciBiPW0oYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKTt0aGlzWzBdLnBhcmVudE5vZGUmJmIuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLGIubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpczt3aGlsZShhLmZpcnN0Q2hpbGQmJjE9PT1hLmZpcnN0Q2hpbGQubm9kZVR5cGUpYT1hLmZpcnN0Q2hpbGQ7cmV0dXJuIGF9KS5hcHBlbmQodGhpcyl9cmV0dXJuIHRoaXN9LHdyYXBJbm5lcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKG0uaXNGdW5jdGlvbihhKT9mdW5jdGlvbihiKXttKHRoaXMpLndyYXBJbm5lcihhLmNhbGwodGhpcyxiKSl9OmZ1bmN0aW9uKCl7dmFyIGI9bSh0aGlzKSxjPWIuY29udGVudHMoKTtjLmxlbmd0aD9jLndyYXBBbGwoYSk6Yi5hcHBlbmQoYSl9KX0sd3JhcDpmdW5jdGlvbihhKXt2YXIgYj1tLmlzRnVuY3Rpb24oYSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXttKHRoaXMpLndyYXBBbGwoYj9hLmNhbGwodGhpcyxjKTphKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7bS5ub2RlTmFtZSh0aGlzLCJib2R5Iil8fG0odGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfX0pLG0uZXhwci5maWx0ZXJzLmhpZGRlbj1mdW5jdGlvbihhKXtyZXR1cm4gYS5vZmZzZXRXaWR0aDw9MCYmYS5vZmZzZXRIZWlnaHQ8PTB8fCFrLnJlbGlhYmxlSGlkZGVuT2Zmc2V0cygpJiYibm9uZSI9PT0oYS5zdHlsZSYmYS5zdHlsZS5kaXNwbGF5fHxtLmNzcyhhLCJkaXNwbGF5IikpfSxtLmV4cHIuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKGEpe3JldHVybiFtLmV4cHIuZmlsdGVycy5oaWRkZW4oYSl9O3ZhciBRYj0vJTIwL2csUmI9L1xbXF0kLyxTYj0vXHI/XG4vZyxUYj0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksVWI9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2Z1bmN0aW9uIFZiKGEsYixjLGQpe3ZhciBlO2lmKG0uaXNBcnJheShiKSltLmVhY2goYixmdW5jdGlvbihiLGUpe2N8fFJiLnRlc3QoYSk/ZChhLGUpOlZiKGErIlsiKygib2JqZWN0Ij09dHlwZW9mIGU/YjoiIikrIl0iLGUsYyxkKX0pO2Vsc2UgaWYoY3x8Im9iamVjdCIhPT1tLnR5cGUoYikpZChhLGIpO2Vsc2UgZm9yKGUgaW4gYilWYihhKyJbIitlKyJdIixiW2VdLGMsZCl9bS5wYXJhbT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1mdW5jdGlvbihhLGIpe2I9bS5pc0Z1bmN0aW9uKGIpP2IoKTpudWxsPT1iPyIiOmIsZFtkLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGEpKyI9IitlbmNvZGVVUklDb21wb25lbnQoYil9O2lmKHZvaWQgMD09PWImJihiPW0uYWpheFNldHRpbmdzJiZtLmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbCksbS5pc0FycmF5KGEpfHxhLmpxdWVyeSYmIW0uaXNQbGFpbk9iamVjdChhKSltLmVhY2goYSxmdW5jdGlvbigpe2UodGhpcy5uYW1lLHRoaXMudmFsdWUpfSk7ZWxzZSBmb3IoYyBpbiBhKVZiKGMsYVtjXSxiLGUpO3JldHVybiBkLmpvaW4oIiYiKS5yZXBsYWNlKFFiLCIrIil9LG0uZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gbS5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPW0ucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBhP20ubWFrZUFycmF5KGEpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgYT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIW0odGhpcykuaXMoIjpkaXNhYmxlZCIpJiZVYi50ZXN0KHRoaXMubm9kZU5hbWUpJiYhVGIudGVzdChhKSYmKHRoaXMuY2hlY2tlZHx8IVcudGVzdChhKSl9KS5tYXAoZnVuY3Rpb24oYSxiKXt2YXIgYz1tKHRoaXMpLnZhbCgpO3JldHVybiBudWxsPT1jP251bGw6bS5pc0FycmF5KGMpP20ubWFwKGMsZnVuY3Rpb24oYSl7cmV0dXJue25hbWU6Yi5uYW1lLHZhbHVlOmEucmVwbGFjZShTYiwiXHJcbiIpfX0pOntuYW1lOmIubmFtZSx2YWx1ZTpjLnJlcGxhY2UoU2IsIlxyXG4iKX19KS5nZXQoKX19KSxtLmFqYXhTZXR0aW5ncy54aHI9dm9pZCAwIT09YS5BY3RpdmVYT2JqZWN0P2Z1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNMb2NhbCYmL14oZ2V0fHBvc3R8aGVhZHxwdXR8ZGVsZXRlfG9wdGlvbnMpJC9pLnRlc3QodGhpcy50eXBlKSYmWmIoKXx8JGIoKX06WmI7dmFyIFdiPTAsWGI9e30sWWI9bS5hamF4U2V0dGluZ3MueGhyKCk7YS5hdHRhY2hFdmVudCYmYS5hdHRhY2hFdmVudCgib251bmxvYWQiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIFhiKVhiW2FdKHZvaWQgMCwhMCl9KSxrLmNvcnM9ISFZYiYmIndpdGhDcmVkZW50aWFscyJpbiBZYixZYj1rLmFqYXg9ISFZYixZYiYmbS5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGEpe2lmKCFhLmNyb3NzRG9tYWlufHxrLmNvcnMpe3ZhciBiO3JldHVybntzZW5kOmZ1bmN0aW9uKGMsZCl7dmFyIGUsZj1hLnhocigpLGc9KytXYjtpZihmLm9wZW4oYS50eXBlLGEudXJsLGEuYXN5bmMsYS51c2VybmFtZSxhLnBhc3N3b3JkKSxhLnhockZpZWxkcylmb3IoZSBpbiBhLnhockZpZWxkcylmW2VdPWEueGhyRmllbGRzW2VdO2EubWltZVR5cGUmJmYub3ZlcnJpZGVNaW1lVHlwZSYmZi5vdmVycmlkZU1pbWVUeXBlKGEubWltZVR5cGUpLGEuY3Jvc3NEb21haW58fGNbIlgtUmVxdWVzdGVkLVdpdGgiXXx8KGNbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTtmb3IoZSBpbiBjKXZvaWQgMCE9PWNbZV0mJmYuc2V0UmVxdWVzdEhlYWRlcihlLGNbZV0rIiIpO2Yuc2VuZChhLmhhc0NvbnRlbnQmJmEuZGF0YXx8bnVsbCksYj1mdW5jdGlvbihjLGUpe3ZhciBoLGksajtpZihiJiYoZXx8ND09PWYucmVhZHlTdGF0ZSkpaWYoZGVsZXRlIFhiW2ddLGI9dm9pZCAwLGYub25yZWFkeXN0YXRlY2hhbmdlPW0ubm9vcCxlKTQhPT1mLnJlYWR5U3RhdGUmJmYuYWJvcnQoKTtlbHNle2o9e30saD1mLnN0YXR1cywic3RyaW5nIj09dHlwZW9mIGYucmVzcG9uc2VUZXh0JiYoai50ZXh0PWYucmVzcG9uc2VUZXh0KTt0cnl7aT1mLnN0YXR1c1RleHR9Y2F0Y2goayl7aT0iIn1ofHwhYS5pc0xvY2FsfHxhLmNyb3NzRG9tYWluPzEyMjM9PT1oJiYoaD0yMDQpOmg9ai50ZXh0PzIwMDo0MDR9aiYmZChoLGksaixmLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKX0sYS5hc3luYz80PT09Zi5yZWFkeVN0YXRlP3NldFRpbWVvdXQoYik6Zi5vbnJlYWR5c3RhdGVjaGFuZ2U9WGJbZ109YjpiKCl9LGFib3J0OmZ1bmN0aW9uKCl7YiYmYih2b2lkIDAsITApfX19fSk7ZnVuY3Rpb24gWmIoKXt0cnl7cmV0dXJuIG5ldyBhLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKGIpe319ZnVuY3Rpb24gJGIoKXt0cnl7cmV0dXJuIG5ldyBhLkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIil9Y2F0Y2goYil7fX1tLmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6Lyg/OmphdmF8ZWNtYSlzY3JpcHQvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGEpe3JldHVybiBtLmdsb2JhbEV2YWwoYSksYX19fSksbS5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEuY2FjaGUmJihhLmNhY2hlPSExKSxhLmNyb3NzRG9tYWluJiYoYS50eXBlPSJHRVQiLGEuZ2xvYmFsPSExKX0pLG0uYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjPXkuaGVhZHx8bSgiaGVhZCIpWzBdfHx5LmRvY3VtZW50RWxlbWVudDtyZXR1cm57c2VuZDpmdW5jdGlvbihkLGUpe2I9eS5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSxiLmFzeW5jPSEwLGEuc2NyaXB0Q2hhcnNldCYmKGIuY2hhcnNldD1hLnNjcmlwdENoYXJzZXQpLGIuc3JjPWEudXJsLGIub25sb2FkPWIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKGEsYyl7KGN8fCFiLnJlYWR5U3RhdGV8fC9sb2FkZWR8Y29tcGxldGUvLnRlc3QoYi5yZWFkeVN0YXRlKSkmJihiLm9ubG9hZD1iLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbCxjfHxlKDIwMCwic3VjY2VzcyIpKX0sYy5pbnNlcnRCZWZvcmUoYixjLmZpcnN0Q2hpbGQpfSxhYm9ydDpmdW5jdGlvbigpe2ImJmIub25sb2FkKHZvaWQgMCwhMCl9fX19KTt2YXIgX2I9W10sYWM9Lyg9KVw/KD89JnwkKXxcP1w/LzttLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9X2IucG9wKCl8fG0uZXhwYW5kbysiXyIrdmIrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLG0uYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKGFjLnRlc3QoYi51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2YgYi5kYXRhJiYhKGIuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYmYWMudGVzdChiLmRhdGEpJiYiZGF0YSIpO3JldHVybiBofHwianNvbnAiPT09Yi5kYXRhVHlwZXNbMF0/KGU9Yi5qc29ucENhbGxiYWNrPW0uaXNGdW5jdGlvbihiLmpzb25wQ2FsbGJhY2spP2IuanNvbnBDYWxsYmFjaygpOmIuanNvbnBDYWxsYmFjayxoP2JbaF09YltoXS5yZXBsYWNlKGFjLCIkMSIrZSk6Yi5qc29ucCE9PSExJiYoYi51cmwrPSh3Yi50ZXN0KGIudXJsKT8iJiI6Ij8iKStiLmpzb25wKyI9IitlKSxiLmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl09ZnVuY3Rpb24oKXtyZXR1cm4gZ3x8bS5lcnJvcihlKyIgd2FzIG5vdCBjYWxsZWQiKSxnWzBdfSxiLmRhdGFUeXBlc1swXT0ianNvbiIsZj1hW2VdLGFbZV09ZnVuY3Rpb24oKXtnPWFyZ3VtZW50c30sZC5hbHdheXMoZnVuY3Rpb24oKXthW2VdPWYsYltlXSYmKGIuanNvbnBDYWxsYmFjaz1jLmpzb25wQ2FsbGJhY2ssX2IucHVzaChlKSksZyYmbS5pc0Z1bmN0aW9uKGYpJiZmKGdbMF0pLGc9Zj12b2lkIDB9KSwic2NyaXB0Iik6dm9pZCAwfSksbS5wYXJzZUhUTUw9ZnVuY3Rpb24oYSxiLGMpe2lmKCFhfHwic3RyaW5nIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7ImJvb2xlYW4iPT10eXBlb2YgYiYmKGM9YixiPSExKSxiPWJ8fHk7dmFyIGQ9dS5leGVjKGEpLGU9IWMmJltdO3JldHVybiBkP1tiLmNyZWF0ZUVsZW1lbnQoZFsxXSldOihkPW0uYnVpbGRGcmFnbWVudChbYV0sYixlKSxlJiZlLmxlbmd0aCYmbShlKS5yZW1vdmUoKSxtLm1lcmdlKFtdLGQuY2hpbGROb2RlcykpfTt2YXIgYmM9bS5mbi5sb2FkO20uZm4ubG9hZD1mdW5jdGlvbihhLGIsYyl7aWYoInN0cmluZyIhPXR5cGVvZiBhJiZiYylyZXR1cm4gYmMuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBkLGUsZixnPXRoaXMsaD1hLmluZGV4T2YoIiAiKTtyZXR1cm4gaD49MCYmKGQ9bS50cmltKGEuc2xpY2UoaCxhLmxlbmd0aCkpLGE9YS5zbGljZSgwLGgpKSxtLmlzRnVuY3Rpb24oYik/KGM9YixiPXZvaWQgMCk6YiYmIm9iamVjdCI9PXR5cGVvZiBiJiYoZj0iUE9TVCIpLGcubGVuZ3RoPjAmJm0uYWpheCh7dXJsOmEsdHlwZTpmLGRhdGFUeXBlOiJodG1sIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2U9YXJndW1lbnRzLGcuaHRtbChkP20oIjxkaXY+IikuYXBwZW5kKG0ucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuY29tcGxldGUoYyYmZnVuY3Rpb24oYSxiKXtnLmVhY2goYyxlfHxbYS5yZXNwb25zZVRleHQsYixhXSl9KSx0aGlzfSxtLmVhY2goWyJhamF4U3RhcnQiLCJhamF4U3RvcCIsImFqYXhDb21wbGV0ZSIsImFqYXhFcnJvciIsImFqYXhTdWNjZXNzIiwiYWpheFNlbmQiXSxmdW5jdGlvbihhLGIpe20uZm5bYl09ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMub24oYixhKX19KSxtLmV4cHIuZmlsdGVycy5hbmltYXRlZD1mdW5jdGlvbihhKXtyZXR1cm4gbS5ncmVwKG0udGltZXJzLGZ1bmN0aW9uKGIpe3JldHVybiBhPT09Yi5lbGVtfSkubGVuZ3RofTt2YXIgY2M9YS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7ZnVuY3Rpb24gZGMoYSl7cmV0dXJuIG0uaXNXaW5kb3coYSk/YTo5PT09YS5ub2RlVHlwZT9hLmRlZmF1bHRWaWV3fHxhLnBhcmVudFdpbmRvdzohMX1tLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrPW0uY3NzKGEsInBvc2l0aW9uIiksbD1tKGEpLG49e307InN0YXRpYyI9PT1rJiYoYS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKSxoPWwub2Zmc2V0KCksZj1tLmNzcyhhLCJ0b3AiKSxpPW0uY3NzKGEsImxlZnQiKSxqPSgiYWJzb2x1dGUiPT09a3x8ImZpeGVkIj09PWspJiZtLmluQXJyYXkoImF1dG8iLFtmLGldKT4tMSxqPyhkPWwucG9zaXRpb24oKSxnPWQudG9wLGU9ZC5sZWZ0KTooZz1wYXJzZUZsb2F0KGYpfHwwLGU9cGFyc2VGbG9hdChpKXx8MCksbS5pc0Z1bmN0aW9uKGIpJiYoYj1iLmNhbGwoYSxjLGgpKSxudWxsIT1iLnRvcCYmKG4udG9wPWIudG9wLWgudG9wK2cpLG51bGwhPWIubGVmdCYmKG4ubGVmdD1iLmxlZnQtaC5sZWZ0K2UpLCJ1c2luZyJpbiBiP2IudXNpbmcuY2FsbChhLG4pOmwuY3NzKG4pfX0sbS5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT1hP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe20ub2Zmc2V0LnNldE9mZnNldCh0aGlzLGEsYil9KTt2YXIgYixjLGQ9e3RvcDowLGxlZnQ6MH0sZT10aGlzWzBdLGY9ZSYmZS5vd25lckRvY3VtZW50O2lmKGYpcmV0dXJuIGI9Zi5kb2N1bWVudEVsZW1lbnQsbS5jb250YWlucyhiLGUpPyh0eXBlb2YgZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QhPT1LJiYoZD1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSxjPWRjKGYpLHt0b3A6ZC50b3ArKGMucGFnZVlPZmZzZXR8fGIuc2Nyb2xsVG9wKS0oYi5jbGllbnRUb3B8fDApLGxlZnQ6ZC5sZWZ0KyhjLnBhZ2VYT2Zmc2V0fHxiLnNjcm9sbExlZnQpLShiLmNsaWVudExlZnR8fDApfSk6ZH0scG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzWzBdKXt2YXIgYSxiLGM9e3RvcDowLGxlZnQ6MH0sZD10aGlzWzBdO3JldHVybiJmaXhlZCI9PT1tLmNzcyhkLCJwb3NpdGlvbiIpP2I9ZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTooYT10aGlzLm9mZnNldFBhcmVudCgpLGI9dGhpcy5vZmZzZXQoKSxtLm5vZGVOYW1lKGFbMF0sImh0bWwiKXx8KGM9YS5vZmZzZXQoKSksYy50b3ArPW0uY3NzKGFbMF0sImJvcmRlclRvcFdpZHRoIiwhMCksYy5sZWZ0Kz1tLmNzcyhhWzBdLCJib3JkZXJMZWZ0V2lkdGgiLCEwKSkse3RvcDpiLnRvcC1jLnRvcC1tLmNzcyhkLCJtYXJnaW5Ub3AiLCEwKSxsZWZ0OmIubGVmdC1jLmxlZnQtbS5jc3MoZCwibWFyZ2luTGVmdCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPXRoaXMub2Zmc2V0UGFyZW50fHxjYzt3aGlsZShhJiYhbS5ub2RlTmFtZShhLCJodG1sIikmJiJzdGF0aWMiPT09bS5jc3MoYSwicG9zaXRpb24iKSlhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfHxjY30pfX0pLG0uZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPS9ZLy50ZXN0KGIpO20uZm5bYV09ZnVuY3Rpb24oZCl7cmV0dXJuIFYodGhpcyxmdW5jdGlvbihhLGQsZSl7dmFyIGY9ZGMoYSk7cmV0dXJuIHZvaWQgMD09PWU/Zj9iIGluIGY/ZltiXTpmLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtkXTphW2RdOnZvaWQoZj9mLnNjcm9sbFRvKGM/bShmKS5zY3JvbGxMZWZ0KCk6ZSxjP2U6bShmKS5zY3JvbGxUb3AoKSk6YVtkXT1lKX0sYSxkLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSksbS5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGEsYil7bS5jc3NIb29rc1tiXT1MYShrLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz1KYShhLGIpLEhhLnRlc3QoYyk/bShhKS5wb3NpdGlvbigpW2JdKyJweCI6Yyk6dm9pZCAwfSl9KSxtLmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihhLGIpe20uZWFjaCh7cGFkZGluZzoiaW5uZXIiK2EsY29udGVudDpiLCIiOiJvdXRlciIrYX0sZnVuY3Rpb24oYyxkKXttLmZuW2RdPWZ1bmN0aW9uKGQsZSl7dmFyIGY9YXJndW1lbnRzLmxlbmd0aCYmKGN8fCJib29sZWFuIiE9dHlwZW9mIGQpLGc9Y3x8KGQ9PT0hMHx8ZT09PSEwPyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4gVih0aGlzLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZTtyZXR1cm4gbS5pc1dpbmRvdyhiKT9iLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IithXTo5PT09Yi5ub2RlVHlwZT8oZT1iLmRvY3VtZW50RWxlbWVudCxNYXRoLm1heChiLmJvZHlbInNjcm9sbCIrYV0sZVsic2Nyb2xsIithXSxiLmJvZHlbIm9mZnNldCIrYV0sZVsib2Zmc2V0IithXSxlWyJjbGllbnQiK2FdKSk6dm9pZCAwPT09ZD9tLmNzcyhiLGMsZyk6bS5zdHlsZShiLGMsZCxnKX0sYixmP2Q6dm9pZCAwLGYsbnVsbCl9fSl9KSxtLmZuLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LG0uZm4uYW5kU2VsZj1tLmZuLmFkZEJhY2ssImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKCJqcXVlcnkiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIG19KTt2YXIgZWM9YS5qUXVlcnksZmM9YS4kO3JldHVybiBtLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oYil7cmV0dXJuIGEuJD09PW0mJihhLiQ9ZmMpLGImJmEualF1ZXJ5PT09bSYmKGEualF1ZXJ5PWVjKSxtfSx0eXBlb2YgYj09PUsmJihhLmpRdWVyeT1hLiQ9bSksbX0pOwo="></script>
    <script src="data:application/x-javascript;base64,LyohCiAqIGpRdWVyeSBDb29raWUgUGx1Z2luIHYxLjQuMQogKiBodHRwczovL2dpdGh1Yi5jb20vY2FyaGFydGwvanF1ZXJ5LWNvb2tpZQogKgogKiBDb3B5cmlnaHQgMjAxMyBLbGF1cyBIYXJ0bAogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UKICovCihmdW5jdGlvbiAoZmFjdG9yeSkgewoJaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgewoJCS8vIEFNRAoJCWRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTsKCX0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7CgkJLy8gQ29tbW9uSlMKCQlmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTsKCX0gZWxzZSB7CgkJLy8gQnJvd3NlciBnbG9iYWxzCgkJZmFjdG9yeShqUXVlcnkpOwoJfQp9KGZ1bmN0aW9uICgkKSB7CgoJdmFyIHBsdXNlcyA9IC9cKy9nOwoKCWZ1bmN0aW9uIGVuY29kZShzKSB7CgkJcmV0dXJuIGNvbmZpZy5yYXcgPyBzIDogZW5jb2RlVVJJQ29tcG9uZW50KHMpOwoJfQoKCWZ1bmN0aW9uIGRlY29kZShzKSB7CgkJcmV0dXJuIGNvbmZpZy5yYXcgPyBzIDogZGVjb2RlVVJJQ29tcG9uZW50KHMpOwoJfQoKCWZ1bmN0aW9uIHN0cmluZ2lmeUNvb2tpZVZhbHVlKHZhbHVlKSB7CgkJcmV0dXJuIGVuY29kZShjb25maWcuanNvbiA/IEpTT04uc3RyaW5naWZ5KHZhbHVlKSA6IFN0cmluZyh2YWx1ZSkpOwoJfQoKCWZ1bmN0aW9uIHBhcnNlQ29va2llVmFsdWUocykgewoJCWlmIChzLmluZGV4T2YoJyInKSA9PT0gMCkgewoJCQkvLyBUaGlzIGlzIGEgcXVvdGVkIGNvb2tpZSBhcyBhY2NvcmRpbmcgdG8gUkZDMjA2OCwgdW5lc2NhcGUuLi4KCQkJcyA9IHMuc2xpY2UoMSwgLTEpLnJlcGxhY2UoL1xcIi9nLCAnIicpLnJlcGxhY2UoL1xcXFwvZywgJ1xcJyk7CgkJfQoKCQl0cnkgewoJCQkvLyBSZXBsYWNlIHNlcnZlci1zaWRlIHdyaXR0ZW4gcGx1c2VzIHdpdGggc3BhY2VzLgoJCQkvLyBJZiB3ZSBjYW4ndCBkZWNvZGUgdGhlIGNvb2tpZSwgaWdub3JlIGl0LCBpdCdzIHVudXNhYmxlLgoJCQkvLyBJZiB3ZSBjYW4ndCBwYXJzZSB0aGUgY29va2llLCBpZ25vcmUgaXQsIGl0J3MgdW51c2FibGUuCgkJCXMgPSBkZWNvZGVVUklDb21wb25lbnQocy5yZXBsYWNlKHBsdXNlcywgJyAnKSk7CgkJCXJldHVybiBjb25maWcuanNvbiA/IEpTT04ucGFyc2UocykgOiBzOwoJCX0gY2F0Y2goZSkge30KCX0KCglmdW5jdGlvbiByZWFkKHMsIGNvbnZlcnRlcikgewoJCXZhciB2YWx1ZSA9IGNvbmZpZy5yYXcgPyBzIDogcGFyc2VDb29raWVWYWx1ZShzKTsKCQlyZXR1cm4gJC5pc0Z1bmN0aW9uKGNvbnZlcnRlcikgPyBjb252ZXJ0ZXIodmFsdWUpIDogdmFsdWU7Cgl9CgoJdmFyIGNvbmZpZyA9ICQuY29va2llID0gZnVuY3Rpb24gKGtleSwgdmFsdWUsIG9wdGlvbnMpIHsKCgkJLy8gV3JpdGUKCgkJaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgISQuaXNGdW5jdGlvbih2YWx1ZSkpIHsKCQkJb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBjb25maWcuZGVmYXVsdHMsIG9wdGlvbnMpOwoKCQkJaWYgKHR5cGVvZiBvcHRpb25zLmV4cGlyZXMgPT09ICdudW1iZXInKSB7CgkJCQl2YXIgZGF5cyA9IG9wdGlvbnMuZXhwaXJlcywgdCA9IG9wdGlvbnMuZXhwaXJlcyA9IG5ldyBEYXRlKCk7CgkJCQl0LnNldFRpbWUoK3QgKyBkYXlzICogODY0ZSs1KTsKCQkJfQoKCQkJcmV0dXJuIChkb2N1bWVudC5jb29raWUgPSBbCgkJCQllbmNvZGUoa2V5KSwgJz0nLCBzdHJpbmdpZnlDb29raWVWYWx1ZSh2YWx1ZSksCgkJCQlvcHRpb25zLmV4cGlyZXMgPyAnOyBleHBpcmVzPScgKyBvcHRpb25zLmV4cGlyZXMudG9VVENTdHJpbmcoKSA6ICcnLCAvLyB1c2UgZXhwaXJlcyBhdHRyaWJ1dGUsIG1heC1hZ2UgaXMgbm90IHN1cHBvcnRlZCBieSBJRQoJCQkJb3B0aW9ucy5wYXRoICAgID8gJzsgcGF0aD0nICsgb3B0aW9ucy5wYXRoIDogJycsCgkJCQlvcHRpb25zLmRvbWFpbiAgPyAnOyBkb21haW49JyArIG9wdGlvbnMuZG9tYWluIDogJycsCgkJCQlvcHRpb25zLnNlY3VyZSAgPyAnOyBzZWN1cmUnIDogJycKCQkJXS5qb2luKCcnKSk7CgkJfQoKCQkvLyBSZWFkCgoJCXZhciByZXN1bHQgPSBrZXkgPyB1bmRlZmluZWQgOiB7fTsKCgkJLy8gVG8gcHJldmVudCB0aGUgZm9yIGxvb3AgaW4gdGhlIGZpcnN0IHBsYWNlIGFzc2lnbiBhbiBlbXB0eSBhcnJheQoJCS8vIGluIGNhc2UgdGhlcmUgYXJlIG5vIGNvb2tpZXMgYXQgYWxsLiBBbHNvIHByZXZlbnRzIG9kZCByZXN1bHQgd2hlbgoJCS8vIGNhbGxpbmcgJC5jb29raWUoKS4KCQl2YXIgY29va2llcyA9IGRvY3VtZW50LmNvb2tpZSA/IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOyAnKSA6IFtdOwoKCQlmb3IgKHZhciBpID0gMCwgbCA9IGNvb2tpZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CgkJCXZhciBwYXJ0cyA9IGNvb2tpZXNbaV0uc3BsaXQoJz0nKTsKCQkJdmFyIG5hbWUgPSBkZWNvZGUocGFydHMuc2hpZnQoKSk7CgkJCXZhciBjb29raWUgPSBwYXJ0cy5qb2luKCc9Jyk7CgoJCQlpZiAoa2V5ICYmIGtleSA9PT0gbmFtZSkgewoJCQkJLy8gSWYgc2Vjb25kIGFyZ3VtZW50ICh2YWx1ZSkgaXMgYSBmdW5jdGlvbiBpdCdzIGEgY29udmVydGVyLi4uCgkJCQlyZXN1bHQgPSByZWFkKGNvb2tpZSwgdmFsdWUpOwoJCQkJYnJlYWs7CgkJCX0KCgkJCS8vIFByZXZlbnQgc3RvcmluZyBhIGNvb2tpZSB0aGF0IHdlIGNvdWxkbid0IGRlY29kZS4KCQkJaWYgKCFrZXkgJiYgKGNvb2tpZSA9IHJlYWQoY29va2llKSkgIT09IHVuZGVmaW5lZCkgewoJCQkJcmVzdWx0W25hbWVdID0gY29va2llOwoJCQl9CgkJfQoKCQlyZXR1cm4gcmVzdWx0OwoJfTsKCgljb25maWcuZGVmYXVsdHMgPSB7fTsKCgkkLnJlbW92ZUNvb2tpZSA9IGZ1bmN0aW9uIChrZXksIG9wdGlvbnMpIHsKCQlpZiAoJC5jb29raWUoa2V5KSA9PT0gdW5kZWZpbmVkKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCS8vIE11c3Qgbm90IGFsdGVyIG9wdGlvbnMsIHRodXMgZXh0ZW5kaW5nIGEgZnJlc2ggb2JqZWN0Li4uCgkJJC5jb29raWUoa2V5LCAnJywgJC5leHRlbmQoe30sIG9wdGlvbnMsIHsgZXhwaXJlczogLTEgfSkpOwoJCXJldHVybiAhJC5jb29raWUoa2V5KTsKCX07Cgp9KSk7Cg=="></script>
    <script src="data:application/x-javascript;base64,Lypqc2hpbnQgY3VybHk6dHJ1ZSwgZXFlcWVxOnRydWUsIGxheGJyZWFrOnRydWUsIG5vZW1wdHk6ZmFsc2UgKi8KLyoKCiAgVGhlIE1JVCBMaWNlbnNlIChNSVQpCgogIENvcHlyaWdodCAoYykgMjAwNy0yMDEzIEVpbmFyIExpZWxtYW5pcyBhbmQgY29udHJpYnV0b3JzLgoKICBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbgogIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzCiAgKHRoZSAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwKICBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLAogIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsCiAgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywKICBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKCiAgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUKICBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KCiAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsCiAgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCiAgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQKICBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTCiAgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOCiAgQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4KICBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFCiAgU09GVFdBUkUuCgogSlMgQmVhdXRpZmllcgotLS0tLS0tLS0tLS0tLS0KCgogIFdyaXR0ZW4gYnkgRWluYXIgTGllbG1hbmlzLCA8ZWluYXJAanNiZWF1dGlmaWVyLm9yZz4KICAgICAgaHR0cDovL2pzYmVhdXRpZmllci5vcmcvCgogIE9yaWdpbmFsbHkgY29udmVydGVkIHRvIGphdmFzY3JpcHQgYnkgVml0YWwsIDx2aXRhbDc2QGdtYWlsLmNvbT4KICAiRW5kIGJyYWNlcyBvbiBvd24gbGluZSIgYWRkZWQgYnkgQ2hyaXMgSi4gU2h1bGwsIDxjaHJpc2pzaHVsbEBnbWFpbC5jb20+CiAgUGFyc2luZyBpbXByb3ZlbWVudHMgZm9yIGJyYWNlLWxlc3Mgc3RhdGVtZW50cyBieSBMaWFtIE5ld21hbiA8Yml0d2lzZW1hbkBnbWFpbC5jb20+CgoKICBVc2FnZToKICAgIGpzX2JlYXV0aWZ5KGpzX3NvdXJjZV90ZXh0KTsKICAgIGpzX2JlYXV0aWZ5KGpzX3NvdXJjZV90ZXh0LCBvcHRpb25zKTsKCiAgVGhlIG9wdGlvbnMgYXJlOgogICAgaW5kZW50X3NpemUgKGRlZmF1bHQgNCkgICAgICAgICAgLSBpbmRlbnRhdGlvbiBzaXplLAogICAgaW5kZW50X2NoYXIgKGRlZmF1bHQgc3BhY2UpICAgICAgLSBjaGFyYWN0ZXIgdG8gaW5kZW50IHdpdGgsCiAgICBwcmVzZXJ2ZV9uZXdsaW5lcyAoZGVmYXVsdCB0cnVlKSAtIHdoZXRoZXIgZXhpc3RpbmcgbGluZSBicmVha3Mgc2hvdWxkIGJlIHByZXNlcnZlZCwKICAgIG1heF9wcmVzZXJ2ZV9uZXdsaW5lcyAoZGVmYXVsdCB1bmxpbWl0ZWQpIC0gbWF4aW11bSBudW1iZXIgb2YgbGluZSBicmVha3MgdG8gYmUgcHJlc2VydmVkIGluIG9uZSBjaHVuaywKCiAgICBqc2xpbnRfaGFwcHkgKGRlZmF1bHQgZmFsc2UpIC0gaWYgdHJ1ZSwgdGhlbiBqc2xpbnQtc3RyaWN0ZXIgbW9kZSBpcyBlbmZvcmNlZC4KCiAgICAgICAgICAgIGpzbGludF9oYXBweSAgICAgICAgIWpzbGludF9oYXBweQogICAgICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgZnVuY3Rpb24gKCkgICAgICAgICBmdW5jdGlvbigpCgogICAgICAgICAgICBzd2l0Y2ggKCkgeyAgICAgICAgIHN3aXRjaCgpIHsKICAgICAgICAgICAgY2FzZSAxOiAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBicmVhazsgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgfQoKICAgIHNwYWNlX2FmdGVyX2Fub25fZnVuY3Rpb24gKGRlZmF1bHQgZmFsc2UpIC0gc2hvdWxkIHRoZSBzcGFjZSBiZWZvcmUgYW4gYW5vbnltb3VzIGZ1bmN0aW9uJ3MgcGFyZW5zIGJlIGFkZGVkLCAiZnVuY3Rpb24oKSIgdnMgImZ1bmN0aW9uICgpIiwKICAgICAgICAgIE5PVEU6IFRoaXMgb3B0aW9uIGlzIG92ZXJyaWRlbiBieSBqc2xpbnRfaGFwcHkgKGkuZS4gaWYganNsaW50X2hhcHB5IGlzIHRydWUsIHNwYWNlX2FmdGVyX2Fub25fZnVuY3Rpb24gaXMgdHJ1ZSBieSBkZXNpZ24pCgogICAgYnJhY2Vfc3R5bGUgKGRlZmF1bHQgImNvbGxhcHNlIikgLSAiY29sbGFwc2UtcHJlc2VydmUtaW5saW5lIiB8ICJjb2xsYXBzZSIgfCAiZXhwYW5kIiB8ICJlbmQtZXhwYW5kIiB8ICJub25lIgogICAgICAgICAgICBwdXQgYnJhY2VzIG9uIHRoZSBzYW1lIGxpbmUgYXMgY29udHJvbCBzdGF0ZW1lbnRzIChkZWZhdWx0KSwgb3IgcHV0IGJyYWNlcyBvbiBvd24gbGluZSAoQWxsbWFuIC8gQU5TSSBzdHlsZSksIG9yIGp1c3QgcHV0IGVuZCBicmFjZXMgb24gb3duIGxpbmUsIG9yIGF0dGVtcHQgdG8ga2VlcCB0aGVtIHdoZXJlIHRoZXkgYXJlLgoKICAgIHNwYWNlX2JlZm9yZV9jb25kaXRpb25hbCAoZGVmYXVsdCB0cnVlKSAtIHNob3VsZCB0aGUgc3BhY2UgYmVmb3JlIGNvbmRpdGlvbmFsIHN0YXRlbWVudCBiZSBhZGRlZCwgImlmKHRydWUpIiB2cyAiaWYgKHRydWUpIiwKCiAgICB1bmVzY2FwZV9zdHJpbmdzIChkZWZhdWx0IGZhbHNlKSAtIHNob3VsZCBwcmludGFibGUgY2hhcmFjdGVycyBpbiBzdHJpbmdzIGVuY29kZWQgaW4gXHhOTiBub3RhdGlvbiBiZSB1bmVzY2FwZWQsICJleGFtcGxlIiB2cyAiXHg2NVx4NzhceDYxXHg2ZFx4NzBceDZjXHg2NSIKCiAgICB3cmFwX2xpbmVfbGVuZ3RoIChkZWZhdWx0IHVubGltaXRlZCkgLSBsaW5lcyBzaG91bGQgd3JhcCBhdCBuZXh0IG9wcG9ydHVuaXR5IGFmdGVyIHRoaXMgbnVtYmVyIG9mIGNoYXJhY3RlcnMuCiAgICAgICAgICBOT1RFOiBUaGlzIGlzIG5vdCBhIGhhcmQgbGltaXQuIExpbmVzIHdpbGwgY29udGludWUgdW50aWwgYSBwb2ludCB3aGVyZSBhIG5ld2xpbmUgd291bGQKICAgICAgICAgICAgICAgIGJlIHByZXNlcnZlZCBpZiBpdCB3ZXJlIHByZXNlbnQuCgogICAgZW5kX3dpdGhfbmV3bGluZSAoZGVmYXVsdCBmYWxzZSkgIC0gZW5kIG91dHB1dCB3aXRoIGEgbmV3bGluZQoKCiAgICBlLmcKCiAgICBqc19iZWF1dGlmeShqc19zb3VyY2VfdGV4dCwgewogICAgICAnaW5kZW50X3NpemUnOiAxLAogICAgICAnaW5kZW50X2NoYXInOiAnXHQnCiAgICB9KTsKCiovCgovLyBPYmplY3QudmFsdWVzIHBvbHlmaWxsIGZvdW5kIGhlcmU6Ci8vIGh0dHA6Ly90b2tlbnBvc3RzLmJsb2dzcG90LmNvbS5hdS8yMDEyLzA0L2phdmFzY3JpcHQtb2JqZWN0a2V5cy1icm93c2VyLmh0bWwKaWYgKCFPYmplY3QudmFsdWVzKSB7CiAgICBPYmplY3QudmFsdWVzID0gZnVuY3Rpb24obykgewogICAgICAgIGlmIChvICE9PSBPYmplY3QobykpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LnZhbHVlcyBjYWxsZWQgb24gYSBub24tb2JqZWN0Jyk7CiAgICAgICAgfQogICAgICAgIHZhciBrID0gW10sCiAgICAgICAgICAgIHA7CiAgICAgICAgZm9yIChwIGluIG8pIHsKICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgewogICAgICAgICAgICAgICAgay5wdXNoKG9bcF0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBrOwogICAgfTsKfQoKKGZ1bmN0aW9uKCkgewoKICAgIGZ1bmN0aW9uIGpzX2JlYXV0aWZ5KGpzX3NvdXJjZV90ZXh0LCBvcHRpb25zKSB7CgogICAgICAgIHZhciBhY29ybiA9IHt9OwogICAgICAgIChmdW5jdGlvbihleHBvcnRzKSB7CiAgICAgICAgICAgIC8qIGpzaGludCBjdXJseTogZmFsc2UgKi8KICAgICAgICAgICAgLy8gVGhpcyBzZWN0aW9uIG9mIGNvZGUgaXMgdGFrZW4gZnJvbSBhY29ybi4KICAgICAgICAgICAgLy8KICAgICAgICAgICAgLy8gQWNvcm4gd2FzIHdyaXR0ZW4gYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgcmVsZWFzZWQgdW5kZXIgYW4gTUlUCiAgICAgICAgICAgIC8vIGxpY2Vuc2UuIFRoZSBVbmljb2RlIHJlZ2V4cHMgKGZvciBpZGVudGlmaWVycyBhbmQgd2hpdGVzcGFjZSkgd2VyZQogICAgICAgICAgICAvLyB0YWtlbiBmcm9tIFtFc3ByaW1hXShodHRwOi8vZXNwcmltYS5vcmcpIGJ5IEFyaXlhIEhpZGF5YXQuCiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIC8vIEdpdCByZXBvc2l0b3JpZXMgZm9yIEFjb3JuIGFyZSBhdmFpbGFibGUgYXQKICAgICAgICAgICAgLy8KICAgICAgICAgICAgLy8gICAgIGh0dHA6Ly9tYXJpam5oYXZlcmJla2UubmwvZ2l0L2Fjb3JuCiAgICAgICAgICAgIC8vICAgICBodHRwczovL2dpdGh1Yi5jb20vbWFyaWpuaC9hY29ybi5naXQKCiAgICAgICAgICAgIC8vICMjIENoYXJhY3RlciBjYXRlZ29yaWVzCgogICAgICAgICAgICAvLyBCaWcgdWdseSByZWd1bGFyIGV4cHJlc3Npb25zIHRoYXQgbWF0Y2ggY2hhcmFjdGVycyBpbiB0aGUKICAgICAgICAgICAgLy8gd2hpdGVzcGFjZSwgaWRlbnRpZmllciwgYW5kIGlkZW50aWZpZXItc3RhcnQgY2F0ZWdvcmllcy4gVGhlc2UKICAgICAgICAgICAgLy8gYXJlIG9ubHkgYXBwbGllZCB3aGVuIGEgY2hhcmFjdGVyIGlzIGZvdW5kIHRvIGFjdHVhbGx5IGhhdmUgYQogICAgICAgICAgICAvLyBjb2RlIHBvaW50IGFib3ZlIDEyOC4KCiAgICAgICAgICAgIHZhciBub25BU0NJSXdoaXRlc3BhY2UgPSAvW1x1MTY4MFx1MTgwZVx1MjAwMC1cdTIwMGFcdTIwMmZcdTIwNWZcdTMwMDBcdWZlZmZdLzsgLy8ganNoaW50IGlnbm9yZTpsaW5lCiAgICAgICAgICAgIHZhciBub25BU0NJSWlkZW50aWZpZXJTdGFydENoYXJzID0gIlx4YWFceGI1XHhiYVx4YzAtXHhkNlx4ZDgtXHhmNlx4ZjgtXHUwMmMxXHUwMmM2LVx1MDJkMVx1MDJlMC1cdTAyZTRcdTAyZWNcdTAyZWVcdTAzNzAtXHUwMzc0XHUwMzc2XHUwMzc3XHUwMzdhLVx1MDM3ZFx1MDM4Nlx1MDM4OC1cdTAzOGFcdTAzOGNcdTAzOGUtXHUwM2ExXHUwM2EzLVx1MDNmNVx1MDNmNy1cdTA0ODFcdTA0OGEtXHUwNTI3XHUwNTMxLVx1MDU1Nlx1MDU1OVx1MDU2MS1cdTA1ODdcdTA1ZDAtXHUwNWVhXHUwNWYwLVx1MDVmMlx1MDYyMC1cdTA2NGFcdTA2NmVcdTA2NmZcdTA2NzEtXHUwNmQzXHUwNmQ1XHUwNmU1XHUwNmU2XHUwNmVlXHUwNmVmXHUwNmZhLVx1MDZmY1x1MDZmZlx1MDcxMFx1MDcxMi1cdTA3MmZcdTA3NGQtXHUwN2E1XHUwN2IxXHUwN2NhLVx1MDdlYVx1MDdmNFx1MDdmNVx1MDdmYVx1MDgwMC1cdTA4MTVcdTA4MWFcdTA4MjRcdTA4MjhcdTA4NDAtXHUwODU4XHUwOGEwXHUwOGEyLVx1MDhhY1x1MDkwNC1cdTA5MzlcdTA5M2RcdTA5NTBcdTA5NTgtXHUwOTYxXHUwOTcxLVx1MDk3N1x1MDk3OS1cdTA5N2ZcdTA5ODUtXHUwOThjXHUwOThmXHUwOTkwXHUwOTkzLVx1MDlhOFx1MDlhYS1cdTA5YjBcdTA5YjJcdTA5YjYtXHUwOWI5XHUwOWJkXHUwOWNlXHUwOWRjXHUwOWRkXHUwOWRmLVx1MDllMVx1MDlmMFx1MDlmMVx1MGEwNS1cdTBhMGFcdTBhMGZcdTBhMTBcdTBhMTMtXHUwYTI4XHUwYTJhLVx1MGEzMFx1MGEzMlx1MGEzM1x1MGEzNVx1MGEzNlx1MGEzOFx1MGEzOVx1MGE1OS1cdTBhNWNcdTBhNWVcdTBhNzItXHUwYTc0XHUwYTg1LVx1MGE4ZFx1MGE4Zi1cdTBhOTFcdTBhOTMtXHUwYWE4XHUwYWFhLVx1MGFiMFx1MGFiMlx1MGFiM1x1MGFiNS1cdTBhYjlcdTBhYmRcdTBhZDBcdTBhZTBcdTBhZTFcdTBiMDUtXHUwYjBjXHUwYjBmXHUwYjEwXHUwYjEzLVx1MGIyOFx1MGIyYS1cdTBiMzBcdTBiMzJcdTBiMzNcdTBiMzUtXHUwYjM5XHUwYjNkXHUwYjVjXHUwYjVkXHUwYjVmLVx1MGI2MVx1MGI3MVx1MGI4M1x1MGI4NS1cdTBiOGFcdTBiOGUtXHUwYjkwXHUwYjkyLVx1MGI5NVx1MGI5OVx1MGI5YVx1MGI5Y1x1MGI5ZVx1MGI5Zlx1MGJhM1x1MGJhNFx1MGJhOC1cdTBiYWFcdTBiYWUtXHUwYmI5XHUwYmQwXHUwYzA1LVx1MGMwY1x1MGMwZS1cdTBjMTBcdTBjMTItXHUwYzI4XHUwYzJhLVx1MGMzM1x1MGMzNS1cdTBjMzlcdTBjM2RcdTBjNThcdTBjNTlcdTBjNjBcdTBjNjFcdTBjODUtXHUwYzhjXHUwYzhlLVx1MGM5MFx1MGM5Mi1cdTBjYThcdTBjYWEtXHUwY2IzXHUwY2I1LVx1MGNiOVx1MGNiZFx1MGNkZVx1MGNlMFx1MGNlMVx1MGNmMVx1MGNmMlx1MGQwNS1cdTBkMGNcdTBkMGUtXHUwZDEwXHUwZDEyLVx1MGQzYVx1MGQzZFx1MGQ0ZVx1MGQ2MFx1MGQ2MVx1MGQ3YS1cdTBkN2ZcdTBkODUtXHUwZDk2XHUwZDlhLVx1MGRiMVx1MGRiMy1cdTBkYmJcdTBkYmRcdTBkYzAtXHUwZGM2XHUwZTAxLVx1MGUzMFx1MGUzMlx1MGUzM1x1MGU0MC1cdTBlNDZcdTBlODFcdTBlODJcdTBlODRcdTBlODdcdTBlODhcdTBlOGFcdTBlOGRcdTBlOTQtXHUwZTk3XHUwZTk5LVx1MGU5Zlx1MGVhMS1cdTBlYTNcdTBlYTVcdTBlYTdcdTBlYWFcdTBlYWJcdTBlYWQtXHUwZWIwXHUwZWIyXHUwZWIzXHUwZWJkXHUwZWMwLVx1MGVjNFx1MGVjNlx1MGVkYy1cdTBlZGZcdTBmMDBcdTBmNDAtXHUwZjQ3XHUwZjQ5LVx1MGY2Y1x1MGY4OC1cdTBmOGNcdTEwMDAtXHUxMDJhXHUxMDNmXHUxMDUwLVx1MTA1NVx1MTA1YS1cdTEwNWRcdTEwNjFcdTEwNjVcdTEwNjZcdTEwNmUtXHUxMDcwXHUxMDc1LVx1MTA4MVx1MTA4ZVx1MTBhMC1cdTEwYzVcdTEwYzdcdTEwY2RcdTEwZDAtXHUxMGZhXHUxMGZjLVx1MTI0OFx1MTI0YS1cdTEyNGRcdTEyNTAtXHUxMjU2XHUxMjU4XHUxMjVhLVx1MTI1ZFx1MTI2MC1cdTEyODhcdTEyOGEtXHUxMjhkXHUxMjkwLVx1MTJiMFx1MTJiMi1cdTEyYjVcdTEyYjgtXHUxMmJlXHUxMmMwXHUxMmMyLVx1MTJjNVx1MTJjOC1cdTEyZDZcdTEyZDgtXHUxMzEwXHUxMzEyLVx1MTMxNVx1MTMxOC1cdTEzNWFcdTEzODAtXHUxMzhmXHUxM2EwLVx1MTNmNFx1MTQwMS1cdTE2NmNcdTE2NmYtXHUxNjdmXHUxNjgxLVx1MTY5YVx1MTZhMC1cdTE2ZWFcdTE2ZWUtXHUxNmYwXHUxNzAwLVx1MTcwY1x1MTcwZS1cdTE3MTFcdTE3MjAtXHUxNzMxXHUxNzQwLVx1MTc1MVx1MTc2MC1cdTE3NmNcdTE3NmUtXHUxNzcwXHUxNzgwLVx1MTdiM1x1MTdkN1x1MTdkY1x1MTgyMC1cdTE4NzdcdTE4ODAtXHUxOGE4XHUxOGFhXHUxOGIwLVx1MThmNVx1MTkwMC1cdTE5MWNcdTE5NTAtXHUxOTZkXHUxOTcwLVx1MTk3NFx1MTk4MC1cdTE5YWJcdTE5YzEtXHUxOWM3XHUxYTAwLVx1MWExNlx1MWEyMC1cdTFhNTRcdTFhYTdcdTFiMDUtXHUxYjMzXHUxYjQ1LVx1MWI0Ylx1MWI4My1cdTFiYTBcdTFiYWVcdTFiYWZcdTFiYmEtXHUxYmU1XHUxYzAwLVx1MWMyM1x1MWM0ZC1cdTFjNGZcdTFjNWEtXHUxYzdkXHUxY2U5LVx1MWNlY1x1MWNlZS1cdTFjZjFcdTFjZjVcdTFjZjZcdTFkMDAtXHUxZGJmXHUxZTAwLVx1MWYxNVx1MWYxOC1cdTFmMWRcdTFmMjAtXHUxZjQ1XHUxZjQ4LVx1MWY0ZFx1MWY1MC1cdTFmNTdcdTFmNTlcdTFmNWJcdTFmNWRcdTFmNWYtXHUxZjdkXHUxZjgwLVx1MWZiNFx1MWZiNi1cdTFmYmNcdTFmYmVcdTFmYzItXHUxZmM0XHUxZmM2LVx1MWZjY1x1MWZkMC1cdTFmZDNcdTFmZDYtXHUxZmRiXHUxZmUwLVx1MWZlY1x1MWZmMi1cdTFmZjRcdTFmZjYtXHUxZmZjXHUyMDcxXHUyMDdmXHUyMDkwLVx1MjA5Y1x1MjEwMlx1MjEwN1x1MjEwYS1cdTIxMTNcdTIxMTVcdTIxMTktXHUyMTFkXHUyMTI0XHUyMTI2XHUyMTI4XHUyMTJhLVx1MjEyZFx1MjEyZi1cdTIxMzlcdTIxM2MtXHUyMTNmXHUyMTQ1LVx1MjE0OVx1MjE0ZVx1MjE2MC1cdTIxODhcdTJjMDAtXHUyYzJlXHUyYzMwLVx1MmM1ZVx1MmM2MC1cdTJjZTRcdTJjZWItXHUyY2VlXHUyY2YyXHUyY2YzXHUyZDAwLVx1MmQyNVx1MmQyN1x1MmQyZFx1MmQzMC1cdTJkNjdcdTJkNmZcdTJkODAtXHUyZDk2XHUyZGEwLVx1MmRhNlx1MmRhOC1cdTJkYWVcdTJkYjAtXHUyZGI2XHUyZGI4LVx1MmRiZVx1MmRjMC1cdTJkYzZcdTJkYzgtXHUyZGNlXHUyZGQwLVx1MmRkNlx1MmRkOC1cdTJkZGVcdTJlMmZcdTMwMDUtXHUzMDA3XHUzMDIxLVx1MzAyOVx1MzAzMS1cdTMwMzVcdTMwMzgtXHUzMDNjXHUzMDQxLVx1MzA5Nlx1MzA5ZC1cdTMwOWZcdTMwYTEtXHUzMGZhXHUzMGZjLVx1MzBmZlx1MzEwNS1cdTMxMmRcdTMxMzEtXHUzMThlXHUzMWEwLVx1MzFiYVx1MzFmMC1cdTMxZmZcdTM0MDAtXHU0ZGI1XHU0ZTAwLVx1OWZjY1x1YTAwMC1cdWE0OGNcdWE0ZDAtXHVhNGZkXHVhNTAwLVx1YTYwY1x1YTYxMC1cdWE2MWZcdWE2MmFcdWE2MmJcdWE2NDAtXHVhNjZlXHVhNjdmLVx1YTY5N1x1YTZhMC1cdWE2ZWZcdWE3MTctXHVhNzFmXHVhNzIyLVx1YTc4OFx1YTc4Yi1cdWE3OGVcdWE3OTAtXHVhNzkzXHVhN2EwLVx1YTdhYVx1YTdmOC1cdWE4MDFcdWE4MDMtXHVhODA1XHVhODA3LVx1YTgwYVx1YTgwYy1cdWE4MjJcdWE4NDAtXHVhODczXHVhODgyLVx1YThiM1x1YThmMi1cdWE4ZjdcdWE4ZmJcdWE5MGEtXHVhOTI1XHVhOTMwLVx1YTk0Nlx1YTk2MC1cdWE5N2NcdWE5ODQtXHVhOWIyXHVhOWNmXHVhYTAwLVx1YWEyOFx1YWE0MC1cdWFhNDJcdWFhNDQtXHVhYTRiXHVhYTYwLVx1YWE3Nlx1YWE3YVx1YWE4MC1cdWFhYWZcdWFhYjFcdWFhYjVcdWFhYjZcdWFhYjktXHVhYWJkXHVhYWMwXHVhYWMyXHVhYWRiLVx1YWFkZFx1YWFlMC1cdWFhZWFcdWFhZjItXHVhYWY0XHVhYjAxLVx1YWIwNlx1YWIwOS1cdWFiMGVcdWFiMTEtXHVhYjE2XHVhYjIwLVx1YWIyNlx1YWIyOC1cdWFiMmVcdWFiYzAtXHVhYmUyXHVhYzAwLVx1ZDdhM1x1ZDdiMC1cdWQ3YzZcdWQ3Y2ItXHVkN2ZiXHVmOTAwLVx1ZmE2ZFx1ZmE3MC1cdWZhZDlcdWZiMDAtXHVmYjA2XHVmYjEzLVx1ZmIxN1x1ZmIxZFx1ZmIxZi1cdWZiMjhcdWZiMmEtXHVmYjM2XHVmYjM4LVx1ZmIzY1x1ZmIzZVx1ZmI0MFx1ZmI0MVx1ZmI0M1x1ZmI0NFx1ZmI0Ni1cdWZiYjFcdWZiZDMtXHVmZDNkXHVmZDUwLVx1ZmQ4Zlx1ZmQ5Mi1cdWZkYzdcdWZkZjAtXHVmZGZiXHVmZTcwLVx1ZmU3NFx1ZmU3Ni1cdWZlZmNcdWZmMjEtXHVmZjNhXHVmZjQxLVx1ZmY1YVx1ZmY2Ni1cdWZmYmVcdWZmYzItXHVmZmM3XHVmZmNhLVx1ZmZjZlx1ZmZkMi1cdWZmZDdcdWZmZGEtXHVmZmRjIjsKICAgICAgICAgICAgdmFyIG5vbkFTQ0lJaWRlbnRpZmllckNoYXJzID0gIlx1MDMwMC1cdTAzNmZcdTA0ODMtXHUwNDg3XHUwNTkxLVx1MDViZFx1MDViZlx1MDVjMVx1MDVjMlx1MDVjNFx1MDVjNVx1MDVjN1x1MDYxMC1cdTA2MWFcdTA2MjAtXHUwNjQ5XHUwNjcyLVx1MDZkM1x1MDZlNy1cdTA2ZThcdTA2ZmItXHUwNmZjXHUwNzMwLVx1MDc0YVx1MDgwMC1cdTA4MTRcdTA4MWItXHUwODIzXHUwODI1LVx1MDgyN1x1MDgyOS1cdTA4MmRcdTA4NDAtXHUwODU3XHUwOGU0LVx1MDhmZVx1MDkwMC1cdTA5MDNcdTA5M2EtXHUwOTNjXHUwOTNlLVx1MDk0Zlx1MDk1MS1cdTA5NTdcdTA5NjItXHUwOTYzXHUwOTY2LVx1MDk2Zlx1MDk4MS1cdTA5ODNcdTA5YmNcdTA5YmUtXHUwOWM0XHUwOWM3XHUwOWM4XHUwOWQ3XHUwOWRmLVx1MDllMFx1MGEwMS1cdTBhMDNcdTBhM2NcdTBhM2UtXHUwYTQyXHUwYTQ3XHUwYTQ4XHUwYTRiLVx1MGE0ZFx1MGE1MVx1MGE2Ni1cdTBhNzFcdTBhNzVcdTBhODEtXHUwYTgzXHUwYWJjXHUwYWJlLVx1MGFjNVx1MGFjNy1cdTBhYzlcdTBhY2ItXHUwYWNkXHUwYWUyLVx1MGFlM1x1MGFlNi1cdTBhZWZcdTBiMDEtXHUwYjAzXHUwYjNjXHUwYjNlLVx1MGI0NFx1MGI0N1x1MGI0OFx1MGI0Yi1cdTBiNGRcdTBiNTZcdTBiNTdcdTBiNWYtXHUwYjYwXHUwYjY2LVx1MGI2Zlx1MGI4Mlx1MGJiZS1cdTBiYzJcdTBiYzYtXHUwYmM4XHUwYmNhLVx1MGJjZFx1MGJkN1x1MGJlNi1cdTBiZWZcdTBjMDEtXHUwYzAzXHUwYzQ2LVx1MGM0OFx1MGM0YS1cdTBjNGRcdTBjNTVcdTBjNTZcdTBjNjItXHUwYzYzXHUwYzY2LVx1MGM2Zlx1MGM4Mlx1MGM4M1x1MGNiY1x1MGNiZS1cdTBjYzRcdTBjYzYtXHUwY2M4XHUwY2NhLVx1MGNjZFx1MGNkNVx1MGNkNlx1MGNlMi1cdTBjZTNcdTBjZTYtXHUwY2VmXHUwZDAyXHUwZDAzXHUwZDQ2LVx1MGQ0OFx1MGQ1N1x1MGQ2Mi1cdTBkNjNcdTBkNjYtXHUwZDZmXHUwZDgyXHUwZDgzXHUwZGNhXHUwZGNmLVx1MGRkNFx1MGRkNlx1MGRkOC1cdTBkZGZcdTBkZjJcdTBkZjNcdTBlMzQtXHUwZTNhXHUwZTQwLVx1MGU0NVx1MGU1MC1cdTBlNTlcdTBlYjQtXHUwZWI5XHUwZWM4LVx1MGVjZFx1MGVkMC1cdTBlZDlcdTBmMThcdTBmMTlcdTBmMjAtXHUwZjI5XHUwZjM1XHUwZjM3XHUwZjM5XHUwZjQxLVx1MGY0N1x1MGY3MS1cdTBmODRcdTBmODYtXHUwZjg3XHUwZjhkLVx1MGY5N1x1MGY5OS1cdTBmYmNcdTBmYzZcdTEwMDAtXHUxMDI5XHUxMDQwLVx1MTA0OVx1MTA2Ny1cdTEwNmRcdTEwNzEtXHUxMDc0XHUxMDgyLVx1MTA4ZFx1MTA4Zi1cdTEwOWRcdTEzNWQtXHUxMzVmXHUxNzBlLVx1MTcxMFx1MTcyMC1cdTE3MzBcdTE3NDAtXHUxNzUwXHUxNzcyXHUxNzczXHUxNzgwLVx1MTdiMlx1MTdkZFx1MTdlMC1cdTE3ZTlcdTE4MGItXHUxODBkXHUxODEwLVx1MTgxOVx1MTkyMC1cdTE5MmJcdTE5MzAtXHUxOTNiXHUxOTUxLVx1MTk2ZFx1MTliMC1cdTE5YzBcdTE5YzgtXHUxOWM5XHUxOWQwLVx1MTlkOVx1MWEwMC1cdTFhMTVcdTFhMjAtXHUxYTUzXHUxYTYwLVx1MWE3Y1x1MWE3Zi1cdTFhODlcdTFhOTAtXHUxYTk5XHUxYjQ2LVx1MWI0Ylx1MWI1MC1cdTFiNTlcdTFiNmItXHUxYjczXHUxYmIwLVx1MWJiOVx1MWJlNi1cdTFiZjNcdTFjMDAtXHUxYzIyXHUxYzQwLVx1MWM0OVx1MWM1Yi1cdTFjN2RcdTFjZDAtXHUxY2QyXHUxZDAwLVx1MWRiZVx1MWUwMS1cdTFmMTVcdTIwMGNcdTIwMGRcdTIwM2ZcdTIwNDBcdTIwNTRcdTIwZDAtXHUyMGRjXHUyMGUxXHUyMGU1LVx1MjBmMFx1MmQ4MS1cdTJkOTZcdTJkZTAtXHUyZGZmXHUzMDIxLVx1MzAyOFx1MzA5OVx1MzA5YVx1YTY0MC1cdWE2NmRcdWE2NzQtXHVhNjdkXHVhNjlmXHVhNmYwLVx1YTZmMVx1YTdmOC1cdWE4MDBcdWE4MDZcdWE4MGJcdWE4MjMtXHVhODI3XHVhODgwLVx1YTg4MVx1YThiNC1cdWE4YzRcdWE4ZDAtXHVhOGQ5XHVhOGYzLVx1YThmN1x1YTkwMC1cdWE5MDlcdWE5MjYtXHVhOTJkXHVhOTMwLVx1YTk0NVx1YTk4MC1cdWE5ODNcdWE5YjMtXHVhOWMwXHVhYTAwLVx1YWEyN1x1YWE0MC1cdWFhNDFcdWFhNGMtXHVhYTRkXHVhYTUwLVx1YWE1OVx1YWE3Ylx1YWFlMC1cdWFhZTlcdWFhZjItXHVhYWYzXHVhYmMwLVx1YWJlMVx1YWJlY1x1YWJlZFx1YWJmMC1cdWFiZjlcdWZiMjAtXHVmYjI4XHVmZTAwLVx1ZmUwZlx1ZmUyMC1cdWZlMjZcdWZlMzNcdWZlMzRcdWZlNGQtXHVmZTRmXHVmZjEwLVx1ZmYxOVx1ZmYzZiI7CiAgICAgICAgICAgIHZhciBub25BU0NJSWlkZW50aWZpZXJTdGFydCA9IG5ldyBSZWdFeHAoIlsiICsgbm9uQVNDSUlpZGVudGlmaWVyU3RhcnRDaGFycyArICJdIik7CiAgICAgICAgICAgIHZhciBub25BU0NJSWlkZW50aWZpZXIgPSBuZXcgUmVnRXhwKCJbIiArIG5vbkFTQ0lJaWRlbnRpZmllclN0YXJ0Q2hhcnMgKyBub25BU0NJSWlkZW50aWZpZXJDaGFycyArICJdIik7CgogICAgICAgICAgICAvLyBXaGV0aGVyIGEgc2luZ2xlIGNoYXJhY3RlciBkZW5vdGVzIGEgbmV3bGluZS4KCiAgICAgICAgICAgIGV4cG9ydHMubmV3bGluZSA9IC9bXG5cclx1MjAyOFx1MjAyOV0vOwoKICAgICAgICAgICAgLy8gTWF0Y2hlcyBhIHdob2xlIGxpbmUgYnJlYWsgKHdoZXJlIENSTEYgaXMgY29uc2lkZXJlZCBhIHNpbmdsZQogICAgICAgICAgICAvLyBsaW5lIGJyZWFrKS4gVXNlZCB0byBjb3VudCBsaW5lcy4KCiAgICAgICAgICAgIC8vIGluIGphdmFzY3JpcHQsIHRoZXNlIHR3byBkaWZmZXIKICAgICAgICAgICAgLy8gaW4gcHl0aG9uIHRoZXkgYXJlIHRoZSBzYW1lLCBkaWZmZXJlbnQgbWV0aG9kcyBhcmUgY2FsbGVkIG9uIHRoZW0KICAgICAgICAgICAgZXhwb3J0cy5saW5lQnJlYWsgPSBuZXcgUmVnRXhwKCdcclxufCcgKyBleHBvcnRzLm5ld2xpbmUuc291cmNlKTsKICAgICAgICAgICAgZXhwb3J0cy5hbGxMaW5lQnJlYWtzID0gbmV3IFJlZ0V4cChleHBvcnRzLmxpbmVCcmVhay5zb3VyY2UsICdnJyk7CgoKICAgICAgICAgICAgLy8gVGVzdCB3aGV0aGVyIGEgZ2l2ZW4gY2hhcmFjdGVyIGNvZGUgc3RhcnRzIGFuIGlkZW50aWZpZXIuCgogICAgICAgICAgICBleHBvcnRzLmlzSWRlbnRpZmllclN0YXJ0ID0gZnVuY3Rpb24oY29kZSkgewogICAgICAgICAgICAgICAgLy8gcGVybWl0ICQgKDM2KSBhbmQgQCAoNjQpLiBAIGlzIHVzZWQgaW4gRVM3IGRlY29yYXRvcnMuCiAgICAgICAgICAgICAgICBpZiAoY29kZSA8IDY1KSByZXR1cm4gY29kZSA9PT0gMzYgfHwgY29kZSA9PT0gNjQ7CiAgICAgICAgICAgICAgICAvLyA2NSB0aHJvdWdoIDkxIGFyZSB1cHBlcmNhc2UgbGV0dGVycy4KICAgICAgICAgICAgICAgIGlmIChjb2RlIDwgOTEpIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgLy8gcGVybWl0IF8gKDk1KS4KICAgICAgICAgICAgICAgIGlmIChjb2RlIDwgOTcpIHJldHVybiBjb2RlID09PSA5NTsKICAgICAgICAgICAgICAgIC8vIDk3IHRocm91Z2ggMTIzIGFyZSBsb3dlcmNhc2UgbGV0dGVycy4KICAgICAgICAgICAgICAgIGlmIChjb2RlIDwgMTIzKSByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIHJldHVybiBjb2RlID49IDB4YWEgJiYgbm9uQVNDSUlpZGVudGlmaWVyU3RhcnQudGVzdChTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGUpKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vIFRlc3Qgd2hldGhlciBhIGdpdmVuIGNoYXJhY3RlciBpcyBwYXJ0IG9mIGFuIGlkZW50aWZpZXIuCgogICAgICAgICAgICBleHBvcnRzLmlzSWRlbnRpZmllckNoYXIgPSBmdW5jdGlvbihjb2RlKSB7CiAgICAgICAgICAgICAgICBpZiAoY29kZSA8IDQ4KSByZXR1cm4gY29kZSA9PT0gMzY7CiAgICAgICAgICAgICAgICBpZiAoY29kZSA8IDU4KSByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIGlmIChjb2RlIDwgNjUpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIGlmIChjb2RlIDwgOTEpIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgaWYgKGNvZGUgPCA5NykgcmV0dXJuIGNvZGUgPT09IDk1OwogICAgICAgICAgICAgICAgaWYgKGNvZGUgPCAxMjMpIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgcmV0dXJuIGNvZGUgPj0gMHhhYSAmJiBub25BU0NJSWlkZW50aWZpZXIudGVzdChTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGUpKTsKICAgICAgICAgICAgfTsKICAgICAgICB9KShhY29ybik7CiAgICAgICAgLyoganNoaW50IGN1cmx5OiB0cnVlICovCgogICAgICAgIGZ1bmN0aW9uIGluX2FycmF5KHdoYXQsIGFycikgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkgKz0gMSkgewogICAgICAgICAgICAgICAgaWYgKGFycltpXSA9PT0gd2hhdCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHRyaW0ocykgewogICAgICAgICAgICByZXR1cm4gcy5yZXBsYWNlKC9eXHMrfFxzKyQvZywgJycpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbHRyaW0ocykgewogICAgICAgICAgICByZXR1cm4gcy5yZXBsYWNlKC9eXHMrL2csICcnKTsKICAgICAgICB9CgogICAgICAgIC8vIGZ1bmN0aW9uIHJ0cmltKHMpIHsKICAgICAgICAvLyAgICAgcmV0dXJuIHMucmVwbGFjZSgvXHMrJC9nLCAnJyk7CiAgICAgICAgLy8gfQoKICAgICAgICBmdW5jdGlvbiBzYW5pdGl6ZU9wZXJhdG9yUG9zaXRpb24ob3BQb3NpdGlvbikgewogICAgICAgICAgICBvcFBvc2l0aW9uID0gb3BQb3NpdGlvbiB8fCBPUEVSQVRPUl9QT1NJVElPTi5iZWZvcmVfbmV3bGluZTsKCiAgICAgICAgICAgIHZhciB2YWxpZFBvc2l0aW9uVmFsdWVzID0gT2JqZWN0LnZhbHVlcyhPUEVSQVRPUl9QT1NJVElPTik7CgogICAgICAgICAgICBpZiAoIWluX2FycmF5KG9wUG9zaXRpb24sIHZhbGlkUG9zaXRpb25WYWx1ZXMpKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgT3B0aW9uIFZhbHVlOiBUaGUgb3B0aW9uICdvcGVyYXRvcl9wb3NpdGlvbicgbXVzdCBiZSBvbmUgb2YgdGhlIGZvbGxvd2luZyB2YWx1ZXNcbiIgKwogICAgICAgICAgICAgICAgICAgIHZhbGlkUG9zaXRpb25WYWx1ZXMgKwogICAgICAgICAgICAgICAgICAgICJcbllvdSBwYXNzZWQgaW46ICciICsgb3BQb3NpdGlvbiArICInIik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBvcFBvc2l0aW9uOwogICAgICAgIH0KCiAgICAgICAgdmFyIE9QRVJBVE9SX1BPU0lUSU9OID0gewogICAgICAgICAgICBiZWZvcmVfbmV3bGluZTogJ2JlZm9yZS1uZXdsaW5lJywKICAgICAgICAgICAgYWZ0ZXJfbmV3bGluZTogJ2FmdGVyLW5ld2xpbmUnLAogICAgICAgICAgICBwcmVzZXJ2ZV9uZXdsaW5lOiAncHJlc2VydmUtbmV3bGluZScsCiAgICAgICAgfTsKCiAgICAgICAgdmFyIE9QRVJBVE9SX1BPU0lUSU9OX0JFRk9SRV9PUl9QUkVTRVJWRSA9IFtPUEVSQVRPUl9QT1NJVElPTi5iZWZvcmVfbmV3bGluZSwgT1BFUkFUT1JfUE9TSVRJT04ucHJlc2VydmVfbmV3bGluZV07CgogICAgICAgIHZhciBNT0RFID0gewogICAgICAgICAgICBCbG9ja1N0YXRlbWVudDogJ0Jsb2NrU3RhdGVtZW50JywgLy8gJ0JMT0NLJwogICAgICAgICAgICBTdGF0ZW1lbnQ6ICdTdGF0ZW1lbnQnLCAvLyAnU1RBVEVNRU5UJwogICAgICAgICAgICBPYmplY3RMaXRlcmFsOiAnT2JqZWN0TGl0ZXJhbCcsIC8vICdPQkpFQ1QnLAogICAgICAgICAgICBBcnJheUxpdGVyYWw6ICdBcnJheUxpdGVyYWwnLCAvLydbRVhQUkVTU0lPTl0nLAogICAgICAgICAgICBGb3JJbml0aWFsaXplcjogJ0ZvckluaXRpYWxpemVyJywgLy8nKEZPUi1FWFBSRVNTSU9OKScsCiAgICAgICAgICAgIENvbmRpdGlvbmFsOiAnQ29uZGl0aW9uYWwnLCAvLycoQ09ORC1FWFBSRVNTSU9OKScsCiAgICAgICAgICAgIEV4cHJlc3Npb246ICdFeHByZXNzaW9uJyAvLycoRVhQUkVTU0lPTiknCiAgICAgICAgfTsKCiAgICAgICAgZnVuY3Rpb24gQmVhdXRpZmllcihqc19zb3VyY2VfdGV4dCwgb3B0aW9ucykgewogICAgICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgICAgIHZhciBvdXRwdXQ7CiAgICAgICAgICAgIHZhciB0b2tlbnMgPSBbXSwKICAgICAgICAgICAgICAgIHRva2VuX3BvczsKICAgICAgICAgICAgdmFyIFRva2VuaXplcjsKICAgICAgICAgICAgdmFyIGN1cnJlbnRfdG9rZW47CiAgICAgICAgICAgIHZhciBsYXN0X3R5cGUsIGxhc3RfbGFzdF90ZXh0LCBpbmRlbnRfc3RyaW5nOwogICAgICAgICAgICB2YXIgZmxhZ3MsIHByZXZpb3VzX2ZsYWdzLCBmbGFnX3N0b3JlOwogICAgICAgICAgICB2YXIgcHJlZml4OwoKICAgICAgICAgICAgdmFyIGhhbmRsZXJzLCBvcHQ7CiAgICAgICAgICAgIHZhciBiYXNlSW5kZW50U3RyaW5nID0gJyc7CgogICAgICAgICAgICBoYW5kbGVycyA9IHsKICAgICAgICAgICAgICAgICdUS19TVEFSVF9FWFBSJzogaGFuZGxlX3N0YXJ0X2V4cHIsCiAgICAgICAgICAgICAgICAnVEtfRU5EX0VYUFInOiBoYW5kbGVfZW5kX2V4cHIsCiAgICAgICAgICAgICAgICAnVEtfU1RBUlRfQkxPQ0snOiBoYW5kbGVfc3RhcnRfYmxvY2ssCiAgICAgICAgICAgICAgICAnVEtfRU5EX0JMT0NLJzogaGFuZGxlX2VuZF9ibG9jaywKICAgICAgICAgICAgICAgICdUS19XT1JEJzogaGFuZGxlX3dvcmQsCiAgICAgICAgICAgICAgICAnVEtfUkVTRVJWRUQnOiBoYW5kbGVfd29yZCwKICAgICAgICAgICAgICAgICdUS19TRU1JQ09MT04nOiBoYW5kbGVfc2VtaWNvbG9uLAogICAgICAgICAgICAgICAgJ1RLX1NUUklORyc6IGhhbmRsZV9zdHJpbmcsCiAgICAgICAgICAgICAgICAnVEtfRVFVQUxTJzogaGFuZGxlX2VxdWFscywKICAgICAgICAgICAgICAgICdUS19PUEVSQVRPUic6IGhhbmRsZV9vcGVyYXRvciwKICAgICAgICAgICAgICAgICdUS19DT01NQSc6IGhhbmRsZV9jb21tYSwKICAgICAgICAgICAgICAgICdUS19CTE9DS19DT01NRU5UJzogaGFuZGxlX2Jsb2NrX2NvbW1lbnQsCiAgICAgICAgICAgICAgICAnVEtfQ09NTUVOVCc6IGhhbmRsZV9jb21tZW50LAogICAgICAgICAgICAgICAgJ1RLX0RPVCc6IGhhbmRsZV9kb3QsCiAgICAgICAgICAgICAgICAnVEtfVU5LTk9XTic6IGhhbmRsZV91bmtub3duLAogICAgICAgICAgICAgICAgJ1RLX0VPRic6IGhhbmRsZV9lb2YKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZV9mbGFncyhmbGFnc19iYXNlLCBtb2RlKSB7CiAgICAgICAgICAgICAgICB2YXIgbmV4dF9pbmRlbnRfbGV2ZWwgPSAwOwogICAgICAgICAgICAgICAgaWYgKGZsYWdzX2Jhc2UpIHsKICAgICAgICAgICAgICAgICAgICBuZXh0X2luZGVudF9sZXZlbCA9IGZsYWdzX2Jhc2UuaW5kZW50YXRpb25fbGV2ZWw7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFvdXRwdXQuanVzdF9hZGRlZF9uZXdsaW5lKCkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ3NfYmFzZS5saW5lX2luZGVudF9sZXZlbCA+IG5leHRfaW5kZW50X2xldmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRfaW5kZW50X2xldmVsID0gZmxhZ3NfYmFzZS5saW5lX2luZGVudF9sZXZlbDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIG5leHRfZmxhZ3MgPSB7CiAgICAgICAgICAgICAgICAgICAgbW9kZTogbW9kZSwKICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGZsYWdzX2Jhc2UsCiAgICAgICAgICAgICAgICAgICAgbGFzdF90ZXh0OiBmbGFnc19iYXNlID8gZmxhZ3NfYmFzZS5sYXN0X3RleHQgOiAnJywgLy8gbGFzdCB0b2tlbiB0ZXh0CiAgICAgICAgICAgICAgICAgICAgbGFzdF93b3JkOiBmbGFnc19iYXNlID8gZmxhZ3NfYmFzZS5sYXN0X3dvcmQgOiAnJywgLy8gbGFzdCAnVEtfV09SRCcgcGFzc2VkCiAgICAgICAgICAgICAgICAgICAgZGVjbGFyYXRpb25fc3RhdGVtZW50OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbl9hc3NpZ25tZW50OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBtdWx0aWxpbmVfZnJhbWU6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGlubGluZV9mcmFtZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgaWZfYmxvY2s6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGVsc2VfYmxvY2s6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGRvX2Jsb2NrOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBkb193aGlsZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgaW1wb3J0X2Jsb2NrOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBpbl9jYXNlX3N0YXRlbWVudDogZmFsc2UsIC8vIHN3aXRjaCguLil7IElOU0lERSBIRVJFIH0KICAgICAgICAgICAgICAgICAgICBpbl9jYXNlOiBmYWxzZSwgLy8gd2UncmUgb24gdGhlIGV4YWN0IGxpbmUgd2l0aCAiY2FzZSAwOiIKICAgICAgICAgICAgICAgICAgICBjYXNlX2JvZHk6IGZhbHNlLCAvLyB0aGUgaW5kZW50ZWQgY2FzZS1hY3Rpb24gYmxvY2sKICAgICAgICAgICAgICAgICAgICBpbmRlbnRhdGlvbl9sZXZlbDogbmV4dF9pbmRlbnRfbGV2ZWwsCiAgICAgICAgICAgICAgICAgICAgbGluZV9pbmRlbnRfbGV2ZWw6IGZsYWdzX2Jhc2UgPyBmbGFnc19iYXNlLmxpbmVfaW5kZW50X2xldmVsIDogbmV4dF9pbmRlbnRfbGV2ZWwsCiAgICAgICAgICAgICAgICAgICAgc3RhcnRfbGluZV9pbmRleDogb3V0cHV0LmdldF9saW5lX251bWJlcigpLAogICAgICAgICAgICAgICAgICAgIHRlcm5hcnlfZGVwdGg6IDAKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dF9mbGFnczsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gU29tZSBpbnRlcnByZXRlcnMgaGF2ZSB1bmV4cGVjdGVkIHJlc3VsdHMgd2l0aCBmb28gPSBiYXogfHwgYmFyOwogICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTsKICAgICAgICAgICAgb3B0ID0ge307CgogICAgICAgICAgICAvLyBjb21wYXRpYmlsaXR5CiAgICAgICAgICAgIGlmIChvcHRpb25zLmJyYWNlc19vbl9vd25fbGluZSAhPT0gdW5kZWZpbmVkKSB7IC8vZ3JhY2VmdWwgaGFuZGxpbmcgb2YgZGVwcmVjYXRlZCBvcHRpb24KICAgICAgICAgICAgICAgIG9wdC5icmFjZV9zdHlsZSA9IG9wdGlvbnMuYnJhY2VzX29uX293bl9saW5lID8gImV4cGFuZCIgOiAiY29sbGFwc2UiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG9wdC5icmFjZV9zdHlsZSA9IG9wdGlvbnMuYnJhY2Vfc3R5bGUgPyBvcHRpb25zLmJyYWNlX3N0eWxlIDogKG9wdC5icmFjZV9zdHlsZSA/IG9wdC5icmFjZV9zdHlsZSA6ICJjb2xsYXBzZSIpOwoKICAgICAgICAgICAgLy8gZ3JhY2VmdWwgaGFuZGxpbmcgb2YgZGVwcmVjYXRlZCBvcHRpb24KICAgICAgICAgICAgaWYgKG9wdC5icmFjZV9zdHlsZSA9PT0gImV4cGFuZC1zdHJpY3QiKSB7CiAgICAgICAgICAgICAgICBvcHQuYnJhY2Vfc3R5bGUgPSAiZXhwYW5kIjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgb3B0LmluZGVudF9zaXplID0gb3B0aW9ucy5pbmRlbnRfc2l6ZSA/IHBhcnNlSW50KG9wdGlvbnMuaW5kZW50X3NpemUsIDEwKSA6IDQ7CiAgICAgICAgICAgIG9wdC5pbmRlbnRfY2hhciA9IG9wdGlvbnMuaW5kZW50X2NoYXIgPyBvcHRpb25zLmluZGVudF9jaGFyIDogJyAnOwogICAgICAgICAgICBvcHQuZW9sID0gb3B0aW9ucy5lb2wgPyBvcHRpb25zLmVvbCA6ICdhdXRvJzsKICAgICAgICAgICAgb3B0LnByZXNlcnZlX25ld2xpbmVzID0gKG9wdGlvbnMucHJlc2VydmVfbmV3bGluZXMgPT09IHVuZGVmaW5lZCkgPyB0cnVlIDogb3B0aW9ucy5wcmVzZXJ2ZV9uZXdsaW5lczsKICAgICAgICAgICAgb3B0LmJyZWFrX2NoYWluZWRfbWV0aG9kcyA9IChvcHRpb25zLmJyZWFrX2NoYWluZWRfbWV0aG9kcyA9PT0gdW5kZWZpbmVkKSA/IGZhbHNlIDogb3B0aW9ucy5icmVha19jaGFpbmVkX21ldGhvZHM7CiAgICAgICAgICAgIG9wdC5tYXhfcHJlc2VydmVfbmV3bGluZXMgPSAob3B0aW9ucy5tYXhfcHJlc2VydmVfbmV3bGluZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogcGFyc2VJbnQob3B0aW9ucy5tYXhfcHJlc2VydmVfbmV3bGluZXMsIDEwKTsKICAgICAgICAgICAgb3B0LnNwYWNlX2luX3BhcmVuID0gKG9wdGlvbnMuc3BhY2VfaW5fcGFyZW4gPT09IHVuZGVmaW5lZCkgPyBmYWxzZSA6IG9wdGlvbnMuc3BhY2VfaW5fcGFyZW47CiAgICAgICAgICAgIG9wdC5zcGFjZV9pbl9lbXB0eV9wYXJlbiA9IChvcHRpb25zLnNwYWNlX2luX2VtcHR5X3BhcmVuID09PSB1bmRlZmluZWQpID8gZmFsc2UgOiBvcHRpb25zLnNwYWNlX2luX2VtcHR5X3BhcmVuOwogICAgICAgICAgICBvcHQuanNsaW50X2hhcHB5ID0gKG9wdGlvbnMuanNsaW50X2hhcHB5ID09PSB1bmRlZmluZWQpID8gZmFsc2UgOiBvcHRpb25zLmpzbGludF9oYXBweTsKICAgICAgICAgICAgb3B0LnNwYWNlX2FmdGVyX2Fub25fZnVuY3Rpb24gPSAob3B0aW9ucy5zcGFjZV9hZnRlcl9hbm9uX2Z1bmN0aW9uID09PSB1bmRlZmluZWQpID8gZmFsc2UgOiBvcHRpb25zLnNwYWNlX2FmdGVyX2Fub25fZnVuY3Rpb247CiAgICAgICAgICAgIG9wdC5rZWVwX2FycmF5X2luZGVudGF0aW9uID0gKG9wdGlvbnMua2VlcF9hcnJheV9pbmRlbnRhdGlvbiA9PT0gdW5kZWZpbmVkKSA/IGZhbHNlIDogb3B0aW9ucy5rZWVwX2FycmF5X2luZGVudGF0aW9uOwogICAgICAgICAgICBvcHQuc3BhY2VfYmVmb3JlX2NvbmRpdGlvbmFsID0gKG9wdGlvbnMuc3BhY2VfYmVmb3JlX2NvbmRpdGlvbmFsID09PSB1bmRlZmluZWQpID8gdHJ1ZSA6IG9wdGlvbnMuc3BhY2VfYmVmb3JlX2NvbmRpdGlvbmFsOwogICAgICAgICAgICBvcHQudW5lc2NhcGVfc3RyaW5ncyA9IChvcHRpb25zLnVuZXNjYXBlX3N0cmluZ3MgPT09IHVuZGVmaW5lZCkgPyBmYWxzZSA6IG9wdGlvbnMudW5lc2NhcGVfc3RyaW5nczsKICAgICAgICAgICAgb3B0LndyYXBfbGluZV9sZW5ndGggPSAob3B0aW9ucy53cmFwX2xpbmVfbGVuZ3RoID09PSB1bmRlZmluZWQpID8gMCA6IHBhcnNlSW50KG9wdGlvbnMud3JhcF9saW5lX2xlbmd0aCwgMTApOwogICAgICAgICAgICBvcHQuZTR4ID0gKG9wdGlvbnMuZTR4ID09PSB1bmRlZmluZWQpID8gZmFsc2UgOiBvcHRpb25zLmU0eDsKICAgICAgICAgICAgb3B0LmVuZF93aXRoX25ld2xpbmUgPSAob3B0aW9ucy5lbmRfd2l0aF9uZXdsaW5lID09PSB1bmRlZmluZWQpID8gZmFsc2UgOiBvcHRpb25zLmVuZF93aXRoX25ld2xpbmU7CiAgICAgICAgICAgIG9wdC5jb21tYV9maXJzdCA9IChvcHRpb25zLmNvbW1hX2ZpcnN0ID09PSB1bmRlZmluZWQpID8gZmFsc2UgOiBvcHRpb25zLmNvbW1hX2ZpcnN0OwogICAgICAgICAgICBvcHQub3BlcmF0b3JfcG9zaXRpb24gPSBzYW5pdGl6ZU9wZXJhdG9yUG9zaXRpb24ob3B0aW9ucy5vcGVyYXRvcl9wb3NpdGlvbik7CgogICAgICAgICAgICAvLyBGb3IgdGVzdGluZyBvZiBiZWF1dGlmeSBpZ25vcmU6c3RhcnQgZGlyZWN0aXZlCiAgICAgICAgICAgIG9wdC50ZXN0X291dHB1dF9yYXcgPSAob3B0aW9ucy50ZXN0X291dHB1dF9yYXcgPT09IHVuZGVmaW5lZCkgPyBmYWxzZSA6IG9wdGlvbnMudGVzdF9vdXRwdXRfcmF3OwoKICAgICAgICAgICAgLy8gZm9yY2Ugb3B0LnNwYWNlX2FmdGVyX2Fub25fZnVuY3Rpb24gdG8gdHJ1ZSBpZiBvcHQuanNsaW50X2hhcHB5CiAgICAgICAgICAgIGlmIChvcHQuanNsaW50X2hhcHB5KSB7CiAgICAgICAgICAgICAgICBvcHQuc3BhY2VfYWZ0ZXJfYW5vbl9mdW5jdGlvbiA9IHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChvcHRpb25zLmluZGVudF93aXRoX3RhYnMpIHsKICAgICAgICAgICAgICAgIG9wdC5pbmRlbnRfY2hhciA9ICdcdCc7CiAgICAgICAgICAgICAgICBvcHQuaW5kZW50X3NpemUgPSAxOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAob3B0LmVvbCA9PT0gJ2F1dG8nKSB7CiAgICAgICAgICAgICAgICBvcHQuZW9sID0gJ1xuJzsKICAgICAgICAgICAgICAgIGlmIChqc19zb3VyY2VfdGV4dCAmJiBhY29ybi5saW5lQnJlYWsudGVzdChqc19zb3VyY2VfdGV4dCB8fCAnJykpIHsKICAgICAgICAgICAgICAgICAgICBvcHQuZW9sID0ganNfc291cmNlX3RleHQubWF0Y2goYWNvcm4ubGluZUJyZWFrKVswXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgb3B0LmVvbCA9IG9wdC5lb2wucmVwbGFjZSgvXFxyLywgJ1xyJykucmVwbGFjZSgvXFxuLywgJ1xuJyk7CgogICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgaW5kZW50X3N0cmluZyA9ICcnOwogICAgICAgICAgICB3aGlsZSAob3B0LmluZGVudF9zaXplID4gMCkgewogICAgICAgICAgICAgICAgaW5kZW50X3N0cmluZyArPSBvcHQuaW5kZW50X2NoYXI7CiAgICAgICAgICAgICAgICBvcHQuaW5kZW50X3NpemUgLT0gMTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHByZWluZGVudF9pbmRleCA9IDA7CiAgICAgICAgICAgIGlmIChqc19zb3VyY2VfdGV4dCAmJiBqc19zb3VyY2VfdGV4dC5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIHdoaWxlICgoanNfc291cmNlX3RleHQuY2hhckF0KHByZWluZGVudF9pbmRleCkgPT09ICcgJyB8fAogICAgICAgICAgICAgICAgICAgICAgICBqc19zb3VyY2VfdGV4dC5jaGFyQXQocHJlaW5kZW50X2luZGV4KSA9PT0gJ1x0JykpIHsKICAgICAgICAgICAgICAgICAgICBiYXNlSW5kZW50U3RyaW5nICs9IGpzX3NvdXJjZV90ZXh0LmNoYXJBdChwcmVpbmRlbnRfaW5kZXgpOwogICAgICAgICAgICAgICAgICAgIHByZWluZGVudF9pbmRleCArPSAxOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAganNfc291cmNlX3RleHQgPSBqc19zb3VyY2VfdGV4dC5zdWJzdHJpbmcocHJlaW5kZW50X2luZGV4KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGFzdF90eXBlID0gJ1RLX1NUQVJUX0JMT0NLJzsgLy8gbGFzdCB0b2tlbiB0eXBlCiAgICAgICAgICAgIGxhc3RfbGFzdF90ZXh0ID0gJyc7IC8vIHByZS1sYXN0IHRva2VuIHRleHQKICAgICAgICAgICAgb3V0cHV0ID0gbmV3IE91dHB1dChpbmRlbnRfc3RyaW5nLCBiYXNlSW5kZW50U3RyaW5nKTsKCiAgICAgICAgICAgIC8vIElmIHRlc3RpbmcgdGhlIGlnbm9yZSBkaXJlY3RpdmUsIHN0YXJ0IHdpdGggb3V0cHV0IGRpc2FibGUgc2V0IHRvIHRydWUKICAgICAgICAgICAgb3V0cHV0LnJhdyA9IG9wdC50ZXN0X291dHB1dF9yYXc7CgoKICAgICAgICAgICAgLy8gU3RhY2sgb2YgcGFyc2luZy9mb3JtYXR0aW5nIHN0YXRlcywgaW5jbHVkaW5nIE1PREUuCiAgICAgICAgICAgIC8vIFdlIHRva2VuaXplLCBwYXJzZSwgYW5kIG91dHB1dCBpbiBhbiBhbG1vc3QgcHVyZWx5IGEgZm9yd2FyZC1vbmx5IHN0cmVhbSBvZiB0b2tlbiBpbnB1dAogICAgICAgICAgICAvLyBhbmQgZm9ybWF0dGVkIG91dHB1dC4gIFRoaXMgbWFrZXMgdGhlIGJlYXV0aWZpZXIgbGVzcyBhY2N1cmF0ZSB0aGFuIGZ1bGwgcGFyc2VycwogICAgICAgICAgICAvLyBidXQgYWxzbyBmYXIgbW9yZSB0b2xlcmFudCBvZiBzeW50YXggZXJyb3JzLgogICAgICAgICAgICAvLwogICAgICAgICAgICAvLyBGb3IgZXhhbXBsZSwgdGhlIGRlZmF1bHQgbW9kZSBpcyBNT0RFLkJsb2NrU3RhdGVtZW50LiBJZiB3ZSBzZWUgYSAneycgd2UgcHVzaCBhIG5ldyBmcmFtZSBvZiB0eXBlCiAgICAgICAgICAgIC8vIE1PREUuQmxvY2tTdGF0ZW1lbnQgb24gdGhlIHRoZSBzdGFjaywgZXZlbiB0aG91Z2ggaXQgY291bGQgYmUgb2JqZWN0IGxpdGVyYWwuICBJZiB3ZSBsYXRlcgogICAgICAgICAgICAvLyBlbmNvdW50ZXIgYSAiOiIsIHdlJ2xsIHN3aXRjaCB0byB0byBNT0RFLk9iamVjdExpdGVyYWwuICBJZiB3ZSB0aGVuIHNlZSBhICI7IiwKICAgICAgICAgICAgLy8gbW9zdCBmdWxsIHBhcnNlcnMgd291bGQgZGllLCBidXQgdGhlIGJlYXV0aWZpZXIgZ3JhY2VmdWxseSBmYWxscyBiYWNrIHRvCiAgICAgICAgICAgIC8vIE1PREUuQmxvY2tTdGF0ZW1lbnQgYW5kIGNvbnRpbnVlcyBvbi4KICAgICAgICAgICAgZmxhZ19zdG9yZSA9IFtdOwogICAgICAgICAgICBzZXRfbW9kZShNT0RFLkJsb2NrU3RhdGVtZW50KTsKCiAgICAgICAgICAgIHRoaXMuYmVhdXRpZnkgPSBmdW5jdGlvbigpIHsKCiAgICAgICAgICAgICAgICAvKmpzaGludCBvbmV2YXI6dHJ1ZSAqLwogICAgICAgICAgICAgICAgdmFyIGxvY2FsX3Rva2VuLCBzd2VldF9jb2RlOwogICAgICAgICAgICAgICAgVG9rZW5pemVyID0gbmV3IHRva2VuaXplcihqc19zb3VyY2VfdGV4dCwgb3B0LCBpbmRlbnRfc3RyaW5nKTsKICAgICAgICAgICAgICAgIHRva2VucyA9IFRva2VuaXplci50b2tlbml6ZSgpOwogICAgICAgICAgICAgICAgdG9rZW5fcG9zID0gMDsKCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRfbG9jYWxfdG9rZW4oKSB7CiAgICAgICAgICAgICAgICAgICAgbG9jYWxfdG9rZW4gPSBnZXRfdG9rZW4oKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9jYWxfdG9rZW47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgd2hpbGUgKGdldF9sb2NhbF90b2tlbigpKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsb2NhbF90b2tlbi5jb21tZW50c19iZWZvcmUubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGNsZWFuZXN0IGhhbmRsaW5nIG9mIGlubGluZSBjb21tZW50cyBpcyB0byB0cmVhdCB0aGVtIGFzIHRob3VnaCB0aGV5IGFyZW4ndCB0aGVyZS4KICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVzdCBjb250aW51ZSBmb3JtYXR0aW5nIGFuZCB0aGUgYmVoYXZpb3Igc2hvdWxkIGJlIGxvZ2ljYWwuCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsc28gaWdub3JlIHVua25vd24gdG9rZW5zLiAgQWdhaW4sIHRoaXMgc2hvdWxkIHJlc3VsdCBpbiBiZXR0ZXIgYmVoYXZpb3IuCiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZV90b2tlbihsb2NhbF90b2tlbi5jb21tZW50c19iZWZvcmVbaV0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBoYW5kbGVfdG9rZW4obG9jYWxfdG9rZW4pOwoKICAgICAgICAgICAgICAgICAgICBsYXN0X2xhc3RfdGV4dCA9IGZsYWdzLmxhc3RfdGV4dDsKICAgICAgICAgICAgICAgICAgICBsYXN0X3R5cGUgPSBsb2NhbF90b2tlbi50eXBlOwogICAgICAgICAgICAgICAgICAgIGZsYWdzLmxhc3RfdGV4dCA9IGxvY2FsX3Rva2VuLnRleHQ7CgogICAgICAgICAgICAgICAgICAgIHRva2VuX3BvcyArPSAxOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHN3ZWV0X2NvZGUgPSBvdXRwdXQuZ2V0X2NvZGUoKTsKICAgICAgICAgICAgICAgIGlmIChvcHQuZW5kX3dpdGhfbmV3bGluZSkgewogICAgICAgICAgICAgICAgICAgIHN3ZWV0X2NvZGUgKz0gJ1xuJzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAob3B0LmVvbCAhPT0gJ1xuJykgewogICAgICAgICAgICAgICAgICAgIHN3ZWV0X2NvZGUgPSBzd2VldF9jb2RlLnJlcGxhY2UoL1tcbl0vZywgb3B0LmVvbCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHN3ZWV0X2NvZGU7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVfdG9rZW4obG9jYWxfdG9rZW4pIHsKICAgICAgICAgICAgICAgIHZhciBuZXdsaW5lcyA9IGxvY2FsX3Rva2VuLm5ld2xpbmVzOwogICAgICAgICAgICAgICAgdmFyIGtlZXBfd2hpdGVzcGFjZSA9IG9wdC5rZWVwX2FycmF5X2luZGVudGF0aW9uICYmIGlzX2FycmF5KGZsYWdzLm1vZGUpOwoKICAgICAgICAgICAgICAgIGlmIChrZWVwX3doaXRlc3BhY2UpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld2xpbmVzOyBpICs9IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfbmV3bGluZShpID4gMCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpZiAob3B0Lm1heF9wcmVzZXJ2ZV9uZXdsaW5lcyAmJiBuZXdsaW5lcyA+IG9wdC5tYXhfcHJlc2VydmVfbmV3bGluZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmV3bGluZXMgPSBvcHQubWF4X3ByZXNlcnZlX25ld2xpbmVzOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdC5wcmVzZXJ2ZV9uZXdsaW5lcykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxfdG9rZW4ubmV3bGluZXMgPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludF9uZXdsaW5lKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMTsgaiA8IG5ld2xpbmVzOyBqICs9IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludF9uZXdsaW5lKHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGN1cnJlbnRfdG9rZW4gPSBsb2NhbF90b2tlbjsKICAgICAgICAgICAgICAgIGhhbmRsZXJzW2N1cnJlbnRfdG9rZW4udHlwZV0oKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gd2UgY291bGQgdXNlIGp1c3Qgc3RyaW5nLnNwbGl0LCBidXQKICAgICAgICAgICAgLy8gSUUgZG9lc24ndCBsaWtlIHJldHVybmluZyBlbXB0eSBzdHJpbmdzCiAgICAgICAgICAgIGZ1bmN0aW9uIHNwbGl0X2xpbmVicmVha3MocykgewogICAgICAgICAgICAgICAgLy9yZXR1cm4gcy5zcGxpdCgvXHgwZFx4MGF8XHgwYS8pOwoKICAgICAgICAgICAgICAgIHMgPSBzLnJlcGxhY2UoYWNvcm4uYWxsTGluZUJyZWFrcywgJ1xuJyk7CiAgICAgICAgICAgICAgICB2YXIgb3V0ID0gW10sCiAgICAgICAgICAgICAgICAgICAgaWR4ID0gcy5pbmRleE9mKCJcbiIpOwogICAgICAgICAgICAgICAgd2hpbGUgKGlkeCAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICBvdXQucHVzaChzLnN1YnN0cmluZygwLCBpZHgpKTsKICAgICAgICAgICAgICAgICAgICBzID0gcy5zdWJzdHJpbmcoaWR4ICsgMSk7CiAgICAgICAgICAgICAgICAgICAgaWR4ID0gcy5pbmRleE9mKCJcbiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2gocyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gb3V0OwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgbmV3bGluZV9yZXN0cmljdGVkX3Rva2VucyA9IFsnYnJlYWsnLCAnY29udGludWUnLCAncmV0dXJuJywgJ3Rocm93J107CgogICAgICAgICAgICBmdW5jdGlvbiBhbGxvd193cmFwX29yX3ByZXNlcnZlZF9uZXdsaW5lKGZvcmNlX2xpbmV3cmFwKSB7CiAgICAgICAgICAgICAgICBmb3JjZV9saW5ld3JhcCA9IChmb3JjZV9saW5ld3JhcCA9PT0gdW5kZWZpbmVkKSA/IGZhbHNlIDogZm9yY2VfbGluZXdyYXA7CgogICAgICAgICAgICAgICAgLy8gTmV2ZXIgd3JhcCB0aGUgZmlyc3QgdG9rZW4gb24gYSBsaW5lCiAgICAgICAgICAgICAgICBpZiAob3V0cHV0Lmp1c3RfYWRkZWRfbmV3bGluZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBzaG91bGRQcmVzZXJ2ZU9yRm9yY2UgPSAob3B0LnByZXNlcnZlX25ld2xpbmVzICYmIGN1cnJlbnRfdG9rZW4ud2FudGVkX25ld2xpbmUpIHx8IGZvcmNlX2xpbmV3cmFwOwogICAgICAgICAgICAgICAgdmFyIG9wZXJhdG9yTG9naWNBcHBsaWVzID0gaW5fYXJyYXkoZmxhZ3MubGFzdF90ZXh0LCBUb2tlbml6ZXIucG9zaXRpb25hYmxlX29wZXJhdG9ycykgfHwgaW5fYXJyYXkoY3VycmVudF90b2tlbi50ZXh0LCBUb2tlbml6ZXIucG9zaXRpb25hYmxlX29wZXJhdG9ycyk7CgogICAgICAgICAgICAgICAgaWYgKG9wZXJhdG9yTG9naWNBcHBsaWVzKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3VsZFByaW50T3BlcmF0b3JOZXdsaW5lID0gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5fYXJyYXkoZmxhZ3MubGFzdF90ZXh0LCBUb2tlbml6ZXIucG9zaXRpb25hYmxlX29wZXJhdG9ycykgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluX2FycmF5KG9wdC5vcGVyYXRvcl9wb3NpdGlvbiwgT1BFUkFUT1JfUE9TSVRJT05fQkVGT1JFX09SX1BSRVNFUlZFKQogICAgICAgICAgICAgICAgICAgICAgICApIHx8CiAgICAgICAgICAgICAgICAgICAgICAgIGluX2FycmF5KGN1cnJlbnRfdG9rZW4udGV4dCwgVG9rZW5pemVyLnBvc2l0aW9uYWJsZV9vcGVyYXRvcnMpOwogICAgICAgICAgICAgICAgICAgIHNob3VsZFByZXNlcnZlT3JGb3JjZSA9IHNob3VsZFByZXNlcnZlT3JGb3JjZSAmJiBzaG91bGRQcmludE9wZXJhdG9yTmV3bGluZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkUHJlc2VydmVPckZvcmNlKSB7CiAgICAgICAgICAgICAgICAgICAgcHJpbnRfbmV3bGluZShmYWxzZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdC53cmFwX2xpbmVfbGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RfdHlwZSA9PT0gJ1RLX1JFU0VSVkVEJyAmJiBpbl9hcnJheShmbGFncy5sYXN0X3RleHQsIG5ld2xpbmVfcmVzdHJpY3RlZF90b2tlbnMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZXNlIHRva2VucyBzaG91bGQgbmV2ZXIgaGF2ZSBhIG5ld2xpbmUgaW5zZXJ0ZWQKICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmV0d2VlbiB0aGVtIGFuZCB0aGUgZm9sbG93aW5nIGV4cHJlc3Npb24uCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIHByb3Bvc2VkX2xpbmVfbGVuZ3RoID0gb3V0cHV0LmN1cnJlbnRfbGluZS5nZXRfY2hhcmFjdGVyX2NvdW50KCkgKyBjdXJyZW50X3Rva2VuLnRleHQubGVuZ3RoICsKICAgICAgICAgICAgICAgICAgICAgICAgKG91dHB1dC5zcGFjZV9iZWZvcmVfdG9rZW4gPyAxIDogMCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3Bvc2VkX2xpbmVfbGVuZ3RoID49IG9wdC53cmFwX2xpbmVfbGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X25ld2xpbmUoZmFsc2UsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcHJpbnRfbmV3bGluZShmb3JjZV9uZXdsaW5lLCBwcmVzZXJ2ZV9zdGF0ZW1lbnRfZmxhZ3MpIHsKICAgICAgICAgICAgICAgIGlmICghcHJlc2VydmVfc3RhdGVtZW50X2ZsYWdzKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZsYWdzLmxhc3RfdGV4dCAhPT0gJzsnICYmIGZsYWdzLmxhc3RfdGV4dCAhPT0gJywnICYmIGZsYWdzLmxhc3RfdGV4dCAhPT0gJz0nICYmIGxhc3RfdHlwZSAhPT0gJ1RLX09QRVJBVE9SJykgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoZmxhZ3MubW9kZSA9PT0gTU9ERS5TdGF0ZW1lbnQgJiYgIWZsYWdzLmlmX2Jsb2NrICYmICFmbGFncy5kb19ibG9jaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdG9yZV9tb2RlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKG91dHB1dC5hZGRfbmV3X2xpbmUoZm9yY2VfbmV3bGluZSkpIHsKICAgICAgICAgICAgICAgICAgICBmbGFncy5tdWx0aWxpbmVfZnJhbWUgPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwcmludF90b2tlbl9saW5lX2luZGVudGF0aW9uKCkgewogICAgICAgICAgICAgICAgaWYgKG91dHB1dC5qdXN0X2FkZGVkX25ld2xpbmUoKSkgewogICAgICAgICAgICAgICAgICAgIGlmIChvcHQua2VlcF9hcnJheV9pbmRlbnRhdGlvbiAmJiBpc19hcnJheShmbGFncy5tb2RlKSAmJiBjdXJyZW50X3Rva2VuLndhbnRlZF9uZXdsaW5lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5jdXJyZW50X2xpbmUucHVzaChjdXJyZW50X3Rva2VuLndoaXRlc3BhY2VfYmVmb3JlKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3V0cHV0LnNldF9pbmRlbnQoZmxhZ3MuaW5kZW50YXRpb25fbGV2ZWwpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdzLmxpbmVfaW5kZW50X2xldmVsID0gZmxhZ3MuaW5kZW50YXRpb25fbGV2ZWw7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwcmludF90b2tlbihwcmludGFibGVfdG9rZW4pIHsKICAgICAgICAgICAgICAgIGlmIChvdXRwdXQucmF3KSB7CiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmFkZF9yYXdfdG9rZW4oY3VycmVudF90b2tlbik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChvcHQuY29tbWFfZmlyc3QgJiYgbGFzdF90eXBlID09PSAnVEtfQ09NTUEnICYmCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0Lmp1c3RfYWRkZWRfbmV3bGluZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dC5wcmV2aW91c19saW5lLmxhc3QoKSA9PT0gJywnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3BwZWQgPSBvdXRwdXQucHJldmlvdXNfbGluZS5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIGNvbW1hIHdhcyBhbHJlYWR5IGF0IHRoZSBzdGFydCBvZiB0aGUgbGluZSwKICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHVsbCBiYWNrIG9udG8gdGhhdCBsaW5lIGFuZCByZXByaW50IHRoZSBpbmRlbnRhdGlvbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3V0cHV0LnByZXZpb3VzX2xpbmUuaXNfZW1wdHkoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnByZXZpb3VzX2xpbmUucHVzaChwb3BwZWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnRyaW0odHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuY3VycmVudF9saW5lLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBjb21tYSBpbiBmcm9udCBvZiB0aGUgbmV4dCB0b2tlbgogICAgICAgICAgICAgICAgICAgICAgICBwcmludF90b2tlbl9saW5lX2luZGVudGF0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5hZGRfdG9rZW4oJywnKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHByaW50YWJsZV90b2tlbiA9IHByaW50YWJsZV90b2tlbiB8fCBjdXJyZW50X3Rva2VuLnRleHQ7CiAgICAgICAgICAgICAgICBwcmludF90b2tlbl9saW5lX2luZGVudGF0aW9uKCk7CiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkX3Rva2VuKHByaW50YWJsZV90b2tlbik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGluZGVudCgpIHsKICAgICAgICAgICAgICAgIGZsYWdzLmluZGVudGF0aW9uX2xldmVsICs9IDE7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGRlaW5kZW50KCkgewogICAgICAgICAgICAgICAgaWYgKGZsYWdzLmluZGVudGF0aW9uX2xldmVsID4gMCAmJgogICAgICAgICAgICAgICAgICAgICgoIWZsYWdzLnBhcmVudCkgfHwgZmxhZ3MuaW5kZW50YXRpb25fbGV2ZWwgPiBmbGFncy5wYXJlbnQuaW5kZW50YXRpb25fbGV2ZWwpKSB7CiAgICAgICAgICAgICAgICAgICAgZmxhZ3MuaW5kZW50YXRpb25fbGV2ZWwgLT0gMTsKCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHNldF9tb2RlKG1vZGUpIHsKICAgICAgICAgICAgICAgIGlmIChmbGFncykgewogICAgICAgICAgICAgICAgICAgIGZsYWdfc3RvcmUucHVzaChmbGFncyk7CiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNfZmxhZ3MgPSBmbGFnczsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNfZmxhZ3MgPSBjcmVhdGVfZmxhZ3MobnVsbCwgbW9kZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZmxhZ3MgPSBjcmVhdGVfZmxhZ3MocHJldmlvdXNfZmxhZ3MsIG1vZGUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBpc19hcnJheShtb2RlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbW9kZSA9PT0gTU9ERS5BcnJheUxpdGVyYWw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGlzX2V4cHJlc3Npb24obW9kZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGluX2FycmF5KG1vZGUsIFtNT0RFLkV4cHJlc3Npb24sIE1PREUuRm9ySW5pdGlhbGl6ZXIsIE1PREUuQ29uZGl0aW9uYWxdKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gcmVzdG9yZV9tb2RlKCkgewogICAgICAgICAgICAgICAgaWYgKGZsYWdfc3RvcmUubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgIHByZXZpb3VzX2ZsYWdzID0gZmxhZ3M7CiAgICAgICAgICAgICAgICAgICAgZmxhZ3MgPSBmbGFnX3N0b3JlLnBvcCgpOwogICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c19mbGFncy5tb2RlID09PSBNT0RFLlN0YXRlbWVudCkgewogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQucmVtb3ZlX3JlZHVuZGFudF9pbmRlbnRhdGlvbihwcmV2aW91c19mbGFncyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBzdGFydF9vZl9vYmplY3RfcHJvcGVydHkoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmxhZ3MucGFyZW50Lm1vZGUgPT09IE1PREUuT2JqZWN0TGl0ZXJhbCAmJiBmbGFncy5tb2RlID09PSBNT0RFLlN0YXRlbWVudCAmJiAoCiAgICAgICAgICAgICAgICAgICAgKGZsYWdzLmxhc3RfdGV4dCA9PT0gJzonICYmIGZsYWdzLnRlcm5hcnlfZGVwdGggPT09IDApIHx8IChsYXN0X3R5cGUgPT09ICdUS19SRVNFUlZFRCcgJiYgaW5fYXJyYXkoZmxhZ3MubGFzdF90ZXh0LCBbJ2dldCcsICdzZXQnXSkpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gc3RhcnRfb2Zfc3RhdGVtZW50KCkgewogICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgIChsYXN0X3R5cGUgPT09ICdUS19SRVNFUlZFRCcgJiYgaW5fYXJyYXkoZmxhZ3MubGFzdF90ZXh0LCBbJ3ZhcicsICdsZXQnLCAnY29uc3QnXSkgJiYgY3VycmVudF90b2tlbi50eXBlID09PSAnVEtfV09SRCcpIHx8CiAgICAgICAgICAgICAgICAgICAgKGxhc3RfdHlwZSA9PT0gJ1RLX1JFU0VSVkVEJyAmJiBmbGFncy5sYXN0X3RleHQgPT09ICdkbycpIHx8CiAgICAgICAgICAgICAgICAgICAgKGxhc3RfdHlwZSA9PT0gJ1RLX1JFU0VSVkVEJyAmJiBpbl9hcnJheShmbGFncy5sYXN0X3RleHQsIFsncmV0dXJuJywgJ3Rocm93J10pICYmICFjdXJyZW50X3Rva2VuLndhbnRlZF9uZXdsaW5lKSB8fAogICAgICAgICAgICAgICAgICAgIChsYXN0X3R5cGUgPT09ICdUS19SRVNFUlZFRCcgJiYgZmxhZ3MubGFzdF90ZXh0ID09PSAnZWxzZScgJiYgIShjdXJyZW50X3Rva2VuLnR5cGUgPT09ICdUS19SRVNFUlZFRCcgJiYgY3VycmVudF90b2tlbi50ZXh0ID09PSAnaWYnKSkgfHwKICAgICAgICAgICAgICAgICAgICAobGFzdF90eXBlID09PSAnVEtfRU5EX0VYUFInICYmIChwcmV2aW91c19mbGFncy5tb2RlID09PSBNT0RFLkZvckluaXRpYWxpemVyIHx8IHByZXZpb3VzX2ZsYWdzLm1vZGUgPT09IE1PREUuQ29uZGl0aW9uYWwpKSB8fAogICAgICAgICAgICAgICAgICAgIChsYXN0X3R5cGUgPT09ICdUS19XT1JEJyAmJiBmbGFncy5tb2RlID09PSBNT0RFLkJsb2NrU3RhdGVtZW50ICYmCiAgICAgICAgICAgICAgICAgICAgICAgICFmbGFncy5pbl9jYXNlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICEoY3VycmVudF90b2tlbi50ZXh0ID09PSAnLS0nIHx8IGN1cnJlbnRfdG9rZW4udGV4dCA9PT0gJysrJykgJiYKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdF9sYXN0X3RleHQgIT09ICdmdW5jdGlvbicgJiYKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF90b2tlbi50eXBlICE9PSAnVEtfV09SRCcgJiYgY3VycmVudF90b2tlbi50eXBlICE9PSAnVEtfUkVTRVJWRUQnKSB8fAogICAgICAgICAgICAgICAgICAgIChmbGFncy5tb2RlID09PSBNT0RFLk9iamVjdExpdGVyYWwgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAoZmxhZ3MubGFzdF90ZXh0ID09PSAnOicgJiYgZmxhZ3MudGVybmFyeV9kZXB0aCA9PT0gMCkgfHwgKGxhc3RfdHlwZSA9PT0gJ1RLX1JFU0VSVkVEJyAmJiBpbl9hcnJheShmbGFncy5sYXN0X3RleHQsIFsnZ2V0JywgJ3NldCddKSkpKQogICAgICAgICAgICAgICAgKSB7CgogICAgICAgICAgICAgICAgICAgIHNldF9tb2RlKE1PREUuU3RhdGVtZW50KTsKICAgICAgICAgICAgICAgICAgICBpbmRlbnQoKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RfdHlwZSA9PT0gJ1RLX1JFU0VSVkVEJyAmJiBpbl9hcnJheShmbGFncy5sYXN0X3RleHQsIFsndmFyJywgJ2xldCcsICdjb25zdCddKSAmJiBjdXJyZW50X3Rva2VuLnR5cGUgPT09ICdUS19XT1JEJykgewogICAgICAgICAgICAgICAgICAgICAgICBmbGFncy5kZWNsYXJhdGlvbl9zdGF0ZW1lbnQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gSXNzdWUgIzI3NjoKICAgICAgICAgICAgICAgICAgICAvLyBJZiBzdGFydGluZyBhIG5ldyBzdGF0ZW1lbnQgd2l0aCBbaWYsIGZvciwgd2hpbGUsIGRvXSwgcHVzaCB0byBhIG5ldyBsaW5lLgogICAgICAgICAgICAgICAgICAgIC8vIGlmIChhKSBpZiAoYikgaWYoYykgZCgpOyBlbHNlIGUoKTsgZWxzZSBmKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGFydF9vZl9vYmplY3RfcHJvcGVydHkoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBhbGxvd193cmFwX29yX3ByZXNlcnZlZF9uZXdsaW5lKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF90b2tlbi50eXBlID09PSAnVEtfUkVTRVJWRUQnICYmIGluX2FycmF5KGN1cnJlbnRfdG9rZW4udGV4dCwgWydkbycsICdmb3InLCAnaWYnLCAnd2hpbGUnXSkpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGFsbF9saW5lc19zdGFydF93aXRoKGxpbmVzLCBjKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmUgPSB0cmltKGxpbmVzW2ldKTsKICAgICAgICAgICAgICAgICAgICBpZiAobGluZS5jaGFyQXQoMCkgIT09IGMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBlYWNoX2xpbmVfbWF0Y2hlc19pbmRlbnQobGluZXMsIGluZGVudCkgewogICAgICAgICAgICAgICAgdmFyIGkgPSAwLAogICAgICAgICAgICAgICAgICAgIGxlbiA9IGxpbmVzLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICBsaW5lOwogICAgICAgICAgICAgICAgZm9yICg7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lc1tpXTsKICAgICAgICAgICAgICAgICAgICAvLyBhbGxvdyBlbXB0eSBsaW5lcyB0byBwYXNzIHRocm91Z2gKICAgICAgICAgICAgICAgICAgICBpZiAobGluZSAmJiBsaW5lLmluZGV4T2YoaW5kZW50KSAhPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGlzX3NwZWNpYWxfd29yZCh3b3JkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaW5fYXJyYXkod29yZCwgWydjYXNlJywgJ3JldHVybicsICdkbycsICdpZicsICd0aHJvdycsICdlbHNlJ10pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBnZXRfdG9rZW4ob2Zmc2V0KSB7CiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0b2tlbl9wb3MgKyAob2Zmc2V0IHx8IDApOwogICAgICAgICAgICAgICAgcmV0dXJuIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdG9rZW5zLmxlbmd0aCkgPyBudWxsIDogdG9rZW5zW2luZGV4XTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlX3N0YXJ0X2V4cHIoKSB7CiAgICAgICAgICAgICAgICBpZiAoc3RhcnRfb2Zfc3RhdGVtZW50KCkpIHsKICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY29uZGl0aW9uYWwgc3RhcnRzIHRoZSBzdGF0ZW1lbnQgaWYgYXBwcm9wcmlhdGUuCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIG5leHRfbW9kZSA9IE1PREUuRXhwcmVzc2lvbjsKICAgICAgICAgICAgICAgIGlmIChjdXJyZW50X3Rva2VuLnRleHQgPT09ICdbJykgewoKICAgICAgICAgICAgICAgICAgICBpZiAobGFzdF90eXBlID09PSAnVEtfV09SRCcgfHwgZmxhZ3MubGFzdF90ZXh0ID09PSAnKScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBpcyBhcnJheSBpbmRleCBzcGVjaWZpZXIsIGJyZWFrIGltbWVkaWF0ZWx5CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFbeF0sIGZuKClbeF0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RfdHlwZSA9PT0gJ1RLX1JFU0VSVkVEJyAmJiBpbl9hcnJheShmbGFncy5sYXN0X3RleHQsIFRva2VuaXplci5saW5lX3N0YXJ0ZXJzKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc2V0X21vZGUobmV4dF9tb2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfdG9rZW4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgaW5kZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHQuc3BhY2VfaW5fcGFyZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5zcGFjZV9iZWZvcmVfdG9rZW4gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIG5leHRfbW9kZSA9IE1PREUuQXJyYXlMaXRlcmFsOwogICAgICAgICAgICAgICAgICAgIGlmIChpc19hcnJheShmbGFncy5tb2RlKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmxhZ3MubGFzdF90ZXh0ID09PSAnWycgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmbGFncy5sYXN0X3RleHQgPT09ICcsJyAmJiAobGFzdF9sYXN0X3RleHQgPT09ICddJyB8fCBsYXN0X2xhc3RfdGV4dCA9PT0gJ30nKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIF0sIFsgZ29lcyB0byBuZXcgbGluZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSwgWyBnb2VzIHRvIG5ldyBsaW5lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdC5rZWVwX2FycmF5X2luZGVudGF0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfbmV3bGluZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RfdHlwZSA9PT0gJ1RLX1JFU0VSVkVEJyAmJiBmbGFncy5sYXN0X3RleHQgPT09ICdmb3InKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRfbW9kZSA9IE1PREUuRm9ySW5pdGlhbGl6ZXI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsYXN0X3R5cGUgPT09ICdUS19SRVNFUlZFRCcgJiYgaW5fYXJyYXkoZmxhZ3MubGFzdF90ZXh0LCBbJ2lmJywgJ3doaWxlJ10pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRfbW9kZSA9IE1PREUuQ29uZGl0aW9uYWw7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmV4dF9tb2RlID0gTU9ERS5FeHByZXNzaW9uOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoZmxhZ3MubGFzdF90ZXh0ID09PSAnOycgfHwgbGFzdF90eXBlID09PSAnVEtfU1RBUlRfQkxPQ0snKSB7CiAgICAgICAgICAgICAgICAgICAgcHJpbnRfbmV3bGluZSgpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsYXN0X3R5cGUgPT09ICdUS19FTkRfRVhQUicgfHwgbGFzdF90eXBlID09PSAnVEtfU1RBUlRfRVhQUicgfHwgbGFzdF90eXBlID09PSAnVEtfRU5EX0JMT0NLJyB8fCBmbGFncy5sYXN0X3RleHQgPT09ICcuJykgewogICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IENvbnNpZGVyIHdoZXRoZXIgZm9yY2luZyB0aGlzIGlzIHJlcXVpcmVkLiAgUmV2aWV3IGZhaWxpbmcgdGVzdHMgd2hlbiByZW1vdmVkLgogICAgICAgICAgICAgICAgICAgIGFsbG93X3dyYXBfb3JfcHJlc2VydmVkX25ld2xpbmUoY3VycmVudF90b2tlbi53YW50ZWRfbmV3bGluZSk7CiAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZyBvbiAoKCBhbmQgKSggYW5kIF1bIGFuZCBdKCBhbmQgLigKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIShsYXN0X3R5cGUgPT09ICdUS19SRVNFUlZFRCcgJiYgY3VycmVudF90b2tlbi50ZXh0ID09PSAnKCcpICYmIGxhc3RfdHlwZSAhPT0gJ1RLX1dPUkQnICYmIGxhc3RfdHlwZSAhPT0gJ1RLX09QRVJBVE9SJykgewogICAgICAgICAgICAgICAgICAgIG91dHB1dC5zcGFjZV9iZWZvcmVfdG9rZW4gPSB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICgobGFzdF90eXBlID09PSAnVEtfUkVTRVJWRUQnICYmIChmbGFncy5sYXN0X3dvcmQgPT09ICdmdW5jdGlvbicgfHwgZmxhZ3MubGFzdF93b3JkID09PSAndHlwZW9mJykpIHx8CiAgICAgICAgICAgICAgICAgICAgKGZsYWdzLmxhc3RfdGV4dCA9PT0gJyonICYmIGxhc3RfbGFzdF90ZXh0ID09PSAnZnVuY3Rpb24nKSkgewogICAgICAgICAgICAgICAgICAgIC8vIGZ1bmN0aW9uKCkgdnMgZnVuY3Rpb24gKCkKICAgICAgICAgICAgICAgICAgICBpZiAob3B0LnNwYWNlX2FmdGVyX2Fub25fZnVuY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsYXN0X3R5cGUgPT09ICdUS19SRVNFUlZFRCcgJiYgKGluX2FycmF5KGZsYWdzLmxhc3RfdGV4dCwgVG9rZW5pemVyLmxpbmVfc3RhcnRlcnMpIHx8IGZsYWdzLmxhc3RfdGV4dCA9PT0gJ2NhdGNoJykpIHsKICAgICAgICAgICAgICAgICAgICBpZiAob3B0LnNwYWNlX2JlZm9yZV9jb25kaXRpb25hbCkgewogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuc3BhY2VfYmVmb3JlX3Rva2VuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gU2hvdWxkIGJlIGEgc3BhY2UgYmV0d2VlbiBhd2FpdCBhbmQgYW4gSUlGRQogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRfdG9rZW4udGV4dCA9PT0gJygnICYmIGxhc3RfdHlwZSA9PT0gJ1RLX1JFU0VSVkVEJyAmJiBmbGFncy5sYXN0X3dvcmQgPT09ICdhd2FpdCcpIHsKICAgICAgICAgICAgICAgICAgICBvdXRwdXQuc3BhY2VfYmVmb3JlX3Rva2VuID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBTdXBwb3J0IG9mIHRoaXMga2luZCBvZiBuZXdsaW5lIHByZXNlcnZhdGlvbi4KICAgICAgICAgICAgICAgIC8vIGEgPSAoYiAmJgogICAgICAgICAgICAgICAgLy8gICAgIChjIHx8IGQpKTsKICAgICAgICAgICAgICAgIGlmIChjdXJyZW50X3Rva2VuLnRleHQgPT09ICcoJykgewogICAgICAgICAgICAgICAgICAgIGlmIChsYXN0X3R5cGUgPT09ICdUS19FUVVBTFMnIHx8IGxhc3RfdHlwZSA9PT0gJ1RLX09QRVJBVE9SJykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN0YXJ0X29mX29iamVjdF9wcm9wZXJ0eSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvd193cmFwX29yX3ByZXNlcnZlZF9uZXdsaW5lKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gU3VwcG9ydCBwcmVzZXJ2aW5nIHdyYXBwZWQgYXJyb3cgZnVuY3Rpb24gZXhwcmVzc2lvbnMKICAgICAgICAgICAgICAgIC8vIGEuYignYycsCiAgICAgICAgICAgICAgICAvLyAgICAgKCkgPT4gZC5lCiAgICAgICAgICAgICAgICAvLyApCiAgICAgICAgICAgICAgICBpZiAoY3VycmVudF90b2tlbi50ZXh0ID09PSAnKCcgJiYgbGFzdF90eXBlICE9PSAnVEtfV09SRCcgJiYgbGFzdF90eXBlICE9PSAnVEtfUkVTRVJWRUQnKSB7CiAgICAgICAgICAgICAgICAgICAgYWxsb3dfd3JhcF9vcl9wcmVzZXJ2ZWRfbmV3bGluZSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHNldF9tb2RlKG5leHRfbW9kZSk7CiAgICAgICAgICAgICAgICBwcmludF90b2tlbigpOwogICAgICAgICAgICAgICAgaWYgKG9wdC5zcGFjZV9pbl9wYXJlbikgewogICAgICAgICAgICAgICAgICAgIG91dHB1dC5zcGFjZV9iZWZvcmVfdG9rZW4gPSB0cnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIEluIGFsbCBjYXNlcywgaWYgd2UgbmV3bGluZSB3aGlsZSBpbnNpZGUgYW4gZXhwcmVzc2lvbiBpdCBzaG91bGQgYmUgaW5kZW50ZWQuCiAgICAgICAgICAgICAgICBpbmRlbnQoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlX2VuZF9leHByKCkgewogICAgICAgICAgICAgICAgLy8gc3RhdGVtZW50cyBpbnNpZGUgZXhwcmVzc2lvbnMgYXJlIG5vdCB2YWxpZCBzeW50YXgsIGJ1dC4uLgogICAgICAgICAgICAgICAgLy8gc3RhdGVtZW50cyBtdXN0IGFsbCBiZSBjbG9zZWQgd2hlbiB0aGVpciBjb250YWluZXIgY2xvc2VzCiAgICAgICAgICAgICAgICB3aGlsZSAoZmxhZ3MubW9kZSA9PT0gTU9ERS5TdGF0ZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXN0b3JlX21vZGUoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoZmxhZ3MubXVsdGlsaW5lX2ZyYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgYWxsb3dfd3JhcF9vcl9wcmVzZXJ2ZWRfbmV3bGluZShjdXJyZW50X3Rva2VuLnRleHQgPT09ICddJyAmJiBpc19hcnJheShmbGFncy5tb2RlKSAmJiAhb3B0LmtlZXBfYXJyYXlfaW5kZW50YXRpb24pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChvcHQuc3BhY2VfaW5fcGFyZW4pIHsKICAgICAgICAgICAgICAgICAgICBpZiAobGFzdF90eXBlID09PSAnVEtfU1RBUlRfRVhQUicgJiYgIW9wdC5zcGFjZV9pbl9lbXB0eV9wYXJlbikgewogICAgICAgICAgICAgICAgICAgICAgICAvLyAoKSBbXSBubyBpbm5lciBzcGFjZSBpbiBlbXB0eSBwYXJlbnMgbGlrZSB0aGVzZSwgZXZlciwgcmVmICMzMjAKICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5zcGFjZV9iZWZvcmVfdG9rZW4gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChjdXJyZW50X3Rva2VuLnRleHQgPT09ICddJyAmJiBvcHQua2VlcF9hcnJheV9pbmRlbnRhdGlvbikgewogICAgICAgICAgICAgICAgICAgIHByaW50X3Rva2VuKCk7CiAgICAgICAgICAgICAgICAgICAgcmVzdG9yZV9tb2RlKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJlc3RvcmVfbW9kZSgpOwogICAgICAgICAgICAgICAgICAgIHByaW50X3Rva2VuKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBvdXRwdXQucmVtb3ZlX3JlZHVuZGFudF9pbmRlbnRhdGlvbihwcmV2aW91c19mbGFncyk7CgogICAgICAgICAgICAgICAgLy8gZG8ge30gd2hpbGUgKCkgLy8gbm8gc3RhdGVtZW50IHJlcXVpcmVkIGFmdGVyCiAgICAgICAgICAgICAgICBpZiAoZmxhZ3MuZG9fd2hpbGUgJiYgcHJldmlvdXNfZmxhZ3MubW9kZSA9PT0gTU9ERS5Db25kaXRpb25hbCkgewogICAgICAgICAgICAgICAgICAgIHByZXZpb3VzX2ZsYWdzLm1vZGUgPSBNT0RFLkV4cHJlc3Npb247CiAgICAgICAgICAgICAgICAgICAgZmxhZ3MuZG9fYmxvY2sgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBmbGFncy5kb193aGlsZSA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlX3N0YXJ0X2Jsb2NrKCkgewogICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBzaG91bGQgYmUgdHJlYXRlZCBhcyBhIE9iamVjdExpdGVyYWwKICAgICAgICAgICAgICAgIHZhciBuZXh0X3Rva2VuID0gZ2V0X3Rva2VuKDEpOwogICAgICAgICAgICAgICAgdmFyIHNlY29uZF90b2tlbiA9IGdldF90b2tlbigyKTsKICAgICAgICAgICAgICAgIGlmIChzZWNvbmRfdG9rZW4gJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAoaW5fYXJyYXkoc2Vjb25kX3Rva2VuLnRleHQsIFsnOicsICcsJ10pICYmIGluX2FycmF5KG5leHRfdG9rZW4udHlwZSwgWydUS19TVFJJTkcnLCAnVEtfV09SRCcsICdUS19SRVNFUlZFRCddKSkgfHwKICAgICAgICAgICAgICAgICAgICAgICAgKGluX2FycmF5KG5leHRfdG9rZW4udGV4dCwgWydnZXQnLCAnc2V0J10pICYmIGluX2FycmF5KHNlY29uZF90b2tlbi50eXBlLCBbJ1RLX1dPUkQnLCAnVEtfUkVTRVJWRUQnXSkpCiAgICAgICAgICAgICAgICAgICAgKSkgewogICAgICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IHN1cHBvcnQgVHlwZVNjcmlwdCxidXQgd2UgZGlkbid0IGJyZWFrIGl0IGZvciBhIHZlcnkgbG9uZyB0aW1lLgogICAgICAgICAgICAgICAgICAgIC8vIFdlJ2xsIHRyeSB0byBrZWVwIG5vdCBicmVha2luZyBpdC4KICAgICAgICAgICAgICAgICAgICBpZiAoIWluX2FycmF5KGxhc3RfbGFzdF90ZXh0LCBbJ2NsYXNzJywgJ2ludGVyZmFjZSddKSkgewogICAgICAgICAgICAgICAgICAgICAgICBzZXRfbW9kZShNT0RFLk9iamVjdExpdGVyYWwpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldF9tb2RlKE1PREUuQmxvY2tTdGF0ZW1lbnQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGFzdF90eXBlID09PSAnVEtfT1BFUkFUT1InICYmIGZsYWdzLmxhc3RfdGV4dCA9PT0gJz0+JykgewogICAgICAgICAgICAgICAgICAgIC8vIGFycm93IGZ1bmN0aW9uOiAocGFyYW0xLCBwYXJhbU4pID0+IHsgc3RhdGVtZW50cyB9CiAgICAgICAgICAgICAgICAgICAgc2V0X21vZGUoTU9ERS5CbG9ja1N0YXRlbWVudCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluX2FycmF5KGxhc3RfdHlwZSwgWydUS19FUVVBTFMnLCAnVEtfU1RBUlRfRVhQUicsICdUS19DT01NQScsICdUS19PUEVSQVRPUiddKSB8fAogICAgICAgICAgICAgICAgICAgIChsYXN0X3R5cGUgPT09ICdUS19SRVNFUlZFRCcgJiYgaW5fYXJyYXkoZmxhZ3MubGFzdF90ZXh0LCBbJ3JldHVybicsICd0aHJvdycsICdpbXBvcnQnXSkpCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAvLyBEZXRlY3Rpbmcgc2hvcnRoYW5kIGZ1bmN0aW9uIHN5bnRheCBpcyBkaWZmaWN1bHQgYnkgc2Nhbm5pbmcgZm9yd2FyZCwKICAgICAgICAgICAgICAgICAgICAvLyAgICAgc28gY2hlY2sgdGhlIHN1cnJvdW5kaW5nIGNvbnRleHQuCiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGJsb2NrIGlzIGJlaW5nIHJldHVybmVkLCBpbXBvcnRlZCwgcGFzc2VkIGFzIGFyZywKICAgICAgICAgICAgICAgICAgICAvLyAgICAgYXNzaWduZWQgd2l0aCA9IG9yIGFzc2lnbmVkIGluIGEgbmVzdGVkIG9iamVjdCwgdHJlYXQgYXMgYW4gT2JqZWN0TGl0ZXJhbC4KICAgICAgICAgICAgICAgICAgICBzZXRfbW9kZShNT0RFLk9iamVjdExpdGVyYWwpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzZXRfbW9kZShNT0RFLkJsb2NrU3RhdGVtZW50KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgZW1wdHlfYnJhY2VzID0gIW5leHRfdG9rZW4uY29tbWVudHNfYmVmb3JlLmxlbmd0aCAmJiBuZXh0X3Rva2VuLnRleHQgPT09ICd9JzsKICAgICAgICAgICAgICAgIHZhciBlbXB0eV9hbm9ueW1vdXNfZnVuY3Rpb24gPSBlbXB0eV9icmFjZXMgJiYgZmxhZ3MubGFzdF93b3JkID09PSAnZnVuY3Rpb24nICYmCiAgICAgICAgICAgICAgICAgICAgbGFzdF90eXBlID09PSAnVEtfRU5EX0VYUFInOwoKCiAgICAgICAgICAgICAgICBpZiAob3B0LmJyYWNlX3N0eWxlID09PSAiZXhwYW5kIiB8fAogICAgICAgICAgICAgICAgICAgIChvcHQuYnJhY2Vfc3R5bGUgPT09ICJub25lIiAmJiBjdXJyZW50X3Rva2VuLndhbnRlZF9uZXdsaW5lKSkgewogICAgICAgICAgICAgICAgICAgIGlmIChsYXN0X3R5cGUgIT09ICdUS19PUEVSQVRPUicgJiYKICAgICAgICAgICAgICAgICAgICAgICAgKGVtcHR5X2Fub255bW91c19mdW5jdGlvbiB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdF90eXBlID09PSAnVEtfRVFVQUxTJyB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKGxhc3RfdHlwZSA9PT0gJ1RLX1JFU0VSVkVEJyAmJiBpc19zcGVjaWFsX3dvcmQoZmxhZ3MubGFzdF90ZXh0KSAmJiBmbGFncy5sYXN0X3RleHQgIT09ICdlbHNlJykpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5zcGFjZV9iZWZvcmVfdG9rZW4gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X25ld2xpbmUoZmFsc2UsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIGNvbGxhcHNlCiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdC5icmFjZV9zdHlsZSA9PT0gJ2NvbGxhcHNlLXByZXNlcnZlLWlubGluZScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VhcmNoIGZvcndhcmQgZm9yIGEgbmV3bGluZSB3YW50ZWQgaW5zaWRlIHRoaXMgYmxvY2sKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrX3Rva2VuID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ3MuaW5saW5lX2ZyYW1lID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggKz0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrX3Rva2VuID0gZ2V0X3Rva2VuKGluZGV4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVja190b2tlbi53YW50ZWRfbmV3bGluZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdzLmlubGluZV9mcmFtZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IHdoaWxlIChjaGVja190b2tlbi50eXBlICE9PSAnVEtfRU9GJyAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIShjaGVja190b2tlbi50eXBlID09PSAnVEtfRU5EX0JMT0NLJyAmJiBjaGVja190b2tlbi5vcGVuZWQgPT09IGN1cnJlbnRfdG9rZW4pKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChpc19hcnJheShwcmV2aW91c19mbGFncy5tb2RlKSAmJiAobGFzdF90eXBlID09PSAnVEtfU1RBUlRfRVhQUicgfHwgbGFzdF90eXBlID09PSAnVEtfQ09NTUEnKSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSdyZSBwcmVzZXJ2aW5nIGlubGluZSwKICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxsb3cgbmV3bGluZSBiZXR3ZWVuIGNvbW1hIGFuZCBuZXh0IGJyYWNlLgogICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdF90eXBlID09PSAnVEtfQ09NTUEnIHx8IG9wdC5zcGFjZV9pbl9wYXJlbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHQuYnJhY2Vfc3R5bGUgPT09ICdjb2xsYXBzZS1wcmVzZXJ2ZS1pbmxpbmUnICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobGFzdF90eXBlID09PSAnVEtfQ09NTUEnIHx8IChsYXN0X3R5cGUgPT09ICdUS19TVEFSVF9FWFBSJyAmJiBmbGFncy5pbmxpbmVfZnJhbWUpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dfd3JhcF9vcl9wcmVzZXJ2ZWRfbmV3bGluZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNfZmxhZ3MubXVsdGlsaW5lX2ZyYW1lID0gcHJldmlvdXNfZmxhZ3MubXVsdGlsaW5lX2ZyYW1lIHx8IGZsYWdzLm11bHRpbGluZV9mcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdzLm11bHRpbGluZV9mcmFtZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsYXN0X3R5cGUgIT09ICdUS19PUEVSQVRPUicgJiYgbGFzdF90eXBlICE9PSAnVEtfU1RBUlRfRVhQUicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RfdHlwZSA9PT0gJ1RLX1NUQVJUX0JMT0NLJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfbmV3bGluZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBwcmludF90b2tlbigpOwogICAgICAgICAgICAgICAgaW5kZW50KCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZV9lbmRfYmxvY2soKSB7CiAgICAgICAgICAgICAgICAvLyBzdGF0ZW1lbnRzIG11c3QgYWxsIGJlIGNsb3NlZCB3aGVuIHRoZWlyIGNvbnRhaW5lciBjbG9zZXMKICAgICAgICAgICAgICAgIHdoaWxlIChmbGFncy5tb2RlID09PSBNT0RFLlN0YXRlbWVudCkgewogICAgICAgICAgICAgICAgICAgIHJlc3RvcmVfbW9kZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGVtcHR5X2JyYWNlcyA9IGxhc3RfdHlwZSA9PT0gJ1RLX1NUQVJUX0JMT0NLJzsKCiAgICAgICAgICAgICAgICBpZiAob3B0LmJyYWNlX3N0eWxlID09PSAiZXhwYW5kIikgewogICAgICAgICAgICAgICAgICAgIGlmICghZW1wdHlfYnJhY2VzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X25ld2xpbmUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIHNraXAge30KICAgICAgICAgICAgICAgICAgICBpZiAoIWVtcHR5X2JyYWNlcykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmxhZ3MuaW5saW5lX2ZyYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuc3BhY2VfYmVmb3JlX3Rva2VuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc19hcnJheShmbGFncy5tb2RlKSAmJiBvcHQua2VlcF9hcnJheV9pbmRlbnRhdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgUkVBTExZIG5lZWQgYSBuZXdsaW5lIGhlcmUsIGJ1dCBuZXdsaW5lciB3b3VsZCBza2lwIHRoYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdC5rZWVwX2FycmF5X2luZGVudGF0aW9uID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludF9uZXdsaW5lKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHQua2VlcF9hcnJheV9pbmRlbnRhdGlvbiA9IHRydWU7CgogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfbmV3bGluZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmVzdG9yZV9tb2RlKCk7CiAgICAgICAgICAgICAgICBwcmludF90b2tlbigpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVfd29yZCgpIHsKICAgICAgICAgICAgICAgIGlmIChjdXJyZW50X3Rva2VuLnR5cGUgPT09ICdUS19SRVNFUlZFRCcpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaW5fYXJyYXkoY3VycmVudF90b2tlbi50ZXh0LCBbJ3NldCcsICdnZXQnXSkgJiYgZmxhZ3MubW9kZSAhPT0gTU9ERS5PYmplY3RMaXRlcmFsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfdG9rZW4udHlwZSA9ICdUS19XT1JEJzsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluX2FycmF5KGN1cnJlbnRfdG9rZW4udGV4dCwgWydhcycsICdmcm9tJ10pICYmICFmbGFncy5pbXBvcnRfYmxvY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF90b2tlbi50eXBlID0gJ1RLX1dPUkQnOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmxhZ3MubW9kZSA9PT0gTU9ERS5PYmplY3RMaXRlcmFsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXh0X3Rva2VuID0gZ2V0X3Rva2VuKDEpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dF90b2tlbi50ZXh0ID09PSAnOicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfdG9rZW4udHlwZSA9ICdUS19XT1JEJzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoc3RhcnRfb2Zfc3RhdGVtZW50KCkpIHsKICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY29uZGl0aW9uYWwgc3RhcnRzIHRoZSBzdGF0ZW1lbnQgaWYgYXBwcm9wcmlhdGUuCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRfdG9rZW4ud2FudGVkX25ld2xpbmUgJiYgIWlzX2V4cHJlc3Npb24oZmxhZ3MubW9kZSkgJiYKICAgICAgICAgICAgICAgICAgICAobGFzdF90eXBlICE9PSAnVEtfT1BFUkFUT1InIHx8IChmbGFncy5sYXN0X3RleHQgPT09ICctLScgfHwgZmxhZ3MubGFzdF90ZXh0ID09PSAnKysnKSkgJiYKICAgICAgICAgICAgICAgICAgICBsYXN0X3R5cGUgIT09ICdUS19FUVVBTFMnICYmCiAgICAgICAgICAgICAgICAgICAgKG9wdC5wcmVzZXJ2ZV9uZXdsaW5lcyB8fCAhKGxhc3RfdHlwZSA9PT0gJ1RLX1JFU0VSVkVEJyAmJiBpbl9hcnJheShmbGFncy5sYXN0X3RleHQsIFsndmFyJywgJ2xldCcsICdjb25zdCcsICdzZXQnLCAnZ2V0J10pKSkpIHsKCiAgICAgICAgICAgICAgICAgICAgcHJpbnRfbmV3bGluZSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChmbGFncy5kb19ibG9jayAmJiAhZmxhZ3MuZG9fd2hpbGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudF90b2tlbi50eXBlID09PSAnVEtfUkVTRVJWRUQnICYmIGN1cnJlbnRfdG9rZW4udGV4dCA9PT0gJ3doaWxlJykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBkbyB7fSAjIyB3aGlsZSAoKQogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuc3BhY2VfYmVmb3JlX3Rva2VuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfdG9rZW4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdzLmRvX3doaWxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvIHt9IHNob3VsZCBhbHdheXMgaGF2ZSB3aGlsZSBhcyB0aGUgbmV4dCB3b3JkLgogICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSBkb24ndCBzZWUgdGhlIGV4cGVjdGVkIHdoaWxlLCByZWNvdmVyCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X25ld2xpbmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ3MuZG9fYmxvY2sgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gaWYgbWF5IGJlIGZvbGxvd2VkIGJ5IGVsc2UsIG9yIG5vdAogICAgICAgICAgICAgICAgLy8gQmFyZS9pbmxpbmUgaWZzIGFyZSB0cmlja3kKICAgICAgICAgICAgICAgIC8vIE5lZWQgdG8gdW53aW5kIHRoZSBtb2RlcyBjb3JyZWN0bHk6IGlmIChhKSBpZiAoYikgYygpOyBlbHNlIGQoKTsgZWxzZSBlKCk7CiAgICAgICAgICAgICAgICBpZiAoZmxhZ3MuaWZfYmxvY2spIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWZsYWdzLmVsc2VfYmxvY2sgJiYgKGN1cnJlbnRfdG9rZW4udHlwZSA9PT0gJ1RLX1JFU0VSVkVEJyAmJiBjdXJyZW50X3Rva2VuLnRleHQgPT09ICdlbHNlJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ3MuZWxzZV9ibG9jayA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGZsYWdzLm1vZGUgPT09IE1PREUuU3RhdGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN0b3JlX21vZGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmbGFncy5pZl9ibG9jayA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBmbGFncy5lbHNlX2Jsb2NrID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChjdXJyZW50X3Rva2VuLnR5cGUgPT09ICdUS19SRVNFUlZFRCcgJiYgKGN1cnJlbnRfdG9rZW4udGV4dCA9PT0gJ2Nhc2UnIHx8IChjdXJyZW50X3Rva2VuLnRleHQgPT09ICdkZWZhdWx0JyAmJiBmbGFncy5pbl9jYXNlX3N0YXRlbWVudCkpKSB7CiAgICAgICAgICAgICAgICAgICAgcHJpbnRfbmV3bGluZSgpOwogICAgICAgICAgICAgICAgICAgIGlmIChmbGFncy5jYXNlX2JvZHkgfHwgb3B0LmpzbGludF9oYXBweSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBzd2l0Y2ggY2FzZXMgZm9sbG93aW5nIG9uZSBhbm90aGVyCiAgICAgICAgICAgICAgICAgICAgICAgIGRlaW5kZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdzLmNhc2VfYm9keSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBwcmludF90b2tlbigpOwogICAgICAgICAgICAgICAgICAgIGZsYWdzLmluX2Nhc2UgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGZsYWdzLmluX2Nhc2Vfc3RhdGVtZW50ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRfdG9rZW4udHlwZSA9PT0gJ1RLX1JFU0VSVkVEJyAmJiBjdXJyZW50X3Rva2VuLnRleHQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaW5fYXJyYXkoZmxhZ3MubGFzdF90ZXh0LCBbJ30nLCAnOyddKSB8fCAob3V0cHV0Lmp1c3RfYWRkZWRfbmV3bGluZSgpICYmICFpbl9hcnJheShmbGFncy5sYXN0X3RleHQsIFsnWycsICd7JywgJzonLCAnPScsICcsJ10pKSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUgdGhlcmUgaXMgYSBuaWNlIGNsZWFuIHNwYWNlIG9mIGF0IGxlYXN0IG9uZSBibGFuayBsaW5lCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJlZm9yZSBhIG5ldyBmdW5jdGlvbiBkZWZpbml0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb3V0cHV0Lmp1c3RfYWRkZWRfYmxhbmtsaW5lKCkgJiYgIWN1cnJlbnRfdG9rZW4uY29tbWVudHNfYmVmb3JlLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfbmV3bGluZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfbmV3bGluZSh0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAobGFzdF90eXBlID09PSAnVEtfUkVTRVJWRUQnIHx8IGxhc3RfdHlwZSA9PT0gJ1RLX1dPUkQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXN0X3R5cGUgPT09ICdUS19SRVNFUlZFRCcgJiYgaW5fYXJyYXkoZmxhZ3MubGFzdF90ZXh0LCBbJ2dldCcsICdzZXQnLCAnbmV3JywgJ3JldHVybicsICdleHBvcnQnLCAnYXN5bmMnXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5zcGFjZV9iZWZvcmVfdG9rZW4gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxhc3RfdHlwZSA9PT0gJ1RLX1JFU0VSVkVEJyAmJiBmbGFncy5sYXN0X3RleHQgPT09ICdkZWZhdWx0JyAmJiBsYXN0X2xhc3RfdGV4dCA9PT0gJ2V4cG9ydCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5zcGFjZV9iZWZvcmVfdG9rZW4gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfbmV3bGluZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsYXN0X3R5cGUgPT09ICdUS19PUEVSQVRPUicgfHwgZmxhZ3MubGFzdF90ZXh0ID09PSAnPScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9vID0gZnVuY3Rpb24KICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghZmxhZ3MubXVsdGlsaW5lX2ZyYW1lICYmIChpc19leHByZXNzaW9uKGZsYWdzLm1vZGUpIHx8IGlzX2FycmF5KGZsYWdzLm1vZGUpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyAoZnVuY3Rpb24KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBwcmludF9uZXdsaW5lKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChsYXN0X3R5cGUgPT09ICdUS19DT01NQScgfHwgbGFzdF90eXBlID09PSAnVEtfU1RBUlRfRVhQUicgfHwgbGFzdF90eXBlID09PSAnVEtfRVFVQUxTJyB8fCBsYXN0X3R5cGUgPT09ICdUS19PUEVSQVRPUicpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXN0YXJ0X29mX29iamVjdF9wcm9wZXJ0eSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93X3dyYXBfb3JfcHJlc2VydmVkX25ld2xpbmUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRfdG9rZW4udHlwZSA9PT0gJ1RLX1JFU0VSVkVEJyAmJiBpbl9hcnJheShjdXJyZW50X3Rva2VuLnRleHQsIFsnZnVuY3Rpb24nLCAnZ2V0JywgJ3NldCddKSkgewogICAgICAgICAgICAgICAgICAgIHByaW50X3Rva2VuKCk7CiAgICAgICAgICAgICAgICAgICAgZmxhZ3MubGFzdF93b3JkID0gY3VycmVudF90b2tlbi50ZXh0OwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBwcmVmaXggPSAnTk9ORSc7CgogICAgICAgICAgICAgICAgaWYgKGxhc3RfdHlwZSA9PT0gJ1RLX0VORF9CTE9DSycpIHsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCEoY3VycmVudF90b2tlbi50eXBlID09PSAnVEtfUkVTRVJWRUQnICYmIGluX2FycmF5KGN1cnJlbnRfdG9rZW4udGV4dCwgWydlbHNlJywgJ2NhdGNoJywgJ2ZpbmFsbHknLCAnZnJvbSddKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcHJlZml4ID0gJ05FV0xJTkUnOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHQuYnJhY2Vfc3R5bGUgPT09ICJleHBhbmQiIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHQuYnJhY2Vfc3R5bGUgPT09ICJlbmQtZXhwYW5kIiB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9wdC5icmFjZV9zdHlsZSA9PT0gIm5vbmUiICYmIGN1cnJlbnRfdG9rZW4ud2FudGVkX25ld2xpbmUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSAnTkVXTElORSc7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSAnU1BBQ0UnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxhc3RfdHlwZSA9PT0gJ1RLX1NFTUlDT0xPTicgJiYgZmxhZ3MubW9kZSA9PT0gTU9ERS5CbG9ja1N0YXRlbWVudCkgewogICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IFNob3VsZCB0aGlzIGJlIGZvciBTVEFURU1FTlQgYXMgd2VsbD8KICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSAnTkVXTElORSc7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxhc3RfdHlwZSA9PT0gJ1RLX1NFTUlDT0xPTicgJiYgaXNfZXhwcmVzc2lvbihmbGFncy5tb2RlKSkgewogICAgICAgICAgICAgICAgICAgIHByZWZpeCA9ICdTUEFDRSc7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxhc3RfdHlwZSA9PT0gJ1RLX1NUUklORycpIHsKICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSAnTkVXTElORSc7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxhc3RfdHlwZSA9PT0gJ1RLX1JFU0VSVkVEJyB8fCBsYXN0X3R5cGUgPT09ICdUS19XT1JEJyB8fAogICAgICAgICAgICAgICAgICAgIChmbGFncy5sYXN0X3RleHQgPT09ICcqJyAmJiBsYXN0X2xhc3RfdGV4dCA9PT0gJ2Z1bmN0aW9uJykpIHsKICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSAnU1BBQ0UnOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsYXN0X3R5cGUgPT09ICdUS19TVEFSVF9CTE9DSycpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZmxhZ3MuaW5saW5lX2ZyYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeCA9ICdTUEFDRSc7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcHJlZml4ID0gJ05FV0xJTkUnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGFzdF90eXBlID09PSAnVEtfRU5EX0VYUFInKSB7CiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgcHJlZml4ID0gJ05FV0xJTkUnOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChjdXJyZW50X3Rva2VuLnR5cGUgPT09ICdUS19SRVNFUlZFRCcgJiYgaW5fYXJyYXkoY3VycmVudF90b2tlbi50ZXh0LCBUb2tlbml6ZXIubGluZV9zdGFydGVycykgJiYgZmxhZ3MubGFzdF90ZXh0ICE9PSAnKScpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZmxhZ3MuaW5saW5lX2ZyYW1lIHx8IGZsYWdzLmxhc3RfdGV4dCA9PT0gJ2Vsc2UnIHx8IGZsYWdzLmxhc3RfdGV4dCA9PT0gJ2V4cG9ydCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcHJlZml4ID0gJ1NQQUNFJzsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSAnTkVXTElORSc7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoY3VycmVudF90b2tlbi50eXBlID09PSAnVEtfUkVTRVJWRUQnICYmIGluX2FycmF5KGN1cnJlbnRfdG9rZW4udGV4dCwgWydlbHNlJywgJ2NhdGNoJywgJ2ZpbmFsbHknXSkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIShsYXN0X3R5cGUgPT09ICdUS19FTkRfQkxPQ0snICYmIHByZXZpb3VzX2ZsYWdzLm1vZGUgPT09IE1PREUuQmxvY2tTdGF0ZW1lbnQpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgIG9wdC5icmFjZV9zdHlsZSA9PT0gImV4cGFuZCIgfHwKICAgICAgICAgICAgICAgICAgICAgICAgb3B0LmJyYWNlX3N0eWxlID09PSAiZW5kLWV4cGFuZCIgfHwKICAgICAgICAgICAgICAgICAgICAgICAgKG9wdC5icmFjZV9zdHlsZSA9PT0gIm5vbmUiICYmIGN1cnJlbnRfdG9rZW4ud2FudGVkX25ld2xpbmUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X25ld2xpbmUoKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQudHJpbSh0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmUgPSBvdXRwdXQuY3VycmVudF9saW5lOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSB0cmltbWVkIGFuZCB0aGVyZSdzIHNvbWV0aGluZyBvdGhlciB0aGFuIGEgY2xvc2UgYmxvY2sgYmVmb3JlIHVzCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHB1dCBhIG5ld2xpbmUgYmFjayBpbi4gIEhhbmRsZXMgJ30gLy8gY29tbWVudCcgc2NlbmFyaW8uCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5lLmxhc3QoKSAhPT0gJ30nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludF9uZXdsaW5lKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcmVmaXggPT09ICdORVdMSU5FJykgewogICAgICAgICAgICAgICAgICAgIGlmIChsYXN0X3R5cGUgPT09ICdUS19SRVNFUlZFRCcgJiYgaXNfc3BlY2lhbF93b3JkKGZsYWdzLmxhc3RfdGV4dCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm8gbmV3bGluZSBiZXR3ZWVuICdyZXR1cm4gbm5uJwogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuc3BhY2VfYmVmb3JlX3Rva2VuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxhc3RfdHlwZSAhPT0gJ1RLX0VORF9FWFBSJykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGxhc3RfdHlwZSAhPT0gJ1RLX1NUQVJUX0VYUFInIHx8ICEoY3VycmVudF90b2tlbi50eXBlID09PSAnVEtfUkVTRVJWRUQnICYmIGluX2FycmF5KGN1cnJlbnRfdG9rZW4udGV4dCwgWyd2YXInLCAnbGV0JywgJ2NvbnN0J10pKSkgJiYgZmxhZ3MubGFzdF90ZXh0ICE9PSAnOicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vIG5lZWQgdG8gZm9yY2UgbmV3bGluZSBvbiAndmFyJzogZm9yICh2YXIgeCA9IDAuLi4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudF90b2tlbi50eXBlID09PSAnVEtfUkVTRVJWRUQnICYmIGN1cnJlbnRfdG9rZW4udGV4dCA9PT0gJ2lmJyAmJiBmbGFncy5sYXN0X3RleHQgPT09ICdlbHNlJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vIG5ld2xpbmUgZm9yIH0gZWxzZSBpZiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X25ld2xpbmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudF90b2tlbi50eXBlID09PSAnVEtfUkVTRVJWRUQnICYmIGluX2FycmF5KGN1cnJlbnRfdG9rZW4udGV4dCwgVG9rZW5pemVyLmxpbmVfc3RhcnRlcnMpICYmIGZsYWdzLmxhc3RfdGV4dCAhPT0gJyknKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X25ld2xpbmUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZsYWdzLm11bHRpbGluZV9mcmFtZSAmJiBpc19hcnJheShmbGFncy5tb2RlKSAmJiBmbGFncy5sYXN0X3RleHQgPT09ICcsJyAmJiBsYXN0X2xhc3RfdGV4dCA9PT0gJ30nKSB7CiAgICAgICAgICAgICAgICAgICAgcHJpbnRfbmV3bGluZSgpOyAvLyB9LCBpbiBsaXN0cyBnZXQgYSBuZXdsaW5lIHRyZWF0bWVudAogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcmVmaXggPT09ICdTUEFDRScpIHsKICAgICAgICAgICAgICAgICAgICBvdXRwdXQuc3BhY2VfYmVmb3JlX3Rva2VuID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHByaW50X3Rva2VuKCk7CiAgICAgICAgICAgICAgICBmbGFncy5sYXN0X3dvcmQgPSBjdXJyZW50X3Rva2VuLnRleHQ7CgogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRfdG9rZW4udHlwZSA9PT0gJ1RLX1JFU0VSVkVEJykgewogICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50X3Rva2VuLnRleHQgPT09ICdkbycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ3MuZG9fYmxvY2sgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudF90b2tlbi50ZXh0ID09PSAnaWYnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdzLmlmX2Jsb2NrID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRfdG9rZW4udGV4dCA9PT0gJ2ltcG9ydCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ3MuaW1wb3J0X2Jsb2NrID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZsYWdzLmltcG9ydF9ibG9jayAmJiBjdXJyZW50X3Rva2VuLnR5cGUgPT09ICdUS19SRVNFUlZFRCcgJiYgY3VycmVudF90b2tlbi50ZXh0ID09PSAnZnJvbScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ3MuaW1wb3J0X2Jsb2NrID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVfc2VtaWNvbG9uKCkgewogICAgICAgICAgICAgICAgaWYgKHN0YXJ0X29mX3N0YXRlbWVudCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGNvbmRpdGlvbmFsIHN0YXJ0cyB0aGUgc3RhdGVtZW50IGlmIGFwcHJvcHJpYXRlLgogICAgICAgICAgICAgICAgICAgIC8vIFNlbWljb2xvbiBjYW4gYmUgdGhlIHN0YXJ0IChhbmQgZW5kKSBvZiBhIHN0YXRlbWVudAogICAgICAgICAgICAgICAgICAgIG91dHB1dC5zcGFjZV9iZWZvcmVfdG9rZW4gPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHdoaWxlIChmbGFncy5tb2RlID09PSBNT0RFLlN0YXRlbWVudCAmJiAhZmxhZ3MuaWZfYmxvY2sgJiYgIWZsYWdzLmRvX2Jsb2NrKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdG9yZV9tb2RlKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gaGFja3kgYnV0IGVmZmVjdGl2ZSBmb3IgdGhlIG1vbWVudAogICAgICAgICAgICAgICAgaWYgKGZsYWdzLmltcG9ydF9ibG9jaykgewogICAgICAgICAgICAgICAgICAgIGZsYWdzLmltcG9ydF9ibG9jayA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcHJpbnRfdG9rZW4oKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlX3N0cmluZygpIHsKICAgICAgICAgICAgICAgIGlmIChzdGFydF9vZl9zdGF0ZW1lbnQoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIFRoZSBjb25kaXRpb25hbCBzdGFydHMgdGhlIHN0YXRlbWVudCBpZiBhcHByb3ByaWF0ZS4KICAgICAgICAgICAgICAgICAgICAvLyBPbmUgZGlmZmVyZW5jZSAtIHN0cmluZ3Mgd2FudCBhdCBsZWFzdCBhIHNwYWNlIGJlZm9yZQogICAgICAgICAgICAgICAgICAgIG91dHB1dC5zcGFjZV9iZWZvcmVfdG9rZW4gPSB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsYXN0X3R5cGUgPT09ICdUS19SRVNFUlZFRCcgfHwgbGFzdF90eXBlID09PSAnVEtfV09SRCcgfHwgZmxhZ3MuaW5saW5lX2ZyYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IHRydWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxhc3RfdHlwZSA9PT0gJ1RLX0NPTU1BJyB8fCBsYXN0X3R5cGUgPT09ICdUS19TVEFSVF9FWFBSJyB8fCBsYXN0X3R5cGUgPT09ICdUS19FUVVBTFMnIHx8IGxhc3RfdHlwZSA9PT0gJ1RLX09QRVJBVE9SJykgewogICAgICAgICAgICAgICAgICAgIGlmICghc3RhcnRfb2Zfb2JqZWN0X3Byb3BlcnR5KCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dfd3JhcF9vcl9wcmVzZXJ2ZWRfbmV3bGluZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcHJpbnRfbmV3bGluZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcHJpbnRfdG9rZW4oKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlX2VxdWFscygpIHsKICAgICAgICAgICAgICAgIGlmIChzdGFydF9vZl9zdGF0ZW1lbnQoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIFRoZSBjb25kaXRpb25hbCBzdGFydHMgdGhlIHN0YXRlbWVudCBpZiBhcHByb3ByaWF0ZS4KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoZmxhZ3MuZGVjbGFyYXRpb25fc3RhdGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgLy8ganVzdCBnb3QgYW4gJz0nIGluIGEgdmFyLWxpbmUsIGRpZmZlcmVudCBmb3JtYXR0aW5nL2xpbmUtYnJlYWtpbmcsIGV0YyB3aWxsIG5vdyBiZSBkb25lCiAgICAgICAgICAgICAgICAgICAgZmxhZ3MuZGVjbGFyYXRpb25fYXNzaWdubWVudCA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBvdXRwdXQuc3BhY2VfYmVmb3JlX3Rva2VuID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHByaW50X3Rva2VuKCk7CiAgICAgICAgICAgICAgICBvdXRwdXQuc3BhY2VfYmVmb3JlX3Rva2VuID0gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlX2NvbW1hKCkgewogICAgICAgICAgICAgICAgcHJpbnRfdG9rZW4oKTsKICAgICAgICAgICAgICAgIG91dHB1dC5zcGFjZV9iZWZvcmVfdG9rZW4gPSB0cnVlOwogICAgICAgICAgICAgICAgaWYgKGZsYWdzLmRlY2xhcmF0aW9uX3N0YXRlbWVudCkgewogICAgICAgICAgICAgICAgICAgIGlmIChpc19leHByZXNzaW9uKGZsYWdzLnBhcmVudC5tb2RlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3QgYnJlYWsgb24gY29tbWEsIGZvcih2YXIgYSA9IDEsIGIgPSAyKQogICAgICAgICAgICAgICAgICAgICAgICBmbGFncy5kZWNsYXJhdGlvbl9hc3NpZ25tZW50ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoZmxhZ3MuZGVjbGFyYXRpb25fYXNzaWdubWVudCkgewogICAgICAgICAgICAgICAgICAgICAgICBmbGFncy5kZWNsYXJhdGlvbl9hc3NpZ25tZW50ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X25ld2xpbmUoZmFsc2UsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0LmNvbW1hX2ZpcnN0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciBjb21tYS1maXJzdCwgd2Ugd2FudCB0byBhbGxvdyBhIG5ld2xpbmUgYmVmb3JlIHRoZSBjb21tYQogICAgICAgICAgICAgICAgICAgICAgICAvLyB0byB0dXJuIGludG8gYSBuZXdsaW5lIGFmdGVyIHRoZSBjb21tYSwgd2hpY2ggd2Ugd2lsbCBmaXh1cCBsYXRlcgogICAgICAgICAgICAgICAgICAgICAgICBhbGxvd193cmFwX29yX3ByZXNlcnZlZF9uZXdsaW5lKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmbGFncy5tb2RlID09PSBNT0RFLk9iamVjdExpdGVyYWwgfHwKICAgICAgICAgICAgICAgICAgICAoZmxhZ3MubW9kZSA9PT0gTU9ERS5TdGF0ZW1lbnQgJiYgZmxhZ3MucGFyZW50Lm1vZGUgPT09IE1PREUuT2JqZWN0TGl0ZXJhbCkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZmxhZ3MubW9kZSA9PT0gTU9ERS5TdGF0ZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdG9yZV9tb2RlKCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoIWZsYWdzLmlubGluZV9mcmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICBwcmludF9uZXdsaW5lKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvcHQuY29tbWFfZmlyc3QpIHsKICAgICAgICAgICAgICAgICAgICAvLyBFWFBSIG9yIERPX0JMT0NLCiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIGNvbW1hLWZpcnN0LCB3ZSB3YW50IHRvIGFsbG93IGEgbmV3bGluZSBiZWZvcmUgdGhlIGNvbW1hCiAgICAgICAgICAgICAgICAgICAgLy8gdG8gdHVybiBpbnRvIGEgbmV3bGluZSBhZnRlciB0aGUgY29tbWEsIHdoaWNoIHdlIHdpbGwgZml4dXAgbGF0ZXIKICAgICAgICAgICAgICAgICAgICBhbGxvd193cmFwX29yX3ByZXNlcnZlZF9uZXdsaW5lKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZV9vcGVyYXRvcigpIHsKICAgICAgICAgICAgICAgIGlmIChzdGFydF9vZl9zdGF0ZW1lbnQoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIFRoZSBjb25kaXRpb25hbCBzdGFydHMgdGhlIHN0YXRlbWVudCBpZiBhcHByb3ByaWF0ZS4KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAobGFzdF90eXBlID09PSAnVEtfUkVTRVJWRUQnICYmIGlzX3NwZWNpYWxfd29yZChmbGFncy5sYXN0X3RleHQpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gInJldHVybiIgaGFkIGEgc3BlY2lhbCBoYW5kbGluZyBpbiBUS19XT1JELiBOb3cgd2UgbmVlZCB0byByZXR1cm4gdGhlIGZhdm9yCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgcHJpbnRfdG9rZW4oKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gaGFjayBmb3IgYWN0aW9uc2NyaXB0J3MgaW1wb3J0IC4qOwogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRfdG9rZW4udGV4dCA9PT0gJyonICYmIGxhc3RfdHlwZSA9PT0gJ1RLX0RPVCcpIHsKICAgICAgICAgICAgICAgICAgICBwcmludF90b2tlbigpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoY3VycmVudF90b2tlbi50ZXh0ID09PSAnOjonKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gbm8gc3BhY2VzIGFyb3VuZCBleG90aWMgbmFtZXNwYWNpbmcgc3ludGF4IG9wZXJhdG9yCiAgICAgICAgICAgICAgICAgICAgcHJpbnRfdG9rZW4oKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gQWxsb3cgbGluZSB3cmFwcGluZyBiZXR3ZWVuIG9wZXJhdG9ycyB3aGVuIG9wZXJhdG9yX3Bvc2l0aW9uIGlzCiAgICAgICAgICAgICAgICAvLyAgIHNldCB0byBiZWZvcmUgb3IgcHJlc2VydmUKICAgICAgICAgICAgICAgIGlmIChsYXN0X3R5cGUgPT09ICdUS19PUEVSQVRPUicgJiYgaW5fYXJyYXkob3B0Lm9wZXJhdG9yX3Bvc2l0aW9uLCBPUEVSQVRPUl9QT1NJVElPTl9CRUZPUkVfT1JfUFJFU0VSVkUpKSB7CiAgICAgICAgICAgICAgICAgICAgYWxsb3dfd3JhcF9vcl9wcmVzZXJ2ZWRfbmV3bGluZSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChjdXJyZW50X3Rva2VuLnRleHQgPT09ICc6JyAmJiBmbGFncy5pbl9jYXNlKSB7CiAgICAgICAgICAgICAgICAgICAgZmxhZ3MuY2FzZV9ib2R5ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBpbmRlbnQoKTsKICAgICAgICAgICAgICAgICAgICBwcmludF90b2tlbigpOwogICAgICAgICAgICAgICAgICAgIHByaW50X25ld2xpbmUoKTsKICAgICAgICAgICAgICAgICAgICBmbGFncy5pbl9jYXNlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBzcGFjZV9iZWZvcmUgPSB0cnVlOwogICAgICAgICAgICAgICAgdmFyIHNwYWNlX2FmdGVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHZhciBpbl90ZXJuYXJ5ID0gZmFsc2U7CiAgICAgICAgICAgICAgICB2YXIgaXNHZW5lcmF0b3JBc3RlcmlzayA9IGN1cnJlbnRfdG9rZW4udGV4dCA9PT0gJyonICYmIGxhc3RfdHlwZSA9PT0gJ1RLX1JFU0VSVkVEJyAmJiBmbGFncy5sYXN0X3RleHQgPT09ICdmdW5jdGlvbic7CiAgICAgICAgICAgICAgICB2YXIgaXNVbmFyeSA9IGluX2FycmF5KGN1cnJlbnRfdG9rZW4udGV4dCwgWyctJywgJysnXSkgJiYgKAogICAgICAgICAgICAgICAgICAgIGluX2FycmF5KGxhc3RfdHlwZSwgWydUS19TVEFSVF9CTE9DSycsICdUS19TVEFSVF9FWFBSJywgJ1RLX0VRVUFMUycsICdUS19PUEVSQVRPUiddKSB8fAogICAgICAgICAgICAgICAgICAgIGluX2FycmF5KGZsYWdzLmxhc3RfdGV4dCwgVG9rZW5pemVyLmxpbmVfc3RhcnRlcnMpIHx8CiAgICAgICAgICAgICAgICAgICAgZmxhZ3MubGFzdF90ZXh0ID09PSAnLCcKICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRfdG9rZW4udGV4dCA9PT0gJzonKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZsYWdzLnRlcm5hcnlfZGVwdGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29sb24gaXMgaW52YWxpZCBqYXZhc2NyaXB0IG91dHNpZGUgb2YgdGVybmFyeSBhbmQgb2JqZWN0LCBidXQgZG8gb3VyIGJlc3QgdG8gZ3Vlc3Mgd2hhdCB3YXMgbWVhbnQuCiAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlX2JlZm9yZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdzLnRlcm5hcnlfZGVwdGggLT0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgaW5fdGVybmFyeSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50X3Rva2VuLnRleHQgPT09ICc/JykgewogICAgICAgICAgICAgICAgICAgIGZsYWdzLnRlcm5hcnlfZGVwdGggKz0gMTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBsZXQncyBoYW5kbGUgdGhlIG9wZXJhdG9yX3Bvc2l0aW9uIG9wdGlvbiBwcmlvciB0byBhbnkgY29uZmxpY3RpbmcgbG9naWMKICAgICAgICAgICAgICAgIGlmICghaXNVbmFyeSAmJiAhaXNHZW5lcmF0b3JBc3RlcmlzayAmJiBvcHQucHJlc2VydmVfbmV3bGluZXMgJiYgaW5fYXJyYXkoY3VycmVudF90b2tlbi50ZXh0LCBUb2tlbml6ZXIucG9zaXRpb25hYmxlX29wZXJhdG9ycykpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaXNDb2xvbiA9IGN1cnJlbnRfdG9rZW4udGV4dCA9PT0gJzonOwogICAgICAgICAgICAgICAgICAgIHZhciBpc1Rlcm5hcnlDb2xvbiA9IChpc0NvbG9uICYmIGluX3Rlcm5hcnkpOwogICAgICAgICAgICAgICAgICAgIHZhciBpc090aGVyQ29sb24gPSAoaXNDb2xvbiAmJiAhaW5fdGVybmFyeSk7CgogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAob3B0Lm9wZXJhdG9yX3Bvc2l0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgT1BFUkFUT1JfUE9TSVRJT04uYmVmb3JlX25ld2xpbmU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgY3VycmVudCB0b2tlbiBpcyA6IGFuZCBpdCdzIG5vdCBhIHRlcm5hcnkgc3RhdGVtZW50IHRoZW4gd2Ugc2V0IHNwYWNlX2JlZm9yZSB0byBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9ICFpc090aGVyQ29sb247CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfdG9rZW4oKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQ29sb24gfHwgaXNUZXJuYXJ5Q29sb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvd193cmFwX29yX3ByZXNlcnZlZF9uZXdsaW5lKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE9QRVJBVE9SX1BPU0lUSU9OLmFmdGVyX25ld2xpbmU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgY3VycmVudCB0b2tlbiBpcyBhbnl0aGluZyBidXQgY29sb24sIG9yICh2aWEgZGVkdWN0aW9uKSBpdCdzIGEgY29sb24gYW5kIGluIGEgdGVybmFyeSBzdGF0ZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHRoZW4gcHJpbnQgYSBuZXdsaW5lLgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5zcGFjZV9iZWZvcmVfdG9rZW4gPSB0cnVlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNDb2xvbiB8fCBpc1Rlcm5hcnlDb2xvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZXRfdG9rZW4oMSkud2FudGVkX25ld2xpbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfbmV3bGluZShmYWxzZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dfd3JhcF9vcl9wcmVzZXJ2ZWRfbmV3bGluZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X3Rva2VuKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE9QRVJBVE9SX1BPU0lUSU9OLnByZXNlcnZlX25ld2xpbmU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzT3RoZXJDb2xvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93X3dyYXBfb3JfcHJlc2VydmVkX25ld2xpbmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSBqdXN0IGFkZGVkIGEgbmV3bGluZSwgb3IgdGhlIGN1cnJlbnQgdG9rZW4gaXMgOiBhbmQgaXQncyBub3QgYSB0ZXJuYXJ5IHN0YXRlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgdGhlbiB3ZSBzZXQgc3BhY2VfYmVmb3JlIHRvIGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFjZV9iZWZvcmUgPSAhKG91dHB1dC5qdXN0X2FkZGVkX25ld2xpbmUoKSB8fCBpc090aGVyQ29sb24pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5zcGFjZV9iZWZvcmVfdG9rZW4gPSBzcGFjZV9iZWZvcmU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludF90b2tlbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChpbl9hcnJheShjdXJyZW50X3Rva2VuLnRleHQsIFsnLS0nLCAnKysnLCAnIScsICd+J10pIHx8IGlzVW5hcnkpIHsKICAgICAgICAgICAgICAgICAgICAvLyB1bmFyeSBvcGVyYXRvcnMgKGFuZCBiaW5hcnkgKy8tIHByZXRlbmRpbmcgdG8gYmUgdW5hcnkpIHNwZWNpYWwgY2FzZXMKCiAgICAgICAgICAgICAgICAgICAgc3BhY2VfYmVmb3JlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgc3BhY2VfYWZ0ZXIgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzUuMS8jc2VjLTcuOS4xCiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBuZXdsaW5lIGJldHdlZW4gLS0gb3IgKysgYW5kIGFueXRoaW5nIGVsc2Ugd2Ugc2hvdWxkIHByZXNlcnZlIGl0LgogICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50X3Rva2VuLndhbnRlZF9uZXdsaW5lICYmIChjdXJyZW50X3Rva2VuLnRleHQgPT09ICctLScgfHwgY3VycmVudF90b2tlbi50ZXh0ID09PSAnKysnKSkgewogICAgICAgICAgICAgICAgICAgICAgICBwcmludF9uZXdsaW5lKGZhbHNlLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChmbGFncy5sYXN0X3RleHQgPT09ICc7JyAmJiBpc19leHByZXNzaW9uKGZsYWdzLm1vZGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciAoOzsgKytpKQogICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgXl5eCiAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlX2JlZm9yZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAobGFzdF90eXBlID09PSAnVEtfUkVTRVJWRUQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlX2JlZm9yZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsYXN0X3R5cGUgPT09ICdUS19FTkRfRVhQUicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2VfYmVmb3JlID0gIShmbGFncy5sYXN0X3RleHQgPT09ICddJyAmJiAoY3VycmVudF90b2tlbi50ZXh0ID09PSAnLS0nIHx8IGN1cnJlbnRfdG9rZW4udGV4dCA9PT0gJysrJykpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGFzdF90eXBlID09PSAnVEtfT1BFUkFUT1InKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGErKyArICsrYjsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gYSAtIC1iCiAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlX2JlZm9yZSA9IGluX2FycmF5KGN1cnJlbnRfdG9rZW4udGV4dCwgWyctLScsICctJywgJysrJywgJysnXSkgJiYgaW5fYXJyYXkoZmxhZ3MubGFzdF90ZXh0LCBbJy0tJywgJy0nLCAnKysnLCAnKyddKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gKyBhbmQgLSBhcmUgbm90IHVuYXJ5IHdoZW4gcHJlY2VlZGVkIGJ5IC0tIG9yICsrIG9wZXJhdG9yCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGEtLSArIGIKICAgICAgICAgICAgICAgICAgICAgICAgLy8gYSAqICtiCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGEgLSAtYgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5fYXJyYXkoY3VycmVudF90b2tlbi50ZXh0LCBbJysnLCAnLSddKSAmJiBpbl9hcnJheShmbGFncy5sYXN0X3RleHQsIFsnLS0nLCAnKysnXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlX2FmdGVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCgogICAgICAgICAgICAgICAgICAgIGlmICgoKGZsYWdzLm1vZGUgPT09IE1PREUuQmxvY2tTdGF0ZW1lbnQgJiYgIWZsYWdzLmlubGluZV9mcmFtZSkgfHwgZmxhZ3MubW9kZSA9PT0gTU9ERS5TdGF0ZW1lbnQpICYmCiAgICAgICAgICAgICAgICAgICAgICAgIChmbGFncy5sYXN0X3RleHQgPT09ICd7JyB8fCBmbGFncy5sYXN0X3RleHQgPT09ICc7JykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8geyBmb287IC0taSB9CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvbygpOyAtLWJhcjsKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfbmV3bGluZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNHZW5lcmF0b3JBc3RlcmlzaykgewogICAgICAgICAgICAgICAgICAgIHNwYWNlX2JlZm9yZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHNwYWNlX2FmdGVyID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBvdXRwdXQuc3BhY2VfYmVmb3JlX3Rva2VuID0gb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiB8fCBzcGFjZV9iZWZvcmU7CiAgICAgICAgICAgICAgICBwcmludF90b2tlbigpOwogICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IHNwYWNlX2FmdGVyOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVfYmxvY2tfY29tbWVudCgpIHsKICAgICAgICAgICAgICAgIGlmIChvdXRwdXQucmF3KSB7CiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmFkZF9yYXdfdG9rZW4oY3VycmVudF90b2tlbik7CiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRfdG9rZW4uZGlyZWN0aXZlcyAmJiBjdXJyZW50X3Rva2VuLmRpcmVjdGl2ZXMucHJlc2VydmUgPT09ICdlbmQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlJ3JlIHRlc3RpbmcgdGhlIHJhdyBvdXRwdXQgYmVoYXZpb3IsIGRvIG5vdCBhbGxvdyBhIGRpcmVjdGl2ZSB0byB0dXJuIGl0IG9mZi4KICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnJhdyA9IG9wdC50ZXN0X291dHB1dF9yYXc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoY3VycmVudF90b2tlbi5kaXJlY3RpdmVzKSB7CiAgICAgICAgICAgICAgICAgICAgcHJpbnRfbmV3bGluZShmYWxzZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgcHJpbnRfdG9rZW4oKTsKICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudF90b2tlbi5kaXJlY3RpdmVzLnByZXNlcnZlID09PSAnc3RhcnQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5yYXcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBwcmludF9uZXdsaW5lKGZhbHNlLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gaW5saW5lIGJsb2NrCiAgICAgICAgICAgICAgICBpZiAoIWFjb3JuLm5ld2xpbmUudGVzdChjdXJyZW50X3Rva2VuLnRleHQpICYmICFjdXJyZW50X3Rva2VuLndhbnRlZF9uZXdsaW5lKSB7CiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnNwYWNlX2JlZm9yZV90b2tlbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgcHJpbnRfdG9rZW4oKTsKICAgICAgICAgICAgICAgICAgICBvdXRwdXQuc3BhY2VfYmVmb3JlX3Rva2VuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIGxpbmVzID0gc3BsaXRfbGluZWJyZWFrcyhjdXJyZW50X3Rva2VuLnRleHQpOwogICAgICAgICAgICAgICAgdmFyIGo7IC8vIGl0ZXJhdG9yIGZvciB0aGlzIGNhc2UKICAgICAgICAgICAgICAgIHZhciBqYXZhZG9jID0gZmFsc2U7CiAgICAgICAgICAgICAgICB2YXIgc3Rhcmxlc3MgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHZhciBsYXN0SW5kZW50ID0gY3VycmVudF90b2tlbi53aGl0ZXNwYWNlX2JlZm9yZTsKICAgICAgICAgICAgICAgIHZhciBsYXN0SW5kZW50TGVuZ3RoID0gbGFzdEluZGVudC5sZW5ndGg7CgogICAgICAgICAgICAgICAgLy8gYmxvY2sgY29tbWVudCBzdGFydHMgd2l0aCBhIG5ldyBsaW5lCiAgICAgICAgICAgICAgICBwcmludF9uZXdsaW5lKGZhbHNlLCB0cnVlKTsKICAgICAgICAgICAgICAgIGlmIChsaW5lcy5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgamF2YWRvYyA9IGFsbF9saW5lc19zdGFydF93aXRoKGxpbmVzLnNsaWNlKDEpLCAnKicpOwogICAgICAgICAgICAgICAgICAgIHN0YXJsZXNzID0gZWFjaF9saW5lX21hdGNoZXNfaW5kZW50KGxpbmVzLnNsaWNlKDEpLCBsYXN0SW5kZW50KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBmaXJzdCBsaW5lIGFsd2F5cyBpbmRlbnRlZAogICAgICAgICAgICAgICAgcHJpbnRfdG9rZW4obGluZXNbMF0pOwogICAgICAgICAgICAgICAgZm9yIChqID0gMTsgaiA8IGxpbmVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgcHJpbnRfbmV3bGluZShmYWxzZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGphdmFkb2MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gamF2YWRvYzogcmVmb3JtYXQgYW5kIHJlLWluZGVudAogICAgICAgICAgICAgICAgICAgICAgICBwcmludF90b2tlbignICcgKyBsdHJpbShsaW5lc1tqXSkpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3Rhcmxlc3MgJiYgbGluZXNbal0ubGVuZ3RoID4gbGFzdEluZGVudExlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGFybGVzczogcmUtaW5kZW50IG5vbi1lbXB0eSBjb250ZW50LCBhdm9pZGluZyB0cmltCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50X3Rva2VuKGxpbmVzW2pdLnN1YnN0cmluZyhsYXN0SW5kZW50TGVuZ3RoKSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9ybWFsIGNvbW1lbnRzIG91dHB1dCByYXcKICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmFkZF90b2tlbihsaW5lc1tqXSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIGZvciBjb21tZW50cyBvZiBtb3JlIHRoYW4gb25lIGxpbmUsIG1ha2Ugc3VyZSB0aGVyZSdzIGEgbmV3IGxpbmUgYWZ0ZXIKICAgICAgICAgICAgICAgIHByaW50X25ld2xpbmUoZmFsc2UsIHRydWUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVfY29tbWVudCgpIHsKICAgICAgICAgICAgICAgIGlmIChjdXJyZW50X3Rva2VuLndhbnRlZF9uZXdsaW5lKSB7CiAgICAgICAgICAgICAgICAgICAgcHJpbnRfbmV3bGluZShmYWxzZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIG91dHB1dC50cmltKHRydWUpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG91dHB1dC5zcGFjZV9iZWZvcmVfdG9rZW4gPSB0cnVlOwogICAgICAgICAgICAgICAgcHJpbnRfdG9rZW4oKTsKICAgICAgICAgICAgICAgIHByaW50X25ld2xpbmUoZmFsc2UsIHRydWUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVfZG90KCkgewogICAgICAgICAgICAgICAgaWYgKHN0YXJ0X29mX3N0YXRlbWVudCgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGNvbmRpdGlvbmFsIHN0YXJ0cyB0aGUgc3RhdGVtZW50IGlmIGFwcHJvcHJpYXRlLgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChsYXN0X3R5cGUgPT09ICdUS19SRVNFUlZFRCcgJiYgaXNfc3BlY2lhbF93b3JkKGZsYWdzLmxhc3RfdGV4dCkpIHsKICAgICAgICAgICAgICAgICAgICBvdXRwdXQuc3BhY2VfYmVmb3JlX3Rva2VuID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8gYWxsb3cgcHJlc2VydmVkIG5ld2xpbmVzIGJlZm9yZSBkb3RzIGluIGdlbmVyYWwKICAgICAgICAgICAgICAgICAgICAvLyBmb3JjZSBuZXdsaW5lcyBvbiBkb3RzIGFmdGVyIGNsb3NlIHBhcmVuIHdoZW4gYnJlYWtfY2hhaW5lZCAtIGZvciBiYXIoKS5iYXooKQogICAgICAgICAgICAgICAgICAgIGFsbG93X3dyYXBfb3JfcHJlc2VydmVkX25ld2xpbmUoZmxhZ3MubGFzdF90ZXh0ID09PSAnKScgJiYgb3B0LmJyZWFrX2NoYWluZWRfbWV0aG9kcyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcHJpbnRfdG9rZW4oKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlX3Vua25vd24oKSB7CiAgICAgICAgICAgICAgICBwcmludF90b2tlbigpOwoKICAgICAgICAgICAgICAgIGlmIChjdXJyZW50X3Rva2VuLnRleHRbY3VycmVudF90b2tlbi50ZXh0Lmxlbmd0aCAtIDFdID09PSAnXG4nKSB7CiAgICAgICAgICAgICAgICAgICAgcHJpbnRfbmV3bGluZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVfZW9mKCkgewogICAgICAgICAgICAgICAgLy8gVW53aW5kIGFueSBvcGVuIHN0YXRlbWVudHMKICAgICAgICAgICAgICAgIHdoaWxlIChmbGFncy5tb2RlID09PSBNT0RFLlN0YXRlbWVudCkgewogICAgICAgICAgICAgICAgICAgIHJlc3RvcmVfbW9kZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKCiAgICAgICAgZnVuY3Rpb24gT3V0cHV0TGluZShwYXJlbnQpIHsKICAgICAgICAgICAgdmFyIF9jaGFyYWN0ZXJfY291bnQgPSAwOwogICAgICAgICAgICAvLyB1c2UgaW5kZW50X2NvdW50IGFzIGEgbWFya2VyIGZvciBsaW5lcyB0aGF0IGhhdmUgcHJlc2VydmVkIGluZGVudGF0aW9uCiAgICAgICAgICAgIHZhciBfaW5kZW50X2NvdW50ID0gLTE7CgogICAgICAgICAgICB2YXIgX2l0ZW1zID0gW107CiAgICAgICAgICAgIHZhciBfZW1wdHkgPSB0cnVlOwoKICAgICAgICAgICAgdGhpcy5zZXRfaW5kZW50ID0gZnVuY3Rpb24obGV2ZWwpIHsKICAgICAgICAgICAgICAgIF9jaGFyYWN0ZXJfY291bnQgPSBwYXJlbnQuYmFzZUluZGVudExlbmd0aCArIGxldmVsICogcGFyZW50LmluZGVudF9sZW5ndGg7CiAgICAgICAgICAgICAgICBfaW5kZW50X2NvdW50ID0gbGV2ZWw7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0aGlzLmdldF9jaGFyYWN0ZXJfY291bnQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfY2hhcmFjdGVyX2NvdW50OwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdGhpcy5pc19lbXB0eSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF9lbXB0eTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHRoaXMubGFzdCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9lbXB0eSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfaXRlbXNbX2l0ZW1zLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHRoaXMucHVzaCA9IGZ1bmN0aW9uKGlucHV0KSB7CiAgICAgICAgICAgICAgICBfaXRlbXMucHVzaChpbnB1dCk7CiAgICAgICAgICAgICAgICBfY2hhcmFjdGVyX2NvdW50ICs9IGlucHV0Lmxlbmd0aDsKICAgICAgICAgICAgICAgIF9lbXB0eSA9IGZhbHNlOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdGhpcy5wb3AgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBpdGVtID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmICghX2VtcHR5KSB7CiAgICAgICAgICAgICAgICAgICAgaXRlbSA9IF9pdGVtcy5wb3AoKTsKICAgICAgICAgICAgICAgICAgICBfY2hhcmFjdGVyX2NvdW50IC09IGl0ZW0ubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgIF9lbXB0eSA9IF9pdGVtcy5sZW5ndGggPT09IDA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHRoaXMucmVtb3ZlX2luZGVudCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgaWYgKF9pbmRlbnRfY291bnQgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgX2luZGVudF9jb3VudCAtPSAxOwogICAgICAgICAgICAgICAgICAgIF9jaGFyYWN0ZXJfY291bnQgLT0gcGFyZW50LmluZGVudF9sZW5ndGg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0aGlzLnRyaW0gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHdoaWxlICh0aGlzLmxhc3QoKSA9PT0gJyAnKSB7CiAgICAgICAgICAgICAgICAgICAgX2l0ZW1zLnBvcCgpOwogICAgICAgICAgICAgICAgICAgIF9jaGFyYWN0ZXJfY291bnQgLT0gMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF9lbXB0eSA9IF9pdGVtcy5sZW5ndGggPT09IDA7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0aGlzLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2VtcHR5KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKF9pbmRlbnRfY291bnQgPj0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBwYXJlbnQuaW5kZW50X2NhY2hlW19pbmRlbnRfY291bnRdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gX2l0ZW1zLmpvaW4oJycpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIE91dHB1dChpbmRlbnRfc3RyaW5nLCBiYXNlSW5kZW50U3RyaW5nKSB7CiAgICAgICAgICAgIGJhc2VJbmRlbnRTdHJpbmcgPSBiYXNlSW5kZW50U3RyaW5nIHx8ICcnOwogICAgICAgICAgICB0aGlzLmluZGVudF9jYWNoZSA9IFtiYXNlSW5kZW50U3RyaW5nXTsKICAgICAgICAgICAgdGhpcy5iYXNlSW5kZW50TGVuZ3RoID0gYmFzZUluZGVudFN0cmluZy5sZW5ndGg7CiAgICAgICAgICAgIHRoaXMuaW5kZW50X2xlbmd0aCA9IGluZGVudF9zdHJpbmcubGVuZ3RoOwogICAgICAgICAgICB0aGlzLnJhdyA9IGZhbHNlOwoKICAgICAgICAgICAgdmFyIGxpbmVzID0gW107CiAgICAgICAgICAgIHRoaXMuYmFzZUluZGVudFN0cmluZyA9IGJhc2VJbmRlbnRTdHJpbmc7CiAgICAgICAgICAgIHRoaXMuaW5kZW50X3N0cmluZyA9IGluZGVudF9zdHJpbmc7CiAgICAgICAgICAgIHRoaXMucHJldmlvdXNfbGluZSA9IG51bGw7CiAgICAgICAgICAgIHRoaXMuY3VycmVudF9saW5lID0gbnVsbDsKICAgICAgICAgICAgdGhpcy5zcGFjZV9iZWZvcmVfdG9rZW4gPSBmYWxzZTsKCiAgICAgICAgICAgIHRoaXMuYWRkX291dHB1dGxpbmUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNfbGluZSA9IHRoaXMuY3VycmVudF9saW5lOwogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50X2xpbmUgPSBuZXcgT3V0cHV0TGluZSh0aGlzKTsKICAgICAgICAgICAgICAgIGxpbmVzLnB1c2godGhpcy5jdXJyZW50X2xpbmUpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZQogICAgICAgICAgICB0aGlzLmFkZF9vdXRwdXRsaW5lKCk7CgoKICAgICAgICAgICAgdGhpcy5nZXRfbGluZV9udW1iZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiBsaW5lcy5sZW5ndGg7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyBVc2luZyBvYmplY3QgaW5zdGVhZCBvZiBzdHJpbmcgdG8gYWxsb3cgZm9yIGxhdGVyIGV4cGFuc2lvbiBvZiBpbmZvIGFib3V0IGVhY2ggbGluZQogICAgICAgICAgICB0aGlzLmFkZF9uZXdfbGluZSA9IGZ1bmN0aW9uKGZvcmNlX25ld2xpbmUpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmdldF9saW5lX251bWJlcigpID09PSAxICYmIHRoaXMuanVzdF9hZGRlZF9uZXdsaW5lKCkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIG5vIG5ld2xpbmUgb24gc3RhcnQgb2YgZmlsZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChmb3JjZV9uZXdsaW5lIHx8ICF0aGlzLmp1c3RfYWRkZWRfbmV3bGluZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnJhdykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZF9vdXRwdXRsaW5lKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHRoaXMuZ2V0X2NvZGUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBzd2VldF9jb2RlID0gbGluZXMuam9pbignXG4nKS5yZXBsYWNlKC9bXHJcblx0IF0rJC8sICcnKTsKICAgICAgICAgICAgICAgIHJldHVybiBzd2VldF9jb2RlOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdGhpcy5zZXRfaW5kZW50ID0gZnVuY3Rpb24obGV2ZWwpIHsKICAgICAgICAgICAgICAgIC8vIE5ldmVyIGluZGVudCB5b3VyIGZpcnN0IG91dHB1dCBpbmRlbnQgYXQgdGhlIHN0YXJ0IG9mIHRoZSBmaWxlCiAgICAgICAgICAgICAgICBpZiAobGluZXMubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlIChsZXZlbCA+PSB0aGlzLmluZGVudF9jYWNoZS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRlbnRfY2FjaGUucHVzaCh0aGlzLmluZGVudF9jYWNoZVt0aGlzLmluZGVudF9jYWNoZS5sZW5ndGggLSAxXSArIHRoaXMuaW5kZW50X3N0cmluZyk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRfbGluZS5zZXRfaW5kZW50KGxldmVsKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudF9saW5lLnNldF9pbmRlbnQoMCk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0aGlzLmFkZF9yYXdfdG9rZW4gPSBmdW5jdGlvbih0b2tlbikgewogICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB0b2tlbi5uZXdsaW5lczsgeCsrKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRfb3V0cHV0bGluZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50X2xpbmUucHVzaCh0b2tlbi53aGl0ZXNwYWNlX2JlZm9yZSk7CiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRfbGluZS5wdXNoKHRva2VuLnRleHQpOwogICAgICAgICAgICAgICAgdGhpcy5zcGFjZV9iZWZvcmVfdG9rZW4gPSBmYWxzZTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHRoaXMuYWRkX3Rva2VuID0gZnVuY3Rpb24ocHJpbnRhYmxlX3Rva2VuKSB7CiAgICAgICAgICAgICAgICB0aGlzLmFkZF9zcGFjZV9iZWZvcmVfdG9rZW4oKTsKICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudF9saW5lLnB1c2gocHJpbnRhYmxlX3Rva2VuKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHRoaXMuYWRkX3NwYWNlX2JlZm9yZV90b2tlbiA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuc3BhY2VfYmVmb3JlX3Rva2VuICYmICF0aGlzLmp1c3RfYWRkZWRfbmV3bGluZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50X2xpbmUucHVzaCgnICcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5zcGFjZV9iZWZvcmVfdG9rZW4gPSBmYWxzZTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHRoaXMucmVtb3ZlX3JlZHVuZGFudF9pbmRlbnRhdGlvbiA9IGZ1bmN0aW9uKGZyYW1lKSB7CiAgICAgICAgICAgICAgICAvLyBUaGlzIGltcGxlbWVudGF0aW9uIGlzIGVmZmVjdGl2ZSBidXQgaGFzIHNvbWUgaXNzdWVzOgogICAgICAgICAgICAgICAgLy8gICAgIC0gY2FuIGNhdXNlIGxpbmUgd3JhcCB0byBoYXBwZW4gdG9vIHNvb24gZHVlIHRvIGluZGVudCByZW1vdmFsCiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgYWZ0ZXIgd3JhcCBwb2ludHMgYXJlIGNhbGN1bGF0ZWQKICAgICAgICAgICAgICAgIC8vIFRoZXNlIGlzc3VlcyBhcmUgbWlub3IgY29tcGFyZWQgdG8gdWdseSBpbmRlbnRhdGlvbi4KCiAgICAgICAgICAgICAgICBpZiAoZnJhbWUubXVsdGlsaW5lX2ZyYW1lIHx8CiAgICAgICAgICAgICAgICAgICAgZnJhbWUubW9kZSA9PT0gTU9ERS5Gb3JJbml0aWFsaXplciB8fAogICAgICAgICAgICAgICAgICAgIGZyYW1lLm1vZGUgPT09IE1PREUuQ29uZGl0aW9uYWwpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gcmVtb3ZlIG9uZSBpbmRlbnQgZnJvbSBlYWNoIGxpbmUgaW5zaWRlIHRoaXMgc2VjdGlvbgogICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZnJhbWUuc3RhcnRfbGluZV9pbmRleDsKCiAgICAgICAgICAgICAgICB2YXIgb3V0cHV0X2xlbmd0aCA9IGxpbmVzLmxlbmd0aDsKICAgICAgICAgICAgICAgIHdoaWxlIChpbmRleCA8IG91dHB1dF9sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBsaW5lc1tpbmRleF0ucmVtb3ZlX2luZGVudCgpOwogICAgICAgICAgICAgICAgICAgIGluZGV4Kys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0aGlzLnRyaW0gPSBmdW5jdGlvbihlYXRfbmV3bGluZXMpIHsKICAgICAgICAgICAgICAgIGVhdF9uZXdsaW5lcyA9IChlYXRfbmV3bGluZXMgPT09IHVuZGVmaW5lZCkgPyBmYWxzZSA6IGVhdF9uZXdsaW5lczsKCiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRfbGluZS50cmltKGluZGVudF9zdHJpbmcsIGJhc2VJbmRlbnRTdHJpbmcpOwoKICAgICAgICAgICAgICAgIHdoaWxlIChlYXRfbmV3bGluZXMgJiYgbGluZXMubGVuZ3RoID4gMSAmJgogICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudF9saW5lLmlzX2VtcHR5KCkpIHsKICAgICAgICAgICAgICAgICAgICBsaW5lcy5wb3AoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRfbGluZSA9IGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudF9saW5lLnRyaW0oKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLnByZXZpb3VzX2xpbmUgPSBsaW5lcy5sZW5ndGggPiAxID8gbGluZXNbbGluZXMubGVuZ3RoIC0gMl0gOiBudWxsOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdGhpcy5qdXN0X2FkZGVkX25ld2xpbmUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRfbGluZS5pc19lbXB0eSgpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdGhpcy5qdXN0X2FkZGVkX2JsYW5rbGluZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuanVzdF9hZGRlZF9uZXdsaW5lKCkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAobGluZXMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBzdGFydCBvZiB0aGUgZmlsZSBhbmQgbmV3bGluZSA9IGJsYW5rCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXIgbGluZSA9IGxpbmVzW2xpbmVzLmxlbmd0aCAtIDJdOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBsaW5lLmlzX2VtcHR5KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH07CiAgICAgICAgfQoKCiAgICAgICAgdmFyIFRva2VuID0gZnVuY3Rpb24odHlwZSwgdGV4dCwgbmV3bGluZXMsIHdoaXRlc3BhY2VfYmVmb3JlLCBwYXJlbnQpIHsKICAgICAgICAgICAgdGhpcy50eXBlID0gdHlwZTsKICAgICAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKICAgICAgICAgICAgdGhpcy5jb21tZW50c19iZWZvcmUgPSBbXTsKICAgICAgICAgICAgdGhpcy5uZXdsaW5lcyA9IG5ld2xpbmVzIHx8IDA7CiAgICAgICAgICAgIHRoaXMud2FudGVkX25ld2xpbmUgPSBuZXdsaW5lcyA+IDA7CiAgICAgICAgICAgIHRoaXMud2hpdGVzcGFjZV9iZWZvcmUgPSB3aGl0ZXNwYWNlX2JlZm9yZSB8fCAnJzsKICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQgfHwgbnVsbDsKICAgICAgICAgICAgdGhpcy5vcGVuZWQgPSBudWxsOwogICAgICAgICAgICB0aGlzLmRpcmVjdGl2ZXMgPSBudWxsOwogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIHRva2VuaXplcihpbnB1dCwgb3B0cykgewoKICAgICAgICAgICAgdmFyIHdoaXRlc3BhY2UgPSAiXG5cclx0ICIuc3BsaXQoJycpOwogICAgICAgICAgICB2YXIgZGlnaXQgPSAvWzAtOV0vOwogICAgICAgICAgICB2YXIgZGlnaXRfYmluID0gL1swMV0vOwogICAgICAgICAgICB2YXIgZGlnaXRfb2N0ID0gL1swMTIzNDU2N10vOwogICAgICAgICAgICB2YXIgZGlnaXRfaGV4ID0gL1swMTIzNDU2Nzg5YWJjZGVmQUJDREVGXS87CgogICAgICAgICAgICB0aGlzLnBvc2l0aW9uYWJsZV9vcGVyYXRvcnMgPSAnIT0gIT09ICUgJiAmJiAqICoqICsgLSAvIDogPCA8PCA8PSA9PSA9PT0gPiA+PSA+PiA+Pj4gPyBeIHwgfHwnLnNwbGl0KCcgJyk7CiAgICAgICAgICAgIHZhciBwdW5jdCA9IHRoaXMucG9zaXRpb25hYmxlX29wZXJhdG9ycy5jb25jYXQoCiAgICAgICAgICAgICAgICAvLyBub24tcG9zaXRpb25hYmxlIG9wZXJhdG9ycyAtIHRoZXNlIGRvIG5vdCBmb2xsb3cgb3BlcmF0b3IgcG9zaXRpb24gc2V0dGluZ3MKICAgICAgICAgICAgICAgICchICU9ICY9ICo9ICoqPSArKyArPSAsIC0tIC09IC89IDo6IDw8PSA9ID0+ID4+PSA+Pj49IF49IHw9IH4nLnNwbGl0KCcgJykpOwoKICAgICAgICAgICAgLy8gd29yZHMgd2hpY2ggc2hvdWxkIGFsd2F5cyBzdGFydCBvbiBuZXcgbGluZS4KICAgICAgICAgICAgdGhpcy5saW5lX3N0YXJ0ZXJzID0gJ2NvbnRpbnVlLHRyeSx0aHJvdyxyZXR1cm4sdmFyLGxldCxjb25zdCxpZixzd2l0Y2gsY2FzZSxkZWZhdWx0LGZvcix3aGlsZSxicmVhayxmdW5jdGlvbixpbXBvcnQsZXhwb3J0Jy5zcGxpdCgnLCcpOwogICAgICAgICAgICB2YXIgcmVzZXJ2ZWRfd29yZHMgPSB0aGlzLmxpbmVfc3RhcnRlcnMuY29uY2F0KFsnZG8nLCAnaW4nLCAnZWxzZScsICdnZXQnLCAnc2V0JywgJ25ldycsICdjYXRjaCcsICdmaW5hbGx5JywgJ3R5cGVvZicsICd5aWVsZCcsICdhc3luYycsICdhd2FpdCcsICdmcm9tJywgJ2FzJ10pOwoKICAgICAgICAgICAgLy8gIC8qIC4uLiAqLyBjb21tZW50IGVuZHMgd2l0aCBuZWFyZXN0ICovIG9yIGVuZCBvZiBmaWxlCiAgICAgICAgICAgIHZhciBibG9ja19jb21tZW50X3BhdHRlcm4gPSAvKFtcc1xTXSo/KSgoPzpcKlwvKXwkKS9nOwoKICAgICAgICAgICAgLy8gY29tbWVudCBlbmRzIGp1c3QgYmVmb3JlIG5lYXJlc3QgbGluZWZlZWQgb3IgZW5kIG9mIGZpbGUKICAgICAgICAgICAgdmFyIGNvbW1lbnRfcGF0dGVybiA9IC8oW15cblxyXHUyMDI4XHUyMDI5XSopL2c7CgogICAgICAgICAgICB2YXIgZGlyZWN0aXZlc19ibG9ja19wYXR0ZXJuID0gL1wvXCogYmVhdXRpZnkoIFx3K1s6XVx3KykrIFwqXC8vZzsKICAgICAgICAgICAgdmFyIGRpcmVjdGl2ZV9wYXR0ZXJuID0gLyAoXHcrKVs6XShcdyspL2c7CiAgICAgICAgICAgIHZhciBkaXJlY3RpdmVzX2VuZF9pZ25vcmVfcGF0dGVybiA9IC8oW1xzXFNdKj8pKCg/OlwvXCpcc2JlYXV0aWZ5XHNpZ25vcmU6ZW5kXHNcKlwvKXwkKS9nOwoKICAgICAgICAgICAgdmFyIHRlbXBsYXRlX3BhdHRlcm4gPSAvKCg8XD9waHB8PFw/PSlbXHNcU10qP1w/Pil8KDwlW1xzXFNdKj8lPikvZzsKCiAgICAgICAgICAgIHZhciBuX25ld2xpbmVzLCB3aGl0ZXNwYWNlX2JlZm9yZV90b2tlbiwgaW5faHRtbF9jb21tZW50LCB0b2tlbnMsIHBhcnNlcl9wb3M7CiAgICAgICAgICAgIHZhciBpbnB1dF9sZW5ndGg7CgogICAgICAgICAgICB0aGlzLnRva2VuaXplID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAvLyBjYWNoZSB0aGUgc291cmNlJ3MgbGVuZ3RoLgogICAgICAgICAgICAgICAgaW5wdXRfbGVuZ3RoID0gaW5wdXQubGVuZ3RoOwogICAgICAgICAgICAgICAgcGFyc2VyX3BvcyA9IDA7CiAgICAgICAgICAgICAgICBpbl9odG1sX2NvbW1lbnQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRva2VucyA9IFtdOwoKICAgICAgICAgICAgICAgIHZhciBuZXh0LCBsYXN0OwogICAgICAgICAgICAgICAgdmFyIHRva2VuX3ZhbHVlczsKICAgICAgICAgICAgICAgIHZhciBvcGVuID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBvcGVuX3N0YWNrID0gW107CiAgICAgICAgICAgICAgICB2YXIgY29tbWVudHMgPSBbXTsKCiAgICAgICAgICAgICAgICB3aGlsZSAoIShsYXN0ICYmIGxhc3QudHlwZSA9PT0gJ1RLX0VPRicpKSB7CiAgICAgICAgICAgICAgICAgICAgdG9rZW5fdmFsdWVzID0gdG9rZW5pemVfbmV4dCgpOwogICAgICAgICAgICAgICAgICAgIG5leHQgPSBuZXcgVG9rZW4odG9rZW5fdmFsdWVzWzFdLCB0b2tlbl92YWx1ZXNbMF0sIG5fbmV3bGluZXMsIHdoaXRlc3BhY2VfYmVmb3JlX3Rva2VuKTsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAobmV4dC50eXBlID09PSAnVEtfQ09NTUVOVCcgfHwgbmV4dC50eXBlID09PSAnVEtfQkxPQ0tfQ09NTUVOVCcgfHwgbmV4dC50eXBlID09PSAnVEtfVU5LTk9XTicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQudHlwZSA9PT0gJ1RLX0JMT0NLX0NPTU1FTlQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0LmRpcmVjdGl2ZXMgPSB0b2tlbl92YWx1ZXNbMl07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudHMucHVzaChuZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5fdmFsdWVzID0gdG9rZW5pemVfbmV4dCgpOwogICAgICAgICAgICAgICAgICAgICAgICBuZXh0ID0gbmV3IFRva2VuKHRva2VuX3ZhbHVlc1sxXSwgdG9rZW5fdmFsdWVzWzBdLCBuX25ld2xpbmVzLCB3aGl0ZXNwYWNlX2JlZm9yZV90b2tlbik7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoY29tbWVudHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQuY29tbWVudHNfYmVmb3JlID0gY29tbWVudHM7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRzID0gW107CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAobmV4dC50eXBlID09PSAnVEtfU1RBUlRfQkxPQ0snIHx8IG5leHQudHlwZSA9PT0gJ1RLX1NUQVJUX0VYUFInKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQucGFyZW50ID0gbGFzdDsKICAgICAgICAgICAgICAgICAgICAgICAgb3Blbl9zdGFjay5wdXNoKG9wZW4pOwogICAgICAgICAgICAgICAgICAgICAgICBvcGVuID0gbmV4dDsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKChuZXh0LnR5cGUgPT09ICdUS19FTkRfQkxPQ0snIHx8IG5leHQudHlwZSA9PT0gJ1RLX0VORF9FWFBSJykgJiYKICAgICAgICAgICAgICAgICAgICAgICAgKG9wZW4gJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKG5leHQudGV4dCA9PT0gJ10nICYmIG9wZW4udGV4dCA9PT0gJ1snKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKG5leHQudGV4dCA9PT0gJyknICYmIG9wZW4udGV4dCA9PT0gJygnKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKG5leHQudGV4dCA9PT0gJ30nICYmIG9wZW4udGV4dCA9PT0gJ3snKSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQucGFyZW50ID0gb3Blbi5wYXJlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQub3BlbmVkID0gb3BlbjsKCiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW4gPSBvcGVuX3N0YWNrLnBvcCgpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdG9rZW5zLnB1c2gobmV4dCk7CiAgICAgICAgICAgICAgICAgICAgbGFzdCA9IG5leHQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHRva2VuczsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGZ1bmN0aW9uIGdldF9kaXJlY3RpdmVzKHRleHQpIHsKICAgICAgICAgICAgICAgIGlmICghdGV4dC5tYXRjaChkaXJlY3RpdmVzX2Jsb2NrX3BhdHRlcm4pKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIGRpcmVjdGl2ZXMgPSB7fTsKICAgICAgICAgICAgICAgIGRpcmVjdGl2ZV9wYXR0ZXJuLmxhc3RJbmRleCA9IDA7CiAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aXZlX21hdGNoID0gZGlyZWN0aXZlX3BhdHRlcm4uZXhlYyh0ZXh0KTsKCiAgICAgICAgICAgICAgICB3aGlsZSAoZGlyZWN0aXZlX21hdGNoKSB7CiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlc1tkaXJlY3RpdmVfbWF0Y2hbMV1dID0gZGlyZWN0aXZlX21hdGNoWzJdOwogICAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZV9tYXRjaCA9IGRpcmVjdGl2ZV9wYXR0ZXJuLmV4ZWModGV4dCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZXM7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHRva2VuaXplX25leHQoKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0aW5nX3N0cmluZzsKICAgICAgICAgICAgICAgIHZhciB3aGl0ZXNwYWNlX29uX3RoaXNfbGluZSA9IFtdOwoKICAgICAgICAgICAgICAgIG5fbmV3bGluZXMgPSAwOwogICAgICAgICAgICAgICAgd2hpdGVzcGFjZV9iZWZvcmVfdG9rZW4gPSAnJzsKCiAgICAgICAgICAgICAgICBpZiAocGFyc2VyX3BvcyA+PSBpbnB1dF9sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gWycnLCAnVEtfRU9GJ107CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIGxhc3RfdG9rZW47CiAgICAgICAgICAgICAgICBpZiAodG9rZW5zLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIGxhc3RfdG9rZW4gPSB0b2tlbnNbdG9rZW5zLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBGb3IgdGhlIHNha2Ugb2YgdG9rZW5pemluZyB3ZSBjYW4gcHJldGVuZCB0aGF0IHRoZXJlIHdhcyBvbiBvcGVuIGJyYWNlIHRvIHN0YXJ0CiAgICAgICAgICAgICAgICAgICAgbGFzdF90b2tlbiA9IG5ldyBUb2tlbignVEtfU1RBUlRfQkxPQ0snLCAneycpOwogICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgICAgICB2YXIgYyA9IGlucHV0LmNoYXJBdChwYXJzZXJfcG9zKTsKICAgICAgICAgICAgICAgIHBhcnNlcl9wb3MgKz0gMTsKCiAgICAgICAgICAgICAgICB3aGlsZSAoaW5fYXJyYXkoYywgd2hpdGVzcGFjZSkpIHsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGFjb3JuLm5ld2xpbmUudGVzdChjKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShjID09PSAnXG4nICYmIGlucHV0LmNoYXJBdChwYXJzZXJfcG9zIC0gMikgPT09ICdccicpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuX25ld2xpbmVzICs9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZXNwYWNlX29uX3RoaXNfbGluZSA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpdGVzcGFjZV9vbl90aGlzX2xpbmUucHVzaChjKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJfcG9zID49IGlucHV0X2xlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWycnLCAnVEtfRU9GJ107CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBjID0gaW5wdXQuY2hhckF0KHBhcnNlcl9wb3MpOwogICAgICAgICAgICAgICAgICAgIHBhcnNlcl9wb3MgKz0gMTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAod2hpdGVzcGFjZV9vbl90aGlzX2xpbmUubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgd2hpdGVzcGFjZV9iZWZvcmVfdG9rZW4gPSB3aGl0ZXNwYWNlX29uX3RoaXNfbGluZS5qb2luKCcnKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoZGlnaXQudGVzdChjKSB8fCAoYyA9PT0gJy4nICYmIGRpZ2l0LnRlc3QoaW5wdXQuY2hhckF0KHBhcnNlcl9wb3MpKSkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYWxsb3dfZGVjaW1hbCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFsbG93X2UgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHZhciBsb2NhbF9kaWdpdCA9IGRpZ2l0OwoKICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gJzAnICYmIHBhcnNlcl9wb3MgPCBpbnB1dF9sZW5ndGggJiYgL1tYeE9vQmJdLy50ZXN0KGlucHV0LmNoYXJBdChwYXJzZXJfcG9zKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3dpdGNoIHRvIGhleC9vY3QvYmluIG51bWJlciwgbm8gZGVjaW1hbCBvciBlLCBqdXN0IGhleC9vY3QvYmluIGRpZ2l0cwogICAgICAgICAgICAgICAgICAgICAgICBhbGxvd19kZWNpbWFsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93X2UgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC9bQmJdLy50ZXN0KGlucHV0LmNoYXJBdChwYXJzZXJfcG9zKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsX2RpZ2l0ID0gZGlnaXRfYmluOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC9bT29dLy50ZXN0KGlucHV0LmNoYXJBdChwYXJzZXJfcG9zKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsX2RpZ2l0ID0gZGlnaXRfb2N0OwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxfZGlnaXQgPSBkaWdpdF9oZXg7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgYyArPSBpbnB1dC5jaGFyQXQocGFyc2VyX3Bvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcl9wb3MgKz0gMTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09ICcuJykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBBbHJlYWR5IGhhdmUgYSBkZWNpbWFsIGZvciB0aGlzIGxpdGVyYWwsIGRvbid0IGFsbG93IGFub3RoZXIKICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dfZGVjaW1hbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGtub3cgdGhpcyBmaXJzdCBsb29wIHdpbGwgcnVuLiAgSXQga2VlcHMgdGhlIGxvZ2ljIHNpbXBsZXIuCiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyX3BvcyAtPSAxOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBkaWdpdHMKICAgICAgICAgICAgICAgICAgICB3aGlsZSAocGFyc2VyX3BvcyA8IGlucHV0X2xlbmd0aCAmJiBsb2NhbF9kaWdpdC50ZXN0KGlucHV0LmNoYXJBdChwYXJzZXJfcG9zKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYyArPSBpbnB1dC5jaGFyQXQocGFyc2VyX3Bvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcl9wb3MgKz0gMTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbGxvd19kZWNpbWFsICYmIHBhcnNlcl9wb3MgPCBpbnB1dF9sZW5ndGggJiYgaW5wdXQuY2hhckF0KHBhcnNlcl9wb3MpID09PSAnLicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgKz0gaW5wdXQuY2hhckF0KHBhcnNlcl9wb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyX3BvcyArPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dfZGVjaW1hbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFsbG93X2UgJiYgcGFyc2VyX3BvcyA8IGlucHV0X2xlbmd0aCAmJiAvW0VlXS8udGVzdChpbnB1dC5jaGFyQXQocGFyc2VyX3BvcykpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjICs9IGlucHV0LmNoYXJBdChwYXJzZXJfcG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcl9wb3MgKz0gMTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VyX3BvcyA8IGlucHV0X2xlbmd0aCAmJiAvWystXS8udGVzdChpbnB1dC5jaGFyQXQocGFyc2VyX3BvcykpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyArPSBpbnB1dC5jaGFyQXQocGFyc2VyX3Bvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyX3BvcyArPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93X2UgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93X2RlY2ltYWwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtjLCAnVEtfV09SRCddOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChhY29ybi5pc0lkZW50aWZpZXJTdGFydChpbnB1dC5jaGFyQ29kZUF0KHBhcnNlcl9wb3MgLSAxKSkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VyX3BvcyA8IGlucHV0X2xlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoYWNvcm4uaXNJZGVudGlmaWVyQ2hhcihpbnB1dC5jaGFyQ29kZUF0KHBhcnNlcl9wb3MpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyArPSBpbnB1dC5jaGFyQXQocGFyc2VyX3Bvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJfcG9zICs9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VyX3BvcyA9PT0gaW5wdXRfbGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICghKGxhc3RfdG9rZW4udHlwZSA9PT0gJ1RLX0RPVCcgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChsYXN0X3Rva2VuLnR5cGUgPT09ICdUS19SRVNFUlZFRCcgJiYgaW5fYXJyYXkobGFzdF90b2tlbi50ZXh0LCBbJ3NldCcsICdnZXQnXSkpKSAmJgogICAgICAgICAgICAgICAgICAgICAgICBpbl9hcnJheShjLCByZXNlcnZlZF93b3JkcykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09ICdpbicpIHsgLy8gaGFjayBmb3IgJ2luJyBvcGVyYXRvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtjLCAnVEtfT1BFUkFUT1InXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2MsICdUS19SRVNFUlZFRCddOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtjLCAnVEtfV09SRCddOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChjID09PSAnKCcgfHwgYyA9PT0gJ1snKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtjLCAnVEtfU1RBUlRfRVhQUiddOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChjID09PSAnKScgfHwgYyA9PT0gJ10nKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtjLCAnVEtfRU5EX0VYUFInXTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoYyA9PT0gJ3snKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtjLCAnVEtfU1RBUlRfQkxPQ0snXTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoYyA9PT0gJ30nKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtjLCAnVEtfRU5EX0JMT0NLJ107CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGMgPT09ICc7JykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBbYywgJ1RLX1NFTUlDT0xPTiddOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChjID09PSAnLycpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgY29tbWVudCA9ICcnOwogICAgICAgICAgICAgICAgICAgIHZhciBjb21tZW50X21hdGNoOwogICAgICAgICAgICAgICAgICAgIC8vIHBlZWsgZm9yIGNvbW1lbnQgLyogLi4uICovCiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LmNoYXJBdChwYXJzZXJfcG9zKSA9PT0gJyonKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcl9wb3MgKz0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tfY29tbWVudF9wYXR0ZXJuLmxhc3RJbmRleCA9IHBhcnNlcl9wb3M7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRfbWF0Y2ggPSBibG9ja19jb21tZW50X3BhdHRlcm4uZXhlYyhpbnB1dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQgPSAnLyonICsgY29tbWVudF9tYXRjaFswXTsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyX3BvcyArPSBjb21tZW50X21hdGNoWzBdLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGl2ZXMgPSBnZXRfZGlyZWN0aXZlcyhjb21tZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGl2ZXMgJiYgZGlyZWN0aXZlcy5pZ25vcmUgPT09ICdzdGFydCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZXNfZW5kX2lnbm9yZV9wYXR0ZXJuLmxhc3RJbmRleCA9IHBhcnNlcl9wb3M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50X21hdGNoID0gZGlyZWN0aXZlc19lbmRfaWdub3JlX3BhdHRlcm4uZXhlYyhpbnB1dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50ICs9IGNvbW1lbnRfbWF0Y2hbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJfcG9zICs9IGNvbW1lbnRfbWF0Y2hbMF0ubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQgPSBjb21tZW50LnJlcGxhY2UoYWNvcm4uYWxsTGluZUJyZWFrcywgJ1xuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbY29tbWVudCwgJ1RLX0JMT0NLX0NPTU1FTlQnLCBkaXJlY3RpdmVzXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy8gcGVlayBmb3IgY29tbWVudCAvLyAuLi4KICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckF0KHBhcnNlcl9wb3MpID09PSAnLycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyX3BvcyArPSAxOwogICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50X3BhdHRlcm4ubGFzdEluZGV4ID0gcGFyc2VyX3BvczsKICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudF9tYXRjaCA9IGNvbW1lbnRfcGF0dGVybi5leGVjKGlucHV0KTsKICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudCA9ICcvLycgKyBjb21tZW50X21hdGNoWzBdOwogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJfcG9zICs9IGNvbW1lbnRfbWF0Y2hbMF0ubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2NvbW1lbnQsICdUS19DT01NRU5UJ107CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgc3RhcnRYbWxSZWdFeHAgPSAvXjwoWy1hLXpBLVo6MC05Xy5dK3x7Lis/fXwhXFtDREFUQVxbW1xzXFNdKj9cXVxdKShccyt7Lis/fXxccytbLWEtekEtWjowLTlfLl0rfFxzK1stYS16QS1aOjAtOV8uXStccyo9XHMqKCdbXiddKid8IlteIl0qInx7Lis/fSkpKlxzKihcLz8pXHMqPi87CgogICAgICAgICAgICAgICAgaWYgKGMgPT09ICdgJyB8fCBjID09PSAiJyIgfHwgYyA9PT0gJyInIHx8IC8vIHN0cmluZwogICAgICAgICAgICAgICAgICAgICgKICAgICAgICAgICAgICAgICAgICAgICAgKGMgPT09ICcvJykgfHwgLy8gcmVnZXhwCiAgICAgICAgICAgICAgICAgICAgICAgIChvcHRzLmU0eCAmJiBjID09PSAiPCIgJiYgaW5wdXQuc2xpY2UocGFyc2VyX3BvcyAtIDEpLm1hdGNoKHN0YXJ0WG1sUmVnRXhwKSkgLy8geG1sCiAgICAgICAgICAgICAgICAgICAgKSAmJiAoIC8vIHJlZ2V4IGFuZCB4bWwgY2FuIG9ubHkgYXBwZWFyIGluIHNwZWNpZmljIGxvY2F0aW9ucyBkdXJpbmcgcGFyc2luZwogICAgICAgICAgICAgICAgICAgICAgICAobGFzdF90b2tlbi50eXBlID09PSAnVEtfUkVTRVJWRUQnICYmIGluX2FycmF5KGxhc3RfdG9rZW4udGV4dCwgWydyZXR1cm4nLCAnY2FzZScsICd0aHJvdycsICdlbHNlJywgJ2RvJywgJ3R5cGVvZicsICd5aWVsZCddKSkgfHwKICAgICAgICAgICAgICAgICAgICAgICAgKGxhc3RfdG9rZW4udHlwZSA9PT0gJ1RLX0VORF9FWFBSJyAmJiBsYXN0X3Rva2VuLnRleHQgPT09ICcpJyAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdF90b2tlbi5wYXJlbnQgJiYgbGFzdF90b2tlbi5wYXJlbnQudHlwZSA9PT0gJ1RLX1JFU0VSVkVEJyAmJiBpbl9hcnJheShsYXN0X3Rva2VuLnBhcmVudC50ZXh0LCBbJ2lmJywgJ3doaWxlJywgJ2ZvciddKSkgfHwKICAgICAgICAgICAgICAgICAgICAgICAgKGluX2FycmF5KGxhc3RfdG9rZW4udHlwZSwgWydUS19DT01NRU5UJywgJ1RLX1NUQVJUX0VYUFInLCAnVEtfU1RBUlRfQkxPQ0snLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1RLX0VORF9CTE9DSycsICdUS19PUEVSQVRPUicsICdUS19FUVVBTFMnLCAnVEtfRU9GJywgJ1RLX1NFTUlDT0xPTicsICdUS19DT01NQScKICAgICAgICAgICAgICAgICAgICAgICAgXSkpCiAgICAgICAgICAgICAgICAgICAgKSkgewoKICAgICAgICAgICAgICAgICAgICB2YXIgc2VwID0gYywKICAgICAgICAgICAgICAgICAgICAgICAgZXNjID0gZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIGhhc19jaGFyX2VzY2FwZXMgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0aW5nX3N0cmluZyA9IGM7CgogICAgICAgICAgICAgICAgICAgIGlmIChzZXAgPT09ICcvJykgewogICAgICAgICAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgcmVnZXhwCiAgICAgICAgICAgICAgICAgICAgICAgIC8vCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbl9jaGFyX2NsYXNzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChwYXJzZXJfcG9zIDwgaW5wdXRfbGVuZ3RoICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGVzYyB8fCBpbl9jaGFyX2NsYXNzIHx8IGlucHV0LmNoYXJBdChwYXJzZXJfcG9zKSAhPT0gc2VwKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFhY29ybi5uZXdsaW5lLnRlc3QoaW5wdXQuY2hhckF0KHBhcnNlcl9wb3MpKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdGluZ19zdHJpbmcgKz0gaW5wdXQuY2hhckF0KHBhcnNlcl9wb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlc2MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlc2MgPSBpbnB1dC5jaGFyQXQocGFyc2VyX3BvcykgPT09ICdcXCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LmNoYXJBdChwYXJzZXJfcG9zKSA9PT0gJ1snKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluX2NoYXJfY2xhc3MgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQuY2hhckF0KHBhcnNlcl9wb3MpID09PSAnXScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5fY2hhcl9jbGFzcyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXNjID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJfcG9zICs9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdHMuZTR4ICYmIHNlcCA9PT0gJzwnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBlNHggeG1sIGxpdGVyYWxzCiAgICAgICAgICAgICAgICAgICAgICAgIC8vCgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgeG1sUmVnRXhwID0gLzwoXC8/KShbLWEtekEtWjowLTlfLl0rfHsuKz99fCFcW0NEQVRBXFtbXHNcU10qP1xdXF0pKFxzK3suKz99fFxzK1stYS16QS1aOjAtOV8uXSt8XHMrWy1hLXpBLVo6MC05Xy5dK1xzKj1ccyooJ1teJ10qJ3wiW14iXSoifHsuKz99KSkqXHMqKFwvPylccyo+L2c7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4bWxTdHIgPSBpbnB1dC5zbGljZShwYXJzZXJfcG9zIC0gMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IHhtbFJlZ0V4cC5leGVjKHhtbFN0cik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaC5pbmRleCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJvb3RUYWcgPSBtYXRjaFsyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXB0aCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAobWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNFbmRUYWcgPSAhIW1hdGNoWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWdOYW1lID0gbWF0Y2hbMl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzU2luZ2xldG9uVGFnID0gKCEhbWF0Y2hbbWF0Y2gubGVuZ3RoIC0gMV0pIHx8ICh0YWdOYW1lLnNsaWNlKDAsIDgpID09PSAiIVtDREFUQVsiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFnTmFtZSA9PT0gcm9vdFRhZyAmJiAhaXNTaW5nbGV0b25UYWcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRW5kVGFnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWRlcHRoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKytkZXB0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVwdGggPD0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSB4bWxSZWdFeHAuZXhlYyh4bWxTdHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHhtbExlbmd0aCA9IG1hdGNoID8gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGggOiB4bWxTdHIubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeG1sU3RyID0geG1sU3RyLnNsaWNlKDAsIHhtbExlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJfcG9zICs9IHhtbExlbmd0aCAtIDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4bWxTdHIgPSB4bWxTdHIucmVwbGFjZShhY29ybi5hbGxMaW5lQnJlYWtzLCAnXG4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbeG1sU3RyLCAiVEtfU1RSSU5HIl07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgc3RyaW5nCiAgICAgICAgICAgICAgICAgICAgICAgIC8vCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJzZV9zdHJpbmcgPSBmdW5jdGlvbihkZWxpbWl0ZXIsIGFsbG93X3VuZXNjYXBlZF9uZXdsaW5lcywgc3RhcnRfc3ViKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUZW1wbGF0ZSBzdHJpbmdzIGNhbiB0cmF2ZXJzIGxpbmVzIHdpdGhvdXQgZXNjYXBlIGNoYXJhY3RlcnMuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPdGhlciBzdHJpbmdzIGNhbm5vdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRfY2hhcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChwYXJzZXJfcG9zIDwgaW5wdXRfbGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jaGFyID0gaW5wdXQuY2hhckF0KHBhcnNlcl9wb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGVzYyB8fCAoY3VycmVudF9jaGFyICE9PSBkZWxpbWl0ZXIgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhbGxvd191bmVzY2FwZWRfbmV3bGluZXMgfHwgIWFjb3JuLm5ld2xpbmUudGVzdChjdXJyZW50X2NoYXIpKSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIFxyXG4gbGluZWJyZWFrcyBhZnRlciBlc2NhcGVzIG9yIGluIHRlbXBsYXRlIHN0cmluZ3MKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGVzYyB8fCBhbGxvd191bmVzY2FwZWRfbmV3bGluZXMpICYmIGFjb3JuLm5ld2xpbmUudGVzdChjdXJyZW50X2NoYXIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50X2NoYXIgPT09ICdccicgJiYgaW5wdXQuY2hhckF0KHBhcnNlcl9wb3MgKyAxKSA9PT0gJ1xuJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyX3BvcyArPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jaGFyID0gaW5wdXQuY2hhckF0KHBhcnNlcl9wb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdGluZ19zdHJpbmcgKz0gJ1xuJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRpbmdfc3RyaW5nICs9IGN1cnJlbnRfY2hhcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVzYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudF9jaGFyID09PSAneCcgfHwgY3VycmVudF9jaGFyID09PSAndScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc19jaGFyX2VzY2FwZXMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVzYyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVzYyA9IGN1cnJlbnRfY2hhciA9PT0gJ1xcJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcl9wb3MgKz0gMTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0X3N1YiAmJiByZXN1bHRpbmdfc3RyaW5nLmluZGV4T2Yoc3RhcnRfc3ViLCByZXN1bHRpbmdfc3RyaW5nLmxlbmd0aCAtIHN0YXJ0X3N1Yi5sZW5ndGgpICE9PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVsaW1pdGVyID09PSAnYCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlX3N0cmluZygnfScsIGFsbG93X3VuZXNjYXBlZF9uZXdsaW5lcywgJ2AnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlX3N0cmluZygnYCcsIGFsbG93X3VuZXNjYXBlZF9uZXdsaW5lcywgJyR7Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VwID09PSAnYCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlX3N0cmluZygnYCcsIHRydWUsICckeycpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2Vfc3RyaW5nKHNlcCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChoYXNfY2hhcl9lc2NhcGVzICYmIG9wdHMudW5lc2NhcGVfc3RyaW5ncykgewogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRpbmdfc3RyaW5nID0gdW5lc2NhcGVfc3RyaW5nKHJlc3VsdGluZ19zdHJpbmcpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcl9wb3MgPCBpbnB1dF9sZW5ndGggJiYgaW5wdXQuY2hhckF0KHBhcnNlcl9wb3MpID09PSBzZXApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0aW5nX3N0cmluZyArPSBzZXA7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcl9wb3MgKz0gMTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXAgPT09ICcvJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVnZXhwcyBtYXkgaGF2ZSBtb2RpZmllcnMgL3JlZ2V4cC9NT0QgLCBzbyBmZXRjaCB0aG9zZSwgdG9vCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IFtnaW1dIGFyZSB2YWxpZCwgYnV0IGlmIHRoZSB1c2VyIHB1dHMgaW4gZ2FyYmFnZSwgZG8gd2hhdCB3ZSBjYW4gdG8gdGFrZSBpdC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChwYXJzZXJfcG9zIDwgaW5wdXRfbGVuZ3RoICYmIGFjb3JuLmlzSWRlbnRpZmllclN0YXJ0KGlucHV0LmNoYXJDb2RlQXQocGFyc2VyX3BvcykpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0aW5nX3N0cmluZyArPSBpbnB1dC5jaGFyQXQocGFyc2VyX3Bvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyX3BvcyArPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBbcmVzdWx0aW5nX3N0cmluZywgJ1RLX1NUUklORyddOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChjID09PSAnIycpIHsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHRva2Vucy5sZW5ndGggPT09IDAgJiYgaW5wdXQuY2hhckF0KHBhcnNlcl9wb3MpID09PSAnIScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2hlYmFuZwogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRpbmdfc3RyaW5nID0gYzsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHBhcnNlcl9wb3MgPCBpbnB1dF9sZW5ndGggJiYgYyAhPT0gJ1xuJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGlucHV0LmNoYXJBdChwYXJzZXJfcG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdGluZ19zdHJpbmcgKz0gYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcl9wb3MgKz0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3RyaW0ocmVzdWx0aW5nX3N0cmluZykgKyAnXG4nLCAnVEtfVU5LTk9XTiddOwogICAgICAgICAgICAgICAgICAgIH0KCgoKICAgICAgICAgICAgICAgICAgICAvLyBTcGlkZXJtb25rZXktc3BlY2lmaWMgc2hhcnAgdmFyaWFibGVzIGZvciBjaXJjdWxhciByZWZlcmVuY2VzCiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvRW4vU2hhcnBfdmFyaWFibGVzX2luX0phdmFTY3JpcHQKICAgICAgICAgICAgICAgICAgICAvLyBodHRwOi8vbXhyLm1vemlsbGEub3JnL21vemlsbGEtY2VudHJhbC9zb3VyY2UvanMvc3JjL2pzc2Nhbi5jcHAgYXJvdW5kIGxpbmUgMTkzNQogICAgICAgICAgICAgICAgICAgIHZhciBzaGFycCA9ICcjJzsKICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VyX3BvcyA8IGlucHV0X2xlbmd0aCAmJiBkaWdpdC50ZXN0KGlucHV0LmNoYXJBdChwYXJzZXJfcG9zKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGlucHV0LmNoYXJBdChwYXJzZXJfcG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJwICs9IGM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJfcG9zICs9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKHBhcnNlcl9wb3MgPCBpbnB1dF9sZW5ndGggJiYgYyAhPT0gJyMnICYmIGMgIT09ICc9Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjID09PSAnIycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQuY2hhckF0KHBhcnNlcl9wb3MpID09PSAnWycgJiYgaW5wdXQuY2hhckF0KHBhcnNlcl9wb3MgKyAxKSA9PT0gJ10nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFycCArPSAnW10nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyX3BvcyArPSAyOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0LmNoYXJBdChwYXJzZXJfcG9zKSA9PT0gJ3snICYmIGlucHV0LmNoYXJBdChwYXJzZXJfcG9zICsgMSkgPT09ICd9JykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhcnAgKz0gJ3t9JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcl9wb3MgKz0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3NoYXJwLCAnVEtfV09SRCddOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoYyA9PT0gJzwnICYmIChpbnB1dC5jaGFyQXQocGFyc2VyX3BvcykgPT09ICc/JyB8fCBpbnB1dC5jaGFyQXQocGFyc2VyX3BvcykgPT09ICclJykpIHsKICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZV9wYXR0ZXJuLmxhc3RJbmRleCA9IHBhcnNlcl9wb3MgLSAxOwogICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZV9tYXRjaCA9IHRlbXBsYXRlX3BhdHRlcm4uZXhlYyhpbnB1dCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBsYXRlX21hdGNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSB0ZW1wbGF0ZV9tYXRjaFswXTsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyX3BvcyArPSBjLmxlbmd0aCAtIDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBjLnJlcGxhY2UoYWNvcm4uYWxsTGluZUJyZWFrcywgJ1xuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbYywgJ1RLX1NUUklORyddOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoYyA9PT0gJzwnICYmIGlucHV0LnN1YnN0cmluZyhwYXJzZXJfcG9zIC0gMSwgcGFyc2VyX3BvcyArIDMpID09PSAnPCEtLScpIHsKICAgICAgICAgICAgICAgICAgICBwYXJzZXJfcG9zICs9IDM7CiAgICAgICAgICAgICAgICAgICAgYyA9ICc8IS0tJzsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIWFjb3JuLm5ld2xpbmUudGVzdChpbnB1dC5jaGFyQXQocGFyc2VyX3BvcykpICYmIHBhcnNlcl9wb3MgPCBpbnB1dF9sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYyArPSBpbnB1dC5jaGFyQXQocGFyc2VyX3Bvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcl9wb3MrKzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaW5faHRtbF9jb21tZW50ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2MsICdUS19DT01NRU5UJ107CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGMgPT09ICctJyAmJiBpbl9odG1sX2NvbW1lbnQgJiYgaW5wdXQuc3Vic3RyaW5nKHBhcnNlcl9wb3MgLSAxLCBwYXJzZXJfcG9zICsgMikgPT09ICctLT4nKSB7CiAgICAgICAgICAgICAgICAgICAgaW5faHRtbF9jb21tZW50ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgcGFyc2VyX3BvcyArPSAyOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBbJy0tPicsICdUS19DT01NRU5UJ107CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGMgPT09ICcuJykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBbYywgJ1RLX0RPVCddOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChpbl9hcnJheShjLCBwdW5jdCkpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAocGFyc2VyX3BvcyA8IGlucHV0X2xlbmd0aCAmJiBpbl9hcnJheShjICsgaW5wdXQuY2hhckF0KHBhcnNlcl9wb3MpLCBwdW5jdCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYyArPSBpbnB1dC5jaGFyQXQocGFyc2VyX3Bvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcl9wb3MgKz0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcl9wb3MgPj0gaW5wdXRfbGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09ICcsJykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2MsICdUS19DT01NQSddOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJz0nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbYywgJ1RLX0VRVUFMUyddOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbYywgJ1RLX09QRVJBVE9SJ107CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBbYywgJ1RLX1VOS05PV04nXTsKICAgICAgICAgICAgfQoKCiAgICAgICAgICAgIGZ1bmN0aW9uIHVuZXNjYXBlX3N0cmluZyhzKSB7CiAgICAgICAgICAgICAgICB2YXIgZXNjID0gZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgb3V0ID0gJycsCiAgICAgICAgICAgICAgICAgICAgcG9zID0gMCwKICAgICAgICAgICAgICAgICAgICBzX2hleCA9ICcnLAogICAgICAgICAgICAgICAgICAgIGVzY2FwZWQgPSAwLAogICAgICAgICAgICAgICAgICAgIGM7CgogICAgICAgICAgICAgICAgd2hpbGUgKGVzYyB8fCBwb3MgPCBzLmxlbmd0aCkgewoKICAgICAgICAgICAgICAgICAgICBjID0gcy5jaGFyQXQocG9zKTsKICAgICAgICAgICAgICAgICAgICBwb3MrKzsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGVzYykgewogICAgICAgICAgICAgICAgICAgICAgICBlc2MgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09ICd4JykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2ltcGxlIGhleC1lc2NhcGUgXHgyNAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc19oZXggPSBzLnN1YnN0cihwb3MsIDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zICs9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJ3UnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1bmljb2RlLWVzY2FwZSwgXHUyMTM0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzX2hleCA9IHMuc3Vic3RyKHBvcywgNCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3MgKz0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvbWUgY29tbW9uIGVzY2FwZSwgZS5nIFxuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gJ1xcJyArIGM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNfaGV4Lm1hdGNoKC9eWzAxMjM0NTY3ODlhYmNkZWZBQkNERUZdKyQvKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc29tZSB3ZWlyZCBlc2NhcGluZywgYmFpbCBvdXQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsZWF2aW5nIHdob2xlIHN0cmluZyBpbnRhY3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBlc2NhcGVkID0gcGFyc2VJbnQoc19oZXgsIDE2KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlc2NhcGVkID49IDB4MDAgJiYgZXNjYXBlZCA8IDB4MjApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxlYXZlIDB4MDAuLi4weDFmIGVzY2FwZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjID09PSAneCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gJ1xceCcgKyBzX2hleDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9ICdcXHUnICsgc19oZXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlc2NhcGVkID09PSAweDIyIHx8IGVzY2FwZWQgPT09IDB4MjcgfHwgZXNjYXBlZCA9PT0gMHg1YykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2luZ2xlLXF1b3RlLCBhcG9zdHJvcGhlLCBiYWNrc2xhc2ggLSBlc2NhcGUgdGhlc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSAnXFwnICsgU3RyaW5nLmZyb21DaGFyQ29kZShlc2NhcGVkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjID09PSAneCcgJiYgZXNjYXBlZCA+IDB4N2UgJiYgZXNjYXBlZCA8PSAweGZmKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBiYWlsIG91dCBvbiBceDdmLi5ceGZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGVhdmluZyB3aG9sZSBzdHJpbmcgZXNjYXBlZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFzIGl0J3MgcHJvYmFibHkgY29tcGxldGVseSBiaW5hcnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoZXNjYXBlZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09ICdcXCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZXNjID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gYzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gb3V0OwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgYmVhdXRpZmllciA9IG5ldyBCZWF1dGlmaWVyKGpzX3NvdXJjZV90ZXh0LCBvcHRpb25zKTsKICAgICAgICByZXR1cm4gYmVhdXRpZmllci5iZWF1dGlmeSgpOwoKICAgIH0KCiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gImZ1bmN0aW9uIiAmJiBkZWZpbmUuYW1kKSB7CiAgICAgICAgLy8gQWRkIHN1cHBvcnQgZm9yIEFNRCAoIGh0dHBzOi8vZ2l0aHViLmNvbS9hbWRqcy9hbWRqcy1hcGkvd2lraS9BTUQjZGVmaW5lYW1kLXByb3BlcnR5LSApCiAgICAgICAgZGVmaW5lKFtdLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIHsganNfYmVhdXRpZnk6IGpzX2JlYXV0aWZ5IH07CiAgICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAidW5kZWZpbmVkIikgewogICAgICAgIC8vIEFkZCBzdXBwb3J0IGZvciBDb21tb25KUy4gSnVzdCBwdXQgdGhpcyBmaWxlIHNvbWV3aGVyZSBvbiB5b3VyIHJlcXVpcmUucGF0aHMKICAgICAgICAvLyBhbmQgeW91IHdpbGwgYmUgYWJsZSB0byBgdmFyIGpzX2JlYXV0aWZ5ID0gcmVxdWlyZSgiYmVhdXRpZnkiKS5qc19iZWF1dGlmeWAuCiAgICAgICAgZXhwb3J0cy5qc19iZWF1dGlmeSA9IGpzX2JlYXV0aWZ5OwogICAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIikgewogICAgICAgIC8vIElmIHdlJ3JlIHJ1bm5pbmcgYSB3ZWIgcGFnZSBhbmQgZG9uJ3QgaGF2ZSBlaXRoZXIgb2YgdGhlIGFib3ZlLCBhZGQgb3VyIG9uZSBnbG9iYWwKICAgICAgICB3aW5kb3cuanNfYmVhdXRpZnkgPSBqc19iZWF1dGlmeTsKICAgIH0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAvLyBJZiB3ZSBkb24ndCBldmVuIGhhdmUgd2luZG93LCB0cnkgZ2xvYmFsLgogICAgICAgIGdsb2JhbC5qc19iZWF1dGlmeSA9IGpzX2JlYXV0aWZ5OwogICAgfQoKfSgpKTs="></script>
    <script src="data:application/x-javascript;base64,Lypqc2hpbnQgY3VybHk6dHJ1ZSwgZXFlcWVxOnRydWUsIGxheGJyZWFrOnRydWUsIG5vZW1wdHk6ZmFsc2UgKi8KLyoKCiAgVGhlIE1JVCBMaWNlbnNlIChNSVQpCgogIENvcHlyaWdodCAoYykgMjAwNy0yMDEzIEVpbmFyIExpZWxtYW5pcyBhbmQgY29udHJpYnV0b3JzLgoKICBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbgogIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzCiAgKHRoZSAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwKICBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLAogIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsCiAgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywKICBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKCiAgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUKICBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KCiAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsCiAgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCiAgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQKICBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTCiAgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOCiAgQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4KICBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFCiAgU09GVFdBUkUuCgoKIENTUyBCZWF1dGlmaWVyCi0tLS0tLS0tLS0tLS0tLQoKICAgIFdyaXR0ZW4gYnkgSGFydXR5dW4gQW1pcmphbnlhbiwgKGFtaXJqYW55YW5AZ21haWwuY29tKQoKICAgIEJhc2VkIG9uIGNvZGUgaW5pdGlhbGx5IGRldmVsb3BlZCBieTogRWluYXIgTGllbG1hbmlzLCA8ZWluYXJAanNiZWF1dGlmaWVyLm9yZz4KICAgICAgICBodHRwOi8vanNiZWF1dGlmaWVyLm9yZy8KCiAgICBVc2FnZToKICAgICAgICBjc3NfYmVhdXRpZnkoc291cmNlX3RleHQpOwogICAgICAgIGNzc19iZWF1dGlmeShzb3VyY2VfdGV4dCwgb3B0aW9ucyk7CgogICAgVGhlIG9wdGlvbnMgYXJlIChkZWZhdWx0IGluIGJyYWNrZXRzKToKICAgICAgICBpbmRlbnRfc2l6ZSAoNCkgICAgICAgICAgICAgICAgICAgICAgICAg4oCUIGluZGVudGF0aW9uIHNpemUsCiAgICAgICAgaW5kZW50X2NoYXIgKHNwYWNlKSAgICAgICAgICAgICAgICAgICAgIOKAlCBjaGFyYWN0ZXIgdG8gaW5kZW50IHdpdGgsCiAgICAgICAgc2VsZWN0b3Jfc2VwYXJhdG9yX25ld2xpbmUgKHRydWUpICAgICAgIC0gc2VwYXJhdGUgc2VsZWN0b3JzIHdpdGggbmV3bGluZSBvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdCAoZS5nLiAiYSxcbmJyIiBvciAiYSwgYnIiKQogICAgICAgIGVuZF93aXRoX25ld2xpbmUgKGZhbHNlKSAgICAgICAgICAgICAgICAtIGVuZCB3aXRoIGEgbmV3bGluZQogICAgICAgIG5ld2xpbmVfYmV0d2Vlbl9ydWxlcyAodHJ1ZSkgICAgICAgICAgICAtIGFkZCBhIG5ldyBsaW5lIGFmdGVyIGV2ZXJ5IGNzcyBydWxlCiAgICAgICAgc3BhY2VfYXJvdW5kX3NlbGVjdG9yX3NlcGFyYXRvciAoZmFsc2UpIC0gZW5zdXJlIHNwYWNlIGFyb3VuZCBzZWxlY3RvciBzZXBhcmF0b3JzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc+JywgJysnLCAnficgKGUuZy4gImE+YiIgLT4gImEgPiBiIikKICAgIGUuZwoKICAgIGNzc19iZWF1dGlmeShjc3Nfc291cmNlX3RleHQsIHsKICAgICAgJ2luZGVudF9zaXplJzogMSwKICAgICAgJ2luZGVudF9jaGFyJzogJ1x0JywKICAgICAgJ3NlbGVjdG9yX3NlcGFyYXRvcic6ICcgJywKICAgICAgJ2VuZF93aXRoX25ld2xpbmUnOiBmYWxzZSwKICAgICAgJ25ld2xpbmVfYmV0d2Vlbl9ydWxlcyc6IHRydWUsCiAgICAgICdzcGFjZV9hcm91bmRfc2VsZWN0b3Jfc2VwYXJhdG9yJzogdHJ1ZQogICAgfSk7CiovCgovLyBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjdG9rZW5pemF0aW9uCi8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtc3ludGF4LwoKKGZ1bmN0aW9uKCkgewogICAgZnVuY3Rpb24gY3NzX2JlYXV0aWZ5KHNvdXJjZV90ZXh0LCBvcHRpb25zKSB7CiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICAgICAgc291cmNlX3RleHQgPSBzb3VyY2VfdGV4dCB8fCAnJzsKICAgICAgICAvLyBIQUNLOiBuZXdsaW5lIHBhcnNpbmcgaW5jb25zaXN0ZW50LiBUaGlzIGJydXRlIGZvcmNlIG5vcm1hbGl6ZXMgdGhlIGlucHV0LgogICAgICAgIHNvdXJjZV90ZXh0ID0gc291cmNlX3RleHQucmVwbGFjZSgvXHJcbnxbXHJcdTIwMjhcdTIwMjldL2csICdcbicpOwoKICAgICAgICB2YXIgaW5kZW50U2l6ZSA9IG9wdGlvbnMuaW5kZW50X3NpemUgfHwgNDsKICAgICAgICB2YXIgaW5kZW50Q2hhcmFjdGVyID0gb3B0aW9ucy5pbmRlbnRfY2hhciB8fCAnICc7CiAgICAgICAgdmFyIHNlbGVjdG9yU2VwYXJhdG9yTmV3bGluZSA9IChvcHRpb25zLnNlbGVjdG9yX3NlcGFyYXRvcl9uZXdsaW5lID09PSB1bmRlZmluZWQpID8gdHJ1ZSA6IG9wdGlvbnMuc2VsZWN0b3Jfc2VwYXJhdG9yX25ld2xpbmU7CiAgICAgICAgdmFyIGVuZF93aXRoX25ld2xpbmUgPSAob3B0aW9ucy5lbmRfd2l0aF9uZXdsaW5lID09PSB1bmRlZmluZWQpID8gZmFsc2UgOiBvcHRpb25zLmVuZF93aXRoX25ld2xpbmU7CiAgICAgICAgdmFyIG5ld2xpbmVfYmV0d2Vlbl9ydWxlcyA9IChvcHRpb25zLm5ld2xpbmVfYmV0d2Vlbl9ydWxlcyA9PT0gdW5kZWZpbmVkKSA/IHRydWUgOiBvcHRpb25zLm5ld2xpbmVfYmV0d2Vlbl9ydWxlczsKICAgICAgICB2YXIgc3BhY2VBcm91bmRTZWxlY3RvclNlcGFyYXRvciA9IChvcHRpb25zLnNwYWNlX2Fyb3VuZF9zZWxlY3Rvcl9zZXBhcmF0b3IgPT09IHVuZGVmaW5lZCkgPyBmYWxzZSA6IG9wdGlvbnMuc3BhY2VfYXJvdW5kX3NlbGVjdG9yX3NlcGFyYXRvcjsKICAgICAgICB2YXIgZW9sID0gb3B0aW9ucy5lb2wgPyBvcHRpb25zLmVvbCA6ICdcbic7CgogICAgICAgIC8vIGNvbXBhdGliaWxpdHkKICAgICAgICBpZiAodHlwZW9mIGluZGVudFNpemUgPT09ICJzdHJpbmciKSB7CiAgICAgICAgICAgIGluZGVudFNpemUgPSBwYXJzZUludChpbmRlbnRTaXplLCAxMCk7CiAgICAgICAgfQoKICAgICAgICBpZiAob3B0aW9ucy5pbmRlbnRfd2l0aF90YWJzKSB7CiAgICAgICAgICAgIGluZGVudENoYXJhY3RlciA9ICdcdCc7CiAgICAgICAgICAgIGluZGVudFNpemUgPSAxOwogICAgICAgIH0KCiAgICAgICAgZW9sID0gZW9sLnJlcGxhY2UoL1xcci8sICdccicpLnJlcGxhY2UoL1xcbi8sICdcbicpOwoKCiAgICAgICAgLy8gdG9rZW5pemVyCiAgICAgICAgdmFyIHdoaXRlUmUgPSAvXlxzKyQvOwoKICAgICAgICB2YXIgcG9zID0gLTEsCiAgICAgICAgICAgIGNoOwogICAgICAgIHZhciBwYXJlbkxldmVsID0gMDsKCiAgICAgICAgZnVuY3Rpb24gbmV4dCgpIHsKICAgICAgICAgICAgY2ggPSBzb3VyY2VfdGV4dC5jaGFyQXQoKytwb3MpOwogICAgICAgICAgICByZXR1cm4gY2ggfHwgJyc7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwZWVrKHNraXBXaGl0ZXNwYWNlKSB7CiAgICAgICAgICAgIHZhciByZXN1bHQgPSAnJzsKICAgICAgICAgICAgdmFyIHByZXZfcG9zID0gcG9zOwogICAgICAgICAgICBpZiAoc2tpcFdoaXRlc3BhY2UpIHsKICAgICAgICAgICAgICAgIGVhdFdoaXRlc3BhY2UoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXN1bHQgPSBzb3VyY2VfdGV4dC5jaGFyQXQocG9zICsgMSkgfHwgJyc7CiAgICAgICAgICAgIHBvcyA9IHByZXZfcG9zIC0gMTsKICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZWF0U3RyaW5nKGVuZENoYXJzKSB7CiAgICAgICAgICAgIHZhciBzdGFydCA9IHBvczsKICAgICAgICAgICAgd2hpbGUgKG5leHQoKSkgewogICAgICAgICAgICAgICAgaWYgKGNoID09PSAiXFwiKSB7CiAgICAgICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbmRDaGFycy5pbmRleE9mKGNoKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2ggPT09ICJcbiIpIHsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gc291cmNlX3RleHQuc3Vic3RyaW5nKHN0YXJ0LCBwb3MgKyAxKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHBlZWtTdHJpbmcoZW5kQ2hhcikgewogICAgICAgICAgICB2YXIgcHJldl9wb3MgPSBwb3M7CiAgICAgICAgICAgIHZhciBzdHIgPSBlYXRTdHJpbmcoZW5kQ2hhcik7CiAgICAgICAgICAgIHBvcyA9IHByZXZfcG9zIC0gMTsKICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICByZXR1cm4gc3RyOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZWF0V2hpdGVzcGFjZSgpIHsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwogICAgICAgICAgICB3aGlsZSAod2hpdGVSZS50ZXN0KHBlZWsoKSkpIHsKICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjaDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2tpcFdoaXRlc3BhY2UoKSB7CiAgICAgICAgICAgIHZhciByZXN1bHQgPSAnJzsKICAgICAgICAgICAgaWYgKGNoICYmIHdoaXRlUmUudGVzdChjaCkpIHsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IGNoOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHdoaWxlICh3aGl0ZVJlLnRlc3QobmV4dCgpKSkgewogICAgICAgICAgICAgICAgcmVzdWx0ICs9IGNoOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBlYXRDb21tZW50KHNpbmdsZUxpbmUpIHsKICAgICAgICAgICAgdmFyIHN0YXJ0ID0gcG9zOwogICAgICAgICAgICBzaW5nbGVMaW5lID0gcGVlaygpID09PSAiLyI7CiAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgd2hpbGUgKG5leHQoKSkgewogICAgICAgICAgICAgICAgaWYgKCFzaW5nbGVMaW5lICYmIGNoID09PSAiKiIgJiYgcGVlaygpID09PSAiLyIpIHsKICAgICAgICAgICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNpbmdsZUxpbmUgJiYgY2ggPT09ICJcbiIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc291cmNlX3RleHQuc3Vic3RyaW5nKHN0YXJ0LCBwb3MpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gc291cmNlX3RleHQuc3Vic3RyaW5nKHN0YXJ0LCBwb3MpICsgY2g7CiAgICAgICAgfQoKCiAgICAgICAgZnVuY3Rpb24gbG9va0JhY2soc3RyKSB7CiAgICAgICAgICAgIHJldHVybiBzb3VyY2VfdGV4dC5zdWJzdHJpbmcocG9zIC0gc3RyLmxlbmd0aCwgcG9zKS50b0xvd2VyQ2FzZSgpID09PQogICAgICAgICAgICAgICAgc3RyOwogICAgICAgIH0KCiAgICAgICAgLy8gTmVzdGVkIHBzZXVkby1jbGFzcyBpZiB3ZSBhcmUgaW5zaWRlUnVsZQogICAgICAgIC8vIGFuZCB0aGUgbmV4dCBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZCBvcGVucwogICAgICAgIC8vIGEgbmV3IGJsb2NrCiAgICAgICAgZnVuY3Rpb24gZm91bmROZXN0ZWRQc2V1ZG9DbGFzcygpIHsKICAgICAgICAgICAgdmFyIG9wZW5QYXJlbiA9IDA7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSBwb3MgKyAxOyBpIDwgc291cmNlX3RleHQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBjaCA9IHNvdXJjZV90ZXh0LmNoYXJBdChpKTsKICAgICAgICAgICAgICAgIGlmIChjaCA9PT0gInsiKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNoID09PSAnKCcpIHsKICAgICAgICAgICAgICAgICAgICAvLyBwc2V1ZG9jbGFzc2VzIGNhbiBjb250YWluICgpCiAgICAgICAgICAgICAgICAgICAgb3BlblBhcmVuICs9IDE7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNoID09PSAnKScpIHsKICAgICAgICAgICAgICAgICAgICBpZiAob3BlblBhcmVuID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgb3BlblBhcmVuIC09IDE7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNoID09PSAiOyIgfHwgY2ggPT09ICJ9IikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICAvLyBwcmludGVyCiAgICAgICAgdmFyIGJhc2ViYXNlSW5kZW50U3RyaW5nID0gc291cmNlX3RleHQubWF0Y2goL15bXHQgXSovKVswXTsKICAgICAgICB2YXIgc2luZ2xlSW5kZW50ID0gbmV3IEFycmF5KGluZGVudFNpemUgKyAxKS5qb2luKGluZGVudENoYXJhY3Rlcik7CiAgICAgICAgdmFyIGluZGVudExldmVsID0gMDsKICAgICAgICB2YXIgbmVzdGVkTGV2ZWwgPSAwOwoKICAgICAgICBmdW5jdGlvbiBpbmRlbnQoKSB7CiAgICAgICAgICAgIGluZGVudExldmVsKys7CiAgICAgICAgICAgIGJhc2ViYXNlSW5kZW50U3RyaW5nICs9IHNpbmdsZUluZGVudDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIG91dGRlbnQoKSB7CiAgICAgICAgICAgIGluZGVudExldmVsLS07CiAgICAgICAgICAgIGJhc2ViYXNlSW5kZW50U3RyaW5nID0gYmFzZWJhc2VJbmRlbnRTdHJpbmcuc2xpY2UoMCwgLWluZGVudFNpemUpOwogICAgICAgIH0KCiAgICAgICAgdmFyIHByaW50ID0ge307CiAgICAgICAgcHJpbnRbInsiXSA9IGZ1bmN0aW9uKGNoKSB7CiAgICAgICAgICAgIHByaW50LnNpbmdsZVNwYWNlKCk7CiAgICAgICAgICAgIG91dHB1dC5wdXNoKGNoKTsKICAgICAgICAgICAgcHJpbnQubmV3TGluZSgpOwogICAgICAgIH07CiAgICAgICAgcHJpbnRbIn0iXSA9IGZ1bmN0aW9uKGNoKSB7CiAgICAgICAgICAgIHByaW50Lm5ld0xpbmUoKTsKICAgICAgICAgICAgb3V0cHV0LnB1c2goY2gpOwogICAgICAgICAgICBwcmludC5uZXdMaW5lKCk7CiAgICAgICAgfTsKCiAgICAgICAgcHJpbnQuX2xhc3RDaGFyV2hpdGVzcGFjZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gd2hpdGVSZS50ZXN0KG91dHB1dFtvdXRwdXQubGVuZ3RoIC0gMV0pOwogICAgICAgIH07CgogICAgICAgIHByaW50Lm5ld0xpbmUgPSBmdW5jdGlvbihrZWVwV2hpdGVzcGFjZSkgewogICAgICAgICAgICBpZiAob3V0cHV0Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgaWYgKCFrZWVwV2hpdGVzcGFjZSAmJiBvdXRwdXRbb3V0cHV0Lmxlbmd0aCAtIDFdICE9PSAnXG4nKSB7CiAgICAgICAgICAgICAgICAgICAgcHJpbnQudHJpbSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKCdcbicpOwoKICAgICAgICAgICAgICAgIGlmIChiYXNlYmFzZUluZGVudFN0cmluZykgewogICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKGJhc2ViYXNlSW5kZW50U3RyaW5nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgcHJpbnQuc2luZ2xlU3BhY2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKG91dHB1dC5sZW5ndGggJiYgIXByaW50Ll9sYXN0Q2hhcldoaXRlc3BhY2UoKSkgewogICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goJyAnKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIHByaW50LnByZXNlcnZlU2luZ2xlU3BhY2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKGlzQWZ0ZXJTcGFjZSkgewogICAgICAgICAgICAgICAgcHJpbnQuc2luZ2xlU3BhY2UoKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIHByaW50LnRyaW0gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgd2hpbGUgKHByaW50Ll9sYXN0Q2hhcldoaXRlc3BhY2UoKSkgewogICAgICAgICAgICAgICAgb3V0cHV0LnBvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCgogICAgICAgIHZhciBvdXRwdXQgPSBbXTsKICAgICAgICAvKl9fX19fX19fX19fX19fX19fX19fXy0tLS0tLS0tLS0tLS0tLS0tLS0tX19fX19fX19fX19fX19fX19fX19fKi8KCiAgICAgICAgdmFyIGluc2lkZVJ1bGUgPSBmYWxzZTsKICAgICAgICB2YXIgaW5zaWRlUHJvcGVydHlWYWx1ZSA9IGZhbHNlOwogICAgICAgIHZhciBlbnRlcmluZ0NvbmRpdGlvbmFsR3JvdXAgPSBmYWxzZTsKICAgICAgICB2YXIgdG9wX2NoID0gJyc7CiAgICAgICAgdmFyIGxhc3RfdG9wX2NoID0gJyc7CgogICAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgICAgIHZhciB3aGl0ZXNwYWNlID0gc2tpcFdoaXRlc3BhY2UoKTsKICAgICAgICAgICAgdmFyIGlzQWZ0ZXJTcGFjZSA9IHdoaXRlc3BhY2UgIT09ICcnOwogICAgICAgICAgICB2YXIgaXNBZnRlck5ld2xpbmUgPSB3aGl0ZXNwYWNlLmluZGV4T2YoJ1xuJykgIT09IC0xOwogICAgICAgICAgICBsYXN0X3RvcF9jaCA9IHRvcF9jaDsKICAgICAgICAgICAgdG9wX2NoID0gY2g7CgogICAgICAgICAgICBpZiAoIWNoKSB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfSBlbHNlIGlmIChjaCA9PT0gJy8nICYmIHBlZWsoKSA9PT0gJyonKSB7IC8qIGNzcyBjb21tZW50ICovCiAgICAgICAgICAgICAgICB2YXIgaGVhZGVyID0gaW5kZW50TGV2ZWwgPT09IDA7CgogICAgICAgICAgICAgICAgaWYgKGlzQWZ0ZXJOZXdsaW5lIHx8IGhlYWRlcikgewogICAgICAgICAgICAgICAgICAgIHByaW50Lm5ld0xpbmUoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChlYXRDb21tZW50KCkpOwogICAgICAgICAgICAgICAgcHJpbnQubmV3TGluZSgpOwogICAgICAgICAgICAgICAgaWYgKGhlYWRlcikgewogICAgICAgICAgICAgICAgICAgIHByaW50Lm5ld0xpbmUodHJ1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2ggPT09ICcvJyAmJiBwZWVrKCkgPT09ICcvJykgeyAvLyBzaW5nbGUgbGluZSBjb21tZW50CiAgICAgICAgICAgICAgICBpZiAoIWlzQWZ0ZXJOZXdsaW5lICYmIGxhc3RfdG9wX2NoICE9PSAneycpIHsKICAgICAgICAgICAgICAgICAgICBwcmludC50cmltKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBwcmludC5zaW5nbGVTcGFjZSgpOwogICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goZWF0Q29tbWVudCgpKTsKICAgICAgICAgICAgICAgIHByaW50Lm5ld0xpbmUoKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChjaCA9PT0gJ0AnKSB7CiAgICAgICAgICAgICAgICBwcmludC5wcmVzZXJ2ZVNpbmdsZVNwYWNlKCk7CgogICAgICAgICAgICAgICAgLy8gZGVhbCB3aXRoIGxlc3MgcHJvcGVyeSBtaXhpbnMgQHsuLi59CiAgICAgICAgICAgICAgICBpZiAocGVlaygpID09PSAneycpIHsKICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChlYXRTdHJpbmcoJ30nKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKGNoKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gc3RyaXAgdHJhaWxpbmcgc3BhY2UsIGlmIHByZXNlbnQsIGZvciBoYXNoIHByb3BlcnR5IGNoZWNrcwogICAgICAgICAgICAgICAgICAgIHZhciB2YXJpYWJsZU9yUnVsZSA9IHBlZWtTdHJpbmcoIjogLDt7fSgpW10vPSdcIiIpOwoKICAgICAgICAgICAgICAgICAgICBpZiAodmFyaWFibGVPclJ1bGUubWF0Y2goL1sgOl0kLykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgaGF2ZSBhIHZhcmlhYmxlIG9yIHBzZXVkby1jbGFzcywgYWRkIGl0IGFuZCBpbnNlcnQgb25lIHNwYWNlIGJlZm9yZSBjb250aW51aW5nCiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVPclJ1bGUgPSBlYXRTdHJpbmcoIjogIikucmVwbGFjZSgvXHMkLywgJycpOwogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaCh2YXJpYWJsZU9yUnVsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50LnNpbmdsZVNwYWNlKCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZU9yUnVsZSA9IHZhcmlhYmxlT3JSdWxlLnJlcGxhY2UoL1xzJC8sICcnKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gbWlnaHQgYmUgYSBuZXN0aW5nIGF0LXJ1bGUKICAgICAgICAgICAgICAgICAgICBpZiAodmFyaWFibGVPclJ1bGUgaW4gY3NzX2JlYXV0aWZ5Lk5FU1RFRF9BVF9SVUxFKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5lc3RlZExldmVsICs9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YXJpYWJsZU9yUnVsZSBpbiBjc3NfYmVhdXRpZnkuQ09ORElUSU9OQUxfR1JPVVBfUlVMRSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50ZXJpbmdDb25kaXRpb25hbEdyb3VwID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmIChjaCA9PT0gJyMnICYmIHBlZWsoKSA9PT0gJ3snKSB7CiAgICAgICAgICAgICAgICBwcmludC5wcmVzZXJ2ZVNpbmdsZVNwYWNlKCk7CiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChlYXRTdHJpbmcoJ30nKSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2ggPT09ICd7JykgewogICAgICAgICAgICAgICAgaWYgKHBlZWsodHJ1ZSkgPT09ICd9JykgewogICAgICAgICAgICAgICAgICAgIGVhdFdoaXRlc3BhY2UoKTsKICAgICAgICAgICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgcHJpbnQuc2luZ2xlU3BhY2UoKTsKICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaCgie30iKTsKICAgICAgICAgICAgICAgICAgICBwcmludC5uZXdMaW5lKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld2xpbmVfYmV0d2Vlbl9ydWxlcyAmJiBpbmRlbnRMZXZlbCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBwcmludC5uZXdMaW5lKHRydWUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaW5kZW50KCk7CiAgICAgICAgICAgICAgICAgICAgcHJpbnRbInsiXShjaCk7CiAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiBlbnRlcmluZyBjb25kaXRpb25hbCBncm91cHMsIG9ubHkgcnVsZXNldHMgYXJlIGFsbG93ZWQKICAgICAgICAgICAgICAgICAgICBpZiAoZW50ZXJpbmdDb25kaXRpb25hbEdyb3VwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVudGVyaW5nQ29uZGl0aW9uYWxHcm91cCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBpbnNpZGVSdWxlID0gKGluZGVudExldmVsID4gbmVzdGVkTGV2ZWwpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSwgZGVjbGFyYXRpb25zIGFyZSBhbHNvIGFsbG93ZWQKICAgICAgICAgICAgICAgICAgICAgICAgaW5zaWRlUnVsZSA9IChpbmRlbnRMZXZlbCA+PSBuZXN0ZWRMZXZlbCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKGNoID09PSAnfScpIHsKICAgICAgICAgICAgICAgIG91dGRlbnQoKTsKICAgICAgICAgICAgICAgIHByaW50WyJ9Il0oY2gpOwogICAgICAgICAgICAgICAgaW5zaWRlUnVsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgaW5zaWRlUHJvcGVydHlWYWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgaWYgKG5lc3RlZExldmVsKSB7CiAgICAgICAgICAgICAgICAgICAgbmVzdGVkTGV2ZWwtLTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChuZXdsaW5lX2JldHdlZW5fcnVsZXMgJiYgaW5kZW50TGV2ZWwgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBwcmludC5uZXdMaW5lKHRydWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKGNoID09PSAiOiIpIHsKICAgICAgICAgICAgICAgIGVhdFdoaXRlc3BhY2UoKTsKICAgICAgICAgICAgICAgIGlmICgoaW5zaWRlUnVsZSB8fCBlbnRlcmluZ0NvbmRpdGlvbmFsR3JvdXApICYmCiAgICAgICAgICAgICAgICAgICAgIShsb29rQmFjaygiJiIpIHx8IGZvdW5kTmVzdGVkUHNldWRvQ2xhc3MoKSkgJiYKICAgICAgICAgICAgICAgICAgICAhbG9va0JhY2soIigiKSkgewogICAgICAgICAgICAgICAgICAgIC8vICdwcm9wZXJ0eTogdmFsdWUnIGRlbGltaXRlcgogICAgICAgICAgICAgICAgICAgIC8vIHdoaWNoIGNvdWxkIGJlIGluIGEgY29uZGl0aW9uYWwgZ3JvdXAgcXVlcnkKICAgICAgICAgICAgICAgICAgICBpbnNpZGVQcm9wZXJ0eVZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaCgnOicpOwogICAgICAgICAgICAgICAgICAgIHByaW50LnNpbmdsZVNwYWNlKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIHNhc3MvbGVzcyBwYXJlbnQgcmVmZXJlbmNlIGRvbid0IHVzZSBhIHNwYWNlCiAgICAgICAgICAgICAgICAgICAgLy8gc2FzcyBuZXN0ZWQgcHNldWRvLWNsYXNzIGRvbid0IHVzZSBhIHNwYWNlCgogICAgICAgICAgICAgICAgICAgIC8vIHByZXNlcnZlIHNwYWNlIGJlZm9yZSBwc2V1ZG9jbGFzc2VzL3BzZXVkb2VsZW1lbnRzLCBhcyBpdCBtZWFucyAiaW4gYW55IGNoaWxkIgogICAgICAgICAgICAgICAgICAgIGlmIChsb29rQmFjaygiICIpICYmIG91dHB1dFtvdXRwdXQubGVuZ3RoIC0gMV0gIT09ICIgIikgewogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaCgiICIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAocGVlaygpID09PSAiOiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHNldWRvLWVsZW1lbnQKICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaCgiOjoiKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBwc2V1ZG8tY2xhc3MKICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goJzonKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2ggPT09ICciJyB8fCBjaCA9PT0gJ1wnJykgewogICAgICAgICAgICAgICAgcHJpbnQucHJlc2VydmVTaW5nbGVTcGFjZSgpOwogICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goZWF0U3RyaW5nKGNoKSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2ggPT09ICc7JykgewogICAgICAgICAgICAgICAgaW5zaWRlUHJvcGVydHlWYWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goY2gpOwogICAgICAgICAgICAgICAgcHJpbnQubmV3TGluZSgpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGNoID09PSAnKCcpIHsgLy8gbWF5IGJlIGEgdXJsCiAgICAgICAgICAgICAgICBpZiAobG9va0JhY2soInVybCIpKSB7CiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goY2gpOwogICAgICAgICAgICAgICAgICAgIGVhdFdoaXRlc3BhY2UoKTsKICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaCAhPT0gJyknICYmIGNoICE9PSAnIicgJiYgY2ggIT09ICdcJycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKGVhdFN0cmluZygnKScpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcy0tOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBwYXJlbkxldmVsKys7CiAgICAgICAgICAgICAgICAgICAgcHJpbnQucHJlc2VydmVTaW5nbGVTcGFjZSgpOwogICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKGNoKTsKICAgICAgICAgICAgICAgICAgICBlYXRXaGl0ZXNwYWNlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2ggPT09ICcpJykgewogICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goY2gpOwogICAgICAgICAgICAgICAgcGFyZW5MZXZlbC0tOwogICAgICAgICAgICB9IGVsc2UgaWYgKGNoID09PSAnLCcpIHsKICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKGNoKTsKICAgICAgICAgICAgICAgIGVhdFdoaXRlc3BhY2UoKTsKICAgICAgICAgICAgICAgIGlmIChzZWxlY3RvclNlcGFyYXRvck5ld2xpbmUgJiYgIWluc2lkZVByb3BlcnR5VmFsdWUgJiYgcGFyZW5MZXZlbCA8IDEpIHsKICAgICAgICAgICAgICAgICAgICBwcmludC5uZXdMaW5lKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHByaW50LnNpbmdsZVNwYWNlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2ggPT09ICc+JyB8fCBjaCA9PT0gJysnIHx8IGNoID09PSAnficpIHsKICAgICAgICAgICAgICAgIC8vaGFuZGwgc2VsZWN0b3Igc2VwYXJhdG9yIHNwYWNpbmcKICAgICAgICAgICAgICAgIGlmIChzcGFjZUFyb3VuZFNlbGVjdG9yU2VwYXJhdG9yICYmICFpbnNpZGVQcm9wZXJ0eVZhbHVlICYmIHBhcmVuTGV2ZWwgPCAxKSB7CiAgICAgICAgICAgICAgICAgICAgcHJpbnQuc2luZ2xlU3BhY2UoKTsKICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChjaCk7CiAgICAgICAgICAgICAgICAgICAgcHJpbnQuc2luZ2xlU3BhY2UoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goY2gpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKGNoID09PSAnXScpIHsKICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKGNoKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChjaCA9PT0gJ1snKSB7CiAgICAgICAgICAgICAgICBwcmludC5wcmVzZXJ2ZVNpbmdsZVNwYWNlKCk7CiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChjaCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2ggPT09ICc9JykgeyAvLyBubyB3aGl0ZXNwYWNlIGJlZm9yZSBvciBhZnRlcgogICAgICAgICAgICAgICAgZWF0V2hpdGVzcGFjZSgpOwogICAgICAgICAgICAgICAgY2ggPSAnPSc7CiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChjaCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBwcmludC5wcmVzZXJ2ZVNpbmdsZVNwYWNlKCk7CiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChjaCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgoKICAgICAgICB2YXIgc3dlZXRDb2RlID0gJyc7CiAgICAgICAgaWYgKGJhc2ViYXNlSW5kZW50U3RyaW5nKSB7CiAgICAgICAgICAgIHN3ZWV0Q29kZSArPSBiYXNlYmFzZUluZGVudFN0cmluZzsKICAgICAgICB9CgogICAgICAgIHN3ZWV0Q29kZSArPSBvdXRwdXQuam9pbignJykucmVwbGFjZSgvW1xyXG5cdCBdKyQvLCAnJyk7CgogICAgICAgIC8vIGVzdGFibGlzaCBlbmRfd2l0aF9uZXdsaW5lCiAgICAgICAgaWYgKGVuZF93aXRoX25ld2xpbmUpIHsKICAgICAgICAgICAgc3dlZXRDb2RlICs9ICdcbic7CiAgICAgICAgfQoKICAgICAgICBpZiAoZW9sICE9PSAnXG4nKSB7CiAgICAgICAgICAgIHN3ZWV0Q29kZSA9IHN3ZWV0Q29kZS5yZXBsYWNlKC9bXG5dL2csIGVvbCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gc3dlZXRDb2RlOwogICAgfQoKICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9BdC1ydWxlCiAgICBjc3NfYmVhdXRpZnkuTkVTVEVEX0FUX1JVTEUgPSB7CiAgICAgICAgIkBwYWdlIjogdHJ1ZSwKICAgICAgICAiQGZvbnQtZmFjZSI6IHRydWUsCiAgICAgICAgIkBrZXlmcmFtZXMiOiB0cnVlLAogICAgICAgIC8vIGFsc28gaW4gQ09ORElUSU9OQUxfR1JPVVBfUlVMRSBiZWxvdwogICAgICAgICJAbWVkaWEiOiB0cnVlLAogICAgICAgICJAc3VwcG9ydHMiOiB0cnVlLAogICAgICAgICJAZG9jdW1lbnQiOiB0cnVlCiAgICB9OwogICAgY3NzX2JlYXV0aWZ5LkNPTkRJVElPTkFMX0dST1VQX1JVTEUgPSB7CiAgICAgICAgIkBtZWRpYSI6IHRydWUsCiAgICAgICAgIkBzdXBwb3J0cyI6IHRydWUsCiAgICAgICAgIkBkb2N1bWVudCI6IHRydWUKICAgIH07CgogICAgLypnbG9iYWwgZGVmaW5lICovCiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gImZ1bmN0aW9uIiAmJiBkZWZpbmUuYW1kKSB7CiAgICAgICAgLy8gQWRkIHN1cHBvcnQgZm9yIEFNRCAoIGh0dHBzOi8vZ2l0aHViLmNvbS9hbWRqcy9hbWRqcy1hcGkvd2lraS9BTUQjZGVmaW5lYW1kLXByb3BlcnR5LSApCiAgICAgICAgZGVmaW5lKFtdLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGNzc19iZWF1dGlmeTogY3NzX2JlYXV0aWZ5CiAgICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAidW5kZWZpbmVkIikgewogICAgICAgIC8vIEFkZCBzdXBwb3J0IGZvciBDb21tb25KUy4gSnVzdCBwdXQgdGhpcyBmaWxlIHNvbWV3aGVyZSBvbiB5b3VyIHJlcXVpcmUucGF0aHMKICAgICAgICAvLyBhbmQgeW91IHdpbGwgYmUgYWJsZSB0byBgdmFyIGh0bWxfYmVhdXRpZnkgPSByZXF1aXJlKCJiZWF1dGlmeSIpLmh0bWxfYmVhdXRpZnlgLgogICAgICAgIGV4cG9ydHMuY3NzX2JlYXV0aWZ5ID0gY3NzX2JlYXV0aWZ5OwogICAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIikgewogICAgICAgIC8vIElmIHdlJ3JlIHJ1bm5pbmcgYSB3ZWIgcGFnZSBhbmQgZG9uJ3QgaGF2ZSBlaXRoZXIgb2YgdGhlIGFib3ZlLCBhZGQgb3VyIG9uZSBnbG9iYWwKICAgICAgICB3aW5kb3cuY3NzX2JlYXV0aWZ5ID0gY3NzX2JlYXV0aWZ5OwogICAgfSBlbHNlIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIikgewogICAgICAgIC8vIElmIHdlIGRvbid0IGV2ZW4gaGF2ZSB3aW5kb3csIHRyeSBnbG9iYWwuCiAgICAgICAgZ2xvYmFsLmNzc19iZWF1dGlmeSA9IGNzc19iZWF1dGlmeTsKICAgIH0KCn0oKSk7"></script>
    <script src="data:application/x-javascript;base64,Lypqc2hpbnQgY3VybHk6dHJ1ZSwgZXFlcWVxOnRydWUsIGxheGJyZWFrOnRydWUsIG5vZW1wdHk6ZmFsc2UgKi8KLyoKCiAgVGhlIE1JVCBMaWNlbnNlIChNSVQpCgogIENvcHlyaWdodCAoYykgMjAwNy0yMDEzIEVpbmFyIExpZWxtYW5pcyBhbmQgY29udHJpYnV0b3JzLgoKICBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbgogIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzCiAgKHRoZSAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwKICBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLAogIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsCiAgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywKICBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKCiAgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUKICBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KCiAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsCiAgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCiAgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQKICBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTCiAgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOCiAgQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4KICBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFCiAgU09GVFdBUkUuCgoKIFN0eWxlIEhUTUwKLS0tLS0tLS0tLS0tLS0tCgogIFdyaXR0ZW4gYnkgTm9jaHVtIFNvc3NvbmtvLCAobnNvc3NvbmtvQGhvdG1haWwuY29tKQoKICBCYXNlZCBvbiBjb2RlIGluaXRpYWxseSBkZXZlbG9wZWQgYnk6IEVpbmFyIExpZWxtYW5pcywgPGVpbmFyQGpzYmVhdXRpZmllci5vcmc+CiAgICBodHRwOi8vanNiZWF1dGlmaWVyLm9yZy8KCiAgVXNhZ2U6CiAgICBzdHlsZV9odG1sKGh0bWxfc291cmNlKTsKCiAgICBzdHlsZV9odG1sKGh0bWxfc291cmNlLCBvcHRpb25zKTsKCiAgVGhlIG9wdGlvbnMgYXJlOgogICAgaW5kZW50X2lubmVyX2h0bWwgKGRlZmF1bHQgZmFsc2UpICDigJQgaW5kZW50IDxoZWFkPiBhbmQgPGJvZHk+IHNlY3Rpb25zLAogICAgaW5kZW50X3NpemUgKGRlZmF1bHQgNCkgICAgICAgICAg4oCUIGluZGVudGF0aW9uIHNpemUsCiAgICBpbmRlbnRfY2hhciAoZGVmYXVsdCBzcGFjZSkgICAgICDigJQgY2hhcmFjdGVyIHRvIGluZGVudCB3aXRoLAogICAgd3JhcF9saW5lX2xlbmd0aCAoZGVmYXVsdCAyNTApICAgICAgICAgICAgLSAgbWF4aW11bSBhbW91bnQgb2YgY2hhcmFjdGVycyBwZXIgbGluZSAoMCA9IGRpc2FibGUpCiAgICBicmFjZV9zdHlsZSAoZGVmYXVsdCAiY29sbGFwc2UiKSAtICJjb2xsYXBzZSIgfCAiZXhwYW5kIiB8ICJlbmQtZXhwYW5kIiB8ICJub25lIgogICAgICAgICAgICBwdXQgYnJhY2VzIG9uIHRoZSBzYW1lIGxpbmUgYXMgY29udHJvbCBzdGF0ZW1lbnRzIChkZWZhdWx0KSwgb3IgcHV0IGJyYWNlcyBvbiBvd24gbGluZSAoQWxsbWFuIC8gQU5TSSBzdHlsZSksIG9yIGp1c3QgcHV0IGVuZCBicmFjZXMgb24gb3duIGxpbmUsIG9yIGF0dGVtcHQgdG8ga2VlcCB0aGVtIHdoZXJlIHRoZXkgYXJlLgogICAgdW5mb3JtYXR0ZWQgKGRlZmF1bHRzIHRvIGlubGluZSB0YWdzKSAtIGxpc3Qgb2YgdGFncywgdGhhdCBzaG91bGRuJ3QgYmUgcmVmb3JtYXR0ZWQKICAgIGluZGVudF9zY3JpcHRzIChkZWZhdWx0IG5vcm1hbCkgIC0gImtlZXAifCJzZXBhcmF0ZSJ8Im5vcm1hbCIKICAgIHByZXNlcnZlX25ld2xpbmVzIChkZWZhdWx0IHRydWUpIC0gd2hldGhlciBleGlzdGluZyBsaW5lIGJyZWFrcyBiZWZvcmUgZWxlbWVudHMgc2hvdWxkIGJlIHByZXNlcnZlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT25seSB3b3JrcyBiZWZvcmUgZWxlbWVudHMsIG5vdCBpbnNpZGUgdGFncyBvciBmb3IgdGV4dC4KICAgIG1heF9wcmVzZXJ2ZV9uZXdsaW5lcyAoZGVmYXVsdCB1bmxpbWl0ZWQpIC0gbWF4aW11bSBudW1iZXIgb2YgbGluZSBicmVha3MgdG8gYmUgcHJlc2VydmVkIGluIG9uZSBjaHVuawogICAgaW5kZW50X2hhbmRsZWJhcnMgKGRlZmF1bHQgZmFsc2UpIC0gZm9ybWF0IGFuZCBpbmRlbnQge3sjZm9vfX0gYW5kIHt7L2Zvb319CiAgICBlbmRfd2l0aF9uZXdsaW5lIChmYWxzZSkgICAgICAgICAgLSBlbmQgd2l0aCBhIG5ld2xpbmUKICAgIGV4dHJhX2xpbmVycyAoZGVmYXVsdCBbaGVhZCxib2R5LC9odG1sXSkgLUxpc3Qgb2YgdGFncyB0aGF0IHNob3VsZCBoYXZlIGFuIGV4dHJhIG5ld2xpbmUgYmVmb3JlIHRoZW0uCgogICAgZS5nLgoKICAgIHN0eWxlX2h0bWwoaHRtbF9zb3VyY2UsIHsKICAgICAgJ2luZGVudF9pbm5lcl9odG1sJzogZmFsc2UsCiAgICAgICdpbmRlbnRfc2l6ZSc6IDIsCiAgICAgICdpbmRlbnRfY2hhcic6ICcgJywKICAgICAgJ3dyYXBfbGluZV9sZW5ndGgnOiA3OCwKICAgICAgJ2JyYWNlX3N0eWxlJzogJ2V4cGFuZCcsCiAgICAgICdwcmVzZXJ2ZV9uZXdsaW5lcyc6IHRydWUsCiAgICAgICdtYXhfcHJlc2VydmVfbmV3bGluZXMnOiA1LAogICAgICAnaW5kZW50X2hhbmRsZWJhcnMnOiBmYWxzZSwKICAgICAgJ2V4dHJhX2xpbmVycyc6IFsnL2h0bWwnXQogICAgfSk7CiovCgooZnVuY3Rpb24oKSB7CgogICAgLy8gZnVuY3Rpb24gdHJpbShzKSB7CiAgICAvLyAgICAgcmV0dXJuIHMucmVwbGFjZSgvXlxzK3xccyskL2csICcnKTsKICAgIC8vIH0KCiAgICBmdW5jdGlvbiBsdHJpbShzKSB7CiAgICAgICAgcmV0dXJuIHMucmVwbGFjZSgvXlxzKy9nLCAnJyk7CiAgICB9CgogICAgZnVuY3Rpb24gcnRyaW0ocykgewogICAgICAgIHJldHVybiBzLnJlcGxhY2UoL1xzKyQvZywgJycpOwogICAgfQoKICAgIGZ1bmN0aW9uIHN0eWxlX2h0bWwoaHRtbF9zb3VyY2UsIG9wdGlvbnMsIGpzX2JlYXV0aWZ5LCBjc3NfYmVhdXRpZnkpIHsKICAgICAgICAvL1dyYXBwZXIgZnVuY3Rpb24gdG8gaW52b2tlIGFsbCB0aGUgbmVjZXNzYXJ5IGNvbnN0cnVjdG9ycyBhbmQgZGVhbCB3aXRoIHRoZSBvdXRwdXQuCgogICAgICAgIHZhciBtdWx0aV9wYXJzZXIsCiAgICAgICAgICAgIGluZGVudF9pbm5lcl9odG1sLAogICAgICAgICAgICBpbmRlbnRfYm9keV9pbm5lcl9odG1sLAogICAgICAgICAgICBpbmRlbnRfaGVhZF9pbm5lcl9odG1sLAogICAgICAgICAgICBpbmRlbnRfc2l6ZSwKICAgICAgICAgICAgaW5kZW50X2NoYXJhY3RlciwKICAgICAgICAgICAgd3JhcF9saW5lX2xlbmd0aCwKICAgICAgICAgICAgYnJhY2Vfc3R5bGUsCiAgICAgICAgICAgIHVuZm9ybWF0dGVkLAogICAgICAgICAgICBwcmVzZXJ2ZV9uZXdsaW5lcywKICAgICAgICAgICAgbWF4X3ByZXNlcnZlX25ld2xpbmVzLAogICAgICAgICAgICBpbmRlbnRfaGFuZGxlYmFycywKICAgICAgICAgICAgd3JhcF9hdHRyaWJ1dGVzLAogICAgICAgICAgICB3cmFwX2F0dHJpYnV0ZXNfaW5kZW50X3NpemUsCiAgICAgICAgICAgIGVuZF93aXRoX25ld2xpbmUsCiAgICAgICAgICAgIGV4dHJhX2xpbmVycywKICAgICAgICAgICAgZW9sOwoKICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgICAgICAgLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgdG8gMS4zLjQKICAgICAgICBpZiAoKG9wdGlvbnMud3JhcF9saW5lX2xlbmd0aCA9PT0gdW5kZWZpbmVkIHx8IHBhcnNlSW50KG9wdGlvbnMud3JhcF9saW5lX2xlbmd0aCwgMTApID09PSAwKSAmJgogICAgICAgICAgICAob3B0aW9ucy5tYXhfY2hhciAhPT0gdW5kZWZpbmVkICYmIHBhcnNlSW50KG9wdGlvbnMubWF4X2NoYXIsIDEwKSAhPT0gMCkpIHsKICAgICAgICAgICAgb3B0aW9ucy53cmFwX2xpbmVfbGVuZ3RoID0gb3B0aW9ucy5tYXhfY2hhcjsKICAgICAgICB9CgogICAgICAgIGluZGVudF9pbm5lcl9odG1sID0gKG9wdGlvbnMuaW5kZW50X2lubmVyX2h0bWwgPT09IHVuZGVmaW5lZCkgPyBmYWxzZSA6IG9wdGlvbnMuaW5kZW50X2lubmVyX2h0bWw7CiAgICAgICAgaW5kZW50X2JvZHlfaW5uZXJfaHRtbCA9IChvcHRpb25zLmluZGVudF9ib2R5X2lubmVyX2h0bWwgPT09IHVuZGVmaW5lZCkgPyB0cnVlIDogb3B0aW9ucy5pbmRlbnRfYm9keV9pbm5lcl9odG1sOwogICAgICAgIGluZGVudF9oZWFkX2lubmVyX2h0bWwgPSAob3B0aW9ucy5pbmRlbnRfaGVhZF9pbm5lcl9odG1sID09PSB1bmRlZmluZWQpID8gdHJ1ZSA6IG9wdGlvbnMuaW5kZW50X2hlYWRfaW5uZXJfaHRtbDsKICAgICAgICBpbmRlbnRfc2l6ZSA9IChvcHRpb25zLmluZGVudF9zaXplID09PSB1bmRlZmluZWQpID8gNCA6IHBhcnNlSW50KG9wdGlvbnMuaW5kZW50X3NpemUsIDEwKTsKICAgICAgICBpbmRlbnRfY2hhcmFjdGVyID0gKG9wdGlvbnMuaW5kZW50X2NoYXIgPT09IHVuZGVmaW5lZCkgPyAnICcgOiBvcHRpb25zLmluZGVudF9jaGFyOwogICAgICAgIGJyYWNlX3N0eWxlID0gKG9wdGlvbnMuYnJhY2Vfc3R5bGUgPT09IHVuZGVmaW5lZCkgPyAnY29sbGFwc2UnIDogb3B0aW9ucy5icmFjZV9zdHlsZTsKICAgICAgICB3cmFwX2xpbmVfbGVuZ3RoID0gcGFyc2VJbnQob3B0aW9ucy53cmFwX2xpbmVfbGVuZ3RoLCAxMCkgPT09IDAgPyAzMjc4NiA6IHBhcnNlSW50KG9wdGlvbnMud3JhcF9saW5lX2xlbmd0aCB8fCAyNTAsIDEwKTsKICAgICAgICB1bmZvcm1hdHRlZCA9IG9wdGlvbnMudW5mb3JtYXR0ZWQgfHwgWwogICAgICAgICAgICAvLyBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZG9tLmh0bWwjcGhyYXNpbmctY29udGVudAogICAgICAgICAgICAnYScsICdhYmJyJywgJ2FyZWEnLCAnYXVkaW8nLCAnYicsICdiZGknLCAnYmRvJywgJ2JyJywgJ2J1dHRvbicsICdjYW52YXMnLCAnY2l0ZScsCiAgICAgICAgICAgICdjb2RlJywgJ2RhdGEnLCAnZGF0YWxpc3QnLCAnZGVsJywgJ2RmbicsICdlbScsICdlbWJlZCcsICdpJywgJ2lmcmFtZScsICdpbWcnLAogICAgICAgICAgICAnaW5wdXQnLCAnaW5zJywgJ2tiZCcsICdrZXlnZW4nLCAnbGFiZWwnLCAnbWFwJywgJ21hcmsnLCAnbWF0aCcsICdtZXRlcicsICdub3NjcmlwdCcsCiAgICAgICAgICAgICdvYmplY3QnLCAnb3V0cHV0JywgJ3Byb2dyZXNzJywgJ3EnLCAncnVieScsICdzJywgJ3NhbXAnLCAvKiAnc2NyaXB0JywgKi8gJ3NlbGVjdCcsICdzbWFsbCcsCiAgICAgICAgICAgICdzcGFuJywgJ3N0cm9uZycsICdzdWInLCAnc3VwJywgJ3N2ZycsICd0ZW1wbGF0ZScsICd0ZXh0YXJlYScsICd0aW1lJywgJ3UnLCAndmFyJywKICAgICAgICAgICAgJ3ZpZGVvJywgJ3dicicsICd0ZXh0JywKICAgICAgICAgICAgLy8gcHJleGlzdGluZyAtIG5vdCBzdXJlIG9mIGZ1bGwgZWZmZWN0IG9mIHJlbW92aW5nLCBsZWF2aW5nIGluCiAgICAgICAgICAgICdhY3JvbnltJywgJ2FkZHJlc3MnLCAnYmlnJywgJ2R0JywgJ2lucycsICdzbWFsbCcsICdzdHJpa2UnLCAndHQnLAogICAgICAgICAgICAncHJlJywKICAgICAgICBdOwogICAgICAgIHByZXNlcnZlX25ld2xpbmVzID0gKG9wdGlvbnMucHJlc2VydmVfbmV3bGluZXMgPT09IHVuZGVmaW5lZCkgPyB0cnVlIDogb3B0aW9ucy5wcmVzZXJ2ZV9uZXdsaW5lczsKICAgICAgICBtYXhfcHJlc2VydmVfbmV3bGluZXMgPSBwcmVzZXJ2ZV9uZXdsaW5lcyA/CiAgICAgICAgICAgIChpc05hTihwYXJzZUludChvcHRpb25zLm1heF9wcmVzZXJ2ZV9uZXdsaW5lcywgMTApKSA/IDMyNzg2IDogcGFyc2VJbnQob3B0aW9ucy5tYXhfcHJlc2VydmVfbmV3bGluZXMsIDEwKSkgOgogICAgICAgICAgICAwOwogICAgICAgIGluZGVudF9oYW5kbGViYXJzID0gKG9wdGlvbnMuaW5kZW50X2hhbmRsZWJhcnMgPT09IHVuZGVmaW5lZCkgPyBmYWxzZSA6IG9wdGlvbnMuaW5kZW50X2hhbmRsZWJhcnM7CiAgICAgICAgd3JhcF9hdHRyaWJ1dGVzID0gKG9wdGlvbnMud3JhcF9hdHRyaWJ1dGVzID09PSB1bmRlZmluZWQpID8gJ2F1dG8nIDogb3B0aW9ucy53cmFwX2F0dHJpYnV0ZXM7CiAgICAgICAgd3JhcF9hdHRyaWJ1dGVzX2luZGVudF9zaXplID0gKGlzTmFOKHBhcnNlSW50KG9wdGlvbnMud3JhcF9hdHRyaWJ1dGVzX2luZGVudF9zaXplLCAxMCkpKSA/IGluZGVudF9zaXplIDogcGFyc2VJbnQob3B0aW9ucy53cmFwX2F0dHJpYnV0ZXNfaW5kZW50X3NpemUsIDEwKTsKICAgICAgICBlbmRfd2l0aF9uZXdsaW5lID0gKG9wdGlvbnMuZW5kX3dpdGhfbmV3bGluZSA9PT0gdW5kZWZpbmVkKSA/IGZhbHNlIDogb3B0aW9ucy5lbmRfd2l0aF9uZXdsaW5lOwogICAgICAgIGV4dHJhX2xpbmVycyA9ICh0eXBlb2Ygb3B0aW9ucy5leHRyYV9saW5lcnMgPT09ICdvYmplY3QnKSAmJiBvcHRpb25zLmV4dHJhX2xpbmVycyA/CiAgICAgICAgICAgIG9wdGlvbnMuZXh0cmFfbGluZXJzLmNvbmNhdCgpIDogKHR5cGVvZiBvcHRpb25zLmV4dHJhX2xpbmVycyA9PT0gJ3N0cmluZycpID8KICAgICAgICAgICAgb3B0aW9ucy5leHRyYV9saW5lcnMuc3BsaXQoJywnKSA6ICdoZWFkLGJvZHksL2h0bWwnLnNwbGl0KCcsJyk7CiAgICAgICAgZW9sID0gb3B0aW9ucy5lb2wgPyBvcHRpb25zLmVvbCA6ICdcbic7CgogICAgICAgIGlmIChvcHRpb25zLmluZGVudF93aXRoX3RhYnMpIHsKICAgICAgICAgICAgaW5kZW50X2NoYXJhY3RlciA9ICdcdCc7CiAgICAgICAgICAgIGluZGVudF9zaXplID0gMTsKICAgICAgICB9CgogICAgICAgIGVvbCA9IGVvbC5yZXBsYWNlKC9cXHIvLCAnXHInKS5yZXBsYWNlKC9cXG4vLCAnXG4nKTsKCiAgICAgICAgZnVuY3Rpb24gUGFyc2VyKCkgewoKICAgICAgICAgICAgdGhpcy5wb3MgPSAwOyAvL1BhcnNlciBwb3NpdGlvbgogICAgICAgICAgICB0aGlzLnRva2VuID0gJyc7CiAgICAgICAgICAgIHRoaXMuY3VycmVudF9tb2RlID0gJ0NPTlRFTlQnOyAvL3JlZmxlY3RzIHRoZSBjdXJyZW50IFBhcnNlciBtb2RlOiBUQUcvQ09OVEVOVAogICAgICAgICAgICB0aGlzLnRhZ3MgPSB7IC8vQW4gb2JqZWN0IHRvIGhvbGQgdGFncywgdGhlaXIgcG9zaXRpb24sIGFuZCB0aGVpciBwYXJlbnQtdGFncywgaW5pdGlhdGVkIHdpdGggZGVmYXVsdCB2YWx1ZXMKICAgICAgICAgICAgICAgIHBhcmVudDogJ3BhcmVudDEnLAogICAgICAgICAgICAgICAgcGFyZW50Y291bnQ6IDEsCiAgICAgICAgICAgICAgICBwYXJlbnQxOiAnJwogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLnRhZ190eXBlID0gJyc7CiAgICAgICAgICAgIHRoaXMudG9rZW5fdGV4dCA9IHRoaXMubGFzdF90b2tlbiA9IHRoaXMubGFzdF90ZXh0ID0gdGhpcy50b2tlbl90eXBlID0gJyc7CiAgICAgICAgICAgIHRoaXMubmV3bGluZXMgPSAwOwogICAgICAgICAgICB0aGlzLmluZGVudF9jb250ZW50ID0gaW5kZW50X2lubmVyX2h0bWw7CiAgICAgICAgICAgIHRoaXMuaW5kZW50X2JvZHlfaW5uZXJfaHRtbCA9IGluZGVudF9ib2R5X2lubmVyX2h0bWw7CiAgICAgICAgICAgIHRoaXMuaW5kZW50X2hlYWRfaW5uZXJfaHRtbCA9IGluZGVudF9oZWFkX2lubmVyX2h0bWw7CgogICAgICAgICAgICB0aGlzLlV0aWxzID0geyAvL1VpbGl0aWVzIG1hZGUgYXZhaWxhYmxlIHRvIHRoZSB2YXJpb3VzIGZ1bmN0aW9ucwogICAgICAgICAgICAgICAgd2hpdGVzcGFjZTogIlxuXHJcdCAiLnNwbGl0KCcnKSwKCiAgICAgICAgICAgICAgICBzaW5nbGVfdG9rZW46IFsKICAgICAgICAgICAgICAgICAgICAvLyBIVExNIHZvaWQgZWxlbWVudHMgLSBha2Egc2VsZi1jbG9zaW5nIHRhZ3MgLSBha2Egc2luZ2xldG9ucwogICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vd3d3LnczLm9yZy9odG1sL3dnL2RyYWZ0cy9odG1sL21hc3Rlci9zeW50YXguaHRtbCN2b2lkLWVsZW1lbnRzCiAgICAgICAgICAgICAgICAgICAgJ2FyZWEnLCAnYmFzZScsICdicicsICdjb2wnLCAnZW1iZWQnLCAnaHInLCAnaW1nJywgJ2lucHV0JywgJ2tleWdlbicsCiAgICAgICAgICAgICAgICAgICAgJ2xpbmsnLCAnbWVudWl0ZW0nLCAnbWV0YScsICdwYXJhbScsICdzb3VyY2UnLCAndHJhY2snLCAnd2JyJywKICAgICAgICAgICAgICAgICAgICAvLyBOT1RFOiBPcHRpb25hbCB0YWdzIC0gYXJlIG5vdCB1bmRlcnN0b29kLgogICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9zeW50YXguaHRtbCNvcHRpb25hbC10YWdzCiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHJ1bGVzIGZvciBvcHRpb25hbCB0YWdzIGFyZSB0b28gY29tcGxleCBmb3IgYSBzaW1wbGUgbGlzdAogICAgICAgICAgICAgICAgICAgIC8vIEFsc28sIHRoZSBjb250ZW50IG9mIHRoZXNlIHRhZ3Mgc2hvdWxkIHN0aWxsIGJlIGluZGVudGVkIGluIG1hbnkgY2FzZXMuCiAgICAgICAgICAgICAgICAgICAgLy8gJ2xpJyBpcyBhIGdvb2QgZXhtcGxlLgoKICAgICAgICAgICAgICAgICAgICAvLyBEb2N0eXBlIGFuZCB4bWwgZWxlbWVudHMKICAgICAgICAgICAgICAgICAgICAnIWRvY3R5cGUnLCAnP3htbCcsCiAgICAgICAgICAgICAgICAgICAgLy8gP3BocCB0YWcKICAgICAgICAgICAgICAgICAgICAnP3BocCcsCiAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXIgdGFncyB0aGF0IHdlcmUgaW4gdGhpcyBsaXN0LCBrZWVwaW5nIGp1c3QgaW4gY2FzZQogICAgICAgICAgICAgICAgICAgICdiYXNlZm9udCcsICdpc2luZGV4JwogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIGV4dHJhX2xpbmVyczogZXh0cmFfbGluZXJzLCAvL2ZvciB0YWdzIHRoYXQgbmVlZCBhIGxpbmUgb2Ygd2hpdGVzcGFjZSBiZWZvcmUgdGhlbQogICAgICAgICAgICAgICAgaW5fYXJyYXk6IGZ1bmN0aW9uKHdoYXQsIGFycikgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aGF0ID09PSBhcnJbaV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vIFJldHVybiB0cnVlIGlmIHRoZSBnaXZlbiB0ZXh0IGlzIGNvbXBvc2VkIGVudGlyZWx5IG9mIHdoaXRlc3BhY2UuCiAgICAgICAgICAgIHRoaXMuaXNfd2hpdGVzcGFjZSA9IGZ1bmN0aW9uKHRleHQpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgdGV4dC5sZW5ndGg7IG4rKykgewogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5VdGlscy5pbl9hcnJheSh0ZXh0LmNoYXJBdChuKSwgdGhpcy5VdGlscy53aGl0ZXNwYWNlKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0aGlzLnRyYXZlcnNlX3doaXRlc3BhY2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBpbnB1dF9jaGFyID0gJyc7CgogICAgICAgICAgICAgICAgaW5wdXRfY2hhciA9IHRoaXMuaW5wdXQuY2hhckF0KHRoaXMucG9zKTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLlV0aWxzLmluX2FycmF5KGlucHV0X2NoYXIsIHRoaXMuVXRpbHMud2hpdGVzcGFjZSkpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld2xpbmVzID0gMDsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5VdGlscy5pbl9hcnJheShpbnB1dF9jaGFyLCB0aGlzLlV0aWxzLndoaXRlc3BhY2UpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmVzZXJ2ZV9uZXdsaW5lcyAmJiBpbnB1dF9jaGFyID09PSAnXG4nICYmIHRoaXMubmV3bGluZXMgPD0gbWF4X3ByZXNlcnZlX25ld2xpbmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld2xpbmVzICs9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zKys7CiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0X2NoYXIgPSB0aGlzLmlucHV0LmNoYXJBdCh0aGlzLnBvcyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gQXBwZW5kIGEgc3BhY2UgdG8gdGhlIGdpdmVuIGNvbnRlbnQgKHN0cmluZyBhcnJheSkgb3IsIGlmIHdlIGFyZQogICAgICAgICAgICAvLyBhdCB0aGUgd3JhcF9saW5lX2xlbmd0aCwgYXBwZW5kIGEgbmV3bGluZS9pbmRlbnRhdGlvbi4KICAgICAgICAgICAgLy8gcmV0dXJuIHRydWUgaWYgYSBuZXdsaW5lIHdhcyBhZGRlZCwgZmFsc2UgaWYgYSBzcGFjZSB3YXMgYWRkZWQKICAgICAgICAgICAgdGhpcy5zcGFjZV9vcl93cmFwID0gZnVuY3Rpb24oY29udGVudCkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMubGluZV9jaGFyX2NvdW50ID49IHRoaXMud3JhcF9saW5lX2xlbmd0aCkgeyAvL2luc2VydCBhIGxpbmUgd2hlbiB0aGUgd3JhcF9saW5lX2xlbmd0aCBpcyByZWFjaGVkCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmludF9uZXdsaW5lKGZhbHNlLCBjb250ZW50KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnByaW50X2luZGVudGF0aW9uKGNvbnRlbnQpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmVfY2hhcl9jb3VudCsrOwogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQucHVzaCgnICcpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHRoaXMuZ2V0X2NvbnRlbnQgPSBmdW5jdGlvbigpIHsgLy9mdW5jdGlvbiB0byBjYXB0dXJlIHJlZ3VsYXIgY29udGVudCBiZXR3ZWVuIHRhZ3MKICAgICAgICAgICAgICAgIHZhciBpbnB1dF9jaGFyID0gJycsCiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IFtdOwoKICAgICAgICAgICAgICAgIHdoaWxlICh0aGlzLmlucHV0LmNoYXJBdCh0aGlzLnBvcykgIT09ICc8JykgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBvcyA+PSB0aGlzLmlucHV0Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudC5sZW5ndGggPyBjb250ZW50LmpvaW4oJycpIDogWycnLCAnVEtfRU9GJ107CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50cmF2ZXJzZV93aGl0ZXNwYWNlKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGFjZV9vcl93cmFwKGNvbnRlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChpbmRlbnRfaGFuZGxlYmFycykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGViYXJzIHBhcnNpbmcgaXMgY29tcGxpY2F0ZWQuCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHt7I2Zvb319IGFuZCB7ey9mb299fSBhcmUgZm9ybWF0dGVkIHRhZ3MuCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHt7c29tZXRoaW5nfX0gc2hvdWxkIGdldCB0cmVhdGVkIGFzIGNvbnRlbnQsIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICAgICAgLy8ge3tlbHNlfX0gc3BlY2lmaWNhbGx5IGJlaGF2ZXMgbGlrZSB7eyNpZn19IGFuZCB7ey9pZn19CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwZWVrMyA9IHRoaXMuaW5wdXQuc3Vic3RyKHRoaXMucG9zLCAzKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZWszID09PSAne3sjJyB8fCBwZWVrMyA9PT0gJ3t7LycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZXNlIGFyZSB0YWdzIGFuZCBub3QgY29udGVudC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBlZWszID09PSAne3shJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFt0aGlzLmdldF90YWcoKSwgJ1RLX1RBR19IQU5ETEVCQVJTX0NPTU1FTlQnXTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlucHV0LnN1YnN0cih0aGlzLnBvcywgMikgPT09ICd7eycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdldF90YWcodHJ1ZSkgPT09ICd7e2Vsc2V9fScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaW5wdXRfY2hhciA9IHRoaXMuaW5wdXQuY2hhckF0KHRoaXMucG9zKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcysrOwogICAgICAgICAgICAgICAgICAgIHRoaXMubGluZV9jaGFyX2NvdW50Kys7CiAgICAgICAgICAgICAgICAgICAgY29udGVudC5wdXNoKGlucHV0X2NoYXIpOyAvL2xldHRlciBhdC1hLXRpbWUgKG9yIHN0cmluZykgaW5zZXJ0ZWQgdG8gYW4gYXJyYXkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50Lmxlbmd0aCA/IGNvbnRlbnQuam9pbignJykgOiAnJzsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHRoaXMuZ2V0X2NvbnRlbnRzX3RvID0gZnVuY3Rpb24obmFtZSkgeyAvL2dldCB0aGUgZnVsbCBjb250ZW50IG9mIGEgc2NyaXB0IG9yIHN0eWxlIHRvIHBhc3MgdG8ganNfYmVhdXRpZnkKICAgICAgICAgICAgICAgIGlmICh0aGlzLnBvcyA9PT0gdGhpcy5pbnB1dC5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gWycnLCAnVEtfRU9GJ107CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9ICcnOwogICAgICAgICAgICAgICAgdmFyIHJlZ19tYXRjaCA9IG5ldyBSZWdFeHAoJzwvJyArIG5hbWUgKyAnXFxzKj4nLCAnaWdtJyk7CiAgICAgICAgICAgICAgICByZWdfbWF0Y2gubGFzdEluZGV4ID0gdGhpcy5wb3M7CiAgICAgICAgICAgICAgICB2YXIgcmVnX2FycmF5ID0gcmVnX21hdGNoLmV4ZWModGhpcy5pbnB1dCk7CiAgICAgICAgICAgICAgICB2YXIgZW5kX3NjcmlwdCA9IHJlZ19hcnJheSA/IHJlZ19hcnJheS5pbmRleCA6IHRoaXMuaW5wdXQubGVuZ3RoOyAvL2Fic29sdXRlIGVuZCBvZiBzY3JpcHQKICAgICAgICAgICAgICAgIGlmICh0aGlzLnBvcyA8IGVuZF9zY3JpcHQpIHsgLy9nZXQgZXZlcnl0aGluZyBpbiBiZXR3ZWVuIHRoZSBzY3JpcHQgdGFncwogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSB0aGlzLmlucHV0LnN1YnN0cmluZyh0aGlzLnBvcywgZW5kX3NjcmlwdCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3MgPSBlbmRfc2NyaXB0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0aGlzLnJlY29yZF90YWcgPSBmdW5jdGlvbih0YWcpIHsgLy9mdW5jdGlvbiB0byByZWNvcmQgYSB0YWcgYW5kIGl0cyBwYXJlbnQgaW4gdGhpcy50YWdzIE9iamVjdAogICAgICAgICAgICAgICAgaWYgKHRoaXMudGFnc1t0YWcgKyAnY291bnQnXSkgeyAvL2NoZWNrIGZvciB0aGUgZXhpc3RlbmNlIG9mIHRoaXMgdGFnIHR5cGUKICAgICAgICAgICAgICAgICAgICB0aGlzLnRhZ3NbdGFnICsgJ2NvdW50J10rKzsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRhZ3NbdGFnICsgdGhpcy50YWdzW3RhZyArICdjb3VudCddXSA9IHRoaXMuaW5kZW50X2xldmVsOyAvL2FuZCByZWNvcmQgdGhlIHByZXNlbnQgaW5kZW50IGxldmVsCiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvL290aGVyd2lzZSBpbml0aWFsaXplIHRoaXMgdGFnIHR5cGUKICAgICAgICAgICAgICAgICAgICB0aGlzLnRhZ3NbdGFnICsgJ2NvdW50J10gPSAxOwogICAgICAgICAgICAgICAgICAgIHRoaXMudGFnc1t0YWcgKyB0aGlzLnRhZ3NbdGFnICsgJ2NvdW50J11dID0gdGhpcy5pbmRlbnRfbGV2ZWw7IC8vYW5kIHJlY29yZCB0aGUgcHJlc2VudCBpbmRlbnQgbGV2ZWwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMudGFnc1t0YWcgKyB0aGlzLnRhZ3NbdGFnICsgJ2NvdW50J10gKyAncGFyZW50J10gPSB0aGlzLnRhZ3MucGFyZW50OyAvL3NldCB0aGUgcGFyZW50IChpLmUuIGluIHRoZSBjYXNlIG9mIGEgZGl2IHRoaXMudGFncy5kaXYxcGFyZW50KQogICAgICAgICAgICAgICAgdGhpcy50YWdzLnBhcmVudCA9IHRhZyArIHRoaXMudGFnc1t0YWcgKyAnY291bnQnXTsgLy9hbmQgbWFrZSB0aGlzIHRoZSBjdXJyZW50IHBhcmVudCAoaS5lLiBpbiB0aGUgY2FzZSBvZiBhIGRpdiAnZGl2MScpCiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0aGlzLnJldHJpZXZlX3RhZyA9IGZ1bmN0aW9uKHRhZykgeyAvL2Z1bmN0aW9uIHRvIHJldHJpZXZlIHRoZSBvcGVuaW5nIHRhZyB0byB0aGUgY29ycmVzcG9uZGluZyBjbG9zZXIKICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhZ3NbdGFnICsgJ2NvdW50J10pIHsgLy9pZiB0aGUgb3BlbmVuZXIgaXMgbm90IGluIHRoZSBPYmplY3Qgd2UgaWdub3JlIGl0CiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBfcGFyZW50ID0gdGhpcy50YWdzLnBhcmVudDsgLy9jaGVjayB0byBzZWUgaWYgaXQncyBhIGNsb3NhYmxlIHRhZy4KICAgICAgICAgICAgICAgICAgICB3aGlsZSAodGVtcF9wYXJlbnQpIHsgLy90aWxsIHdlIHJlYWNoICcnICh0aGUgaW5pdGlhbCB2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWcgKyB0aGlzLnRhZ3NbdGFnICsgJ2NvdW50J10gPT09IHRlbXBfcGFyZW50KSB7IC8vaWYgdGhpcyBpcyBpdCB1c2UgaXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBfcGFyZW50ID0gdGhpcy50YWdzW3RlbXBfcGFyZW50ICsgJ3BhcmVudCddOyAvL290aGVyd2lzZSBrZWVwIG9uIGNsaW1iaW5nIHVwIHRoZSBET00gVHJlZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodGVtcF9wYXJlbnQpIHsgLy9pZiB3ZSBjYXVnaHQgc29tZXRoaW5nCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZW50X2xldmVsID0gdGhpcy50YWdzW3RhZyArIHRoaXMudGFnc1t0YWcgKyAnY291bnQnXV07IC8vc2V0IHRoZSBpbmRlbnRfbGV2ZWwgYWNjb3JkaW5nbHkKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YWdzLnBhcmVudCA9IHRoaXMudGFnc1t0ZW1wX3BhcmVudCArICdwYXJlbnQnXTsgLy9hbmQgc2V0IHRoZSBjdXJyZW50IHBhcmVudAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy50YWdzW3RhZyArIHRoaXMudGFnc1t0YWcgKyAnY291bnQnXSArICdwYXJlbnQnXTsgLy9kZWxldGUgdGhlIGNsb3NlZCB0YWdzIHBhcmVudCByZWZlcmVuY2UuLi4KICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy50YWdzW3RhZyArIHRoaXMudGFnc1t0YWcgKyAnY291bnQnXV07IC8vLi4uYW5kIHRoZSB0YWcgaXRzZWxmCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGFnc1t0YWcgKyAnY291bnQnXSA9PT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy50YWdzW3RhZyArICdjb3VudCddOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFnc1t0YWcgKyAnY291bnQnXS0tOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHRoaXMuaW5kZW50X3RvX3RhZyA9IGZ1bmN0aW9uKHRhZykgewogICAgICAgICAgICAgICAgLy8gTWF0Y2ggdGhlIGluZGVudGF0aW9uIGxldmVsIHRvIHRoZSBsYXN0IHVzZSBvZiB0aGlzIHRhZywgYnV0IGRvbid0IHJlbW92ZSBpdC4KICAgICAgICAgICAgICAgIGlmICghdGhpcy50YWdzW3RhZyArICdjb3VudCddKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIHRlbXBfcGFyZW50ID0gdGhpcy50YWdzLnBhcmVudDsKICAgICAgICAgICAgICAgIHdoaWxlICh0ZW1wX3BhcmVudCkgewogICAgICAgICAgICAgICAgICAgIGlmICh0YWcgKyB0aGlzLnRhZ3NbdGFnICsgJ2NvdW50J10gPT09IHRlbXBfcGFyZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0ZW1wX3BhcmVudCA9IHRoaXMudGFnc1t0ZW1wX3BhcmVudCArICdwYXJlbnQnXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0ZW1wX3BhcmVudCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZW50X2xldmVsID0gdGhpcy50YWdzW3RhZyArIHRoaXMudGFnc1t0YWcgKyAnY291bnQnXV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0aGlzLmdldF90YWcgPSBmdW5jdGlvbihwZWVrKSB7IC8vZnVuY3Rpb24gdG8gZ2V0IGEgZnVsbCB0YWcgYW5kIHBhcnNlIGl0cyB0eXBlCiAgICAgICAgICAgICAgICB2YXIgaW5wdXRfY2hhciA9ICcnLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBbXSwKICAgICAgICAgICAgICAgICAgICBjb21tZW50ID0gJycsCiAgICAgICAgICAgICAgICAgICAgc3BhY2UgPSBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBmaXJzdF9hdHRyID0gdHJ1ZSwKICAgICAgICAgICAgICAgICAgICB0YWdfc3RhcnQsIHRhZ19lbmQsCiAgICAgICAgICAgICAgICAgICAgdGFnX3N0YXJ0X2NoYXIsCiAgICAgICAgICAgICAgICAgICAgb3JpZ19wb3MgPSB0aGlzLnBvcywKICAgICAgICAgICAgICAgICAgICBvcmlnX2xpbmVfY2hhcl9jb3VudCA9IHRoaXMubGluZV9jaGFyX2NvdW50OwoKICAgICAgICAgICAgICAgIHBlZWsgPSBwZWVrICE9PSB1bmRlZmluZWQgPyBwZWVrIDogZmFsc2U7CgogICAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBvcyA+PSB0aGlzLmlucHV0Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVlaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3MgPSBvcmlnX3BvczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGluZV9jaGFyX2NvdW50ID0gb3JpZ19saW5lX2NoYXJfY291bnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQubGVuZ3RoID8gY29udGVudC5qb2luKCcnKSA6IFsnJywgJ1RLX0VPRiddOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaW5wdXRfY2hhciA9IHRoaXMuaW5wdXQuY2hhckF0KHRoaXMucG9zKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcysrOwoKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5VdGlscy5pbl9hcnJheShpbnB1dF9jaGFyLCB0aGlzLlV0aWxzLndoaXRlc3BhY2UpKSB7IC8vZG9uJ3Qgd2FudCB0byBpbnNlcnQgdW5uZWNlc3Nhcnkgc3BhY2UKICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2UgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dF9jaGFyID09PSAiJyIgfHwgaW5wdXRfY2hhciA9PT0gJyInKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0X2NoYXIgKz0gdGhpcy5nZXRfdW5mb3JtYXR0ZWQoaW5wdXRfY2hhcik7CiAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXRfY2hhciA9PT0gJz0nKSB7IC8vbm8gc3BhY2UgYmVmb3JlID0KICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2UgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50Lmxlbmd0aCAmJiBjb250ZW50W2NvbnRlbnQubGVuZ3RoIC0gMV0gIT09ICc9JyAmJiBpbnB1dF9jaGFyICE9PSAnPicgJiYgc3BhY2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy9ubyBzcGFjZSBhZnRlciA9IG9yIGJlZm9yZSA+CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3cmFwcGVkID0gdGhpcy5zcGFjZV9vcl93cmFwKGNvbnRlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZW50QXR0cnMgPSB3cmFwcGVkICYmIGlucHV0X2NoYXIgIT09ICcvJyAmJiB3cmFwX2F0dHJpYnV0ZXMgIT09ICdmb3JjZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3RfYXR0ciAmJiB3cmFwX2F0dHJpYnV0ZXMgPT09ICdmb3JjZScgJiYgaW5wdXRfY2hhciAhPT0gJy8nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaW50X25ld2xpbmUoZmFsc2UsIGNvbnRlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmludF9pbmRlbnRhdGlvbihjb250ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGVudEF0dHJzID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZW50QXR0cnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaW5kZW50IGF0dHJpYnV0ZXMgYW4gYXV0byBvciBmb3JjZWQgbGluZS13cmFwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgd3JhcF9hdHRyaWJ1dGVzX2luZGVudF9zaXplOyBjb3VudCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5wdXNoKGluZGVudF9jaGFyYWN0ZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29udGVudC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRbaV0gPT09ICcgJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0X2F0dHIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGVudF9oYW5kbGViYXJzICYmIHRhZ19zdGFydF9jaGFyID09PSAnPCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiBpbnNpZGUgYW4gYW5nbGUtYnJhY2tldCB0YWcsIHB1dCBzcGFjZXMgYXJvdW5kCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZWJhcnMgbm90IGluc2lkZSBvZiBzdHJpbmdzLgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGlucHV0X2NoYXIgKyB0aGlzLmlucHV0LmNoYXJBdCh0aGlzLnBvcykpID09PSAne3snKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dF9jaGFyICs9IHRoaXMuZ2V0X3VuZm9ybWF0dGVkKCd9fScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQubGVuZ3RoICYmIGNvbnRlbnRbY29udGVudC5sZW5ndGggLSAxXSAhPT0gJyAnICYmIGNvbnRlbnRbY29udGVudC5sZW5ndGggLSAxXSAhPT0gJzwnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRfY2hhciA9ICcgJyArIGlucHV0X2NoYXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFjZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dF9jaGFyID09PSAnPCcgJiYgIXRhZ19zdGFydF9jaGFyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ19zdGFydCA9IHRoaXMucG9zIC0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdGFnX3N0YXJ0X2NoYXIgPSAnPCc7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZW50X2hhbmRsZWJhcnMgJiYgIXRhZ19zdGFydF9jaGFyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50Lmxlbmd0aCA+PSAyICYmIGNvbnRlbnRbY29udGVudC5sZW5ndGggLSAxXSA9PT0gJ3snICYmIGNvbnRlbnRbY29udGVudC5sZW5ndGggLSAyXSA9PT0gJ3snKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXRfY2hhciA9PT0gJyMnIHx8IGlucHV0X2NoYXIgPT09ICcvJyB8fCBpbnB1dF9jaGFyID09PSAnIScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdfc3RhcnQgPSB0aGlzLnBvcyAtIDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ19zdGFydCA9IHRoaXMucG9zIC0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ19zdGFydF9jaGFyID0gJ3snOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmVfY2hhcl9jb3VudCsrOwogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQucHVzaChpbnB1dF9jaGFyKTsgLy9pbnNlcnRzIGNoYXJhY3RlciBhdC1hLXRpbWUgKG9yIHN0cmluZykKCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRbMV0gJiYgKGNvbnRlbnRbMV0gPT09ICchJyB8fCBjb250ZW50WzFdID09PSAnPycgfHwgY29udGVudFsxXSA9PT0gJyUnKSkgeyAvL2lmIHdlJ3JlIGluIGEgY29tbWVudCwgZG8gc29tZXRoaW5nIHNwZWNpYWwKICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgdHJlYXQgYWxsIGNvbW1lbnRzIGFzIGxpdGVyYWxzLCBldmVuIG1vcmUgdGhhbiBwcmVmb3JtYXR0ZWQgdGFncwogICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBqdXN0IGxvb2sgZm9yIHRoZSBhcHByb3ByaWF0ZSBjbG9zZSB0YWcKICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IFt0aGlzLmdldF9jb21tZW50KHRhZ19zdGFydCldOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChpbmRlbnRfaGFuZGxlYmFycyAmJiBjb250ZW50WzFdICYmIGNvbnRlbnRbMV0gPT09ICd7JyAmJiBjb250ZW50WzJdICYmIGNvbnRlbnRbMl0gPT09ICchJykgeyAvL2lmIHdlJ3JlIGluIGEgY29tbWVudCwgZG8gc29tZXRoaW5nIHNwZWNpYWwKICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgdHJlYXQgYWxsIGNvbW1lbnRzIGFzIGxpdGVyYWxzLCBldmVuIG1vcmUgdGhhbiBwcmVmb3JtYXR0ZWQgdGFncwogICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBqdXN0IGxvb2sgZm9yIHRoZSBhcHByb3ByaWF0ZSBjbG9zZSB0YWcKICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IFt0aGlzLmdldF9jb21tZW50KHRhZ19zdGFydCldOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChpbmRlbnRfaGFuZGxlYmFycyAmJiB0YWdfc3RhcnRfY2hhciA9PT0gJ3snICYmIGNvbnRlbnQubGVuZ3RoID4gMiAmJiBjb250ZW50W2NvbnRlbnQubGVuZ3RoIC0gMl0gPT09ICd9JyAmJiBjb250ZW50W2NvbnRlbnQubGVuZ3RoIC0gMV0gPT09ICd9JykgewogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IHdoaWxlIChpbnB1dF9jaGFyICE9PSAnPicpOwoKICAgICAgICAgICAgICAgIHZhciB0YWdfY29tcGxldGUgPSBjb250ZW50LmpvaW4oJycpOwogICAgICAgICAgICAgICAgdmFyIHRhZ19pbmRleDsKICAgICAgICAgICAgICAgIHZhciB0YWdfb2Zmc2V0OwoKICAgICAgICAgICAgICAgIGlmICh0YWdfY29tcGxldGUuaW5kZXhPZignICcpICE9PSAtMSkgeyAvL2lmIHRoZXJlJ3Mgd2hpdGVzcGFjZSwgdGhhdHMgd2hlcmUgdGhlIHRhZyBuYW1lIGVuZHMKICAgICAgICAgICAgICAgICAgICB0YWdfaW5kZXggPSB0YWdfY29tcGxldGUuaW5kZXhPZignICcpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0YWdfY29tcGxldGUuY2hhckF0KDApID09PSAneycpIHsKICAgICAgICAgICAgICAgICAgICB0YWdfaW5kZXggPSB0YWdfY29tcGxldGUuaW5kZXhPZignfScpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsgLy9vdGhlcndpc2UgZ28gd2l0aCB0aGUgdGFnIGVuZGluZwogICAgICAgICAgICAgICAgICAgIHRhZ19pbmRleCA9IHRhZ19jb21wbGV0ZS5pbmRleE9mKCc+Jyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodGFnX2NvbXBsZXRlLmNoYXJBdCgwKSA9PT0gJzwnIHx8ICFpbmRlbnRfaGFuZGxlYmFycykgewogICAgICAgICAgICAgICAgICAgIHRhZ19vZmZzZXQgPSAxOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0YWdfb2Zmc2V0ID0gdGFnX2NvbXBsZXRlLmNoYXJBdCgyKSA9PT0gJyMnID8gMyA6IDI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgdGFnX2NoZWNrID0gdGFnX2NvbXBsZXRlLnN1YnN0cmluZyh0YWdfb2Zmc2V0LCB0YWdfaW5kZXgpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgICAgICBpZiAodGFnX2NvbXBsZXRlLmNoYXJBdCh0YWdfY29tcGxldGUubGVuZ3RoIC0gMikgPT09ICcvJyB8fAogICAgICAgICAgICAgICAgICAgIHRoaXMuVXRpbHMuaW5fYXJyYXkodGFnX2NoZWNrLCB0aGlzLlV0aWxzLnNpbmdsZV90b2tlbikpIHsgLy9pZiB0aGlzIHRhZyBuYW1lIGlzIGEgc2luZ2xlIHRhZyB0eXBlIChlaXRoZXIgaW4gdGhlIGxpc3Qgb3IgaGFzIGEgY2xvc2luZyAvKQogICAgICAgICAgICAgICAgICAgIGlmICghcGVlaykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhZ190eXBlID0gJ1NJTkdMRSc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbmRlbnRfaGFuZGxlYmFycyAmJiB0YWdfY29tcGxldGUuY2hhckF0KDApID09PSAneycgJiYgdGFnX2NoZWNrID09PSAnZWxzZScpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXBlZWspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRlbnRfdG9fdGFnKCdpZicpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhZ190eXBlID0gJ0hBTkRMRUJBUlNfRUxTRSc7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZW50X2NvbnRlbnQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYXZlcnNlX3doaXRlc3BhY2UoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNfdW5mb3JtYXR0ZWQodGFnX2NoZWNrLCB1bmZvcm1hdHRlZCkpIHsgLy8gZG8gbm90IHJlZm9ybWF0IHRoZSAidW5mb3JtYXR0ZWQiIHRhZ3MKICAgICAgICAgICAgICAgICAgICBjb21tZW50ID0gdGhpcy5nZXRfdW5mb3JtYXR0ZWQoJzwvJyArIHRhZ19jaGVjayArICc+JywgdGFnX2NvbXBsZXRlKTsgLy8uLi5kZWxlZ2F0ZSB0byBnZXRfdW5mb3JtYXR0ZWQgZnVuY3Rpb24KICAgICAgICAgICAgICAgICAgICBjb250ZW50LnB1c2goY29tbWVudCk7CiAgICAgICAgICAgICAgICAgICAgdGFnX2VuZCA9IHRoaXMucG9zIC0gMTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRhZ190eXBlID0gJ1NJTkdMRSc7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhZ19jaGVjayA9PT0gJ3NjcmlwdCcgJiYKICAgICAgICAgICAgICAgICAgICAodGFnX2NvbXBsZXRlLnNlYXJjaCgndHlwZScpID09PSAtMSB8fAogICAgICAgICAgICAgICAgICAgICAgICAodGFnX2NvbXBsZXRlLnNlYXJjaCgndHlwZScpID4gLTEgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ19jb21wbGV0ZS5zZWFyY2goL1xiKHRleHR8YXBwbGljYXRpb24pXC8oeC0pPyhqYXZhc2NyaXB0fGVjbWFzY3JpcHR8anNjcmlwdHxsaXZlc2NyaXB0fChsZFwrKT9qc29uKS8pID4gLTEpKSkgewogICAgICAgICAgICAgICAgICAgIGlmICghcGVlaykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29yZF90YWcodGFnX2NoZWNrKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YWdfdHlwZSA9ICdTQ1JJUFQnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGFnX2NoZWNrID09PSAnc3R5bGUnICYmCiAgICAgICAgICAgICAgICAgICAgKHRhZ19jb21wbGV0ZS5zZWFyY2goJ3R5cGUnKSA9PT0gLTEgfHwKICAgICAgICAgICAgICAgICAgICAgICAgKHRhZ19jb21wbGV0ZS5zZWFyY2goJ3R5cGUnKSA+IC0xICYmIHRhZ19jb21wbGV0ZS5zZWFyY2goJ3RleHQvY3NzJykgPiAtMSkpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFwZWVrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVjb3JkX3RhZyh0YWdfY2hlY2spOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhZ190eXBlID0gJ1NUWUxFJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhZ19jaGVjay5jaGFyQXQoMCkgPT09ICchJykgeyAvL3BlZWsgZm9yIDwhIGNvbW1lbnQKICAgICAgICAgICAgICAgICAgICAvLyBmb3IgY29tbWVudHMgY29udGVudCBpcyBhbHJlYWR5IGNvcnJlY3QuCiAgICAgICAgICAgICAgICAgICAgaWYgKCFwZWVrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFnX3R5cGUgPSAnU0lOR0xFJzsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmF2ZXJzZV93aGl0ZXNwYWNlKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICghcGVlaykgewogICAgICAgICAgICAgICAgICAgIGlmICh0YWdfY2hlY2suY2hhckF0KDApID09PSAnLycpIHsgLy90aGlzIHRhZyBpcyBhIGRvdWJsZSB0YWcgc28gY2hlY2sgZm9yIHRhZy1lbmRpbmcKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXRyaWV2ZV90YWcodGFnX2NoZWNrLnN1YnN0cmluZygxKSk7IC8vcmVtb3ZlIGl0IGFuZCBhbGwgYW5jZXN0b3JzCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFnX3R5cGUgPSAnRU5EJzsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyAvL290aGVyd2lzZSBpdCdzIGEgc3RhcnQtdGFnCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVjb3JkX3RhZyh0YWdfY2hlY2spOyAvL3B1c2ggaXQgb24gdGhlIHRhZyBzdGFjawogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFnX2NoZWNrLnRvTG93ZXJDYXNlKCkgIT09ICdodG1sJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRlbnRfY29udGVudCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YWdfdHlwZSA9ICdTVEFSVCc7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvLyBBbGxvdyBwcmVzZXJ2aW5nIG9mIG5ld2xpbmVzIGFmdGVyIGEgc3RhcnQgb3IgZW5kIHRhZwogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRyYXZlcnNlX3doaXRlc3BhY2UoKSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNwYWNlX29yX3dyYXAoY29udGVudCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5VdGlscy5pbl9hcnJheSh0YWdfY2hlY2ssIHRoaXMuVXRpbHMuZXh0cmFfbGluZXJzKSkgeyAvL2NoZWNrIGlmIHRoaXMgZG91YmxlIG5lZWRzIGFuIGV4dHJhIGxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmludF9uZXdsaW5lKGZhbHNlLCB0aGlzLm91dHB1dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm91dHB1dC5sZW5ndGggJiYgdGhpcy5vdXRwdXRbdGhpcy5vdXRwdXQubGVuZ3RoIC0gMl0gIT09ICdcbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpbnRfbmV3bGluZSh0cnVlLCB0aGlzLm91dHB1dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHBlZWspIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcyA9IG9yaWdfcG9zOwogICAgICAgICAgICAgICAgICAgIHRoaXMubGluZV9jaGFyX2NvdW50ID0gb3JpZ19saW5lX2NoYXJfY291bnQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQuam9pbignJyk7IC8vcmV0dXJucyBmdWxseSBmb3JtYXR0ZWQgdGFnCiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0aGlzLmdldF9jb21tZW50ID0gZnVuY3Rpb24oc3RhcnRfcG9zKSB7IC8vZnVuY3Rpb24gdG8gcmV0dXJuIGNvbW1lbnQgY29udGVudCBpbiBpdHMgZW50aXJldHkKICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgd2lsbCBoYXZlIHZlcnkgcG9vciBwZXJmLCBidXQgd2lsbCB3b3JrIGZvciBub3cuCiAgICAgICAgICAgICAgICB2YXIgY29tbWVudCA9ICcnLAogICAgICAgICAgICAgICAgICAgIGRlbGltaXRlciA9ICc+JywKICAgICAgICAgICAgICAgICAgICBtYXRjaGVkID0gZmFsc2U7CgogICAgICAgICAgICAgICAgdGhpcy5wb3MgPSBzdGFydF9wb3M7CiAgICAgICAgICAgICAgICB2YXIgaW5wdXRfY2hhciA9IHRoaXMuaW5wdXQuY2hhckF0KHRoaXMucG9zKTsKICAgICAgICAgICAgICAgIHRoaXMucG9zKys7CgogICAgICAgICAgICAgICAgd2hpbGUgKHRoaXMucG9zIDw9IHRoaXMuaW5wdXQubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgY29tbWVudCArPSBpbnB1dF9jaGFyOwoKICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IG5lZWQgdG8gY2hlY2sgZm9yIHRoZSBkZWxpbWl0ZXIgaWYgdGhlIGxhc3QgY2hhcnMgbWF0Y2gKICAgICAgICAgICAgICAgICAgICBpZiAoY29tbWVudC5jaGFyQXQoY29tbWVudC5sZW5ndGggLSAxKSA9PT0gZGVsaW1pdGVyLmNoYXJBdChkZWxpbWl0ZXIubGVuZ3RoIC0gMSkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudC5pbmRleE9mKGRlbGltaXRlcikgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gb25seSBuZWVkIHRvIHNlYXJjaCBmb3IgY3VzdG9tIGRlbGltaXRlciBmb3IgdGhlIGZpcnN0IGZldyBjaGFyYWN0ZXJzCiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRjaGVkICYmIGNvbW1lbnQubGVuZ3RoIDwgMTApIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbW1lbnQuaW5kZXhPZignPCFbaWYnKSA9PT0gMCkgeyAvL3BlZWsgZm9yIDwhW2lmIGNvbmRpdGlvbmFsIGNvbW1lbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGltaXRlciA9ICc8IVtlbmRpZl0+JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbW1lbnQuaW5kZXhPZignPCFbY2RhdGFbJykgPT09IDApIHsgLy9pZiBpdCdzIGEgPFtjZGF0YVsgY29tbWVudC4uLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsaW1pdGVyID0gJ11dPic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb21tZW50LmluZGV4T2YoJzwhWycpID09PSAwKSB7IC8vIHNvbWUgb3RoZXIgIVsgY29tbWVudD8gLi4uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxpbWl0ZXIgPSAnXT4nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tbWVudC5pbmRleE9mKCc8IS0tJykgPT09IDApIHsgLy8gPCEtLSBjb21tZW50IC4uLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsaW1pdGVyID0gJy0tPic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb21tZW50LmluZGV4T2YoJ3t7IScpID09PSAwKSB7IC8vIHt7ISBoYW5kbGViYXJzIGNvbW1lbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGltaXRlciA9ICd9fSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb21tZW50LmluZGV4T2YoJzw/JykgPT09IDApIHsgLy8ge3shIGhhbmRsZWJhcnMgY29tbWVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsaW1pdGVyID0gJz8+JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbW1lbnQuaW5kZXhPZignPCUnKSA9PT0gMCkgeyAvLyB7eyEgaGFuZGxlYmFycyBjb21tZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxpbWl0ZXIgPSAnJT4nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlucHV0X2NoYXIgPSB0aGlzLmlucHV0LmNoYXJBdCh0aGlzLnBvcyk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3MrKzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gY29tbWVudDsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGZ1bmN0aW9uIHRva2VuTWF0Y2hlcihkZWxpbWl0ZXIpIHsKICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9ICcnOwoKICAgICAgICAgICAgICAgIHZhciBhZGQgPSBmdW5jdGlvbihzdHIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbmV3VG9rZW4gPSB0b2tlbiArIHN0ci50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgICAgIHRva2VuID0gbmV3VG9rZW4ubGVuZ3RoIDw9IGRlbGltaXRlci5sZW5ndGggPyBuZXdUb2tlbiA6IG5ld1Rva2VuLnN1YnN0cihuZXdUb2tlbi5sZW5ndGggLSBkZWxpbWl0ZXIubGVuZ3RoLCBkZWxpbWl0ZXIubGVuZ3RoKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIGRvZXNOb3RNYXRjaCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbi5pbmRleE9mKGRlbGltaXRlcikgPT09IC0xOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIGFkZDogYWRkLAogICAgICAgICAgICAgICAgICAgIGRvZXNOb3RNYXRjaDogZG9lc05vdE1hdGNoCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLmdldF91bmZvcm1hdHRlZCA9IGZ1bmN0aW9uKGRlbGltaXRlciwgb3JpZ190YWcpIHsgLy9mdW5jdGlvbiB0byByZXR1cm4gdW5mb3JtYXR0ZWQgY29udGVudCBpbiBpdHMgZW50aXJldHkKICAgICAgICAgICAgICAgIGlmIChvcmlnX3RhZyAmJiBvcmlnX3RhZy50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZGVsaW1pdGVyKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgaW5wdXRfY2hhciA9ICcnOwogICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSAnJzsKICAgICAgICAgICAgICAgIHZhciBzcGFjZSA9IHRydWU7CgogICAgICAgICAgICAgICAgdmFyIGRlbGltaXRlck1hdGNoZXIgPSB0b2tlbk1hdGNoZXIoZGVsaW1pdGVyKTsKCiAgICAgICAgICAgICAgICBkbyB7CgogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBvcyA+PSB0aGlzLmlucHV0Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlucHV0X2NoYXIgPSB0aGlzLmlucHV0LmNoYXJBdCh0aGlzLnBvcyk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3MrKzsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuVXRpbHMuaW5fYXJyYXkoaW5wdXRfY2hhciwgdGhpcy5VdGlscy53aGl0ZXNwYWNlKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNwYWNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmVfY2hhcl9jb3VudC0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0X2NoYXIgPT09ICdcbicgfHwgaW5wdXRfY2hhciA9PT0gJ1xyJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSAnXG4nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIERvbid0IGNoYW5nZSB0YWIgaW5kZW50aW9uIGZvciB1bmZvcm1hdHRlZCBibG9ja3MuICBJZiB1c2luZyBjb2RlIGZvciBodG1sIGVkaXRpbmcsIHRoaXMgd2lsbCBncmVhdGx5IGFmZmVjdCA8cHJlPiB0YWdzIGlmIHRoZXkgYXJlIHNwZWNpZmllZCBpbiB0aGUgJ3VuZm9ybWF0dGVkIGFycmF5JwogICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPHRoaXMuaW5kZW50X2xldmVsOyBpKyspIHsKICAgICAgICAgICAgICAgICAgY29udGVudCArPSB0aGlzLmluZGVudF9zdHJpbmc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzcGFjZSA9IGZhbHNlOyAvLy4uLmFuZCBtYWtlIHN1cmUgb3RoZXIgaW5kZW50YXRpb24gaXMgZXJhc2VkCiAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lX2NoYXJfY291bnQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSBpbnB1dF9jaGFyOwogICAgICAgICAgICAgICAgICAgIGRlbGltaXRlck1hdGNoZXIuYWRkKGlucHV0X2NoYXIpOwogICAgICAgICAgICAgICAgICAgIHRoaXMubGluZV9jaGFyX2NvdW50Kys7CiAgICAgICAgICAgICAgICAgICAgc3BhY2UgPSB0cnVlOwoKICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZW50X2hhbmRsZWJhcnMgJiYgaW5wdXRfY2hhciA9PT0gJ3snICYmIGNvbnRlbnQubGVuZ3RoICYmIGNvbnRlbnQuY2hhckF0KGNvbnRlbnQubGVuZ3RoIC0gMikgPT09ICd7JykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGViYXJzIGV4cHJlc3Npb25zIGluIHN0cmluZ3Mgc2hvdWxkIGFsc28gYmUgdW5mb3JtYXR0ZWQuCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gdGhpcy5nZXRfdW5mb3JtYXR0ZWQoJ319Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvbid0IGNvbnNpZGVyIHdoZW4gc3RvcHBpbmcgZm9yIGRlbGltaXRlcnMuCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSB3aGlsZSAoZGVsaW1pdGVyTWF0Y2hlci5kb2VzTm90TWF0Y2goKSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0aGlzLmdldF90b2tlbiA9IGZ1bmN0aW9uKCkgeyAvL2luaXRpYWwgaGFuZGxlciBmb3IgdG9rZW4tcmV0cmlldmFsCiAgICAgICAgICAgICAgICB2YXIgdG9rZW47CgogICAgICAgICAgICAgICAgaWYgKHRoaXMubGFzdF90b2tlbiA9PT0gJ1RLX1RBR19TQ1JJUFQnIHx8IHRoaXMubGFzdF90b2tlbiA9PT0gJ1RLX1RBR19TVFlMRScpIHsgLy9jaGVjayBpZiB3ZSBuZWVkIHRvIGZvcm1hdCBqYXZhc2NyaXB0CiAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGUgPSB0aGlzLmxhc3RfdG9rZW4uc3Vic3RyKDcpOwogICAgICAgICAgICAgICAgICAgIHRva2VuID0gdGhpcy5nZXRfY29udGVudHNfdG8odHlwZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0b2tlbiAhPT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRva2VuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3Rva2VuLCAnVEtfJyArIHR5cGVdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudF9tb2RlID09PSAnQ09OVEVOVCcpIHsKICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IHRoaXMuZ2V0X2NvbnRlbnQoKTsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRva2VuICE9PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW47CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFt0b2tlbiwgJ1RLX0NPTlRFTlQnXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudF9tb2RlID09PSAnVEFHJykgewogICAgICAgICAgICAgICAgICAgIHRva2VuID0gdGhpcy5nZXRfdGFnKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0b2tlbiAhPT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRva2VuOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWdfbmFtZV90eXBlID0gJ1RLX1RBR18nICsgdGhpcy50YWdfdHlwZTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFt0b2tlbiwgdGFnX25hbWVfdHlwZV07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdGhpcy5nZXRfZnVsbF9pbmRlbnQgPSBmdW5jdGlvbihsZXZlbCkgewogICAgICAgICAgICAgICAgbGV2ZWwgPSB0aGlzLmluZGVudF9sZXZlbCArIGxldmVsIHx8IDA7CiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPCAxKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBBcnJheShsZXZlbCArIDEpLmpvaW4odGhpcy5pbmRlbnRfc3RyaW5nKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHRoaXMuaXNfdW5mb3JtYXR0ZWQgPSBmdW5jdGlvbih0YWdfY2hlY2ssIHVuZm9ybWF0dGVkKSB7CiAgICAgICAgICAgICAgICAvL2lzIHRoaXMgYW4gSFRNTDUgYmxvY2stbGV2ZWwgbGluaz8KICAgICAgICAgICAgICAgIGlmICghdGhpcy5VdGlscy5pbl9hcnJheSh0YWdfY2hlY2ssIHVuZm9ybWF0dGVkKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAodGFnX2NoZWNrLnRvTG93ZXJDYXNlKCkgIT09ICdhJyB8fCAhdGhpcy5VdGlscy5pbl9hcnJheSgnYScsIHVuZm9ybWF0dGVkKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vYXQgdGhpcyBwb2ludCB3ZSBoYXZlIGFuICB0YWc7IGlzIGl0cyBmaXJzdCBjaGlsZCBzb21ldGhpbmcgd2Ugd2FudCB0byByZW1haW4KICAgICAgICAgICAgICAgIC8vdW5mb3JtYXR0ZWQ/CiAgICAgICAgICAgICAgICB2YXIgbmV4dF90YWcgPSB0aGlzLmdldF90YWcodHJ1ZSAvKiBwZWVrLiAqLyApOwoKICAgICAgICAgICAgICAgIC8vIHRlc3QgbmV4dF90YWcgdG8gc2VlIGlmIGl0IGlzIGp1c3QgaHRtbCB0YWcgKG5vIGV4dGVybmFsIGNvbnRlbnQpCiAgICAgICAgICAgICAgICB2YXIgdGFnID0gKG5leHRfdGFnIHx8ICIiKS5tYXRjaCgvXlxzKjxccypcLz8oW2Etel0qKVxzKltePl0qPlxzKiQvKTsKCiAgICAgICAgICAgICAgICAvLyBpZiBuZXh0X3RhZyBjb21lcyBiYWNrIGJ1dCBpcyBub3QgYW4gaXNvbGF0ZWQgdGFnLCB0aGVuCiAgICAgICAgICAgICAgICAvLyBsZXQncyB0cmVhdCB0aGUgJ2EnIHRhZyBhcyBoYXZpbmcgY29udGVudAogICAgICAgICAgICAgICAgLy8gYW5kIHJlc3BlY3QgdGhlIHVuZm9ybWF0dGVkIG9wdGlvbgogICAgICAgICAgICAgICAgaWYgKCF0YWcgfHwgdGhpcy5VdGlscy5pbl9hcnJheSh0YWcsIHVuZm9ybWF0dGVkKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0aGlzLnByaW50ZXIgPSBmdW5jdGlvbihqc19zb3VyY2UsIGluZGVudF9jaGFyYWN0ZXIsIGluZGVudF9zaXplLCB3cmFwX2xpbmVfbGVuZ3RoLCBicmFjZV9zdHlsZSkgeyAvL2hhbmRsZXMgaW5wdXQvb3V0cHV0IGFuZCBzb21lIG90aGVyIHByaW50aW5nIGZ1bmN0aW9ucwoKICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQgPSBqc19zb3VyY2UgfHwgJyc7IC8vZ2V0cyB0aGUgaW5wdXQgZm9yIHRoZSBQYXJzZXIKCiAgICAgICAgICAgICAgICAvLyBIQUNLOiBuZXdsaW5lIHBhcnNpbmcgaW5jb25zaXN0ZW50LiBUaGlzIGJydXRlIGZvcmNlIG5vcm1hbGl6ZXMgdGhlIGlucHV0LgogICAgICAgICAgICAgICAgdGhpcy5pbnB1dCA9IHRoaXMuaW5wdXQucmVwbGFjZSgvXHJcbnxbXHJcdTIwMjhcdTIwMjldL2csICdcbicpOwoKICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0ID0gW107CiAgICAgICAgICAgICAgICB0aGlzLmluZGVudF9jaGFyYWN0ZXIgPSBpbmRlbnRfY2hhcmFjdGVyOwogICAgICAgICAgICAgICAgdGhpcy5pbmRlbnRfc3RyaW5nID0gJyc7CiAgICAgICAgICAgICAgICB0aGlzLmluZGVudF9zaXplID0gaW5kZW50X3NpemU7CiAgICAgICAgICAgICAgICB0aGlzLmJyYWNlX3N0eWxlID0gYnJhY2Vfc3R5bGU7CiAgICAgICAgICAgICAgICB0aGlzLmluZGVudF9sZXZlbCA9IDA7CiAgICAgICAgICAgICAgICB0aGlzLndyYXBfbGluZV9sZW5ndGggPSB3cmFwX2xpbmVfbGVuZ3RoOwogICAgICAgICAgICAgICAgdGhpcy5saW5lX2NoYXJfY291bnQgPSAwOyAvL2NvdW50IHRvIHNlZSBpZiB3cmFwX2xpbmVfbGVuZ3RoIHdhcyBleGNlZWRlZAoKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pbmRlbnRfc2l6ZTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRlbnRfc3RyaW5nICs9IHRoaXMuaW5kZW50X2NoYXJhY3RlcjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLnByaW50X25ld2xpbmUgPSBmdW5jdGlvbihmb3JjZSwgYXJyKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lX2NoYXJfY291bnQgPSAwOwogICAgICAgICAgICAgICAgICAgIGlmICghYXJyIHx8ICFhcnIubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcmNlIHx8IChhcnJbYXJyLmxlbmd0aCAtIDFdICE9PSAnXG4nKSkgeyAvL3dlIG1pZ2h0IHdhbnQgdGhlIGV4dHJhIGxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChhcnJbYXJyLmxlbmd0aCAtIDFdICE9PSAnXG4nKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyW2Fyci5sZW5ndGggLSAxXSA9IHJ0cmltKGFyclthcnIubGVuZ3RoIC0gMV0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKCdcbicpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdGhpcy5wcmludF9pbmRlbnRhdGlvbiA9IGZ1bmN0aW9uKGFycikgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pbmRlbnRfbGV2ZWw7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaCh0aGlzLmluZGVudF9zdHJpbmcpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmVfY2hhcl9jb3VudCArPSB0aGlzLmluZGVudF9zdHJpbmcubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdGhpcy5wcmludF90b2tlbiA9IGZ1bmN0aW9uKHRleHQpIHsKICAgICAgICAgICAgICAgICAgICAvLyBBdm9pZCBwcmludGluZyBpbml0aWFsIHdoaXRlc3BhY2UuCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNfd2hpdGVzcGFjZSh0ZXh0KSAmJiAhdGhpcy5vdXRwdXQubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHRleHQgfHwgdGV4dCAhPT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3V0cHV0Lmxlbmd0aCAmJiB0aGlzLm91dHB1dFt0aGlzLm91dHB1dC5sZW5ndGggLSAxXSA9PT0gJ1xuJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmludF9pbmRlbnRhdGlvbih0aGlzLm91dHB1dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gbHRyaW0odGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmludF90b2tlbl9yYXcodGV4dCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHRoaXMucHJpbnRfdG9rZW5fcmF3ID0gZnVuY3Rpb24odGV4dCkgewogICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGFyZSBnb2luZyB0byBwcmludCBuZXdsaW5lcywgdHJ1bmNhdGUgdHJhaWxpbmcKICAgICAgICAgICAgICAgICAgICAvLyB3aGl0ZXNwYWNlLCBhcyB0aGUgbmV3bGluZXMgd2lsbCByZXByZXNlbnQgdGhlIHNwYWNlLgogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5ld2xpbmVzID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gcnRyaW0odGV4dCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAodGV4dCAmJiB0ZXh0ICE9PSAnJykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGV4dC5sZW5ndGggPiAxICYmIHRleHQuY2hhckF0KHRleHQubGVuZ3RoIC0gMSkgPT09ICdcbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVuZm9ybWF0dGVkIHRhZ3MgY2FuIGdyYWIgbmV3bGluZXMgYXMgdGhlaXIgbGFzdCBjaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0LnB1c2godGV4dC5zbGljZSgwLCAtMSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmludF9uZXdsaW5lKGZhbHNlLCB0aGlzLm91dHB1dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm91dHB1dC5wdXNoKHRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMDsgbiA8IHRoaXMubmV3bGluZXM7IG4rKykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaW50X25ld2xpbmUobiA+IDAsIHRoaXMub3V0cHV0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdsaW5lcyA9IDA7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHRoaXMuaW5kZW50ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRlbnRfbGV2ZWwrKzsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdGhpcy51bmluZGVudCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmluZGVudF9sZXZlbCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRlbnRfbGV2ZWwtLTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9OwogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CgogICAgICAgIC8qX19fX19fX19fX19fX19fX19fX19fLS0tLS0tLS0tLS0tLS0tLS0tLS1fX19fX19fX19fX19fX19fX19fX18qLwoKICAgICAgICBtdWx0aV9wYXJzZXIgPSBuZXcgUGFyc2VyKCk7IC8vd3JhcHBpbmcgZnVuY3Rpb25zIFBhcnNlcgogICAgICAgIG11bHRpX3BhcnNlci5wcmludGVyKGh0bWxfc291cmNlLCBpbmRlbnRfY2hhcmFjdGVyLCBpbmRlbnRfc2l6ZSwgd3JhcF9saW5lX2xlbmd0aCwgYnJhY2Vfc3R5bGUpOyAvL2luaXRpYWxpemUgc3RhcnRpbmcgdmFsdWVzCgogICAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgICAgIHZhciB0ID0gbXVsdGlfcGFyc2VyLmdldF90b2tlbigpOwogICAgICAgICAgICBtdWx0aV9wYXJzZXIudG9rZW5fdGV4dCA9IHRbMF07CiAgICAgICAgICAgIG11bHRpX3BhcnNlci50b2tlbl90eXBlID0gdFsxXTsKCiAgICAgICAgICAgIGlmIChtdWx0aV9wYXJzZXIudG9rZW5fdHlwZSA9PT0gJ1RLX0VPRicpIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzd2l0Y2ggKG11bHRpX3BhcnNlci50b2tlbl90eXBlKSB7CiAgICAgICAgICAgICAgICBjYXNlICdUS19UQUdfU1RBUlQnOgogICAgICAgICAgICAgICAgICAgIG11bHRpX3BhcnNlci5wcmludF9uZXdsaW5lKGZhbHNlLCBtdWx0aV9wYXJzZXIub3V0cHV0KTsKICAgICAgICAgICAgICAgICAgICBtdWx0aV9wYXJzZXIucHJpbnRfdG9rZW4obXVsdGlfcGFyc2VyLnRva2VuX3RleHQpOwogICAgICAgICAgICAgICAgICAgIGlmIChtdWx0aV9wYXJzZXIuaW5kZW50X2NvbnRlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChtdWx0aV9wYXJzZXIuaW5kZW50X2JvZHlfaW5uZXJfaHRtbCB8fCAhbXVsdGlfcGFyc2VyLnRva2VuX3RleHQubWF0Y2goLzxib2R5KD86LiopPi8pKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKG11bHRpX3BhcnNlci5pbmRlbnRfaGVhZF9pbm5lcl9odG1sIHx8ICFtdWx0aV9wYXJzZXIudG9rZW5fdGV4dC5tYXRjaCgvPGhlYWQoPzouKik+LykpKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlfcGFyc2VyLmluZGVudCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBtdWx0aV9wYXJzZXIuaW5kZW50X2NvbnRlbnQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbXVsdGlfcGFyc2VyLmN1cnJlbnRfbW9kZSA9ICdDT05URU5UJzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ1RLX1RBR19TVFlMRSc6CiAgICAgICAgICAgICAgICBjYXNlICdUS19UQUdfU0NSSVBUJzoKICAgICAgICAgICAgICAgICAgICBtdWx0aV9wYXJzZXIucHJpbnRfbmV3bGluZShmYWxzZSwgbXVsdGlfcGFyc2VyLm91dHB1dCk7CiAgICAgICAgICAgICAgICAgICAgbXVsdGlfcGFyc2VyLnByaW50X3Rva2VuKG11bHRpX3BhcnNlci50b2tlbl90ZXh0KTsKICAgICAgICAgICAgICAgICAgICBtdWx0aV9wYXJzZXIuY3VycmVudF9tb2RlID0gJ0NPTlRFTlQnOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnVEtfVEFHX0VORCc6CiAgICAgICAgICAgICAgICAgICAgLy9QcmludCBuZXcgbGluZSBvbmx5IGlmIHRoZSB0YWcgaGFzIG5vIGNvbnRlbnQgYW5kIGhhcyBjaGlsZAogICAgICAgICAgICAgICAgICAgIGlmIChtdWx0aV9wYXJzZXIubGFzdF90b2tlbiA9PT0gJ1RLX0NPTlRFTlQnICYmIG11bHRpX3BhcnNlci5sYXN0X3RleHQgPT09ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWdfbmFtZSA9IChtdWx0aV9wYXJzZXIudG9rZW5fdGV4dC5tYXRjaCgvXHcrLykgfHwgW10pWzBdOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnX2V4dHJhY3RlZF9mcm9tX2xhc3Rfb3V0cHV0ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG11bHRpX3BhcnNlci5vdXRwdXQubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdfZXh0cmFjdGVkX2Zyb21fbGFzdF9vdXRwdXQgPSBtdWx0aV9wYXJzZXIub3V0cHV0W211bHRpX3BhcnNlci5vdXRwdXQubGVuZ3RoIC0gMV0ubWF0Y2goLyg/Ojx8e3sjKVxzKihcdyspLyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhZ19leHRyYWN0ZWRfZnJvbV9sYXN0X291dHB1dCA9PT0gbnVsbCB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRhZ19leHRyYWN0ZWRfZnJvbV9sYXN0X291dHB1dFsxXSAhPT0gdGFnX25hbWUgJiYgIW11bHRpX3BhcnNlci5VdGlscy5pbl9hcnJheSh0YWdfZXh0cmFjdGVkX2Zyb21fbGFzdF9vdXRwdXRbMV0sIHVuZm9ybWF0dGVkKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpX3BhcnNlci5wcmludF9uZXdsaW5lKGZhbHNlLCBtdWx0aV9wYXJzZXIub3V0cHV0KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBtdWx0aV9wYXJzZXIucHJpbnRfdG9rZW4obXVsdGlfcGFyc2VyLnRva2VuX3RleHQpOwogICAgICAgICAgICAgICAgICAgIG11bHRpX3BhcnNlci5jdXJyZW50X21vZGUgPSAnQ09OVEVOVCc7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdUS19UQUdfU0lOR0xFJzoKICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBhZGQgYSBuZXdsaW5lIGJlZm9yZSBlbGVtZW50cyB0aGF0IHNob3VsZCByZW1haW4gdW5mb3JtYXR0ZWQuCiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZ19jaGVjayA9IG11bHRpX3BhcnNlci50b2tlbl90ZXh0Lm1hdGNoKC9eXHMqPChbYS16LV0rKS9pKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIXRhZ19jaGVjayB8fCAhbXVsdGlfcGFyc2VyLlV0aWxzLmluX2FycmF5KHRhZ19jaGVja1sxXSwgdW5mb3JtYXR0ZWQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpX3BhcnNlci5wcmludF9uZXdsaW5lKGZhbHNlLCBtdWx0aV9wYXJzZXIub3V0cHV0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbXVsdGlfcGFyc2VyLnByaW50X3Rva2VuKG11bHRpX3BhcnNlci50b2tlbl90ZXh0KTsKICAgICAgICAgICAgICAgICAgICBtdWx0aV9wYXJzZXIuY3VycmVudF9tb2RlID0gJ0NPTlRFTlQnOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnVEtfVEFHX0hBTkRMRUJBUlNfRUxTRSc6CiAgICAgICAgICAgICAgICAgICAgLy8gRG9uJ3QgYWRkIGEgbmV3bGluZSBpZiBvcGVuaW5nIHt7I2lmfX0gdGFnIGlzIG9uIHRoZSBjdXJyZW50IGxpbmUKICAgICAgICAgICAgICAgICAgICB2YXIgZm91bmRJZk9uQ3VycmVudExpbmUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBsYXN0Q2hlY2tlZE91dHB1dCA9IG11bHRpX3BhcnNlci5vdXRwdXQubGVuZ3RoIC0gMTsgbGFzdENoZWNrZWRPdXRwdXQgPj0gMDsgbGFzdENoZWNrZWRPdXRwdXQtLSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobXVsdGlfcGFyc2VyLm91dHB1dFtsYXN0Q2hlY2tlZE91dHB1dF0gPT09ICdcbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG11bHRpX3BhcnNlci5vdXRwdXRbbGFzdENoZWNrZWRPdXRwdXRdLm1hdGNoKC97eyNpZi8pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRJZk9uQ3VycmVudExpbmUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghZm91bmRJZk9uQ3VycmVudExpbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlfcGFyc2VyLnByaW50X25ld2xpbmUoZmFsc2UsIG11bHRpX3BhcnNlci5vdXRwdXQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBtdWx0aV9wYXJzZXIucHJpbnRfdG9rZW4obXVsdGlfcGFyc2VyLnRva2VuX3RleHQpOwogICAgICAgICAgICAgICAgICAgIGlmIChtdWx0aV9wYXJzZXIuaW5kZW50X2NvbnRlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlfcGFyc2VyLmluZGVudCgpOwogICAgICAgICAgICAgICAgICAgICAgICBtdWx0aV9wYXJzZXIuaW5kZW50X2NvbnRlbnQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbXVsdGlfcGFyc2VyLmN1cnJlbnRfbW9kZSA9ICdDT05URU5UJzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ1RLX1RBR19IQU5ETEVCQVJTX0NPTU1FTlQnOgogICAgICAgICAgICAgICAgICAgIG11bHRpX3BhcnNlci5wcmludF90b2tlbihtdWx0aV9wYXJzZXIudG9rZW5fdGV4dCk7CiAgICAgICAgICAgICAgICAgICAgbXVsdGlfcGFyc2VyLmN1cnJlbnRfbW9kZSA9ICdUQUcnOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnVEtfQ09OVEVOVCc6CiAgICAgICAgICAgICAgICAgICAgbXVsdGlfcGFyc2VyLnByaW50X3Rva2VuKG11bHRpX3BhcnNlci50b2tlbl90ZXh0KTsKICAgICAgICAgICAgICAgICAgICBtdWx0aV9wYXJzZXIuY3VycmVudF9tb2RlID0gJ1RBRyc7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdUS19TVFlMRSc6CiAgICAgICAgICAgICAgICBjYXNlICdUS19TQ1JJUFQnOgogICAgICAgICAgICAgICAgICAgIGlmIChtdWx0aV9wYXJzZXIudG9rZW5fdGV4dCAhPT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlfcGFyc2VyLnByaW50X25ld2xpbmUoZmFsc2UsIG11bHRpX3BhcnNlci5vdXRwdXQpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IG11bHRpX3BhcnNlci50b2tlbl90ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2JlYXV0aWZpZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHRfaW5kZW50X2xldmVsID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG11bHRpX3BhcnNlci50b2tlbl90eXBlID09PSAnVEtfU0NSSVBUJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2JlYXV0aWZpZXIgPSB0eXBlb2YganNfYmVhdXRpZnkgPT09ICdmdW5jdGlvbicgJiYganNfYmVhdXRpZnk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobXVsdGlfcGFyc2VyLnRva2VuX3R5cGUgPT09ICdUS19TVFlMRScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9iZWF1dGlmaWVyID0gdHlwZW9mIGNzc19iZWF1dGlmeSA9PT0gJ2Z1bmN0aW9uJyAmJiBjc3NfYmVhdXRpZnk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmluZGVudF9zY3JpcHRzID09PSAia2VlcCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdF9pbmRlbnRfbGV2ZWwgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMuaW5kZW50X3NjcmlwdHMgPT09ICJzZXBhcmF0ZSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdF9pbmRlbnRfbGV2ZWwgPSAtbXVsdGlfcGFyc2VyLmluZGVudF9sZXZlbDsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGVudGF0aW9uID0gbXVsdGlfcGFyc2VyLmdldF9mdWxsX2luZGVudChzY3JpcHRfaW5kZW50X2xldmVsKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9iZWF1dGlmaWVyKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCB0aGUgQmVhdXRpZmllciBpZiBhdmFsaWFibGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBDaGlsZF9vcHRpb25zID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lb2wgPSAnXG4nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoaWxkX29wdGlvbnMucHJvdG90eXBlID0gb3B0aW9uczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZF9vcHRpb25zID0gbmV3IENoaWxkX29wdGlvbnMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSBfYmVhdXRpZmllcih0ZXh0LnJlcGxhY2UoL15ccyovLCBpbmRlbnRhdGlvbiksIGNoaWxkX29wdGlvbnMpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2ltcGx5IGluZGVudCB0aGUgc3RyaW5nIG90aGVyd2lzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdoaXRlID0gdGV4dC5tYXRjaCgvXlxzKi8pWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9sZXZlbCA9IHdoaXRlLm1hdGNoKC9bXlxuXHJdKiQvKVswXS5zcGxpdChtdWx0aV9wYXJzZXIuaW5kZW50X3N0cmluZykubGVuZ3RoIC0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWluZGVudCA9IG11bHRpX3BhcnNlci5nZXRfZnVsbF9pbmRlbnQoc2NyaXB0X2luZGVudF9sZXZlbCAtIF9sZXZlbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9eXHMqLywgaW5kZW50YXRpb24pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xyXG58XHJ8XG4vZywgJ1xuJyArIHJlaW5kZW50KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9ccyskLywgJycpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdWx0aV9wYXJzZXIucHJpbnRfdG9rZW5fcmF3KHRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlfcGFyc2VyLnByaW50X25ld2xpbmUodHJ1ZSwgbXVsdGlfcGFyc2VyLm91dHB1dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbXVsdGlfcGFyc2VyLmN1cnJlbnRfbW9kZSA9ICdUQUcnOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAvLyBXZSBzaG91bGQgbm90IGJlIGdldHRpbmcgaGVyZSBidXQgd2UgZG9uJ3Qgd2FudCB0byBkcm9wIGlucHV0IG9uIHRoZSBmbG9vcgogICAgICAgICAgICAgICAgICAgIC8vIEp1c3Qgb3V0cHV0IHRoZSB0ZXh0IGFuZCBtb3ZlIG9uCiAgICAgICAgICAgICAgICAgICAgaWYgKG11bHRpX3BhcnNlci50b2tlbl90ZXh0ICE9PSAnJykgewogICAgICAgICAgICAgICAgICAgICAgICBtdWx0aV9wYXJzZXIucHJpbnRfdG9rZW4obXVsdGlfcGFyc2VyLnRva2VuX3RleHQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBtdWx0aV9wYXJzZXIubGFzdF90b2tlbiA9IG11bHRpX3BhcnNlci50b2tlbl90eXBlOwogICAgICAgICAgICBtdWx0aV9wYXJzZXIubGFzdF90ZXh0ID0gbXVsdGlfcGFyc2VyLnRva2VuX3RleHQ7CiAgICAgICAgfQogICAgICAgIHZhciBzd2VldF9jb2RlID0gbXVsdGlfcGFyc2VyLm91dHB1dC5qb2luKCcnKS5yZXBsYWNlKC9bXHJcblx0IF0rJC8sICcnKTsKCiAgICAgICAgLy8gZXN0YWJsaXNoIGVuZF93aXRoX25ld2xpbmUKICAgICAgICBpZiAoZW5kX3dpdGhfbmV3bGluZSkgewogICAgICAgICAgICBzd2VldF9jb2RlICs9ICdcbic7CiAgICAgICAgfQoKICAgICAgICBpZiAoZW9sICE9PSAnXG4nKSB7CiAgICAgICAgICAgIHN3ZWV0X2NvZGUgPSBzd2VldF9jb2RlLnJlcGxhY2UoL1tcbl0vZywgZW9sKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzd2VldF9jb2RlOwogICAgfQoKICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAiZnVuY3Rpb24iICYmIGRlZmluZS5hbWQpIHsKICAgICAgICAvLyBBZGQgc3VwcG9ydCBmb3IgQU1EICggaHR0cHM6Ly9naXRodWIuY29tL2FtZGpzL2FtZGpzLWFwaS93aWtpL0FNRCNkZWZpbmVhbWQtcHJvcGVydHktICkKICAgICAgICBkZWZpbmUoWyJyZXF1aXJlIiwgIi4vYmVhdXRpZnkiLCAiLi9iZWF1dGlmeS1jc3MiXSwgZnVuY3Rpb24ocmVxdWlyZWFtZCkgewogICAgICAgICAgICB2YXIganNfYmVhdXRpZnkgPSByZXF1aXJlYW1kKCIuL2JlYXV0aWZ5Iik7CiAgICAgICAgICAgIHZhciBjc3NfYmVhdXRpZnkgPSByZXF1aXJlYW1kKCIuL2JlYXV0aWZ5LWNzcyIpOwoKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGh0bWxfYmVhdXRpZnk6IGZ1bmN0aW9uKGh0bWxfc291cmNlLCBvcHRpb25zKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0eWxlX2h0bWwoaHRtbF9zb3VyY2UsIG9wdGlvbnMsIGpzX2JlYXV0aWZ5LmpzX2JlYXV0aWZ5LCBjc3NfYmVhdXRpZnkuY3NzX2JlYXV0aWZ5KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICB9KTsKICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgLy8gQWRkIHN1cHBvcnQgZm9yIENvbW1vbkpTLiBKdXN0IHB1dCB0aGlzIGZpbGUgc29tZXdoZXJlIG9uIHlvdXIgcmVxdWlyZS5wYXRocwogICAgICAgIC8vIGFuZCB5b3Ugd2lsbCBiZSBhYmxlIHRvIGB2YXIgaHRtbF9iZWF1dGlmeSA9IHJlcXVpcmUoImJlYXV0aWZ5IikuaHRtbF9iZWF1dGlmeWAuCiAgICAgICAgdmFyIGpzX2JlYXV0aWZ5ID0gcmVxdWlyZSgnLi9iZWF1dGlmeS5qcycpOwogICAgICAgIHZhciBjc3NfYmVhdXRpZnkgPSByZXF1aXJlKCcuL2JlYXV0aWZ5LWNzcy5qcycpOwoKICAgICAgICBleHBvcnRzLmh0bWxfYmVhdXRpZnkgPSBmdW5jdGlvbihodG1sX3NvdXJjZSwgb3B0aW9ucykgewogICAgICAgICAgICByZXR1cm4gc3R5bGVfaHRtbChodG1sX3NvdXJjZSwgb3B0aW9ucywganNfYmVhdXRpZnkuanNfYmVhdXRpZnksIGNzc19iZWF1dGlmeS5jc3NfYmVhdXRpZnkpOwogICAgICAgIH07CiAgICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgLy8gSWYgd2UncmUgcnVubmluZyBhIHdlYiBwYWdlIGFuZCBkb24ndCBoYXZlIGVpdGhlciBvZiB0aGUgYWJvdmUsIGFkZCBvdXIgb25lIGdsb2JhbAogICAgICAgIHdpbmRvdy5odG1sX2JlYXV0aWZ5ID0gZnVuY3Rpb24oaHRtbF9zb3VyY2UsIG9wdGlvbnMpIHsKICAgICAgICAgICAgcmV0dXJuIHN0eWxlX2h0bWwoaHRtbF9zb3VyY2UsIG9wdGlvbnMsIHdpbmRvdy5qc19iZWF1dGlmeSwgd2luZG93LmNzc19iZWF1dGlmeSk7CiAgICAgICAgfTsKICAgIH0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAvLyBJZiB3ZSBkb24ndCBldmVuIGhhdmUgd2luZG93LCB0cnkgZ2xvYmFsLgogICAgICAgIGdsb2JhbC5odG1sX2JlYXV0aWZ5ID0gZnVuY3Rpb24oaHRtbF9zb3VyY2UsIG9wdGlvbnMpIHsKICAgICAgICAgICAgcmV0dXJuIHN0eWxlX2h0bWwoaHRtbF9zb3VyY2UsIG9wdGlvbnMsIGdsb2JhbC5qc19iZWF1dGlmeSwgZ2xvYmFsLmNzc19iZWF1dGlmeSk7CiAgICAgICAgfTsKICAgIH0KCn0oKSk7"></script>
    <script src="data:application/x-javascript;base64,Ly8KLy8gc2ltcGxlIHRlc3RpbmcgaW50ZXJmYWNlCi8vIHdyaXR0ZW4gYnkgRWluYXIgTGllbG1hbmlzLCBlaW5hckBqc2JlYXV0aWZpZXIub3JnCi8vCi8vIHVzYWdlOgovLwovLyB2YXIgdCA9IG5ldyBTYW5pdHlUZXN0KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9LCAnbXkgZnVuY3Rpb24nKTsKLy8gdC5leHBlY3QoJ2lucHV0JywgJ291dHB1dCcpOwovLyB0LmV4cGVjdCgnYScsICdhJyk7Ci8vIG91dHB1dF9zb21ld2hlcmUodC5yZXN1bHRzKCkpOyAvLyBnb29kIGZvciA8cHJlPiwgaHRtbCBzYWZlLWlzaAovLyBhbGVydCh0LnJlc3VsdHNfcmF3KCkpOyAgICAgICAgLy8gaHRtbCB1bmVzY2FwZWQKCgpmdW5jdGlvbiBTYW5pdHlUZXN0KGZ1bmMsIG5hbWVfb2ZfdGVzdCkgewoKICAgIHZhciB0ZXN0X2Z1bmMgPSBmdW5jIHx8IGZ1bmN0aW9uKHgpIHsKICAgICAgICByZXR1cm4geDsKICAgIH07CgogICAgdmFyIHRlc3RfbmFtZSA9IG5hbWVfb2ZfdGVzdCB8fCAnJzsKCiAgICB2YXIgbl9mYWlsZWQgPSAwOwogICAgdmFyIG5fc3VjY2VlZGVkID0gMDsKCiAgICB2YXIgZmFpbHVyZXMgPSBbXTsKCiAgICB0aGlzLnRlc3RfZnVuY3Rpb24gPSBmdW5jdGlvbihmdW5jLCBuYW1lKSB7CiAgICAgICAgdGVzdF9mdW5jID0gZnVuYzsKICAgICAgICB0ZXN0X25hbWUgPSBuYW1lIHx8ICcnOwogICAgfTsKCiAgICB0aGlzLmdldF9leGl0Y29kZSA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBuX3N1Y2NlZWRlZCA9PT0gMCB8fCBuX2ZhaWxlZCAhPT0gMCA/IDEgOiAwOwogICAgfTsKCiAgICB0aGlzLmV4cGVjdCA9IGZ1bmN0aW9uKHBhcmFtZXRlcnMsIGV4cGVjdGVkX3ZhbHVlKSB7CiAgICAgICAgLy8gbXVsdGktcGFyYW1ldGVyIGNhbGxzIG5vdCBzdXBwb3J0ZWQgKEkgZG9uJ3QgbmVlZCB0aGVtIG5vdykuCiAgICAgICAgdmFyIHJlc3VsdCA9IHRlc3RfZnVuYyhwYXJhbWV0ZXJzKTsKICAgICAgICAvLyBwcm9wZXIgYXJyYXkgY2hlY2tpbmcgaXMgYSBwYWluLiBpJ2xsIG1heWJlIGRvIGl0IGxhdGVyLCBjb21wYXJlIHN0cmluZ3MgcmVwcmVzZW50YXRpb25zIGluc3RlYWQKICAgICAgICBpZiAoKHJlc3VsdCA9PT0gZXhwZWN0ZWRfdmFsdWUpIHx8IChleHBlY3RlZF92YWx1ZSBpbnN0YW5jZW9mIEFycmF5ICYmIHJlc3VsdC5qb2luKCcsICcpID09PSBleHBlY3RlZF92YWx1ZS5qb2luKCcsICcpKSkgewogICAgICAgICAgICBuX3N1Y2NlZWRlZCArPSAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5fZmFpbGVkICs9IDE7CiAgICAgICAgICAgIGZhaWx1cmVzLnB1c2goW3Rlc3RfbmFtZSwgcGFyYW1ldGVycywgZXhwZWN0ZWRfdmFsdWUsIHJlc3VsdF0pOwogICAgICAgIH0KICAgIH07CgoKICAgIHRoaXMucmVzdWx0c19yYXcgPSBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgcmVzdWx0cyA9ICcnOwogICAgICAgIGlmIChuX2ZhaWxlZCA9PT0gMCkgewogICAgICAgICAgICBpZiAobl9zdWNjZWVkZWQgPT09IDApIHsKICAgICAgICAgICAgICAgIHJlc3VsdHMgPSAnTm8gdGVzdHMgcnVuLic7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXN1bHRzID0gJ0FsbCAnICsgbl9zdWNjZWVkZWQgKyAnIHRlc3RzIHBhc3NlZC4nOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmYWlsdXJlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdmFyIGYgPSBmYWlsdXJlc1tpXTsKICAgICAgICAgICAgICAgIGlmIChmWzBdKSB7CiAgICAgICAgICAgICAgICAgICAgZlswXSA9IGZbMF0gKyAnICc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXN1bHRzICs9ICctLS0tICcgKyBmWzBdICsgJ2lucHV0IC0tLS0tLS1cbicgKyB0aGlzLnByZXR0eXByaW50KGZbMV0pICsgJ1xuJzsKICAgICAgICAgICAgICAgIHJlc3VsdHMgKz0gJy0tLS0gJyArIGZbMF0gKyAnZXhwZWN0ZWQgLS0tLVxuJyArIHRoaXMucHJldHR5cHJpbnQoZlsyXSkgKyAnXG4nOwogICAgICAgICAgICAgICAgcmVzdWx0cyArPSAnLS0tLSAnICsgZlswXSArICdvdXRwdXQgLS0tLS0tXG4nICsgdGhpcy5wcmV0dHlwcmludChmWzNdKSArICdcblxuJzsKCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVzdWx0cyArPSBuX2ZhaWxlZCArICcgdGVzdHMgZmFpbGVkLlxuJzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdHM7CiAgICB9OwoKCiAgICB0aGlzLnJlc3VsdHMgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpcy5sYXp5X2VzY2FwZSh0aGlzLnJlc3VsdHNfcmF3KCkpOwogICAgfTsKCgogICAgdGhpcy5wcmV0dHlwcmludCA9IGZ1bmN0aW9uKHNvbWV0aGluZywgcXVvdGVfc3RyaW5ncykgewogICAgICAgIHZhciB0eXBlID0gdHlwZW9mIHNvbWV0aGluZzsKICAgICAgICBzd2l0Y2ggKHR5cGUudG9Mb3dlckNhc2UoKSkgewogICAgICAgICAgICBjYXNlICdzdHJpbmcnOgogICAgICAgICAgICAgICAgaWYgKHF1b3RlX3N0cmluZ3MpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIiciICsgc29tZXRoaW5nLnJlcGxhY2UoIiciLCAiXFwnIikgKyAiJyI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gc29tZXRoaW5nOwogICAgICAgICAgICBjYXNlICdudW1iZXInOgogICAgICAgICAgICAgICAgcmV0dXJuICcnICsgc29tZXRoaW5nOwogICAgICAgICAgICBjYXNlICdib29sZWFuJzoKICAgICAgICAgICAgICAgIHJldHVybiBzb21ldGhpbmcgPyAndHJ1ZScgOiAnZmFsc2UnOwogICAgICAgICAgICBjYXNlICd1bmRlZmluZWQnOgogICAgICAgICAgICAgICAgcmV0dXJuICd1bmRlZmluZWQnOwogICAgICAgICAgICBjYXNlICdvYmplY3QnOgogICAgICAgICAgICAgICAgaWYgKHNvbWV0aGluZyBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBbXTsKICAgICAgICAgICAgICAgICAgICB2YXIgZXhwZWN0ZWRfaW5kZXggPSAwOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gc29tZXRoaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrID09PSBleHBlY3RlZF9pbmRleCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5wdXNoKHRoaXMucHJldHR5cHJpbnQoc29tZXRoaW5nW2tdLCB0cnVlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZF9pbmRleCArPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5wdXNoKCdcbicgKyBrICsgJzogJyArIHRoaXMucHJldHR5cHJpbnQoc29tZXRoaW5nW2tdLCB0cnVlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdbJyArIHguam9pbignLCAnKSArICddJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiAnb2JqZWN0OiAnICsgc29tZXRoaW5nOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgcmV0dXJuIHR5cGUgKyAnOiAnICsgc29tZXRoaW5nOwogICAgICAgIH0KICAgIH07CgoKICAgIHRoaXMubGF6eV9lc2NhcGUgPSBmdW5jdGlvbihzdHIpIHsKICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoLzwvZywgJyZsdDsnKS5yZXBsYWNlKC9cPi9nLCAnJmd0OycpLnJlcGxhY2UoL1xuL2csICc8YnIgLz4nKTsKICAgIH07CgoKICAgIHRoaXMubG9nID0gZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKHdpbmRvdy5jb25zb2xlKSB7CiAgICAgICAgICAgIGlmIChjb25zb2xlLmZpcmVidWcpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2cuY2FsbChjb25zb2xlLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07Cgp9CgppZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHsKICAgIG1vZHVsZS5leHBvcnRzID0gU2FuaXR5VGVzdDsKfQ=="></script>
    <script src="data:application/x-javascript;base64,LyoKICAgIEFVVE8tR0VORVJBVEVELiBETyBOT1QgTU9ESUZZLgogICAgU2NyaXB0OiB0ZXN0L2dlbmVyYXRlLXRlc3RzLmpzCiAgICBUZW1wbGF0ZTogdGVzdC9kYXRhL2phdmFzY3JpcHQvbm9kZS5tdXN0YWNoZQogICAgRGF0YTogdGVzdC9kYXRhL2phdmFzY3JpcHQvdGVzdHMuanMKKi8KLypqc2hpbnQgdW51c2VkOmZhbHNlICovCgpmdW5jdGlvbiBydW5famF2YXNjcmlwdF90ZXN0cyh0ZXN0X29iaiwgVXJsZW5jb2RlZCwganNfYmVhdXRpZnksIGh0bWxfYmVhdXRpZnksIGNzc19iZWF1dGlmeSkKewoKICAgIHZhciBkZWZhdWx0X29wdHMgPSB7CiAgICAgICAgaW5kZW50X3NpemU6IDQsCiAgICAgICAgaW5kZW50X2NoYXI6ICcgJywKICAgICAgICBwcmVzZXJ2ZV9uZXdsaW5lczogdHJ1ZSwKICAgICAgICBqc2xpbnRfaGFwcHk6IGZhbHNlLAogICAgICAgIGtlZXBfYXJyYXlfaW5kZW50YXRpb246IGZhbHNlLAogICAgICAgIGJyYWNlX3N0eWxlOiAnY29sbGFwc2UnLAogICAgICAgIHNwYWNlX2JlZm9yZV9jb25kaXRpb25hbDogdHJ1ZSwKICAgICAgICBicmVha19jaGFpbmVkX21ldGhvZHM6IGZhbHNlLAogICAgICAgIHNlbGVjdG9yX3NlcGFyYXRvcjogJ1xuJywKICAgICAgICBlbmRfd2l0aF9uZXdsaW5lOiBmYWxzZQogICAgfTsKICAgIHZhciBvcHRzOwoKICAgIGRlZmF1bHRfb3B0cy5pbmRlbnRfc2l6ZSA9IDQ7CiAgICBkZWZhdWx0X29wdHMuaW5kZW50X2NoYXIgPSAnICc7CiAgICBkZWZhdWx0X29wdHMucHJlc2VydmVfbmV3bGluZXMgPSB0cnVlOwogICAgZGVmYXVsdF9vcHRzLmpzbGludF9oYXBweSA9IGZhbHNlOwogICAgZGVmYXVsdF9vcHRzLmtlZXBfYXJyYXlfaW5kZW50YXRpb24gPSBmYWxzZTsKICAgIGRlZmF1bHRfb3B0cy5icmFjZV9zdHlsZSA9ICdjb2xsYXBzZSc7CiAgICBkZWZhdWx0X29wdHMub3BlcmF0b3JfcG9zaXRpb24gPSAnYmVmb3JlLW5ld2xpbmUnOwoKICAgIGZ1bmN0aW9uIHJlc2V0X29wdGlvbnMoKQogICAgewogICAgICAgIG9wdHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRlZmF1bHRfb3B0cykpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRlc3RfanNfYmVhdXRpZmllcihpbnB1dCkKICAgIHsKICAgICAgICByZXR1cm4ganNfYmVhdXRpZnkoaW5wdXQsIG9wdHMpOwogICAgfQoKICAgIHZhciBzYW5pdHl0ZXN0OwoKICAgIC8vIHRlc3QgdGhlIGlucHV0IG9uIGJlYXV0aWZpZXIgd2l0aCB0aGUgY3VycmVudCBmbGFnIHNldHRpbmdzCiAgICAvLyBkb2VzIG5vdCBjaGVjayB0aGUgaW5kZW50YXRpb24gLyBzdXJyb3VuZGluZ3MgYXMgYnQoKSBkb2VzCiAgICBmdW5jdGlvbiB0ZXN0X2ZyYWdtZW50KGlucHV0LCBleHBlY3RlZCkKICAgIHsKICAgICAgICBleHBlY3RlZCA9IGV4cGVjdGVkIHx8IGV4cGVjdGVkID09PSAnJyA/IGV4cGVjdGVkIDogaW5wdXQ7CiAgICAgICAgc2FuaXR5dGVzdC5leHBlY3QoaW5wdXQsIGV4cGVjdGVkKTsKICAgICAgICAvLyBpZiB0aGUgZXhwZWN0ZWQgaXMgZGlmZmVyZW50IGZyb20gaW5wdXQsIHJ1biBpdCBhZ2FpbgogICAgICAgIC8vIGV4cGVjdGVkIG91dHB1dCBzaG91bGQgYmUgdW5jaGFuZ2VkIHdoZW4gcnVuIHR3aWNlLgogICAgICAgIGlmIChleHBlY3RlZCAhPT0gaW5wdXQpIHsKICAgICAgICAgICAgc2FuaXR5dGVzdC5leHBlY3QoZXhwZWN0ZWQsIGV4cGVjdGVkKTsKICAgICAgICB9CgogICAgICAgIC8vIEV2ZXJ5d2hlcmUgd2UgZG8gbmV3bGluZXMsIHRoZXkgc2hvdWxkIGJlIHJlcGxhY2VkIHdpdGggb3B0cy5lb2wKICAgICAgICBvcHRzLmVvbCA9ICdcclxcbic7CiAgICAgICAgZXhwZWN0ZWQgPSBleHBlY3RlZC5yZXBsYWNlKC9bXG5dL2csICdcclxuJyk7CiAgICAgICAgc2FuaXR5dGVzdC5leHBlY3QoaW5wdXQsIGV4cGVjdGVkKTsKICAgICAgICBpbnB1dCA9IGlucHV0LnJlcGxhY2UoL1tcbl0vZywgJ1xyXG4nKTsKICAgICAgICBzYW5pdHl0ZXN0LmV4cGVjdChpbnB1dCwgZXhwZWN0ZWQpOwogICAgICAgIG9wdHMuZW9sID0gJ1xuJzsKICAgIH0KCgoKICAgIC8vIHRlc3QgdGhlIGlucHV0IG9uIGJlYXV0aWZpZXIgd2l0aCB0aGUgY3VycmVudCBmbGFnIHNldHRpbmdzCiAgICAvLyB0ZXN0IGJvdGggdGhlIGlucHV0IGFzIHdlbGwgYXMgeyBpbnB1dCB9IHdyYXBwaW5nCiAgICBmdW5jdGlvbiBidChpbnB1dCwgZXhwZWN0YXRpb24pCiAgICB7CiAgICAgICAgdmFyIHdyYXBwZWRfaW5wdXQsIHdyYXBwZWRfZXhwZWN0YXRpb247CgogICAgICAgIGV4cGVjdGF0aW9uID0gZXhwZWN0YXRpb24gfHwgZXhwZWN0YXRpb24gPT09ICcnID8gZXhwZWN0YXRpb24gOiBpbnB1dDsKICAgICAgICBzYW5pdHl0ZXN0LnRlc3RfZnVuY3Rpb24odGVzdF9qc19iZWF1dGlmaWVyLCAnanNfYmVhdXRpZnknKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KGlucHV0LCBleHBlY3RhdGlvbik7CgogICAgICAgIC8vIElmIHdlIHNldCByYXcsIGlucHV0IHNob3VsZCBiZSB1bmNoYW5nZWQKICAgICAgICBvcHRzLnRlc3Rfb3V0cHV0X3JhdyA9IHRydWU7CiAgICAgICAgaWYgKCFvcHRzLmVuZF93aXRoX25ld2xpbmUpIHsKICAgICAgICAgICAgdGVzdF9mcmFnbWVudChpbnB1dCwgaW5wdXQpOwogICAgICAgIH0KICAgICAgICBvcHRzLnRlc3Rfb3V0cHV0X3JhdyA9IGZhbHNlOwoKICAgICAgICAvLyB0ZXN0IGFsc28gdGhlIHJldHVybmVkIGluZGVudGF0aW9uCiAgICAgICAgLy8gZS5nIGlmIGlucHV0ID0gImFzZGYoKTsiCiAgICAgICAgLy8gdGhlbiB0ZXN0IHRoYXQgdGhpcyByZW1haW5zIHByb3Blcmx5IGZvcm1hdHRlZCBhcyB3ZWxsOgogICAgICAgIC8vIHsKICAgICAgICAvLyAgICAgYXNkZigpOwogICAgICAgIC8vICAgICBpbmRlbnQ7CiAgICAgICAgLy8gfQoKICAgICAgICBpZiAob3B0cy5pbmRlbnRfc2l6ZSA9PT0gNCAmJiBpbnB1dCkgewogICAgICAgICAgICB3cmFwcGVkX2lucHV0ID0gJ3tcbicgKyBpbnB1dC5yZXBsYWNlKC9eKC4rKSQvbWcsICcgICAgJDEnKSArICdcbiAgICBmb28gPSBiYXI7XG59JzsKICAgICAgICAgICAgd3JhcHBlZF9leHBlY3RhdGlvbiA9ICd7XG4nICsgZXhwZWN0YXRpb24ucmVwbGFjZSgvXiguKykkL21nLCAnICAgICQxJykgKyAnXG4gICAgZm9vID0gYmFyO1xufSc7CiAgICAgICAgICAgIHRlc3RfZnJhZ21lbnQod3JhcHBlZF9pbnB1dCwgd3JhcHBlZF9leHBlY3RhdGlvbik7CgogICAgICAgICAgICAvLyBJZiB3ZSBzZXQgcmF3LCBpbnB1dCBzaG91bGQgYmUgdW5jaGFuZ2VkCiAgICAgICAgICAgIG9wdHMudGVzdF9vdXRwdXRfcmF3ID0gdHJ1ZTsKICAgICAgICAgICAgaWYgKCFvcHRzLmVuZF93aXRoX25ld2xpbmUpIHsKICAgICAgICAgICAgICAgIHRlc3RfZnJhZ21lbnQod3JhcHBlZF9pbnB1dCwgd3JhcHBlZF9pbnB1dCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb3B0cy50ZXN0X291dHB1dF9yYXcgPSBmYWxzZTsKICAgICAgICB9CgogICAgfQoKICAgIC8vIHJ1biBhbGwgdGVzdHMgZm9yIHRoZSBnaXZlbiBicmFjZSBzdHlsZSAoImNvbGxhcHNlIiwgImV4cGFuZCIsICJlbmQtZXhwYW5kIiwgb3IgIm5vbmUiKS4KICAgIC8vIHVzZXMgdmFyaW91cyB3aGl0ZXNwYWNlIGNvbWJpbmF0aW9ucyBiZWZvcmUgYW5kIGFmdGVyIG9wZW5pbmcgYW5kIGNsb3NpbmcgYnJhY2VzLAogICAgLy8gcmVzcGVjdGl2ZWx5LCBmb3IgbW9zdCBvZiB0aGUgdGVzdHMnIGlucHV0cy4KICAgIGZ1bmN0aW9uIGJlYXV0aWZ5X2JyYWNlX3Rlc3RzKGJyYWNlX3N0eWxlKSB7CgogICAgICAgIHZhciBpbmRlbnRfb25fd3JhcF9zdHIgPSAnICAgICc7IC8vIGNvdWxkIHVzZSBBcnJheShvcHRzLmluZGVudF9zaXplICsgMSkuam9pbignICcpOyBpZiB3ZSB3YW50ZWQgdG8gcmVwbGFjZSBfYWxsXyBvZiB0aGUgaGFyZGNvZGVkIDQtc3BhY2UgaW4gdGhlIHRlc3QgYW5kIGV4cGVjdGF0aW9uIHN0cmluZ3MKCiAgICAgICAgZnVuY3Rpb24gcGVybXV0ZV9icmFjZV90ZXN0cyhleHBlY3Rfb3Blbl93aGl0ZSwgZXhwZWN0X2Nsb3NlX3doaXRlKSB7CgogICAgICAgICAgICAvLyBydW4gdGhlIHRlc3RzIHRoYXQgbmVlZCBwZXJtdXRhdGlvbiBhZ2FpbnN0IGEgc3BlY2lmaWMgY29tYmluYXRpb24gb2YKICAgICAgICAgICAgLy8gcHJlLW9wZW5pbmctYnJhY2UgYW5kIHByZS1jbG9zaW5nLWJyYWNlIHdoaXRlc3BhY2UKICAgICAgICAgICAgZnVuY3Rpb24gcnVuX2JyYWNlX3Blcm11dGF0aW9uKHRlc3Rfb3Blbl93aGl0ZSwgdGVzdF9jbG9zZV93aGl0ZSkgewogICAgICAgICAgICAgICAgdmFyIHRvID0gdGVzdF9vcGVuX3doaXRlLAogICAgICAgICAgICAgICAgICAgIHRjID0gdGVzdF9jbG9zZV93aGl0ZSwKICAgICAgICAgICAgICAgICAgICBlbyA9IGV4cGVjdF9vcGVuX3doaXRlID8gZXhwZWN0X29wZW5fd2hpdGUgOiB0byA9PT0gJycgPyAnICcgOiB0bywKICAgICAgICAgICAgICAgICAgICBlYyA9IGV4cGVjdF9jbG9zZV93aGl0ZSA/IGV4cGVjdF9jbG9zZV93aGl0ZSA6IHRjID09PSAnJyA/ICcgJyA6IHRjLAogICAgICAgICAgICAgICAgICAgIGkgPSBlbyA9PT0gJ1xuJyA/IGluZGVudF9vbl93cmFwX3N0cjogJyc7CgogICAgICAgICAgICAgICAgYnQoICcvL2Nhc2UgMVxuaWYgKGEgPT0gMSknICsgdG8gKyAne31cbi8vY2FzZSAyXG5lbHNlIGlmIChhID09IDIpJyArIHRvICsgJ3t9JywKICAgICAgICAgICAgICAgICAgICAnLy9jYXNlIDFcbmlmIChhID09IDEpJyArIGVvICsgJ3t9XG4vL2Nhc2UgMlxuZWxzZSBpZiAoYSA9PSAyKScgKyBlbyArICd7fScpOwogICAgICAgICAgICAgICAgYnQoICdpZigxKScgKyB0byArICd7Mn0nICsgdGMgKyAnZWxzZScgKyB0byArICd7M30nLAogICAgICAgICAgICAgICAgICAgICdpZiAoMSknICsgZW8gKyAne1xuICAgIDJcbn0nICsgZWMgKyAnZWxzZScgKyBlbyArICd7XG4gICAgM1xufScpOwogICAgICAgICAgICAgICAgYnQoICd0cnknICsgdG8gKyAne2EoKTt9JyArIHRjICsKICAgICAgICAgICAgICAgICAgICAnY2F0Y2goYiknICsgdG8gKyAne2MoKTt9JyArIHRjICsKICAgICAgICAgICAgICAgICAgICAnY2F0Y2goZCknICsgdG8gKyAne30nICsgdGMgKwogICAgICAgICAgICAgICAgICAgICdmaW5hbGx5JyArIHRvICsgJ3tlKCk7fScsCiAgICAgICAgICAgICAgICAgICAgLy8gZXhwZWN0ZWQKICAgICAgICAgICAgICAgICAgICAndHJ5JyArIGVvICsgJ3tcbiAgICBhKCk7XG59JyArIGVjICsKICAgICAgICAgICAgICAgICAgICAnY2F0Y2ggKGIpJyArIGVvICsgJ3tcbiAgICBjKCk7XG59JyArIGVjICsKICAgICAgICAgICAgICAgICAgICAnY2F0Y2ggKGQpJyArIGVvICsgJ3t9JyArIGVjICsKICAgICAgICAgICAgICAgICAgICAnZmluYWxseScgKyBlbyArICd7XG4gICAgZSgpO1xufScpOwogICAgICAgICAgICAgICAgYnQoICdpZihhKScgKyB0byArICd7YigpO30nICsgdGMgKyAnZWxzZSBpZihjKSBmb28oKTsnLAogICAgICAgICAgICAgICAgICAgICdpZiAoYSknICsgZW8gKyAne1xuICAgIGIoKTtcbn0nICsgZWMgKyAnZWxzZSBpZiAoYykgZm9vKCk7Jyk7CiAgICAgICAgICAgICAgICAvLyBpZi9lbHNlIHN0YXRlbWVudCB3aXRoIGVtcHR5IGJvZHkKICAgICAgICAgICAgICAgIGJ0KCAnaWYgKGEpJyArIHRvICsgJ3tcbi8vIGNvbW1lbnRcbn0nICsgdGMgKyAnZWxzZScgKyB0byArICd7XG4vLyBjb21tZW50XG59JywKICAgICAgICAgICAgICAgICAgICAnaWYgKGEpJyArIGVvICsgJ3tcbiAgICAvLyBjb21tZW50XG59JyArIGVjICsgJ2Vsc2UnICsgZW8gKyAne1xuICAgIC8vIGNvbW1lbnRcbn0nKTsKICAgICAgICAgICAgICAgIGJ0KCAnaWYgKHgpJyArIHRvICsgJ3t5fScgKyB0YyArICdlbHNlJyArIHRvICsgJ3sgaWYgKHgpJyArIHRvICsgJ3t5fX0nLAogICAgICAgICAgICAgICAgICAgICdpZiAoeCknICsgZW8gKyAne1xuICAgIHlcbn0nICsgZWMgKyAnZWxzZScgKyBlbyArICd7XG4gICAgaWYgKHgpJyArIGVvICsgaSArICd7XG4gICAgICAgIHlcbiAgICB9XG59Jyk7CiAgICAgICAgICAgICAgICBidCggJ2lmIChhKScgKyB0byArICd7XG5iO1xufScgKyB0YyArICdlbHNlJyArIHRvICsgJ3tcbmM7XG59JywKICAgICAgICAgICAgICAgICAgICAnaWYgKGEpJyArIGVvICsgJ3tcbiAgICBiO1xufScgKyBlYyArICdlbHNlJyArIGVvICsgJ3tcbiAgICBjO1xufScpOwogICAgICAgICAgICAgICAgdGVzdF9mcmFnbWVudCgnICAgIC8qXG4qIHh4XG4qL1xuLy8geHhcbmlmIChmb28pJyArIHRvICsgJ3tcbiAgICBiYXIoKTtcbn0nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnICAgIC8qXG4gICAgICogeHhcbiAgICAgKi9cbiAgICAvLyB4eFxuICAgIGlmIChmb28pJyArIGVvICsgaSArICd7XG4gICAgICAgIGJhcigpO1xuICAgIH0nKTsKICAgICAgICAgICAgICAgIGJ0KCAnaWYgKGZvbyknICsgdG8gKyAne30nICsgdGMgKyAnZWxzZSAvcmVnZXgvLnRlc3QoKTsnLAogICAgICAgICAgICAgICAgICAgICdpZiAoZm9vKScgKyBlbyArICd7fScgKyBlYyArICdlbHNlIC9yZWdleC8udGVzdCgpOycpOwogICAgICAgICAgICAgICAgdGVzdF9mcmFnbWVudCgnaWYgKGZvbyknICsgdG8gKyAneycsICdpZiAoZm9vKScgKyBlbyArICd7Jyk7CiAgICAgICAgICAgICAgICB0ZXN0X2ZyYWdtZW50KCdmb28nICsgdG8gKyAneycsICdmb28nICsgZW8gKyAneycpOwogICAgICAgICAgICAgICAgdGVzdF9mcmFnbWVudCgncmV0dXJuOycgKyB0byArICd7JywgJ3JldHVybjsnICsgZW8gKyAneycpOwogICAgICAgICAgICAgICAgYnQoICdmdW5jdGlvbiB4KCknICsgdG8gKyAne1xuICAgIGZvbygpO1xufXp6eicsICdmdW5jdGlvbiB4KCknICsgZW8gKyd7XG4gICAgZm9vKCk7XG59XG56enonKTsKICAgICAgICAgICAgICAgIGJ0KCAndmFyIGEgPSBuZXcgZnVuY3Rpb24gYSgpJyArIHRvICsgJ3t9OycsICd2YXIgYSA9IG5ldyBmdW5jdGlvbiBhKCknICsgZW8gKyAne307Jyk7CiAgICAgICAgICAgICAgICBidCggJ3ZhciBhID0gbmV3IGZ1bmN0aW9uIGEoKScgKyB0byArICcgICAge30sXG4gICAgYiA9IG5ldyBmdW5jdGlvbiBiKCknICsgdG8gKyAnICAgIHt9OycsCiAgICAgICAgICAgICAgICAgICAgJ3ZhciBhID0gbmV3IGZ1bmN0aW9uIGEoKScgKyBlbyArIGkgKyAne30sXG4gICAgYiA9IG5ldyBmdW5jdGlvbiBiKCknICsgZW8gKyBpICsgJ3t9OycpOwogICAgICAgICAgICAgICAgYnQoImZvbygiICsgdG8gKyAie1xuICAgICdhJzogMVxufSxcbjEwKTsiLAogICAgICAgICAgICAgICAgICAgImZvbygiICsgKGVvID09PSAnICcgPyAnJyA6IGVvKSArIGkgKyAie1xuICAgICAgICAnYSc6IDFcbiAgICB9LFxuICAgIDEwKTsiKTsgLy8gImZvbyggey4uLiIgaXMgYSB3ZWlyZCBjYXNlCiAgICAgICAgICAgICAgICBidCgnKFsiZm9vIiwiYmFyIl0pLmVhY2goZnVuY3Rpb24oaSknICsgdG8gKyAne3JldHVybiBpO30pOycsCiAgICAgICAgICAgICAgICAgICAnKFsiZm9vIiwgImJhciJdKS5lYWNoKGZ1bmN0aW9uKGkpJyArIGVvICsgJ3tcbiAgICByZXR1cm4gaTtcbn0pOycpOwogICAgICAgICAgICAgICAgYnQoJyhmdW5jdGlvbihpKScgKyB0byArICd7cmV0dXJuIGk7fSkoKTsnLCAnKGZ1bmN0aW9uKGkpJyArIGVvICsgJ3tcbiAgICByZXR1cm4gaTtcbn0pKCk7Jyk7CgogICAgICAgICAgICAgICAgYnQoICJ0ZXN0KCAvKkFyZ3VtZW50IDEqLyIgKyB0byArICJ7XG4iICsKICAgICAgICAgICAgICAgICAgICAiICAgICdWYWx1ZTEnOiAnMSdcbiIgKwogICAgICAgICAgICAgICAgICAgICJ9LCAvKkFyZ3VtZW50IDJcbiIgKwogICAgICAgICAgICAgICAgICAgICIgKi8ge1xuIiArCiAgICAgICAgICAgICAgICAgICAgIiAgICAnVmFsdWUyJzogJzInXG4iICsKICAgICAgICAgICAgICAgICAgICAifSk7IiwKICAgICAgICAgICAgICAgICAgICAvLyBleHBlY3RlZAogICAgICAgICAgICAgICAgICAgICJ0ZXN0KCAvKkFyZ3VtZW50IDEqLyIgKyBlbyArIGkgKyAie1xuIiArCiAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgJ1ZhbHVlMSc6ICcxJ1xuIiArCiAgICAgICAgICAgICAgICAgICAgIiAgICB9LFxuIiArCiAgICAgICAgICAgICAgICAgICAgIiAgICAvKkFyZ3VtZW50IDJcbiIgKwogICAgICAgICAgICAgICAgICAgICIgICAgICovXG4iICsKICAgICAgICAgICAgICAgICAgICAiICAgIHtcbiIgKwogICAgICAgICAgICAgICAgICAgICIgICAgICAgICdWYWx1ZTInOiAnMidcbiIgKwogICAgICAgICAgICAgICAgICAgICIgICAgfSk7Iik7CgogICAgICAgICAgICAgICAgYnQoICJ0ZXN0KCAvKkFyZ3VtZW50IDEqLyIgKyB0byArICJ7XG4iICsKICAgICAgICAgICAgICAgICAgICAiICAgICdWYWx1ZTEnOiAnMSdcbiIgKwogICAgICAgICAgICAgICAgICAgICJ9LCAvKkFyZ3VtZW50IDJcbiIgKwogICAgICAgICAgICAgICAgICAgICIgKi9cbiIgKwogICAgICAgICAgICAgICAgICAgICJ7XG4iICsKICAgICAgICAgICAgICAgICAgICAiICAgICdWYWx1ZTInOiAnMidcbiIgKwogICAgICAgICAgICAgICAgICAgICJ9KTsiLAogICAgICAgICAgICAgICAgICAgIC8vIGV4cGVjdGVkCiAgICAgICAgICAgICAgICAgICAgInRlc3QoIC8qQXJndW1lbnQgMSovIiArIGVvICsgaSArICJ7XG4iICsKICAgICAgICAgICAgICAgICAgICAiICAgICAgICAnVmFsdWUxJzogJzEnXG4iICsKICAgICAgICAgICAgICAgICAgICAiICAgIH0sXG4iICsKICAgICAgICAgICAgICAgICAgICAiICAgIC8qQXJndW1lbnQgMlxuIiArCiAgICAgICAgICAgICAgICAgICAgIiAgICAgKi9cbiIgKwogICAgICAgICAgICAgICAgICAgICIgICAge1xuIiArCiAgICAgICAgICAgICAgICAgICAgIiAgICAgICAgJ1ZhbHVlMic6ICcyJ1xuIiArCiAgICAgICAgICAgICAgICAgICAgIiAgICB9KTsiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcnVuX2JyYWNlX3Blcm11dGF0aW9uKCdcbicsICdcbicpOwogICAgICAgICAgICBydW5fYnJhY2VfcGVybXV0YXRpb24oJ1xuJywgJyAnKTsKICAgICAgICAgICAgcnVuX2JyYWNlX3Blcm11dGF0aW9uKCcgJywgJyAnKTsKICAgICAgICAgICAgcnVuX2JyYWNlX3Blcm11dGF0aW9uKCcgJywgJ1xuJyk7CiAgICAgICAgICAgIHJ1bl9icmFjZV9wZXJtdXRhdGlvbignJywnJyk7CgogICAgICAgICAgICAvLyBicmFjZSB0ZXN0cyB0aGF0IGRvbid0IG1ha2Ugc2Vuc2UgdG8gcGVybXV0YXRlCiAgICAgICAgICAgIHRlc3RfZnJhZ21lbnQoJ3JldHVybiB7Jyk7IC8vIHJldHVybiBuZWVkcyB0aGUgYnJhY2UuCiAgICAgICAgICAgIHRlc3RfZnJhZ21lbnQoJ3JldHVybiAvKiBpbmxpbmUgKi8geycpOwogICAgICAgICAgICBidCgndGhyb3cge30nKTsKICAgICAgICAgICAgYnQoJ3Rocm93IHtcbiAgICBmb287XG59Jyk7CiAgICAgICAgICAgIGJ0KCAndmFyIGZvbyA9IHt9Jyk7CiAgICAgICAgICAgIHRlc3RfZnJhZ21lbnQoJ2E6IGRvIHt9IHdoaWxlICgpOyB4eHgnLCAnYTogZG8ge30gd2hpbGUgKCk7XG54eHgnKTsKICAgICAgICAgICAgYnQoICd7YTogZG8ge30gd2hpbGUgKCk7IHh4eH0nLCAne1xuICAgIGE6IGRvIHt9IHdoaWxlICgpO3h4eFxufScpOwogICAgICAgICAgICBidCggJ3ZhciBhID0gbmV3IGZ1bmN0aW9uKCkge307Jyk7CiAgICAgICAgICAgIGJ0KCAndmFyIGEgPSBuZXcgZnVuY3Rpb24oKVxue307JywgJ3ZhciBhID0gbmV3IGZ1bmN0aW9uKCkge307Jyk7CiAgICAgICAgICAgIGJ0KCAidGVzdChcbiIgKwogICAgICAgICAgICAgICAgIi8qQXJndW1lbnQgMSovIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAnVmFsdWUxJzogJzEnXG4iICsKICAgICAgICAgICAgICAgICJ9LFxuIiArCiAgICAgICAgICAgICAgICAiLypBcmd1bWVudCAyXG4iICsKICAgICAgICAgICAgICAgICIgKi8ge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICdWYWx1ZTInOiAnMidcbiIgKwogICAgICAgICAgICAgICAgIn0pOyIsCiAgICAgICAgICAgICAgICAvLyBleHBlY3RlZAogICAgICAgICAgICAgICAgInRlc3QoXG4iICsKICAgICAgICAgICAgICAgICIgICAgLypBcmd1bWVudCAxKi9cbiIgKwogICAgICAgICAgICAgICAgIiAgICB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICdWYWx1ZTEnOiAnMSdcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9LFxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qQXJndW1lbnQgMlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgJ1ZhbHVlMic6ICcyJ1xuIiArCiAgICAgICAgICAgICAgICAiICAgIH0pOyIpOwogICAgICAgIH0KCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIG9wdHMuYnJhY2Vfc3R5bGUgPSBicmFjZV9zdHlsZTsKCiAgICAgICAgc3dpdGNoKG9wdHMuYnJhY2Vfc3R5bGUpIHsKICAgICAgICBjYXNlICdjb2xsYXBzZSc6CiAgICAgICAgICAgIHBlcm11dGVfYnJhY2VfdGVzdHMoJyAnLCAnICcpOwogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdleHBhbmQnOgogICAgICAgICAgICBwZXJtdXRlX2JyYWNlX3Rlc3RzKCdcbicsICdcbicpOwogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdlbmQtZXhwYW5kJzoKICAgICAgICAgICAgcGVybXV0ZV9icmFjZV90ZXN0cygnICcsICdcbicpOwogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdub25lJzoKICAgICAgICAgICAgcGVybXV0ZV9icmFjZV90ZXN0cygpOwogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdW5pY29kZV9jaGFyKHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUodmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJlYXV0aWZpZXJfdGVzdHMoKQogICAgewogICAgICAgIHNhbml0eXRlc3QgPSB0ZXN0X29iajsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIFVuaWNvZGUgU3VwcG9ydAogICAgICAgIGJ0KCd2YXIgJyArIHVuaWNvZGVfY2hhcigzMjMyKSArICdfJyArIHVuaWNvZGVfY2hhcigzMjMyKSArICcgPSAiaGkiOycpOwogICAgICAgIGJ0KAogICAgICAgICAgICAndmFyICcgKyB1bmljb2RlX2NoYXIoMjI4KSArICd4ID0ge1xuJyArCiAgICAgICAgICAgICcgICAgJyArIHVuaWNvZGVfY2hhcigyMjgpICsgJ3JnZXJsaWNoOiB0cnVlXG4nICsKICAgICAgICAgICAgJ307Jyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBUZXN0IHRlbXBsYXRlIGFuZCBjb250aW51YXRpb24gc3RyaW5ncwogICAgICAgIGJ0KCdgVGhpcyBpcyBhICR7dGVtcGxhdGV9IHN0cmluZy5gJyk7CiAgICAgICAgYnQoJ2BUaGlzXG4gIGlzXG4gIGFcbiAgJHt0ZW1wbGF0ZX1cbiAgc3RyaW5nLmAnKTsKICAgICAgICBidCgnYSA9IGBUaGlzIGlzIGEgY29udGludWF0aW9uXFxuc3RyaW5nLmAnKTsKICAgICAgICBidCgnYSA9ICJUaGlzIGlzIGEgY29udGludWF0aW9uXFxuc3RyaW5nLiInKTsKICAgICAgICBidCgnYFNFTEVDVFxuICBuZXh0dmFsKFwnJHt0aGlzLm9wdGlvbnMuc2NoZW1hID8gYCR7dGhpcy5vcHRpb25zLnNjaGVtYX0uYCA6IFwnXCd9IiR7dGhpcy50YWJsZU5hbWV9XyR7dGhpcy5hdXRvSW5jcmVtZW50RmllbGR9X3NlcSJcJzo6cmVnY2xhc3NcbiAgKSBuZXh0dmFsO2AnKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIEVTNyBEZWNvcmF0b3JzCiAgICAgICAgYnQoJ0Bmb28nKTsKICAgICAgICBidCgnQGZvbyhiYXIpJyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICdAZm9vKGZ1bmN0aW9uKGssIHYpIHtcbicgKwogICAgICAgICAgICAnICAgIGltcGxlbWVudGF0aW9uKCk7XG4nICsKICAgICAgICAgICAgJ30pJyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBFUzcgZXhwb25lbnRpYWwKICAgICAgICBidCgneCAqKiAyJyk7CiAgICAgICAgYnQoJ3ggKiogLTInKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIEVuZCBXaXRoIE5ld2xpbmUgLSAoZW9mID0gIlxuIikKICAgICAgICBvcHRzLmVuZF93aXRoX25ld2xpbmUgPSB0cnVlOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJycsICdcbicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJyAgIHJldHVybiAuNScsICcgICByZXR1cm4gLjVcbicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJyAgIFxuXG5yZXR1cm4gLjVcblxuXG5cbicsICcgICByZXR1cm4gLjVcbicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJ1xuJyk7CgogICAgICAgIC8vIEVuZCBXaXRoIE5ld2xpbmUgLSAoZW9mID0gIiIpCiAgICAgICAgb3B0cy5lbmRfd2l0aF9uZXdsaW5lID0gZmFsc2U7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnJyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnICAgcmV0dXJuIC41Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnICAgXG5cbnJldHVybiAuNVxuXG5cblxuJywgJyAgIHJldHVybiAuNScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJ1xuJywgJycpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgLy8gQnJhY2Ugc3R5bGUgcGVybXV0YXRpb25zIC0gKGlibyA9ICIiLCBpYW8gPSAiIiwgaWJjID0gIiIsIGlhYyA9ICIiLCBvYm8gPSAiICIsIG9hbyA9ICIgIiwgb2JjID0gIiAiLCBvYWMgPSAiICIpCiAgICAgICAgb3B0cy5icmFjZV9zdHlsZSA9ICdjb2xsYXBzZS1wcmVzZXJ2ZS1pbmxpbmUnOwogICAgICAgIGJ0KCd2YXIgYSA9e2E6IDJ9O1xudmFyIGEgPXthOiAyfTsnLCAndmFyIGEgPSB7IGE6IDIgfTtcbnZhciBhID0geyBhOiAyIH07Jyk7CiAgICAgICAgYnQoJy8vY2FzZSAxXG5pZiAoYSA9PSAxKXt9XG4vL2Nhc2UgMlxuZWxzZSBpZiAoYSA9PSAyKXt9JywgJy8vY2FzZSAxXG5pZiAoYSA9PSAxKSB7fVxuLy9jYXNlIDJcbmVsc2UgaWYgKGEgPT0gMikge30nKTsKICAgICAgICBidCgnaWYoMSl7Mn1lbHNlezN9JywgJ2lmICgxKSB7IDIgfSBlbHNlIHsgMyB9Jyk7CiAgICAgICAgYnQoJ3RyeXthKCk7fWNhdGNoKGIpe2MoKTt9Y2F0Y2goZCl7fWZpbmFsbHl7ZSgpO30nLCAndHJ5IHsgYSgpOyB9IGNhdGNoIChiKSB7IGMoKTsgfSBjYXRjaCAoZCkge30gZmluYWxseSB7IGUoKTsgfScpOwoKICAgICAgICAvLyBCcmFjZSBzdHlsZSBwZXJtdXRhdGlvbnMgLSAoaWJvID0gIlxuIiwgaWFvID0gIlxuIiwgaWJjID0gIlxuIiwgaWFjID0gIlxuIiwgb2JvID0gIiAiLCBvYW8gPSAiXG4gICAgIiwgb2JjID0gIlxuIiwgb2FjID0gIiAiKQogICAgICAgIG9wdHMuYnJhY2Vfc3R5bGUgPSAnY29sbGFwc2UtcHJlc2VydmUtaW5saW5lJzsKICAgICAgICBidCgndmFyIGEgPVxue1xuYTogMlxufVxuO1xudmFyIGEgPVxue1xuYTogMlxufVxuOycsICd2YXIgYSA9IHtcbiAgICBhOiAyXG59O1xudmFyIGEgPSB7XG4gICAgYTogMlxufTsnKTsKICAgICAgICBidCgnLy9jYXNlIDFcbmlmIChhID09IDEpXG57fVxuLy9jYXNlIDJcbmVsc2UgaWYgKGEgPT0gMilcbnt9JywgJy8vY2FzZSAxXG5pZiAoYSA9PSAxKSB7fVxuLy9jYXNlIDJcbmVsc2UgaWYgKGEgPT0gMikge30nKTsKICAgICAgICBidCgnaWYoMSlcbntcbjJcbn1cbmVsc2VcbntcbjNcbn0nLCAnaWYgKDEpIHtcbiAgICAyXG59IGVsc2Uge1xuICAgIDNcbn0nKTsKICAgICAgICBidCgndHJ5XG57XG5hKCk7XG59XG5jYXRjaChiKVxue1xuYygpO1xufVxuY2F0Y2goZClcbnt9XG5maW5hbGx5XG57XG5lKCk7XG59JywgJ3RyeSB7XG4gICAgYSgpO1xufSBjYXRjaCAoYikge1xuICAgIGMoKTtcbn0gY2F0Y2ggKGQpIHt9IGZpbmFsbHkge1xuICAgIGUoKTtcbn0nKTsKCiAgICAgICAgLy8gQnJhY2Ugc3R5bGUgcGVybXV0YXRpb25zIC0gKGlibyA9ICIiLCBpYW8gPSAiIiwgaWJjID0gIiIsIGlhYyA9ICIiLCBvYm8gPSAiICIsIG9hbyA9ICJcbiAgICAiLCBvYmMgPSAiXG4iLCBvYWMgPSAiICIpCiAgICAgICAgb3B0cy5icmFjZV9zdHlsZSA9ICdjb2xsYXBzZSc7CiAgICAgICAgYnQoJ3ZhciBhID17YTogMn07XG52YXIgYSA9e2E6IDJ9OycsICd2YXIgYSA9IHtcbiAgICBhOiAyXG59O1xudmFyIGEgPSB7XG4gICAgYTogMlxufTsnKTsKICAgICAgICBidCgnLy9jYXNlIDFcbmlmIChhID09IDEpe31cbi8vY2FzZSAyXG5lbHNlIGlmIChhID09IDIpe30nLCAnLy9jYXNlIDFcbmlmIChhID09IDEpIHt9XG4vL2Nhc2UgMlxuZWxzZSBpZiAoYSA9PSAyKSB7fScpOwogICAgICAgIGJ0KCdpZigxKXsyfWVsc2V7M30nLCAnaWYgKDEpIHtcbiAgICAyXG59IGVsc2Uge1xuICAgIDNcbn0nKTsKICAgICAgICBidCgndHJ5e2EoKTt9Y2F0Y2goYil7YygpO31jYXRjaChkKXt9ZmluYWxseXtlKCk7fScsICd0cnkge1xuICAgIGEoKTtcbn0gY2F0Y2ggKGIpIHtcbiAgICBjKCk7XG59IGNhdGNoIChkKSB7fSBmaW5hbGx5IHtcbiAgICBlKCk7XG59Jyk7CgogICAgICAgIC8vIEJyYWNlIHN0eWxlIHBlcm11dGF0aW9ucyAtIChpYm8gPSAiXG4iLCBpYW8gPSAiXG4iLCBpYmMgPSAiXG4iLCBpYWMgPSAiXG4iLCBvYm8gPSAiICIsIG9hbyA9ICJcbiAgICAiLCBvYmMgPSAiXG4iLCBvYWMgPSAiICIpCiAgICAgICAgb3B0cy5icmFjZV9zdHlsZSA9ICdjb2xsYXBzZSc7CiAgICAgICAgYnQoJ3ZhciBhID1cbntcbmE6IDJcbn1cbjtcbnZhciBhID1cbntcbmE6IDJcbn1cbjsnLCAndmFyIGEgPSB7XG4gICAgYTogMlxufTtcbnZhciBhID0ge1xuICAgIGE6IDJcbn07Jyk7CiAgICAgICAgYnQoJy8vY2FzZSAxXG5pZiAoYSA9PSAxKVxue31cbi8vY2FzZSAyXG5lbHNlIGlmIChhID09IDIpXG57fScsICcvL2Nhc2UgMVxuaWYgKGEgPT0gMSkge31cbi8vY2FzZSAyXG5lbHNlIGlmIChhID09IDIpIHt9Jyk7CiAgICAgICAgYnQoJ2lmKDEpXG57XG4yXG59XG5lbHNlXG57XG4zXG59JywgJ2lmICgxKSB7XG4gICAgMlxufSBlbHNlIHtcbiAgICAzXG59Jyk7CiAgICAgICAgYnQoJ3RyeVxue1xuYSgpO1xufVxuY2F0Y2goYilcbntcbmMoKTtcbn1cbmNhdGNoKGQpXG57fVxuZmluYWxseVxue1xuZSgpO1xufScsICd0cnkge1xuICAgIGEoKTtcbn0gY2F0Y2ggKGIpIHtcbiAgICBjKCk7XG59IGNhdGNoIChkKSB7fSBmaW5hbGx5IHtcbiAgICBlKCk7XG59Jyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBDb21tYS1maXJzdCBvcHRpb24gLSAoYzAgPSAiLFxuIiwgYzEgPSAiLFxuICAgICIsIGMyID0gIixcbiAgICAgICAgIiwgYzMgPSAiLFxuICAgICAgICAgICAgIiwgZjEgPSAiICAgICxcbiAgICAiKQogICAgICAgIG9wdHMuY29tbWFfZmlyc3QgPSBmYWxzZTsKICAgICAgICBidCgne2E6MSwgYjoyfScsICd7XG4gICAgYTogMSxcbiAgICBiOiAyXG59Jyk7CiAgICAgICAgYnQoJ3ZhciBhPTEsIGI9Y1tkXSwgZT02OycsICd2YXIgYSA9IDEsXG4gICAgYiA9IGNbZF0sXG4gICAgZSA9IDY7Jyk7CiAgICAgICAgYnQoJ2Zvcih2YXIgYT0xLGI9MixjPTM7ZDwzO2QrKylcbmUnLCAnZm9yICh2YXIgYSA9IDEsIGIgPSAyLCBjID0gMzsgZCA8IDM7IGQrKylcbiAgICBlJyk7CiAgICAgICAgYnQoJ2Zvcih2YXIgYT0xLGI9MixcbmM9MztkPDM7ZCsrKVxuZScsICdmb3IgKHZhciBhID0gMSwgYiA9IDIsXG4gICAgICAgIGMgPSAzOyBkIDwgMzsgZCsrKVxuICAgIGUnKTsKICAgICAgICBidCgnZnVuY3Rpb24gZm9vKCkge1xuICAgIHJldHVybiBbXG4gICAgICAgICJvbmUiLFxuICAgICAgICAidHdvIlxuICAgIF07XG59Jyk7CiAgICAgICAgYnQoJ2E9W1sxLDJdLFs0LDVdLFs3LDhdXScsICdhID0gW1xuICAgIFsxLCAyXSxcbiAgICBbNCwgNV0sXG4gICAgWzcsIDhdXG5dJyk7CiAgICAgICAgYnQoJ2E9W1sxLDJdLFs0LDVdLFs3LDhdLF0nLCAnYSA9IFtcbiAgICBbMSwgMl0sXG4gICAgWzQsIDVdLFxuICAgIFs3LCA4XSxcbl0nKTsKICAgICAgICBidCgnYT1bWzEsMl0sWzQsNV0sZnVuY3Rpb24oKXt9LFs3LDhdXScsICdhID0gW1xuICAgIFsxLCAyXSxcbiAgICBbNCwgNV0sXG4gICAgZnVuY3Rpb24oKSB7fSxcbiAgICBbNywgOF1cbl0nKTsKICAgICAgICBidCgnYT1bWzEsMl0sWzQsNV0sZnVuY3Rpb24oKXt9LGZ1bmN0aW9uKCl7fSxbNyw4XV0nLCAnYSA9IFtcbiAgICBbMSwgMl0sXG4gICAgWzQsIDVdLFxuICAgIGZ1bmN0aW9uKCkge30sXG4gICAgZnVuY3Rpb24oKSB7fSxcbiAgICBbNywgOF1cbl0nKTsKICAgICAgICBidCgnYT1bWzEsMl0sWzQsNV0sZnVuY3Rpb24oKXt9LFs3LDhdXScsICdhID0gW1xuICAgIFsxLCAyXSxcbiAgICBbNCwgNV0sXG4gICAgZnVuY3Rpb24oKSB7fSxcbiAgICBbNywgOF1cbl0nKTsKICAgICAgICBidCgnYT1bYixjLGZ1bmN0aW9uKCl7fSxmdW5jdGlvbigpe30sZF0nLCAnYSA9IFtiLCBjLCBmdW5jdGlvbigpIHt9LCBmdW5jdGlvbigpIHt9LCBkXScpOwogICAgICAgIGJ0KCdhPVtiLGMsXG5mdW5jdGlvbigpe30sZnVuY3Rpb24oKXt9LGRdJywgJ2EgPSBbYiwgYyxcbiAgICBmdW5jdGlvbigpIHt9LFxuICAgIGZ1bmN0aW9uKCkge30sXG4gICAgZFxuXScpOwogICAgICAgIGJ0KCdhPVthWzFdLGJbNF0sY1tkWzddXV0nLCAnYSA9IFthWzFdLCBiWzRdLCBjW2RbN11dXScpOwogICAgICAgIGJ0KCdbMSwyLFszLDQsWzUsNl0sN10sOF0nLCAnWzEsIDIsIFszLCA0LCBbNSwgNl0sIDddLCA4XScpOwogICAgICAgIGJ0KCdbW1siMSIsIjIiXSxbIjMiLCI0Il1dLFtbIjUiLCI2IiwiNyJdLFsiOCIsIjkiLCIwIl1dLFtbIjEiLCIyIiwiMyJdLFsiNCIsIjUiLCI2IiwiNyJdLFsiOCIsIjkiLCIwIl1dXScsICdbXG4gICAgW1xuICAgICAgICBbIjEiLCAiMiJdLFxuICAgICAgICBbIjMiLCAiNCJdXG4gICAgXSxcbiAgICBbXG4gICAgICAgIFsiNSIsICI2IiwgIjciXSxcbiAgICAgICAgWyI4IiwgIjkiLCAiMCJdXG4gICAgXSxcbiAgICBbXG4gICAgICAgIFsiMSIsICIyIiwgIjMiXSxcbiAgICAgICAgWyI0IiwgIjUiLCAiNiIsICI3Il0sXG4gICAgICAgIFsiOCIsICI5IiwgIjAiXVxuICAgIF1cbl0nKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ2NoYW5nZUNvbGxlY3Rpb24uYWRkKHtcbicgKwogICAgICAgICAgICAnICAgIG5hbWU6ICJKb25hdGhhbiIgLy8gTmV3IGxpbmUgaW5zZXJ0ZWQgYWZ0ZXIgdGhpcyBsaW5lIG9uIGV2ZXJ5IHNhdmVcbicgKwogICAgICAgICAgICAnICAgICwgYWdlOiAyNVxuJyArCiAgICAgICAgICAgICd9KTsnLAogICAgICAgICAgICAnY2hhbmdlQ29sbGVjdGlvbi5hZGQoe1xuJyArCiAgICAgICAgICAgICcgICAgbmFtZTogIkpvbmF0aGFuIiAvLyBOZXcgbGluZSBpbnNlcnRlZCBhZnRlciB0aGlzIGxpbmUgb24gZXZlcnkgc2F2ZVxuJyArCiAgICAgICAgICAgICcgICAgICAgICxcbiAgICBhZ2U6IDI1XG4nICsKICAgICAgICAgICAgJ30pOycpOwoKICAgICAgICAvLyBDb21tYS1maXJzdCBvcHRpb24gLSAoYzAgPSAiXG4sICIsIGMxID0gIlxuICAgICwgIiwgYzIgPSAiXG4gICAgICAgICwgIiwgYzMgPSAiXG4gICAgICAgICAgICAsICIsIGYxID0gIiwgIikKICAgICAgICBvcHRzLmNvbW1hX2ZpcnN0ID0gdHJ1ZTsKICAgICAgICBidCgne2E6MSwgYjoyfScsICd7XG4gICAgYTogMVxuICAgICwgYjogMlxufScpOwogICAgICAgIGJ0KCd2YXIgYT0xLCBiPWNbZF0sIGU9NjsnLCAndmFyIGEgPSAxXG4gICAgLCBiID0gY1tkXVxuICAgICwgZSA9IDY7Jyk7CiAgICAgICAgYnQoJ2Zvcih2YXIgYT0xLGI9MixjPTM7ZDwzO2QrKylcbmUnLCAnZm9yICh2YXIgYSA9IDEsIGIgPSAyLCBjID0gMzsgZCA8IDM7IGQrKylcbiAgICBlJyk7CiAgICAgICAgYnQoJ2Zvcih2YXIgYT0xLGI9MixcbmM9MztkPDM7ZCsrKVxuZScsICdmb3IgKHZhciBhID0gMSwgYiA9IDJcbiAgICAgICAgLCBjID0gMzsgZCA8IDM7IGQrKylcbiAgICBlJyk7CiAgICAgICAgYnQoJ2Z1bmN0aW9uIGZvbygpIHtcbiAgICByZXR1cm4gW1xuICAgICAgICAib25lIlxuICAgICAgICAsICJ0d28iXG4gICAgXTtcbn0nKTsKICAgICAgICBidCgnYT1bWzEsMl0sWzQsNV0sWzcsOF1dJywgJ2EgPSBbXG4gICAgWzEsIDJdXG4gICAgLCBbNCwgNV1cbiAgICAsIFs3LCA4XVxuXScpOwogICAgICAgIGJ0KCdhPVtbMSwyXSxbNCw1XSxbNyw4XSxdJywgJ2EgPSBbXG4gICAgWzEsIDJdXG4gICAgLCBbNCwgNV1cbiAgICAsIFs3LCA4XVxuLCBdJyk7CiAgICAgICAgYnQoJ2E9W1sxLDJdLFs0LDVdLGZ1bmN0aW9uKCl7fSxbNyw4XV0nLCAnYSA9IFtcbiAgICBbMSwgMl1cbiAgICAsIFs0LCA1XVxuICAgICwgZnVuY3Rpb24oKSB7fVxuICAgICwgWzcsIDhdXG5dJyk7CiAgICAgICAgYnQoJ2E9W1sxLDJdLFs0LDVdLGZ1bmN0aW9uKCl7fSxmdW5jdGlvbigpe30sWzcsOF1dJywgJ2EgPSBbXG4gICAgWzEsIDJdXG4gICAgLCBbNCwgNV1cbiAgICAsIGZ1bmN0aW9uKCkge31cbiAgICAsIGZ1bmN0aW9uKCkge31cbiAgICAsIFs3LCA4XVxuXScpOwogICAgICAgIGJ0KCdhPVtbMSwyXSxbNCw1XSxmdW5jdGlvbigpe30sWzcsOF1dJywgJ2EgPSBbXG4gICAgWzEsIDJdXG4gICAgLCBbNCwgNV1cbiAgICAsIGZ1bmN0aW9uKCkge31cbiAgICAsIFs3LCA4XVxuXScpOwogICAgICAgIGJ0KCdhPVtiLGMsZnVuY3Rpb24oKXt9LGZ1bmN0aW9uKCl7fSxkXScsICdhID0gW2IsIGMsIGZ1bmN0aW9uKCkge30sIGZ1bmN0aW9uKCkge30sIGRdJyk7CiAgICAgICAgYnQoJ2E9W2IsYyxcbmZ1bmN0aW9uKCl7fSxmdW5jdGlvbigpe30sZF0nLCAnYSA9IFtiLCBjXG4gICAgLCBmdW5jdGlvbigpIHt9XG4gICAgLCBmdW5jdGlvbigpIHt9XG4gICAgLCBkXG5dJyk7CiAgICAgICAgYnQoJ2E9W2FbMV0sYls0XSxjW2RbN11dXScsICdhID0gW2FbMV0sIGJbNF0sIGNbZFs3XV1dJyk7CiAgICAgICAgYnQoJ1sxLDIsWzMsNCxbNSw2XSw3XSw4XScsICdbMSwgMiwgWzMsIDQsIFs1LCA2XSwgN10sIDhdJyk7CiAgICAgICAgYnQoJ1tbWyIxIiwiMiJdLFsiMyIsIjQiXV0sW1siNSIsIjYiLCI3Il0sWyI4IiwiOSIsIjAiXV0sW1siMSIsIjIiLCIzIl0sWyI0IiwiNSIsIjYiLCI3Il0sWyI4IiwiOSIsIjAiXV1dJywgJ1tcbiAgICBbXG4gICAgICAgIFsiMSIsICIyIl1cbiAgICAgICAgLCBbIjMiLCAiNCJdXG4gICAgXVxuICAgICwgW1xuICAgICAgICBbIjUiLCAiNiIsICI3Il1cbiAgICAgICAgLCBbIjgiLCAiOSIsICIwIl1cbiAgICBdXG4gICAgLCBbXG4gICAgICAgIFsiMSIsICIyIiwgIjMiXVxuICAgICAgICAsIFsiNCIsICI1IiwgIjYiLCAiNyJdXG4gICAgICAgICwgWyI4IiwgIjkiLCAiMCJdXG4gICAgXVxuXScpOwogICAgICAgIGJ0KAogICAgICAgICAgICAnY2hhbmdlQ29sbGVjdGlvbi5hZGQoe1xuJyArCiAgICAgICAgICAgICcgICAgbmFtZTogIkpvbmF0aGFuIiAvLyBOZXcgbGluZSBpbnNlcnRlZCBhZnRlciB0aGlzIGxpbmUgb24gZXZlcnkgc2F2ZVxuJyArCiAgICAgICAgICAgICcgICAgLCBhZ2U6IDI1XG4nICsKICAgICAgICAgICAgJ30pOycpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgLy8gU3BhY2UgaW4gcGFyZW5zIHRlc3RzIC0gKHMgPSAiIiwgZSA9ICIiKQogICAgICAgIG9wdHMuc3BhY2VfaW5fcGFyZW4gPSBmYWxzZTsKICAgICAgICBvcHRzLnNwYWNlX2luX2VtcHR5X3BhcmVuID0gZmFsc2U7CiAgICAgICAgYnQoJ2lmKHApIGZvbyhhLGIpOycsICdpZiAocCkgZm9vKGEsIGIpOycpOwogICAgICAgIGJ0KCd0cnl7d2hpbGUodHJ1ZSl7d2lsbFRocm93KCl9fWNhdGNoKHJlc3VsdClzd2l0Y2gocmVzdWx0KXtjYXNlIDE6KytyZXN1bHQgfScsICd0cnkge1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHdpbGxUaHJvdygpXG4gICAgfVxufSBjYXRjaCAocmVzdWx0KSBzd2l0Y2ggKHJlc3VsdCkge1xuICAgIGNhc2UgMTpcbiAgICAgICAgKytyZXN1bHRcbn0nKTsKICAgICAgICBidCgnKChlLygoYSsoYikqYyktZCkpXjIpKjU7JywgJygoZSAvICgoYSArIChiKSAqIGMpIC0gZCkpIF4gMikgKiA1OycpOwogICAgICAgIGJ0KCdmdW5jdGlvbiBmKGEsYikge2lmKGEpIGIoKX1mdW5jdGlvbiBnKGEsYikge2lmKCFhKSBiKCl9JywgJ2Z1bmN0aW9uIGYoYSwgYikge1xuICAgIGlmIChhKSBiKClcbn1cblxuZnVuY3Rpb24gZyhhLCBiKSB7XG4gICAgaWYgKCFhKSBiKClcbn0nKTsKICAgICAgICBidCgnYT1bXTsnLCAnYSA9IFtdOycpOwogICAgICAgIGJ0KCdhPVtiLGMsZF07JywgJ2EgPSBbYiwgYywgZF07Jyk7CiAgICAgICAgYnQoJ2E9IGZbYl07JywgJ2EgPSBmW2JdOycpOwogICAgICAgIGJ0KAogICAgICAgICAgICAne1xuJyArCiAgICAgICAgICAgICcgICAgZmlsZXM6IFsge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIGV4cGFuZDogdHJ1ZSxcbicgKwogICAgICAgICAgICAnICAgICAgICBjd2Q6ICJ3d3cvZ3VpLyIsXG4nICsKICAgICAgICAgICAgJyAgICAgICAgc3JjOiBbICJpbS9kZXNpZ25fc3RhbmRhcmRzLyouKiIgXSxcbicgKwogICAgICAgICAgICAnICAgICAgICBkZXN0OiAid3d3L2d1aS9idWlsZCJcbicgKwogICAgICAgICAgICAnICAgIH0gXVxuJyArCiAgICAgICAgICAgICd9JywKICAgICAgICAgICAgJ3tcbicgKwogICAgICAgICAgICAnICAgIGZpbGVzOiBbe1xuJyArCiAgICAgICAgICAgICcgICAgICAgIGV4cGFuZDogdHJ1ZSxcbicgKwogICAgICAgICAgICAnICAgICAgICBjd2Q6ICJ3d3cvZ3VpLyIsXG4nICsKICAgICAgICAgICAgJyAgICAgICAgc3JjOiBbImltL2Rlc2lnbl9zdGFuZGFyZHMvKi4qIl0sXG4nICsKICAgICAgICAgICAgJyAgICAgICAgZGVzdDogInd3dy9ndWkvYnVpbGQiXG4nICsKICAgICAgICAgICAgJyAgICB9XVxuJyArCiAgICAgICAgICAgICd9Jyk7CgogICAgICAgIC8vIFNwYWNlIGluIHBhcmVucyB0ZXN0cyAtIChzID0gIiIsIGUgPSAiIikKICAgICAgICBvcHRzLnNwYWNlX2luX3BhcmVuID0gZmFsc2U7CiAgICAgICAgb3B0cy5zcGFjZV9pbl9lbXB0eV9wYXJlbiA9IHRydWU7CiAgICAgICAgYnQoJ2lmKHApIGZvbyhhLGIpOycsICdpZiAocCkgZm9vKGEsIGIpOycpOwogICAgICAgIGJ0KCd0cnl7d2hpbGUodHJ1ZSl7d2lsbFRocm93KCl9fWNhdGNoKHJlc3VsdClzd2l0Y2gocmVzdWx0KXtjYXNlIDE6KytyZXN1bHQgfScsICd0cnkge1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHdpbGxUaHJvdygpXG4gICAgfVxufSBjYXRjaCAocmVzdWx0KSBzd2l0Y2ggKHJlc3VsdCkge1xuICAgIGNhc2UgMTpcbiAgICAgICAgKytyZXN1bHRcbn0nKTsKICAgICAgICBidCgnKChlLygoYSsoYikqYyktZCkpXjIpKjU7JywgJygoZSAvICgoYSArIChiKSAqIGMpIC0gZCkpIF4gMikgKiA1OycpOwogICAgICAgIGJ0KCdmdW5jdGlvbiBmKGEsYikge2lmKGEpIGIoKX1mdW5jdGlvbiBnKGEsYikge2lmKCFhKSBiKCl9JywgJ2Z1bmN0aW9uIGYoYSwgYikge1xuICAgIGlmIChhKSBiKClcbn1cblxuZnVuY3Rpb24gZyhhLCBiKSB7XG4gICAgaWYgKCFhKSBiKClcbn0nKTsKICAgICAgICBidCgnYT1bXTsnLCAnYSA9IFtdOycpOwogICAgICAgIGJ0KCdhPVtiLGMsZF07JywgJ2EgPSBbYiwgYywgZF07Jyk7CiAgICAgICAgYnQoJ2E9IGZbYl07JywgJ2EgPSBmW2JdOycpOwogICAgICAgIGJ0KAogICAgICAgICAgICAne1xuJyArCiAgICAgICAgICAgICcgICAgZmlsZXM6IFsge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIGV4cGFuZDogdHJ1ZSxcbicgKwogICAgICAgICAgICAnICAgICAgICBjd2Q6ICJ3d3cvZ3VpLyIsXG4nICsKICAgICAgICAgICAgJyAgICAgICAgc3JjOiBbICJpbS9kZXNpZ25fc3RhbmRhcmRzLyouKiIgXSxcbicgKwogICAgICAgICAgICAnICAgICAgICBkZXN0OiAid3d3L2d1aS9idWlsZCJcbicgKwogICAgICAgICAgICAnICAgIH0gXVxuJyArCiAgICAgICAgICAgICd9JywKICAgICAgICAgICAgJ3tcbicgKwogICAgICAgICAgICAnICAgIGZpbGVzOiBbe1xuJyArCiAgICAgICAgICAgICcgICAgICAgIGV4cGFuZDogdHJ1ZSxcbicgKwogICAgICAgICAgICAnICAgICAgICBjd2Q6ICJ3d3cvZ3VpLyIsXG4nICsKICAgICAgICAgICAgJyAgICAgICAgc3JjOiBbImltL2Rlc2lnbl9zdGFuZGFyZHMvKi4qIl0sXG4nICsKICAgICAgICAgICAgJyAgICAgICAgZGVzdDogInd3dy9ndWkvYnVpbGQiXG4nICsKICAgICAgICAgICAgJyAgICB9XVxuJyArCiAgICAgICAgICAgICd9Jyk7CgogICAgICAgIC8vIFNwYWNlIGluIHBhcmVucyB0ZXN0cyAtIChzID0gIiAiLCBlID0gIiIpCiAgICAgICAgb3B0cy5zcGFjZV9pbl9wYXJlbiA9IHRydWU7CiAgICAgICAgb3B0cy5zcGFjZV9pbl9lbXB0eV9wYXJlbiA9IGZhbHNlOwogICAgICAgIGJ0KCdpZihwKSBmb28oYSxiKTsnLCAnaWYgKCBwICkgZm9vKCBhLCBiICk7Jyk7CiAgICAgICAgYnQoJ3RyeXt3aGlsZSh0cnVlKXt3aWxsVGhyb3coKX19Y2F0Y2gocmVzdWx0KXN3aXRjaChyZXN1bHQpe2Nhc2UgMTorK3Jlc3VsdCB9JywgJ3RyeSB7XG4gICAgd2hpbGUgKCB0cnVlICkge1xuICAgICAgICB3aWxsVGhyb3coKVxuICAgIH1cbn0gY2F0Y2ggKCByZXN1bHQgKSBzd2l0Y2ggKCByZXN1bHQgKSB7XG4gICAgY2FzZSAxOlxuICAgICAgICArK3Jlc3VsdFxufScpOwogICAgICAgIGJ0KCcoKGUvKChhKyhiKSpjKS1kKSleMikqNTsnLCAnKCAoIGUgLyAoICggYSArICggYiApICogYyApIC0gZCApICkgXiAyICkgKiA1OycpOwogICAgICAgIGJ0KCdmdW5jdGlvbiBmKGEsYikge2lmKGEpIGIoKX1mdW5jdGlvbiBnKGEsYikge2lmKCFhKSBiKCl9JywgJ2Z1bmN0aW9uIGYoIGEsIGIgKSB7XG4gICAgaWYgKCBhICkgYigpXG59XG5cbmZ1bmN0aW9uIGcoIGEsIGIgKSB7XG4gICAgaWYgKCAhYSApIGIoKVxufScpOwogICAgICAgIGJ0KCdhPVtdOycsICdhID0gW107Jyk7CiAgICAgICAgYnQoJ2E9W2IsYyxkXTsnLCAnYSA9IFsgYiwgYywgZCBdOycpOwogICAgICAgIGJ0KCdhPSBmW2JdOycsICdhID0gZlsgYiBdOycpOwogICAgICAgIGJ0KAogICAgICAgICAgICAne1xuJyArCiAgICAgICAgICAgICcgICAgZmlsZXM6IFsge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIGV4cGFuZDogdHJ1ZSxcbicgKwogICAgICAgICAgICAnICAgICAgICBjd2Q6ICJ3d3cvZ3VpLyIsXG4nICsKICAgICAgICAgICAgJyAgICAgICAgc3JjOiBbICJpbS9kZXNpZ25fc3RhbmRhcmRzLyouKiIgXSxcbicgKwogICAgICAgICAgICAnICAgICAgICBkZXN0OiAid3d3L2d1aS9idWlsZCJcbicgKwogICAgICAgICAgICAnICAgIH0gXVxuJyArCiAgICAgICAgICAgICd9Jyk7CgogICAgICAgIC8vIFNwYWNlIGluIHBhcmVucyB0ZXN0cyAtIChzID0gIiAiLCBlID0gIiAiKQogICAgICAgIG9wdHMuc3BhY2VfaW5fcGFyZW4gPSB0cnVlOwogICAgICAgIG9wdHMuc3BhY2VfaW5fZW1wdHlfcGFyZW4gPSB0cnVlOwogICAgICAgIGJ0KCdpZihwKSBmb28oYSxiKTsnLCAnaWYgKCBwICkgZm9vKCBhLCBiICk7Jyk7CiAgICAgICAgYnQoJ3RyeXt3aGlsZSh0cnVlKXt3aWxsVGhyb3coKX19Y2F0Y2gocmVzdWx0KXN3aXRjaChyZXN1bHQpe2Nhc2UgMTorK3Jlc3VsdCB9JywgJ3RyeSB7XG4gICAgd2hpbGUgKCB0cnVlICkge1xuICAgICAgICB3aWxsVGhyb3coIClcbiAgICB9XG59IGNhdGNoICggcmVzdWx0ICkgc3dpdGNoICggcmVzdWx0ICkge1xuICAgIGNhc2UgMTpcbiAgICAgICAgKytyZXN1bHRcbn0nKTsKICAgICAgICBidCgnKChlLygoYSsoYikqYyktZCkpXjIpKjU7JywgJyggKCBlIC8gKCAoIGEgKyAoIGIgKSAqIGMgKSAtIGQgKSApIF4gMiApICogNTsnKTsKICAgICAgICBidCgnZnVuY3Rpb24gZihhLGIpIHtpZihhKSBiKCl9ZnVuY3Rpb24gZyhhLGIpIHtpZighYSkgYigpfScsICdmdW5jdGlvbiBmKCBhLCBiICkge1xuICAgIGlmICggYSApIGIoIClcbn1cblxuZnVuY3Rpb24gZyggYSwgYiApIHtcbiAgICBpZiAoICFhICkgYiggKVxufScpOwogICAgICAgIGJ0KCdhPVtdOycsICdhID0gWyBdOycpOwogICAgICAgIGJ0KCdhPVtiLGMsZF07JywgJ2EgPSBbIGIsIGMsIGQgXTsnKTsKICAgICAgICBidCgnYT0gZltiXTsnLCAnYSA9IGZbIGIgXTsnKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ3tcbicgKwogICAgICAgICAgICAnICAgIGZpbGVzOiBbIHtcbicgKwogICAgICAgICAgICAnICAgICAgICBleHBhbmQ6IHRydWUsXG4nICsKICAgICAgICAgICAgJyAgICAgICAgY3dkOiAid3d3L2d1aS8iLFxuJyArCiAgICAgICAgICAgICcgICAgICAgIHNyYzogWyAiaW0vZGVzaWduX3N0YW5kYXJkcy8qLioiIF0sXG4nICsKICAgICAgICAgICAgJyAgICAgICAgZGVzdDogInd3dy9ndWkvYnVpbGQiXG4nICsKICAgICAgICAgICAgJyAgICB9IF1cbicgKwogICAgICAgICAgICAnfScpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgLy8gb3BlcmF0b3JfcG9zaXRpb24gb3B0aW9uIC0gZW5zdXJlIG5vIG5lc3dsaW5lcyBpZiBwcmVzZXJ2ZV9uZXdsaW5lcyBpcyBmYWxzZSAtICgpCiAgICAgICAgb3B0cy5vcGVyYXRvcl9wb3NpdGlvbiA9ICdiZWZvcmUtbmV3bGluZSc7CiAgICAgICAgb3B0cy5wcmVzZXJ2ZV9uZXdsaW5lcyA9IGZhbHNlOwogICAgICAgIGJ0KAogICAgICAgICAgICAndmFyIHJlcyA9IGEgKyBiIC0gYyAvIGQgKiBlICUgZjtcbicgKwogICAgICAgICAgICAndmFyIHJlcyA9IGcgJiBoIHwgaSBeIGo7XG4nICsKICAgICAgICAgICAgJ3ZhciByZXMgPSAoayAmJiBsIHx8IG0pID8gbiA6IG87XG4nICsKICAgICAgICAgICAgJ3ZhciByZXMgPSBwID4+IHEgPDwgciA+Pj4gcztcbicgKwogICAgICAgICAgICAndmFyIHJlcyA9IHQgPT09IHUgIT09IHYgIT0gdyA9PSB4ID49IHkgPD0geiA+IGFhIDwgYWI7XG4nICsKICAgICAgICAgICAgJ2FjICsgLWFkJyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgcmVzID0gYSArIGJcbicgKwogICAgICAgICAgICAnLSBjIC9cbicgKwogICAgICAgICAgICAnZCAgKiAgICAgZVxuJyArCiAgICAgICAgICAgICclXG4nICsKICAgICAgICAgICAgJ2Y7XG4nICsKICAgICAgICAgICAgJyAgIHZhciByZXMgPSBnICYgaFxuJyArCiAgICAgICAgICAgICd8IGkgXlxuJyArCiAgICAgICAgICAgICdqO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gKGsgJiZcbicgKwogICAgICAgICAgICAnbFxuJyArCiAgICAgICAgICAgICd8fCBtKSA/XG4nICsKICAgICAgICAgICAgJ25cbicgKwogICAgICAgICAgICAnOiBvXG4nICsKICAgICAgICAgICAgJztcbicgKwogICAgICAgICAgICAndmFyIHJlcyA9IHBcbicgKwogICAgICAgICAgICAnPj4gcSA8PFxuJyArCiAgICAgICAgICAgICdyXG4nICsKICAgICAgICAgICAgJz4+PiBzO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzXG4nICsKICAgICAgICAgICAgJyAgPSB0XG4nICsKICAgICAgICAgICAgJ1xuJyArCiAgICAgICAgICAgICcgPT09IHUgIT09IHZcbicgKwogICAgICAgICAgICAnICE9XG4nICsKICAgICAgICAgICAgJ3dcbicgKwogICAgICAgICAgICAnPT0geCA+PVxuJyArCiAgICAgICAgICAgICd5IDw9IHogPiBhYSA8XG4nICsKICAgICAgICAgICAgJ2FiO1xuJyArCiAgICAgICAgICAgICdhYyArXG4nICsKICAgICAgICAgICAgJy1hZCcsCiAgICAgICAgICAgICd2YXIgcmVzID0gYSArIGIgLSBjIC8gZCAqIGUgJSBmO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gZyAmIGggfCBpIF4gajtcbicgKwogICAgICAgICAgICAndmFyIHJlcyA9IChrICYmIGwgfHwgbSkgPyBuIDogbztcbicgKwogICAgICAgICAgICAndmFyIHJlcyA9IHAgPj4gcSA8PCByID4+PiBzO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gdCA9PT0gdSAhPT0gdiAhPSB3ID09IHggPj0geSA8PSB6ID4gYWEgPCBhYjtcbicgKwogICAgICAgICAgICAnYWMgKyAtYWQnKTsKCiAgICAgICAgLy8gb3BlcmF0b3JfcG9zaXRpb24gb3B0aW9uIC0gZW5zdXJlIG5vIG5lc3dsaW5lcyBpZiBwcmVzZXJ2ZV9uZXdsaW5lcyBpcyBmYWxzZSAtICgpCiAgICAgICAgb3B0cy5vcGVyYXRvcl9wb3NpdGlvbiA9ICdhZnRlci1uZXdsaW5lJzsKICAgICAgICBvcHRzLnByZXNlcnZlX25ld2xpbmVzID0gZmFsc2U7CiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgcmVzID0gYSArIGIgLSBjIC8gZCAqIGUgJSBmO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gZyAmIGggfCBpIF4gajtcbicgKwogICAgICAgICAgICAndmFyIHJlcyA9IChrICYmIGwgfHwgbSkgPyBuIDogbztcbicgKwogICAgICAgICAgICAndmFyIHJlcyA9IHAgPj4gcSA8PCByID4+PiBzO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gdCA9PT0gdSAhPT0gdiAhPSB3ID09IHggPj0geSA8PSB6ID4gYWEgPCBhYjtcbicgKwogICAgICAgICAgICAnYWMgKyAtYWQnKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciByZXMgPSBhICsgYlxuJyArCiAgICAgICAgICAgICctIGMgL1xuJyArCiAgICAgICAgICAgICdkICAqICAgICBlXG4nICsKICAgICAgICAgICAgJyVcbicgKwogICAgICAgICAgICAnZjtcbicgKwogICAgICAgICAgICAnICAgdmFyIHJlcyA9IGcgJiBoXG4nICsKICAgICAgICAgICAgJ3wgaSBeXG4nICsKICAgICAgICAgICAgJ2o7XG4nICsKICAgICAgICAgICAgJ3ZhciByZXMgPSAoayAmJlxuJyArCiAgICAgICAgICAgICdsXG4nICsKICAgICAgICAgICAgJ3x8IG0pID9cbicgKwogICAgICAgICAgICAnblxuJyArCiAgICAgICAgICAgICc6IG9cbicgKwogICAgICAgICAgICAnO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gcFxuJyArCiAgICAgICAgICAgICc+PiBxIDw8XG4nICsKICAgICAgICAgICAgJ3JcbicgKwogICAgICAgICAgICAnPj4+IHM7XG4nICsKICAgICAgICAgICAgJ3ZhciByZXNcbicgKwogICAgICAgICAgICAnICA9IHRcbicgKwogICAgICAgICAgICAnXG4nICsKICAgICAgICAgICAgJyA9PT0gdSAhPT0gdlxuJyArCiAgICAgICAgICAgICcgIT1cbicgKwogICAgICAgICAgICAnd1xuJyArCiAgICAgICAgICAgICc9PSB4ID49XG4nICsKICAgICAgICAgICAgJ3kgPD0geiA+IGFhIDxcbicgKwogICAgICAgICAgICAnYWI7XG4nICsKICAgICAgICAgICAgJ2FjICtcbicgKwogICAgICAgICAgICAnLWFkJywKICAgICAgICAgICAgJ3ZhciByZXMgPSBhICsgYiAtIGMgLyBkICogZSAlIGY7XG4nICsKICAgICAgICAgICAgJ3ZhciByZXMgPSBnICYgaCB8IGkgXiBqO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gKGsgJiYgbCB8fCBtKSA/IG4gOiBvO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gcCA+PiBxIDw8IHIgPj4+IHM7XG4nICsKICAgICAgICAgICAgJ3ZhciByZXMgPSB0ID09PSB1ICE9PSB2ICE9IHcgPT0geCA+PSB5IDw9IHogPiBhYSA8IGFiO1xuJyArCiAgICAgICAgICAgICdhYyArIC1hZCcpOwoKICAgICAgICAvLyBvcGVyYXRvcl9wb3NpdGlvbiBvcHRpb24gLSBlbnN1cmUgbm8gbmVzd2xpbmVzIGlmIHByZXNlcnZlX25ld2xpbmVzIGlzIGZhbHNlIC0gKCkKICAgICAgICBvcHRzLm9wZXJhdG9yX3Bvc2l0aW9uID0gJ3ByZXNlcnZlLW5ld2xpbmUnOwogICAgICAgIG9wdHMucHJlc2VydmVfbmV3bGluZXMgPSBmYWxzZTsKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciByZXMgPSBhICsgYiAtIGMgLyBkICogZSAlIGY7XG4nICsKICAgICAgICAgICAgJ3ZhciByZXMgPSBnICYgaCB8IGkgXiBqO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gKGsgJiYgbCB8fCBtKSA/IG4gOiBvO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gcCA+PiBxIDw8IHIgPj4+IHM7XG4nICsKICAgICAgICAgICAgJ3ZhciByZXMgPSB0ID09PSB1ICE9PSB2ICE9IHcgPT0geCA+PSB5IDw9IHogPiBhYSA8IGFiO1xuJyArCiAgICAgICAgICAgICdhYyArIC1hZCcpOwogICAgICAgIGJ0KAogICAgICAgICAgICAndmFyIHJlcyA9IGEgKyBiXG4nICsKICAgICAgICAgICAgJy0gYyAvXG4nICsKICAgICAgICAgICAgJ2QgICogICAgIGVcbicgKwogICAgICAgICAgICAnJVxuJyArCiAgICAgICAgICAgICdmO1xuJyArCiAgICAgICAgICAgICcgICB2YXIgcmVzID0gZyAmIGhcbicgKwogICAgICAgICAgICAnfCBpIF5cbicgKwogICAgICAgICAgICAnajtcbicgKwogICAgICAgICAgICAndmFyIHJlcyA9IChrICYmXG4nICsKICAgICAgICAgICAgJ2xcbicgKwogICAgICAgICAgICAnfHwgbSkgP1xuJyArCiAgICAgICAgICAgICduXG4nICsKICAgICAgICAgICAgJzogb1xuJyArCiAgICAgICAgICAgICc7XG4nICsKICAgICAgICAgICAgJ3ZhciByZXMgPSBwXG4nICsKICAgICAgICAgICAgJz4+IHEgPDxcbicgKwogICAgICAgICAgICAnclxuJyArCiAgICAgICAgICAgICc+Pj4gcztcbicgKwogICAgICAgICAgICAndmFyIHJlc1xuJyArCiAgICAgICAgICAgICcgID0gdFxuJyArCiAgICAgICAgICAgICdcbicgKwogICAgICAgICAgICAnID09PSB1ICE9PSB2XG4nICsKICAgICAgICAgICAgJyAhPVxuJyArCiAgICAgICAgICAgICd3XG4nICsKICAgICAgICAgICAgJz09IHggPj1cbicgKwogICAgICAgICAgICAneSA8PSB6ID4gYWEgPFxuJyArCiAgICAgICAgICAgICdhYjtcbicgKwogICAgICAgICAgICAnYWMgK1xuJyArCiAgICAgICAgICAgICctYWQnLAogICAgICAgICAgICAndmFyIHJlcyA9IGEgKyBiIC0gYyAvIGQgKiBlICUgZjtcbicgKwogICAgICAgICAgICAndmFyIHJlcyA9IGcgJiBoIHwgaSBeIGo7XG4nICsKICAgICAgICAgICAgJ3ZhciByZXMgPSAoayAmJiBsIHx8IG0pID8gbiA6IG87XG4nICsKICAgICAgICAgICAgJ3ZhciByZXMgPSBwID4+IHEgPDwgciA+Pj4gcztcbicgKwogICAgICAgICAgICAndmFyIHJlcyA9IHQgPT09IHUgIT09IHYgIT0gdyA9PSB4ID49IHkgPD0geiA+IGFhIDwgYWI7XG4nICsKICAgICAgICAgICAgJ2FjICsgLWFkJyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBvcGVyYXRvcl9wb3NpdGlvbiBvcHRpb24gLSBzZXQgdG8gJ2JlZm9yZS1uZXdsaW5lJyAoZGVmYXVsdCB2YWx1ZSkKICAgICAgICAKICAgICAgICAvLyBjb21wcmVoZW5zaXZlLCB2YXJpb3VzIG5ld2xpbmVzCiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgcmVzID0gYSArIGJcbicgKwogICAgICAgICAgICAnLSBjIC9cbicgKwogICAgICAgICAgICAnZCAgKiAgICAgZVxuJyArCiAgICAgICAgICAgICclXG4nICsKICAgICAgICAgICAgJ2Y7XG4nICsKICAgICAgICAgICAgJyAgIHZhciByZXMgPSBnICYgaFxuJyArCiAgICAgICAgICAgICd8IGkgXlxuJyArCiAgICAgICAgICAgICdqO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gKGsgJiZcbicgKwogICAgICAgICAgICAnbFxuJyArCiAgICAgICAgICAgICd8fCBtKSA/XG4nICsKICAgICAgICAgICAgJ25cbicgKwogICAgICAgICAgICAnOiBvXG4nICsKICAgICAgICAgICAgJztcbicgKwogICAgICAgICAgICAndmFyIHJlcyA9IHBcbicgKwogICAgICAgICAgICAnPj4gcSA8PFxuJyArCiAgICAgICAgICAgICdyXG4nICsKICAgICAgICAgICAgJz4+PiBzO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzXG4nICsKICAgICAgICAgICAgJyAgPSB0XG4nICsKICAgICAgICAgICAgJ1xuJyArCiAgICAgICAgICAgICcgPT09IHUgIT09IHZcbicgKwogICAgICAgICAgICAnICE9XG4nICsKICAgICAgICAgICAgJ3dcbicgKwogICAgICAgICAgICAnPT0geCA+PVxuJyArCiAgICAgICAgICAgICd5IDw9IHogPiBhYSA8XG4nICsKICAgICAgICAgICAgJ2FiO1xuJyArCiAgICAgICAgICAgICdhYyArXG4nICsKICAgICAgICAgICAgJy1hZCcsCiAgICAgICAgICAgICd2YXIgcmVzID0gYSArIGIgLVxuJyArCiAgICAgICAgICAgICcgICAgYyAvXG4nICsKICAgICAgICAgICAgJyAgICBkICogZSAlXG4nICsKICAgICAgICAgICAgJyAgICBmO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gZyAmIGggfFxuJyArCiAgICAgICAgICAgICcgICAgaSBeXG4nICsKICAgICAgICAgICAgJyAgICBqO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gKGsgJiZcbicgKwogICAgICAgICAgICAnICAgICAgICBsIHx8XG4nICsKICAgICAgICAgICAgJyAgICAgICAgbSkgP1xuJyArCiAgICAgICAgICAgICcgICAgbiA6XG4nICsKICAgICAgICAgICAgJyAgICBvO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gcCA+PlxuJyArCiAgICAgICAgICAgICcgICAgcSA8PFxuJyArCiAgICAgICAgICAgICcgICAgciA+Pj5cbicgKwogICAgICAgICAgICAnICAgIHM7XG4nICsKICAgICAgICAgICAgJ3ZhciByZXMgPSB0XG4nICsKICAgICAgICAgICAgJ1xuJyArCiAgICAgICAgICAgICcgICAgPT09XG4nICsKICAgICAgICAgICAgJyAgICB1ICE9PSB2ICE9XG4nICsKICAgICAgICAgICAgJyAgICB3ID09XG4nICsKICAgICAgICAgICAgJyAgICB4ID49XG4nICsKICAgICAgICAgICAgJyAgICB5IDw9IHogPiBhYSA8XG4nICsKICAgICAgICAgICAgJyAgICBhYjtcbicgKwogICAgICAgICAgICAnYWMgK1xuJyArCiAgICAgICAgICAgICcgICAgLWFkJyk7CiAgICAgICAgCiAgICAgICAgLy8gY29sb24gc3BlY2lhbCBjYXNlCiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgYSA9IHtcbicgKwogICAgICAgICAgICAnICAgIGJcbicgKwogICAgICAgICAgICAnOiBidmFsLFxuJyArCiAgICAgICAgICAgICcgICAgYzpcbicgKwogICAgICAgICAgICAnY3ZhbFxuJyArCiAgICAgICAgICAgICcgICAgLGQ6IGR2YWxcbicgKwogICAgICAgICAgICAnfTtcbicgKwogICAgICAgICAgICAndmFyIGUgPSBmID8gZ1xuJyArCiAgICAgICAgICAgICc6IGg7XG4nICsKICAgICAgICAgICAgJ3ZhciBpID0gaiA/IGsgOlxuJyArCiAgICAgICAgICAgICdsOycsCiAgICAgICAgICAgICd2YXIgYSA9IHtcbicgKwogICAgICAgICAgICAnICAgIGI6IGJ2YWwsXG4nICsKICAgICAgICAgICAgJyAgICBjOiBjdmFsLFxuJyArCiAgICAgICAgICAgICcgICAgZDogZHZhbFxuJyArCiAgICAgICAgICAgICd9O1xuJyArCiAgICAgICAgICAgICd2YXIgZSA9IGYgPyBnIDpcbicgKwogICAgICAgICAgICAnICAgIGg7XG4nICsKICAgICAgICAgICAgJ3ZhciBpID0gaiA/IGsgOlxuJyArCiAgICAgICAgICAgICcgICAgbDsnKTsKICAgICAgICAKICAgICAgICAvLyBjYXRjaC1hbGwsIGluY2x1ZGVzIGJyYWNrZXRzIGFuZCBvdGhlciB2YXJpb3VzIGNvZGUKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciBkID0gMTtcbicgKwogICAgICAgICAgICAnaWYgKGEgPT09IGJcbicgKwogICAgICAgICAgICAnICAgICYmIGMpIHtcbicgKwogICAgICAgICAgICAnICAgIGQgPSAoYyAqIGV2ZXJ5dGhpbmdcbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgLyBzb21ldGhpbmdfZWxzZSkgJVxuJyArCiAgICAgICAgICAgICcgICAgICAgIGI7XG4nICsKICAgICAgICAgICAgJyAgICBlXG4nICsKICAgICAgICAgICAgJyAgICAgICAgKz0gZDtcbicgKwogICAgICAgICAgICAnXG4nICsKICAgICAgICAgICAgJ30gZWxzZSBpZiAoIShjb21wbGV4ICYmIHNpbXBsZSkgfHxcbicgKwogICAgICAgICAgICAnICAgIChlbW90aW9uICYmIGVtb3Rpb24ubmFtZSA9PT0gImhhcHB5IikpIHtcbicgKwogICAgICAgICAgICAnICAgIGNyeVRlYXJzT2ZKb3kobWFueSB8fFxuJyArCiAgICAgICAgICAgICcgICAgICAgIGFuT2NlYW5cbicgKwogICAgICAgICAgICAnICAgICAgICB8fCBhUml2ZXIpO1xuJyArCiAgICAgICAgICAgICd9JywKICAgICAgICAgICAgJ3ZhciBkID0gMTtcbicgKwogICAgICAgICAgICAnaWYgKGEgPT09IGIgJiZcbicgKwogICAgICAgICAgICAnICAgIGMpIHtcbicgKwogICAgICAgICAgICAnICAgIGQgPSAoYyAqIGV2ZXJ5dGhpbmcgL1xuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICBzb21ldGhpbmdfZWxzZSkgJVxuJyArCiAgICAgICAgICAgICcgICAgICAgIGI7XG4nICsKICAgICAgICAgICAgJyAgICBlXG4nICsKICAgICAgICAgICAgJyAgICAgICAgKz0gZDtcbicgKwogICAgICAgICAgICAnXG4nICsKICAgICAgICAgICAgJ30gZWxzZSBpZiAoIShjb21wbGV4ICYmIHNpbXBsZSkgfHxcbicgKwogICAgICAgICAgICAnICAgIChlbW90aW9uICYmIGVtb3Rpb24ubmFtZSA9PT0gImhhcHB5IikpIHtcbicgKwogICAgICAgICAgICAnICAgIGNyeVRlYXJzT2ZKb3kobWFueSB8fFxuJyArCiAgICAgICAgICAgICcgICAgICAgIGFuT2NlYW4gfHxcbicgKwogICAgICAgICAgICAnICAgICAgICBhUml2ZXIpO1xuJyArCiAgICAgICAgICAgICd9Jyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBvcGVyYXRvcl9wb3NpdGlvbiBvcHRpb24gLSBzZXQgdG8gJ2FmdGVyX25ld2xpbmUnCiAgICAgICAgb3B0cy5vcGVyYXRvcl9wb3NpdGlvbiA9ICdhZnRlci1uZXdsaW5lJzsKICAgICAgICAKICAgICAgICAvLyBjb21wcmVoZW5zaXZlLCB2YXJpb3VzIG5ld2xpbmVzCiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgcmVzID0gYSArIGJcbicgKwogICAgICAgICAgICAnLSBjIC9cbicgKwogICAgICAgICAgICAnZCAgKiAgICAgZVxuJyArCiAgICAgICAgICAgICclXG4nICsKICAgICAgICAgICAgJ2Y7XG4nICsKICAgICAgICAgICAgJyAgIHZhciByZXMgPSBnICYgaFxuJyArCiAgICAgICAgICAgICd8IGkgXlxuJyArCiAgICAgICAgICAgICdqO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gKGsgJiZcbicgKwogICAgICAgICAgICAnbFxuJyArCiAgICAgICAgICAgICd8fCBtKSA/XG4nICsKICAgICAgICAgICAgJ25cbicgKwogICAgICAgICAgICAnOiBvXG4nICsKICAgICAgICAgICAgJztcbicgKwogICAgICAgICAgICAndmFyIHJlcyA9IHBcbicgKwogICAgICAgICAgICAnPj4gcSA8PFxuJyArCiAgICAgICAgICAgICdyXG4nICsKICAgICAgICAgICAgJz4+PiBzO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzXG4nICsKICAgICAgICAgICAgJyAgPSB0XG4nICsKICAgICAgICAgICAgJ1xuJyArCiAgICAgICAgICAgICcgPT09IHUgIT09IHZcbicgKwogICAgICAgICAgICAnICE9XG4nICsKICAgICAgICAgICAgJ3dcbicgKwogICAgICAgICAgICAnPT0geCA+PVxuJyArCiAgICAgICAgICAgICd5IDw9IHogPiBhYSA8XG4nICsKICAgICAgICAgICAgJ2FiO1xuJyArCiAgICAgICAgICAgICdhYyArXG4nICsKICAgICAgICAgICAgJy1hZCcsCiAgICAgICAgICAgICd2YXIgcmVzID0gYSArIGJcbicgKwogICAgICAgICAgICAnICAgIC0gY1xuJyArCiAgICAgICAgICAgICcgICAgLyBkICogZVxuJyArCiAgICAgICAgICAgICcgICAgJSBmO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gZyAmIGhcbicgKwogICAgICAgICAgICAnICAgIHwgaVxuJyArCiAgICAgICAgICAgICcgICAgXiBqO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gKGtcbicgKwogICAgICAgICAgICAnICAgICAgICAmJiBsXG4nICsKICAgICAgICAgICAgJyAgICAgICAgfHwgbSlcbicgKwogICAgICAgICAgICAnICAgID8gblxuJyArCiAgICAgICAgICAgICcgICAgOiBvO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gcFxuJyArCiAgICAgICAgICAgICcgICAgPj4gcVxuJyArCiAgICAgICAgICAgICcgICAgPDwgclxuJyArCiAgICAgICAgICAgICcgICAgPj4+IHM7XG4nICsKICAgICAgICAgICAgJ3ZhciByZXMgPSB0XG4nICsKICAgICAgICAgICAgJ1xuJyArCiAgICAgICAgICAgICcgICAgPT09IHUgIT09IHZcbicgKwogICAgICAgICAgICAnICAgICE9IHdcbicgKwogICAgICAgICAgICAnICAgID09IHhcbicgKwogICAgICAgICAgICAnICAgID49IHkgPD0geiA+IGFhXG4nICsKICAgICAgICAgICAgJyAgICA8IGFiO1xuJyArCiAgICAgICAgICAgICdhY1xuJyArCiAgICAgICAgICAgICcgICAgKyAtYWQnKTsKICAgICAgICAKICAgICAgICAvLyBjb2xvbiBzcGVjaWFsIGNhc2UKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciBhID0ge1xuJyArCiAgICAgICAgICAgICcgICAgYlxuJyArCiAgICAgICAgICAgICc6IGJ2YWwsXG4nICsKICAgICAgICAgICAgJyAgICBjOlxuJyArCiAgICAgICAgICAgICdjdmFsXG4nICsKICAgICAgICAgICAgJyAgICAsZDogZHZhbFxuJyArCiAgICAgICAgICAgICd9O1xuJyArCiAgICAgICAgICAgICd2YXIgZSA9IGYgPyBnXG4nICsKICAgICAgICAgICAgJzogaDtcbicgKwogICAgICAgICAgICAndmFyIGkgPSBqID8gayA6XG4nICsKICAgICAgICAgICAgJ2w7JywKICAgICAgICAgICAgJ3ZhciBhID0ge1xuJyArCiAgICAgICAgICAgICcgICAgYjogYnZhbCxcbicgKwogICAgICAgICAgICAnICAgIGM6IGN2YWwsXG4nICsKICAgICAgICAgICAgJyAgICBkOiBkdmFsXG4nICsKICAgICAgICAgICAgJ307XG4nICsKICAgICAgICAgICAgJ3ZhciBlID0gZiA/IGdcbicgKwogICAgICAgICAgICAnICAgIDogaDtcbicgKwogICAgICAgICAgICAndmFyIGkgPSBqID8ga1xuJyArCiAgICAgICAgICAgICcgICAgOiBsOycpOwogICAgICAgIAogICAgICAgIC8vIGNhdGNoLWFsbCwgaW5jbHVkZXMgYnJhY2tldHMgYW5kIG90aGVyIHZhcmlvdXMgY29kZQogICAgICAgIGJ0KAogICAgICAgICAgICAndmFyIGQgPSAxO1xuJyArCiAgICAgICAgICAgICdpZiAoYSA9PT0gYlxuJyArCiAgICAgICAgICAgICcgICAgJiYgYykge1xuJyArCiAgICAgICAgICAgICcgICAgZCA9IChjICogZXZlcnl0aGluZ1xuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAvIHNvbWV0aGluZ19lbHNlKSAlXG4nICsKICAgICAgICAgICAgJyAgICAgICAgYjtcbicgKwogICAgICAgICAgICAnICAgIGVcbicgKwogICAgICAgICAgICAnICAgICAgICArPSBkO1xuJyArCiAgICAgICAgICAgICdcbicgKwogICAgICAgICAgICAnfSBlbHNlIGlmICghKGNvbXBsZXggJiYgc2ltcGxlKSB8fFxuJyArCiAgICAgICAgICAgICcgICAgKGVtb3Rpb24gJiYgZW1vdGlvbi5uYW1lID09PSAiaGFwcHkiKSkge1xuJyArCiAgICAgICAgICAgICcgICAgY3J5VGVhcnNPZkpveShtYW55IHx8XG4nICsKICAgICAgICAgICAgJyAgICAgICAgYW5PY2VhblxuJyArCiAgICAgICAgICAgICcgICAgICAgIHx8IGFSaXZlcik7XG4nICsKICAgICAgICAgICAgJ30nLAogICAgICAgICAgICAndmFyIGQgPSAxO1xuJyArCiAgICAgICAgICAgICdpZiAoYSA9PT0gYlxuJyArCiAgICAgICAgICAgICcgICAgJiYgYykge1xuJyArCiAgICAgICAgICAgICcgICAgZCA9IChjICogZXZlcnl0aGluZ1xuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAvIHNvbWV0aGluZ19lbHNlKVxuJyArCiAgICAgICAgICAgICcgICAgICAgICUgYjtcbicgKwogICAgICAgICAgICAnICAgIGVcbicgKwogICAgICAgICAgICAnICAgICAgICArPSBkO1xuJyArCiAgICAgICAgICAgICdcbicgKwogICAgICAgICAgICAnfSBlbHNlIGlmICghKGNvbXBsZXggJiYgc2ltcGxlKVxuJyArCiAgICAgICAgICAgICcgICAgfHwgKGVtb3Rpb24gJiYgZW1vdGlvbi5uYW1lID09PSAiaGFwcHkiKSkge1xuJyArCiAgICAgICAgICAgICcgICAgY3J5VGVhcnNPZkpveShtYW55XG4nICsKICAgICAgICAgICAgJyAgICAgICAgfHwgYW5PY2VhblxuJyArCiAgICAgICAgICAgICcgICAgICAgIHx8IGFSaXZlcik7XG4nICsKICAgICAgICAgICAgJ30nKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIG9wZXJhdG9yX3Bvc2l0aW9uIG9wdGlvbiAtIHNldCB0byAncHJlc2VydmUtbmV3bGluZScKICAgICAgICBvcHRzLm9wZXJhdG9yX3Bvc2l0aW9uID0gJ3ByZXNlcnZlLW5ld2xpbmUnOwogICAgICAgIAogICAgICAgIC8vIGNvbXByZWhlbnNpdmUsIHZhcmlvdXMgbmV3bGluZXMKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciByZXMgPSBhICsgYlxuJyArCiAgICAgICAgICAgICctIGMgL1xuJyArCiAgICAgICAgICAgICdkICAqICAgICBlXG4nICsKICAgICAgICAgICAgJyVcbicgKwogICAgICAgICAgICAnZjtcbicgKwogICAgICAgICAgICAnICAgdmFyIHJlcyA9IGcgJiBoXG4nICsKICAgICAgICAgICAgJ3wgaSBeXG4nICsKICAgICAgICAgICAgJ2o7XG4nICsKICAgICAgICAgICAgJ3ZhciByZXMgPSAoayAmJlxuJyArCiAgICAgICAgICAgICdsXG4nICsKICAgICAgICAgICAgJ3x8IG0pID9cbicgKwogICAgICAgICAgICAnblxuJyArCiAgICAgICAgICAgICc6IG9cbicgKwogICAgICAgICAgICAnO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gcFxuJyArCiAgICAgICAgICAgICc+PiBxIDw8XG4nICsKICAgICAgICAgICAgJ3JcbicgKwogICAgICAgICAgICAnPj4+IHM7XG4nICsKICAgICAgICAgICAgJ3ZhciByZXNcbicgKwogICAgICAgICAgICAnICA9IHRcbicgKwogICAgICAgICAgICAnXG4nICsKICAgICAgICAgICAgJyA9PT0gdSAhPT0gdlxuJyArCiAgICAgICAgICAgICcgIT1cbicgKwogICAgICAgICAgICAnd1xuJyArCiAgICAgICAgICAgICc9PSB4ID49XG4nICsKICAgICAgICAgICAgJ3kgPD0geiA+IGFhIDxcbicgKwogICAgICAgICAgICAnYWI7XG4nICsKICAgICAgICAgICAgJ2FjICtcbicgKwogICAgICAgICAgICAnLWFkJywKICAgICAgICAgICAgJ3ZhciByZXMgPSBhICsgYlxuJyArCiAgICAgICAgICAgICcgICAgLSBjIC9cbicgKwogICAgICAgICAgICAnICAgIGQgKiBlXG4nICsKICAgICAgICAgICAgJyAgICAlXG4nICsKICAgICAgICAgICAgJyAgICBmO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gZyAmIGhcbicgKwogICAgICAgICAgICAnICAgIHwgaSBeXG4nICsKICAgICAgICAgICAgJyAgICBqO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gKGsgJiZcbicgKwogICAgICAgICAgICAnICAgICAgICBsXG4nICsKICAgICAgICAgICAgJyAgICAgICAgfHwgbSkgP1xuJyArCiAgICAgICAgICAgICcgICAgblxuJyArCiAgICAgICAgICAgICcgICAgOiBvO1xuJyArCiAgICAgICAgICAgICd2YXIgcmVzID0gcFxuJyArCiAgICAgICAgICAgICcgICAgPj4gcSA8PFxuJyArCiAgICAgICAgICAgICcgICAgclxuJyArCiAgICAgICAgICAgICcgICAgPj4+IHM7XG4nICsKICAgICAgICAgICAgJ3ZhciByZXMgPSB0XG4nICsKICAgICAgICAgICAgJ1xuJyArCiAgICAgICAgICAgICcgICAgPT09IHUgIT09IHZcbicgKwogICAgICAgICAgICAnICAgICE9XG4nICsKICAgICAgICAgICAgJyAgICB3XG4nICsKICAgICAgICAgICAgJyAgICA9PSB4ID49XG4nICsKICAgICAgICAgICAgJyAgICB5IDw9IHogPiBhYSA8XG4nICsKICAgICAgICAgICAgJyAgICBhYjtcbicgKwogICAgICAgICAgICAnYWMgK1xuJyArCiAgICAgICAgICAgICcgICAgLWFkJyk7CiAgICAgICAgCiAgICAgICAgLy8gY29sb24gc3BlY2lhbCBjYXNlCiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgYSA9IHtcbicgKwogICAgICAgICAgICAnICAgIGJcbicgKwogICAgICAgICAgICAnOiBidmFsLFxuJyArCiAgICAgICAgICAgICcgICAgYzpcbicgKwogICAgICAgICAgICAnY3ZhbFxuJyArCiAgICAgICAgICAgICcgICAgLGQ6IGR2YWxcbicgKwogICAgICAgICAgICAnfTtcbicgKwogICAgICAgICAgICAndmFyIGUgPSBmID8gZ1xuJyArCiAgICAgICAgICAgICc6IGg7XG4nICsKICAgICAgICAgICAgJ3ZhciBpID0gaiA/IGsgOlxuJyArCiAgICAgICAgICAgICdsOycsCiAgICAgICAgICAgICd2YXIgYSA9IHtcbicgKwogICAgICAgICAgICAnICAgIGI6IGJ2YWwsXG4nICsKICAgICAgICAgICAgJyAgICBjOiBjdmFsLFxuJyArCiAgICAgICAgICAgICcgICAgZDogZHZhbFxuJyArCiAgICAgICAgICAgICd9O1xuJyArCiAgICAgICAgICAgICd2YXIgZSA9IGYgPyBnXG4nICsKICAgICAgICAgICAgJyAgICA6IGg7XG4nICsKICAgICAgICAgICAgJ3ZhciBpID0gaiA/IGsgOlxuJyArCiAgICAgICAgICAgICcgICAgbDsnKTsKICAgICAgICAKICAgICAgICAvLyBjYXRjaC1hbGwsIGluY2x1ZGVzIGJyYWNrZXRzIGFuZCBvdGhlciB2YXJpb3VzIGNvZGUKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciBkID0gMTtcbicgKwogICAgICAgICAgICAnaWYgKGEgPT09IGJcbicgKwogICAgICAgICAgICAnICAgICYmIGMpIHtcbicgKwogICAgICAgICAgICAnICAgIGQgPSAoYyAqIGV2ZXJ5dGhpbmdcbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgLyBzb21ldGhpbmdfZWxzZSkgJVxuJyArCiAgICAgICAgICAgICcgICAgICAgIGI7XG4nICsKICAgICAgICAgICAgJyAgICBlXG4nICsKICAgICAgICAgICAgJyAgICAgICAgKz0gZDtcbicgKwogICAgICAgICAgICAnXG4nICsKICAgICAgICAgICAgJ30gZWxzZSBpZiAoIShjb21wbGV4ICYmIHNpbXBsZSkgfHxcbicgKwogICAgICAgICAgICAnICAgIChlbW90aW9uICYmIGVtb3Rpb24ubmFtZSA9PT0gImhhcHB5IikpIHtcbicgKwogICAgICAgICAgICAnICAgIGNyeVRlYXJzT2ZKb3kobWFueSB8fFxuJyArCiAgICAgICAgICAgICcgICAgICAgIGFuT2NlYW5cbicgKwogICAgICAgICAgICAnICAgICAgICB8fCBhUml2ZXIpO1xuJyArCiAgICAgICAgICAgICd9Jyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBBc3luYyAvIGF3YWl0IHRlc3RzCiAgICAgICAgYnQoJ2FzeW5jIGZ1bmN0aW9uIGZvbygpIHt9Jyk7CiAgICAgICAgYnQoJ2xldCB3ID0gYXN5bmMgZnVuY3Rpb24gZm9vKCkge30nKTsKICAgICAgICBidCgnYXN5bmMgZnVuY3Rpb24gZm9vKCkge31cbnZhciB4ID0gYXdhaXQgZm9vKCk7Jyk7CiAgICAgICAgCiAgICAgICAgLy8gYXN5bmMgZnVuY3Rpb24gYXMgYW4gaW5wdXQgdG8gYW5vdGhlciBmdW5jdGlvbgogICAgICAgIGJ0KCd3cmFwcGVyKGFzeW5jIGZ1bmN0aW9uIGZvbygpIHt9KScpOwogICAgICAgIAogICAgICAgIC8vIGF3YWl0IG9uIGlubGluZSBhbm9ueW1vdXMgZnVuY3Rpb24uIHNob3VsZCBoYXZlIGEgc3BhY2UgYWZ0ZXIgYXdhaXQKICAgICAgICBidCgKICAgICAgICAgICAgJ2FzeW5jIGZ1bmN0aW9uKCkge1xuICAgIHZhciB3ID0gYXdhaXQoYXN5bmMgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBmb28oKTtcbiAgICB9KSgpO1xufScsCiAgICAgICAgICAgICdhc3luYyBmdW5jdGlvbigpIHtcbiAgICB2YXIgdyA9IGF3YWl0IChhc3luYyBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGZvbygpO1xuICAgIH0pKCk7XG59Jyk7CiAgICAgICAgCiAgICAgICAgLy8gZW5zdXJlIHRoYXQgdGhpcyBkb2Vzbid0IGJyZWFrIGFueW9uZSB3aXRoIHRoZSBhc3luYyBsaWJyYXJ5CiAgICAgICAgYnQoJ2FzeW5jLm1hcChmdW5jdGlvbih0KSB7fSknKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIGU0eCAtIFRlc3QgdGhhdCBlNHggbGl0ZXJhbHMgcGFzc2VkIHRocm91Z2ggd2hlbiBlNHgtb3B0aW9uIGlzIGVuYWJsZWQKICAgICAgICBvcHRzLmU0eCA9IHRydWU7CiAgICAgICAgYnQoJ3htbD08YSBiPSJjIj48ZC8+PGU+XG4gZm9vPC9lPng8L2E+OycsICd4bWwgPSA8YSBiPSJjIj48ZC8+PGU+XG4gZm9vPC9lPng8L2E+OycpOwogICAgICAgIGJ0KCc8YSBiPVwnVGhpcyBpcyBhIHF1b3RlZCAiYyIuXCcvPicpOwogICAgICAgIGJ0KCc8YSBiPSJUaGlzIGlzIGEgcXVvdGVkIFwnY1wnLiIvPicpOwogICAgICAgIGJ0KCc8YSBiPSJBIHF1b3RlIFwnIGluc2lkZSBzdHJpbmcuIi8+Jyk7CiAgICAgICAgYnQoJzxhIGI9XCdBIHF1b3RlICIgaW5zaWRlIHN0cmluZy5cJy8+Jyk7CiAgICAgICAgYnQoJzxhIGI9XCdTb21lICIiIiBxdW90ZXMgIiIgIGluc2lkZSBzdHJpbmcuXCcvPicpOwogICAgICAgIAogICAgICAgIC8vIEhhbmRsZXMgaW5saW5lIGV4cHJlc3Npb25zCiAgICAgICAgYnQoJ3htbD08e2F9IGI9ImMiPjxkLz48ZSB2PXt6fT5cbiBmb288L2U+eDwve2F9PjsnLCAneG1sID0gPHthfSBiPSJjIj48ZC8+PGUgdj17en0+XG4gZm9vPC9lPng8L3thfT47Jyk7CiAgICAgICAgYnQoJ3htbD08e2F9IGI9ImMiPlxuICAgIDxlIHY9e3p9PlxuIGZvbzwvZT54PC97YX0+OycsICd4bWwgPSA8e2F9IGI9ImMiPlxuICAgIDxlIHY9e3p9PlxuIGZvbzwvZT54PC97YX0+OycpOwogICAgICAgIAogICAgICAgIC8vIHhtbCBsaXRlcmFscyB3aXRoIHNwZWNpYWwgY2hhcmFjdGVycyBpbiBlbGVtIG5hbWVzIC0gc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL1JFQy14bWwvI05ULU5hbWVDaGFyCiAgICAgICAgYnQoJ3htbCA9IDxfOi52YWxpZC54bWwtIF86LnZhbGlkLnhtbC09IjEyMyIvPjsnKTsKICAgICAgICAKICAgICAgICAvLyB4bWwgbGl0ZXJhbHMgd2l0aCBhdHRyaWJ1dGVzIHdpdGhvdXQgZXF1YWwgc2lnbgogICAgICAgIGJ0KCd4bWwgPSA8ZWxlbSBzb21lQXR0ci8+OycpOwogICAgICAgIAogICAgICAgIC8vIEhhbmRsZXMgQ0RBVEEKICAgICAgICBidCgneG1sPTwhW0NEQVRBWyBiPSJjIj48ZC8+PGUgdj17en0+XG4gZm9vPC9lPngvXV0+OycsICd4bWwgPSA8IVtDREFUQVsgYj0iYyI+PGQvPjxlIHY9e3p9PlxuIGZvbzwvZT54L11dPjsnKTsKICAgICAgICBidCgneG1sPTwhW0NEQVRBW11dPjsnLCAneG1sID0gPCFbQ0RBVEFbXV0+OycpOwogICAgICAgIGJ0KCd4bWw9PGEgYj0iYyI+PCFbQ0RBVEFbZC8+PC9hPjwve31dXT48L2E+OycsICd4bWwgPSA8YSBiPSJjIj48IVtDREFUQVtkLz48L2E+PC97fV1dPjwvYT47Jyk7CiAgICAgICAgCiAgICAgICAgLy8gSlNYIC0gd29ya2luZyBqc3ggZnJvbSBodHRwOi8vcHJldHR5ZGlmZi5jb20vdW5pdF90ZXN0cy9iZWF1dGlmaWNhdGlvbl9qYXZhc2NyaXB0X2pzeC50eHQKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciBMaXN0SXRlbSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbicgKwogICAgICAgICAgICAnICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgcmV0dXJuIChcbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT0iTGlzdEl0ZW0iPlxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgPGEgaHJlZj17ICIvaXRlbXMvIiArIHRoaXMucHJvcHMuaXRlbS5pZCB9PlxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuaXRlbS5uYW1lXG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgICAgICA8L2E+XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgIDwvbGk+XG4nICsKICAgICAgICAgICAgJyAgICAgICAgKTtcbicgKwogICAgICAgICAgICAnICAgIH1cbicgKwogICAgICAgICAgICAnfSk7Jyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgTGlzdCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbicgKwogICAgICAgICAgICAnICAgIHJlbmRlckxpc3Q6IGZ1bmN0aW9uKCkge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIHJldHVybiB0aGlzLnByb3BzLml0ZW1zLm1hcChmdW5jdGlvbihpdGVtKSB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgIHJldHVybiA8TGlzdEl0ZW0gaXRlbT17aXRlbX0ga2V5PXtpdGVtLmlkfSAvPjtcbicgKwogICAgICAgICAgICAnICAgICAgICB9KTtcbicgKwogICAgICAgICAgICAnICAgIH0sXG4nICsKICAgICAgICAgICAgJ1xuJyArCiAgICAgICAgICAgICcgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbicgKwogICAgICAgICAgICAnICAgICAgICByZXR1cm4gPHVsIGNsYXNzTmFtZT0iTGlzdCI+XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckxpc3QoKVxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICA8L3VsPlxuJyArCiAgICAgICAgICAgICcgICAgfVxuJyArCiAgICAgICAgICAgICd9KTsnKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciBNaXN0ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuJyArCiAgICAgICAgICAgICcgICAgcmVuZGVyTGlzdDogZnVuY3Rpb24oKSB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaXRlbXMubWFwKGZ1bmN0aW9uKGl0ZW0pIHtcbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgcmV0dXJuIDxMaXN0SXRlbSBpdGVtPXtyZXR1cm4gPHRhZz57aXRlbX08L3RhZz59IGtleT17aXRlbS5pZH0gLz47XG4nICsKICAgICAgICAgICAgJyAgICAgICAgfSk7XG4nICsKICAgICAgICAgICAgJyAgICB9XG4nICsKICAgICAgICAgICAgJ30pOycpOwogICAgICAgIGJ0KAogICAgICAgICAgICAnLy8gSlNYXG4nICsKICAgICAgICAgICAgJ3ZhciBib3ggPSA8Qm94PlxuJyArCiAgICAgICAgICAgICcgICAge3Nob3VsZFNob3dBbnN3ZXIodXNlcikgP1xuJyArCiAgICAgICAgICAgICcgICAgICAgIDxBbnN3ZXIgdmFsdWU9e2ZhbHNlfT5ubzwvQW5zd2VyPiA6IDxCb3guQ29tbWVudD5cbicgKwogICAgICAgICAgICAnICAgICAgICBUZXh0IENvbnRlbnRcbicgKwogICAgICAgICAgICAnICAgICAgICA8L0JveC5Db21tZW50Pn1cbicgKwogICAgICAgICAgICAnICAgIDwvQm94PjtcbicgKwogICAgICAgICAgICAndmFyIGEgPSBmdW5jdGlvbigpIHtcbicgKwogICAgICAgICAgICAnICAgIHJldHVybiA8dHNkZj5hc2RmPC90c2RmPjtcbicgKwogICAgICAgICAgICAnfTtcbicgKwogICAgICAgICAgICAnXG4nICsKICAgICAgICAgICAgJ3ZhciBIZWxsb01lc3NhZ2UgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4nICsKICAgICAgICAgICAgJyAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIHJldHVybiA8ZGl2IHtzb21lQXR0cn0+SGVsbG8ge3RoaXMucHJvcHMubmFtZX08L2Rpdj47XG4nICsKICAgICAgICAgICAgJyAgICB9XG4nICsKICAgICAgICAgICAgJ30pO1xuJyArCiAgICAgICAgICAgICdSZWFjdC5yZW5kZXIoPEhlbGxvTWVzc2FnZSBuYW1lPSJKb2huIiAvPiwgbW91bnROb2RlKTsnKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciBUaW1lciA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbicgKwogICAgICAgICAgICAnICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgcmV0dXJuIHtcbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgc2Vjb25kc0VsYXBzZWQ6IDBcbicgKwogICAgICAgICAgICAnICAgICAgICB9O1xuJyArCiAgICAgICAgICAgICcgICAgfSxcbicgKwogICAgICAgICAgICAnICAgIHRpY2s6IGZ1bmN0aW9uKCkge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICBzZWNvbmRzRWxhcHNlZDogdGhpcy5zdGF0ZS5zZWNvbmRzRWxhcHNlZCArIDFcbicgKwogICAgICAgICAgICAnICAgICAgICB9KTtcbicgKwogICAgICAgICAgICAnICAgIH0sXG4nICsKICAgICAgICAgICAgJyAgICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMudGljaywgMTAwMCk7XG4nICsKICAgICAgICAgICAgJyAgICB9LFxuJyArCiAgICAgICAgICAgICcgICAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uKCkge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XG4nICsKICAgICAgICAgICAgJyAgICB9LFxuJyArCiAgICAgICAgICAgICcgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbicgKwogICAgICAgICAgICAnICAgICAgICByZXR1cm4gKFxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICA8ZGl2PlNlY29uZHMgRWxhcHNlZDoge3RoaXMuc3RhdGUuc2Vjb25kc0VsYXBzZWR9PC9kaXY+XG4nICsKICAgICAgICAgICAgJyAgICAgICAgKTtcbicgKwogICAgICAgICAgICAnICAgIH1cbicgKwogICAgICAgICAgICAnfSk7XG4nICsKICAgICAgICAgICAgJ1JlYWN0LnJlbmRlcig8VGltZXIgLz4sIG1vdW50Tm9kZSk7Jyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgVG9kb0xpc3QgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4nICsKICAgICAgICAgICAgJyAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIHZhciBjcmVhdGVJdGVtID0gZnVuY3Rpb24oaXRlbVRleHQpIHtcbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgcmV0dXJuIDxsaT57aXRlbVRleHR9PC9saT47XG4nICsKICAgICAgICAgICAgJyAgICAgICAgfTtcbicgKwogICAgICAgICAgICAnICAgICAgICByZXR1cm4gPHVsPnt0aGlzLnByb3BzLml0ZW1zLm1hcChjcmVhdGVJdGVtKX08L3VsPjtcbicgKwogICAgICAgICAgICAnICAgIH1cbicgKwogICAgICAgICAgICAnfSk7Jyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgVG9kb0FwcCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbicgKwogICAgICAgICAgICAnICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgcmV0dXJuIHtcbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgaXRlbXM6IFtdLFxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICB0ZXh0OiBcJ1wnXG4nICsKICAgICAgICAgICAgJyAgICAgICAgfTtcbicgKwogICAgICAgICAgICAnICAgIH0sXG4nICsKICAgICAgICAgICAgJyAgICBvbkNoYW5nZTogZnVuY3Rpb24oZSkge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICB0ZXh0OiBlLnRhcmdldC52YWx1ZVxuJyArCiAgICAgICAgICAgICcgICAgICAgIH0pO1xuJyArCiAgICAgICAgICAgICcgICAgfSxcbicgKwogICAgICAgICAgICAnICAgIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24oZSkge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbicgKwogICAgICAgICAgICAnICAgICAgICB2YXIgbmV4dEl0ZW1zID0gdGhpcy5zdGF0ZS5pdGVtcy5jb25jYXQoW3RoaXMuc3RhdGUudGV4dF0pO1xuJyArCiAgICAgICAgICAgICcgICAgICAgIHZhciBuZXh0VGV4dCA9IFwnXCc7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgIGl0ZW1zOiBuZXh0SXRlbXMsXG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgIHRleHQ6IG5leHRUZXh0XG4nICsKICAgICAgICAgICAgJyAgICAgICAgfSk7XG4nICsKICAgICAgICAgICAgJyAgICB9LFxuJyArCiAgICAgICAgICAgICcgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbicgKwogICAgICAgICAgICAnICAgICAgICByZXR1cm4gKFxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICA8ZGl2PlxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgPGgzIHtzb21lQXR0cn0+VE9ETzwvaDM+XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgICAgICA8VG9kb0xpc3QgaXRlbXM9e3RoaXMuc3RhdGUuaXRlbXN9IC8+XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17dGhpcy5oYW5kbGVTdWJtaXR9PlxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZX0gdmFsdWU9e3RoaXMuc3RhdGUudGV4dH0gLz5cbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgICAgICAgICA8YnV0dG9uPntcJ0FkZCAjXCcgKyAodGhpcy5zdGF0ZS5pdGVtcy5sZW5ndGggKyAxKX08L2J1dHRvbj5cbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgICAgIDwvZm9ybT5cbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgPC9kaXY+XG4nICsKICAgICAgICAgICAgJyAgICAgICAgKTtcbicgKwogICAgICAgICAgICAnICAgIH1cbicgKwogICAgICAgICAgICAnfSk7XG4nICsKICAgICAgICAgICAgJ1JlYWN0LnJlbmRlcig8VG9kb0FwcCAvPiwgbW91bnROb2RlKTsnKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciBjb252ZXJ0ZXIgPSBuZXcgU2hvd2Rvd24uY29udmVydGVyKCk7XG4nICsKICAgICAgICAgICAgJ3ZhciBNYXJrZG93bkVkaXRvciA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbicgKwogICAgICAgICAgICAnICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgcmV0dXJuIHt2YWx1ZTogXCdUeXBlIHNvbWUgKm1hcmtkb3duKiBoZXJlIVwnfTtcbicgKwogICAgICAgICAgICAnICAgIH0sXG4nICsKICAgICAgICAgICAgJyAgICBoYW5kbGVDaGFuZ2U6IGZ1bmN0aW9uKCkge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIHRoaXMuc2V0U3RhdGUoe3ZhbHVlOiB0aGlzLnJlZnMudGV4dGFyZWEuZ2V0RE9NTm9kZSgpLnZhbHVlfSk7XG4nICsKICAgICAgICAgICAgJyAgICB9LFxuJyArCiAgICAgICAgICAgICcgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbicgKwogICAgICAgICAgICAnICAgICAgICByZXR1cm4gKFxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iTWFya2Rvd25FZGl0b3IiPlxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgPGgzPklucHV0PC9oMz5cbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgICAgIDx0ZXh0YXJlYVxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX1cbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgICAgICAgICByZWY9InRleHRhcmVhIlxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17dGhpcy5zdGF0ZS52YWx1ZX0gLz5cbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgICAgIDxoMz5PdXRwdXQ8L2gzPlxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICA8ZGl2XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgICAgICBjbGFzc05hbWU9ImNvbnRlbnQiXG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD1cbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgICAgIC8+XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgIDwvZGl2PlxuJyArCiAgICAgICAgICAgICcgICAgICAgICk7XG4nICsKICAgICAgICAgICAgJyAgICB9XG4nICsKICAgICAgICAgICAgJ30pO1xuJyArCiAgICAgICAgICAgICdSZWFjdC5yZW5kZXIoPE1hcmtkb3duRWRpdG9yIC8+LCBtb3VudE5vZGUpOycsCiAgICAgICAgICAgICd2YXIgY29udmVydGVyID0gbmV3IFNob3dkb3duLmNvbnZlcnRlcigpO1xuJyArCiAgICAgICAgICAgICd2YXIgTWFya2Rvd25FZGl0b3IgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4nICsKICAgICAgICAgICAgJyAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIHJldHVybiB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgIHZhbHVlOiBcJ1R5cGUgc29tZSAqbWFya2Rvd24qIGhlcmUhXCdcbicgKwogICAgICAgICAgICAnICAgICAgICB9O1xuJyArCiAgICAgICAgICAgICcgICAgfSxcbicgKwogICAgICAgICAgICAnICAgIGhhbmRsZUNoYW5nZTogZnVuY3Rpb24oKSB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgIHZhbHVlOiB0aGlzLnJlZnMudGV4dGFyZWEuZ2V0RE9NTm9kZSgpLnZhbHVlXG4nICsKICAgICAgICAgICAgJyAgICAgICAgfSk7XG4nICsKICAgICAgICAgICAgJyAgICB9LFxuJyArCiAgICAgICAgICAgICcgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbicgKwogICAgICAgICAgICAnICAgICAgICByZXR1cm4gKFxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iTWFya2Rvd25FZGl0b3IiPlxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgPGgzPklucHV0PC9oMz5cbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgICAgIDx0ZXh0YXJlYVxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX1cbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgICAgICAgICByZWY9InRleHRhcmVhIlxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17dGhpcy5zdGF0ZS52YWx1ZX0gLz5cbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgICAgIDxoMz5PdXRwdXQ8L2gzPlxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICA8ZGl2XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgICAgICBjbGFzc05hbWU9ImNvbnRlbnQiXG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD1cbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgICAgIC8+XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgIDwvZGl2PlxuJyArCiAgICAgICAgICAgICcgICAgICAgICk7XG4nICsKICAgICAgICAgICAgJyAgICB9XG4nICsKICAgICAgICAgICAgJ30pO1xuJyArCiAgICAgICAgICAgICdSZWFjdC5yZW5kZXIoPE1hcmtkb3duRWRpdG9yIC8+LCBtb3VudE5vZGUpOycpOwogICAgICAgIAogICAgICAgIC8vIEpTWCAtIE5vdCBxdWl0ZSBjb3JyZWN0IGpzeCBmb3JtYXR0aW5nIHRoYXQgc3RpbGwgd29ya3MKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciBjb250ZW50ID0gKFxuJyArCiAgICAgICAgICAgICcgICAgICAgIDxOYXY+XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgIHsvKiBjaGlsZCBjb21tZW50LCBwdXQge30gYXJvdW5kICovfVxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICA8UGVyc29uXG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgICAgICAvKiBtdWx0aVxuJyArCiAgICAgICAgICAgICcgICAgICAgICBsaW5lXG4nICsKICAgICAgICAgICAgJyAgICAgICAgIGNvbW1lbnQgKi9cbicgKwogICAgICAgICAgICAnICAgICAgICAgLy9hdHRyPSJ0ZXN0IlxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgbmFtZT17d2luZG93LmlzTG9nZ2VkSW4gPyB3aW5kb3cubmFtZSA6IFwnXCd9IC8vIGVuZCBvZiBsaW5lIGNvbW1lbnRcbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgLz5cbicgKwogICAgICAgICAgICAnICAgICAgICA8L05hdj5cbicgKwogICAgICAgICAgICAnICAgICk7XG4nICsKICAgICAgICAgICAgJ3ZhciBxd2VyID0gPERyb3BEb3duPiBBIGRyb3Bkb3duIGxpc3QgPE1lbnU+IDxNZW51SXRlbT5EbyBTb21ldGhpbmc8L01lbnVJdGVtPiA8TWVudUl0ZW0+RG8gU29tZXRoaW5nIEZ1biE8L01lbnVJdGVtPiA8TWVudUl0ZW0+RG8gU29tZXRoaW5nIEVsc2U8L01lbnVJdGVtPiA8L01lbnU+IDwvRHJvcERvd24+O1xuJyArCiAgICAgICAgICAgICdyZW5kZXIoZHJvcGRvd24pOycsCiAgICAgICAgICAgICd2YXIgY29udGVudCA9IChcbicgKwogICAgICAgICAgICAnICAgIDxOYXY+XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgIHsvKiBjaGlsZCBjb21tZW50LCBwdXQge30gYXJvdW5kICovfVxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICA8UGVyc29uXG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgICAgICAvKiBtdWx0aVxuJyArCiAgICAgICAgICAgICcgICAgICAgICBsaW5lXG4nICsKICAgICAgICAgICAgJyAgICAgICAgIGNvbW1lbnQgKi9cbicgKwogICAgICAgICAgICAnICAgICAgICAgLy9hdHRyPSJ0ZXN0IlxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgbmFtZT17d2luZG93LmlzTG9nZ2VkSW4gPyB3aW5kb3cubmFtZSA6IFwnXCd9IC8vIGVuZCBvZiBsaW5lIGNvbW1lbnRcbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgLz5cbicgKwogICAgICAgICAgICAnICAgICAgICA8L05hdj5cbicgKwogICAgICAgICAgICAnKTtcbicgKwogICAgICAgICAgICAndmFyIHF3ZXIgPSA8RHJvcERvd24+IEEgZHJvcGRvd24gbGlzdCA8TWVudT4gPE1lbnVJdGVtPkRvIFNvbWV0aGluZzwvTWVudUl0ZW0+IDxNZW51SXRlbT5EbyBTb21ldGhpbmcgRnVuITwvTWVudUl0ZW0+IDxNZW51SXRlbT5EbyBTb21ldGhpbmcgRWxzZTwvTWVudUl0ZW0+IDwvTWVudT4gPC9Ecm9wRG93bj47XG4nICsKICAgICAgICAgICAgJ3JlbmRlcihkcm9wZG93bik7Jyk7CiAgICAgICAgCiAgICAgICAgLy8gSGFuZGxlcyBtZXNzZWQgdXAgdGFncywgYXMgbG9uZyBhcyBpdCBpc24ndCB0aGUgc2FtZSBuYW1lCiAgICAgICAgLy8gYXMgdGhlIHJvb3QgdGFnLiBBbHNvIGhhbmRsZXMgdGFncyBvZiBzYW1lIG5hbWUgYXMgcm9vdCB0YWcKICAgICAgICAvLyBhcyBsb25nIGFzIG5lc3RpbmcgbWF0Y2hlcy4KICAgICAgICBidCgKICAgICAgICAgICAgJ3htbD08YSB4PSJqbiI+PGM+PC9iPjwvZj48YT48ZCBqbmo9ImpubiI+PGY+PC9hID48L25qPjwvYT47JywKICAgICAgICAgICAgJ3htbCA9IDxhIHg9ImpuIj48Yz48L2I+PC9mPjxhPjxkIGpuaj0iam5uIj48Zj48L2EgPjwvbmo+PC9hPjsnKTsKICAgICAgICAKICAgICAgICAvLyBJZiB4bWwgaXMgbm90IHRlcm1pbmF0ZWQsIHRoZSByZW1haW5kZXIgb2YgdGhlIGZpbGUgaXMgdHJlYXRlZAogICAgICAgIC8vIGFzIHBhcnQgb2YgdGhlIHhtbC1saXRlcmFsIChwYXNzZWQgdGhyb3VnaCB1bmFsdGVyZWQpCiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJ3htbD08YT48L2I+XG5jPGI7JywKICAgICAgICAgICAgJ3htbCA9IDxhPjwvYj5cbmM8YjsnKTsKICAgICAgICAKICAgICAgICAvLyBJc3N1ZSAjNjQ2ID0gd2hpdGVzcGFjZSBpcyBhbGxvd2VkIGluIGF0dHJpYnV0ZSBkZWNsYXJhdGlvbnMKICAgICAgICBidCgKICAgICAgICAgICAgJ2xldCBhID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuJyArCiAgICAgICAgICAgICcgICAgcmVuZGVyKCkge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIHJldHVybiAoXG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cJ2FcJz5cbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgICAgIDxzcGFuPmM8L3NwYW4+XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgIDwvcD5cbicgKwogICAgICAgICAgICAnICAgICAgICApO1xuJyArCiAgICAgICAgICAgICcgICAgfVxuJyArCiAgICAgICAgICAgICd9KTsnKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ2xldCBhID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuJyArCiAgICAgICAgICAgICcgICAgcmVuZGVyKCkge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIHJldHVybiAoXG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgIDxwIGNsYXNzTmFtZSA9IFwnYlwnPlxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgPHNwYW4+Yzwvc3Bhbj5cbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgPC9wPlxuJyArCiAgICAgICAgICAgICcgICAgICAgICk7XG4nICsKICAgICAgICAgICAgJyAgICB9XG4nICsKICAgICAgICAgICAgJ30pOycpOwogICAgICAgIGJ0KAogICAgICAgICAgICAnbGV0IGEgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4nICsKICAgICAgICAgICAgJyAgICByZW5kZXIoKSB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgcmV0dXJuIChcbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgPHAgY2xhc3NOYW1lID0gImMiPlxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgPHNwYW4+Yzwvc3Bhbj5cbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgPC9wPlxuJyArCiAgICAgICAgICAgICcgICAgICAgICk7XG4nICsKICAgICAgICAgICAgJyAgICB9XG4nICsKICAgICAgICAgICAgJ30pOycpOwogICAgICAgIGJ0KAogICAgICAgICAgICAnbGV0IGEgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4nICsKICAgICAgICAgICAgJyAgICByZW5kZXIoKSB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgcmV0dXJuIChcbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgPHtlfSAgY2xhc3NOYW1lID0ge2R9PlxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgPHNwYW4+Yzwvc3Bhbj5cbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgPC97ZX0+XG4nICsKICAgICAgICAgICAgJyAgICAgICAgKTtcbicgKwogICAgICAgICAgICAnICAgIH1cbicgKwogICAgICAgICAgICAnfSk7Jyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBlNHggZGlzYWJsZWQKICAgICAgICBvcHRzLmU0eCA9IGZhbHNlOwogICAgICAgIGJ0KAogICAgICAgICAgICAneG1sPTxhIGI9ImMiPjxkLz48ZT5cbiBmb288L2U+eDwvYT47JywKICAgICAgICAgICAgJ3htbCA9IDwgYSBiID0gImMiID4gPCBkIC8gPiA8IGUgPlxuICAgIGZvbyA8IC9lPng8L2EgPiA7Jyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBNdWx0aXBsZSBicmFjZXMKICAgICAgICBidCgne3t9L3ovfScsICd7XG4gICAge31cbiAgICAvei9cbn0nKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIEJlYXV0aWZ5IHByZXNlcnZlIGZvcm1hdHRpbmcKICAgICAgICBidCgnLyogYmVhdXRpZnkgcHJlc2VydmU6c3RhcnQgKi9cbi8qIGJlYXV0aWZ5IHByZXNlcnZlOmVuZCAqLycpOwogICAgICAgIGJ0KCcvKiBiZWF1dGlmeSBwcmVzZXJ2ZTpzdGFydCAqL1xuICAgdmFyIGEgPSAxO1xuLyogYmVhdXRpZnkgcHJlc2VydmU6ZW5kICovJyk7CiAgICAgICAgYnQoJ3ZhciBhID0gMTtcbi8qIGJlYXV0aWZ5IHByZXNlcnZlOnN0YXJ0ICovXG4gICB2YXIgYSA9IDE7XG4vKiBiZWF1dGlmeSBwcmVzZXJ2ZTplbmQgKi8nKTsKICAgICAgICBidCgnLyogYmVhdXRpZnkgcHJlc2VydmU6c3RhcnQgKi8gICAgIHthc2RrbGdoO3k7O3t9ZGQyZH0vKiBiZWF1dGlmeSBwcmVzZXJ2ZTplbmQgKi8nKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciBhID0gIDE7XG4vKiBiZWF1dGlmeSBwcmVzZXJ2ZTpzdGFydCAqL1xuICAgdmFyIGEgPSAxO1xuLyogYmVhdXRpZnkgcHJlc2VydmU6ZW5kICovJywKICAgICAgICAgICAgJ3ZhciBhID0gMTtcbi8qIGJlYXV0aWZ5IHByZXNlcnZlOnN0YXJ0ICovXG4gICB2YXIgYSA9IDE7XG4vKiBiZWF1dGlmeSBwcmVzZXJ2ZTplbmQgKi8nKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciBhID0gMTtcbiAvKiBiZWF1dGlmeSBwcmVzZXJ2ZTpzdGFydCAqL1xuICAgdmFyIGEgPSAxO1xuLyogYmVhdXRpZnkgcHJlc2VydmU6ZW5kICovJywKICAgICAgICAgICAgJ3ZhciBhID0gMTtcbi8qIGJlYXV0aWZ5IHByZXNlcnZlOnN0YXJ0ICovXG4gICB2YXIgYSA9IDE7XG4vKiBiZWF1dGlmeSBwcmVzZXJ2ZTplbmQgKi8nKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciBhID0ge1xuJyArCiAgICAgICAgICAgICcgICAgLyogYmVhdXRpZnkgcHJlc2VydmU6c3RhcnQgKi9cbicgKwogICAgICAgICAgICAnICAgIG9uZSAgIDogIDFcbicgKwogICAgICAgICAgICAnICAgIHR3byAgIDogIDIsXG4nICsKICAgICAgICAgICAgJyAgICB0aHJlZSA6ICAzLFxuJyArCiAgICAgICAgICAgICcgICAgdGVuICAgOiAxMFxuJyArCiAgICAgICAgICAgICcgICAgLyogYmVhdXRpZnkgcHJlc2VydmU6ZW5kICovXG4nICsKICAgICAgICAgICAgJ307Jyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgYSA9IHtcbicgKwogICAgICAgICAgICAnLyogYmVhdXRpZnkgcHJlc2VydmU6c3RhcnQgKi9cbicgKwogICAgICAgICAgICAnICAgIG9uZSAgIDogIDEsXG4nICsKICAgICAgICAgICAgJyAgICB0d28gICA6ICAyLFxuJyArCiAgICAgICAgICAgICcgICAgdGhyZWUgOiAgMyxcbicgKwogICAgICAgICAgICAnICAgIHRlbiAgIDogMTBcbicgKwogICAgICAgICAgICAnLyogYmVhdXRpZnkgcHJlc2VydmU6ZW5kICovXG4nICsKICAgICAgICAgICAgJ307JywKICAgICAgICAgICAgJ3ZhciBhID0ge1xuJyArCiAgICAgICAgICAgICcgICAgLyogYmVhdXRpZnkgcHJlc2VydmU6c3RhcnQgKi9cbicgKwogICAgICAgICAgICAnICAgIG9uZSAgIDogIDEsXG4nICsKICAgICAgICAgICAgJyAgICB0d28gICA6ICAyLFxuJyArCiAgICAgICAgICAgICcgICAgdGhyZWUgOiAgMyxcbicgKwogICAgICAgICAgICAnICAgIHRlbiAgIDogMTBcbicgKwogICAgICAgICAgICAnLyogYmVhdXRpZnkgcHJlc2VydmU6ZW5kICovXG4nICsKICAgICAgICAgICAgJ307Jyk7CiAgICAgICAgCiAgICAgICAgLy8gb25lIHNwYWNlIGJlZm9yZSBhbmQgYWZ0ZXIgcmVxdWlyZWQsIG9ubHkgc2luZ2xlIHNwYWNlcyBpbnNpZGUuCiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgYSA9IHtcbicgKwogICAgICAgICAgICAnLyogIGJlYXV0aWZ5IHByZXNlcnZlOnN0YXJ0ICAqL1xuJyArCiAgICAgICAgICAgICcgICAgb25lICAgOiAgMSxcbicgKwogICAgICAgICAgICAnICAgIHR3byAgIDogIDIsXG4nICsKICAgICAgICAgICAgJyAgICB0aHJlZSA6ICAzLFxuJyArCiAgICAgICAgICAgICcgICAgdGVuICAgOiAxMFxuJyArCiAgICAgICAgICAgICd9OycsCiAgICAgICAgICAgICd2YXIgYSA9IHtcbicgKwogICAgICAgICAgICAnICAgIC8qICBiZWF1dGlmeSBwcmVzZXJ2ZTpzdGFydCAgKi9cbicgKwogICAgICAgICAgICAnICAgIG9uZTogMSxcbicgKwogICAgICAgICAgICAnICAgIHR3bzogMixcbicgKwogICAgICAgICAgICAnICAgIHRocmVlOiAzLFxuJyArCiAgICAgICAgICAgICcgICAgdGVuOiAxMFxuJyArCiAgICAgICAgICAgICd9OycpOwogICAgICAgIGJ0KAogICAgICAgICAgICAndmFyIGEgPSB7XG4nICsKICAgICAgICAgICAgJy8qYmVhdXRpZnkgcHJlc2VydmU6c3RhcnQqL1xuJyArCiAgICAgICAgICAgICcgICAgb25lICAgOiAgMSxcbicgKwogICAgICAgICAgICAnICAgIHR3byAgIDogIDIsXG4nICsKICAgICAgICAgICAgJyAgICB0aHJlZSA6ICAzLFxuJyArCiAgICAgICAgICAgICcgICAgdGVuICAgOiAxMFxuJyArCiAgICAgICAgICAgICd9OycsCiAgICAgICAgICAgICd2YXIgYSA9IHtcbicgKwogICAgICAgICAgICAnICAgIC8qYmVhdXRpZnkgcHJlc2VydmU6c3RhcnQqL1xuJyArCiAgICAgICAgICAgICcgICAgb25lOiAxLFxuJyArCiAgICAgICAgICAgICcgICAgdHdvOiAyLFxuJyArCiAgICAgICAgICAgICcgICAgdGhyZWU6IDMsXG4nICsKICAgICAgICAgICAgJyAgICB0ZW46IDEwXG4nICsKICAgICAgICAgICAgJ307Jyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgYSA9IHtcbicgKwogICAgICAgICAgICAnLypiZWF1dGlmeSAgcHJlc2VydmU6c3RhcnQqL1xuJyArCiAgICAgICAgICAgICcgICAgb25lICAgOiAgMSxcbicgKwogICAgICAgICAgICAnICAgIHR3byAgIDogIDIsXG4nICsKICAgICAgICAgICAgJyAgICB0aHJlZSA6ICAzLFxuJyArCiAgICAgICAgICAgICcgICAgdGVuICAgOiAxMFxuJyArCiAgICAgICAgICAgICd9OycsCiAgICAgICAgICAgICd2YXIgYSA9IHtcbicgKwogICAgICAgICAgICAnICAgIC8qYmVhdXRpZnkgIHByZXNlcnZlOnN0YXJ0Ki9cbicgKwogICAgICAgICAgICAnICAgIG9uZTogMSxcbicgKwogICAgICAgICAgICAnICAgIHR3bzogMixcbicgKwogICAgICAgICAgICAnICAgIHRocmVlOiAzLFxuJyArCiAgICAgICAgICAgICcgICAgdGVuOiAxMFxuJyArCiAgICAgICAgICAgICd9OycpOwogICAgICAgIAogICAgICAgIC8vIERpcmVjdGl2ZTogaWdub3JlCiAgICAgICAgYnQoJy8qIGJlYXV0aWZ5IGlnbm9yZTpzdGFydCAqL1xuLyogYmVhdXRpZnkgaWdub3JlOmVuZCAqLycpOwogICAgICAgIGJ0KCcvKiBiZWF1dGlmeSBpZ25vcmU6c3RhcnQgKi9cbiAgIHZhciBhLCwseyAxO1xuLyogYmVhdXRpZnkgaWdub3JlOmVuZCAqLycpOwogICAgICAgIGJ0KCd2YXIgYSA9IDE7XG4vKiBiZWF1dGlmeSBpZ25vcmU6c3RhcnQgKi9cbiAgIHZhciBhID0gMTtcbi8qIGJlYXV0aWZ5IGlnbm9yZTplbmQgKi8nKTsKICAgICAgICBidCgnLyogYmVhdXRpZnkgaWdub3JlOnN0YXJ0ICovICAgICB7YXNka2xnaDt5OysrKztkZDJkfS8qIGJlYXV0aWZ5IGlnbm9yZTplbmQgKi8nKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciBhID0gIDE7XG4vKiBiZWF1dGlmeSBpZ25vcmU6c3RhcnQgKi9cbiAgIHZhciBhLCwseyAxO1xuLyogYmVhdXRpZnkgaWdub3JlOmVuZCAqLycsCiAgICAgICAgICAgICd2YXIgYSA9IDE7XG4vKiBiZWF1dGlmeSBpZ25vcmU6c3RhcnQgKi9cbiAgIHZhciBhLCwseyAxO1xuLyogYmVhdXRpZnkgaWdub3JlOmVuZCAqLycpOwogICAgICAgIGJ0KAogICAgICAgICAgICAndmFyIGEgPSAxO1xuIC8qIGJlYXV0aWZ5IGlnbm9yZTpzdGFydCAqL1xuICAgdmFyIGEsLCx7IDE7XG4vKiBiZWF1dGlmeSBpZ25vcmU6ZW5kICovJywKICAgICAgICAgICAgJ3ZhciBhID0gMTtcbi8qIGJlYXV0aWZ5IGlnbm9yZTpzdGFydCAqL1xuICAgdmFyIGEsLCx7IDE7XG4vKiBiZWF1dGlmeSBpZ25vcmU6ZW5kICovJyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgYSA9IHtcbicgKwogICAgICAgICAgICAnICAgIC8qIGJlYXV0aWZ5IGlnbm9yZTpzdGFydCAqL1xuJyArCiAgICAgICAgICAgICcgICAgb25lICAgOiAgMVxuJyArCiAgICAgICAgICAgICcgICAgdHdvICAgOiAgMixcbicgKwogICAgICAgICAgICAnICAgIHRocmVlIDogIHtcbicgKwogICAgICAgICAgICAnICAgIHRlbiAgIDogMTBcbicgKwogICAgICAgICAgICAnICAgIC8qIGJlYXV0aWZ5IGlnbm9yZTplbmQgKi9cbicgKwogICAgICAgICAgICAnfTsnKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciBhID0ge1xuJyArCiAgICAgICAgICAgICcvKiBiZWF1dGlmeSBpZ25vcmU6c3RhcnQgKi9cbicgKwogICAgICAgICAgICAnICAgIG9uZSAgIDogIDFcbicgKwogICAgICAgICAgICAnICAgIHR3byAgIDogIDIsXG4nICsKICAgICAgICAgICAgJyAgICB0aHJlZSA6ICB7XG4nICsKICAgICAgICAgICAgJyAgICB0ZW4gICA6IDEwXG4nICsKICAgICAgICAgICAgJy8qIGJlYXV0aWZ5IGlnbm9yZTplbmQgKi9cbicgKwogICAgICAgICAgICAnfTsnLAogICAgICAgICAgICAndmFyIGEgPSB7XG4nICsKICAgICAgICAgICAgJyAgICAvKiBiZWF1dGlmeSBpZ25vcmU6c3RhcnQgKi9cbicgKwogICAgICAgICAgICAnICAgIG9uZSAgIDogIDFcbicgKwogICAgICAgICAgICAnICAgIHR3byAgIDogIDIsXG4nICsKICAgICAgICAgICAgJyAgICB0aHJlZSA6ICB7XG4nICsKICAgICAgICAgICAgJyAgICB0ZW4gICA6IDEwXG4nICsKICAgICAgICAgICAgJy8qIGJlYXV0aWZ5IGlnbm9yZTplbmQgKi9cbicgKwogICAgICAgICAgICAnfTsnKTsKICAgICAgICAKICAgICAgICAvLyBEaXJlY3RpdmVzIC0gbXVsdGlwbGUgYW5kIGludGVyYWN0aW5nCiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgYSA9IHtcbicgKwogICAgICAgICAgICAnLyogYmVhdXRpZnkgcHJlc2VydmU6c3RhcnQgKi9cbicgKwogICAgICAgICAgICAnLyogYmVhdXRpZnkgcHJlc2VydmU6c3RhcnQgKi9cbicgKwogICAgICAgICAgICAnICAgIG9uZSAgIDogIDEsXG4nICsKICAgICAgICAgICAgJyAgLyogYmVhdXRpZnkgcHJlc2VydmU6ZW5kICovXG4nICsKICAgICAgICAgICAgJyAgICB0d28gICA6ICAyLFxuJyArCiAgICAgICAgICAgICcgICAgdGhyZWUgOiAgMyxcbicgKwogICAgICAgICAgICAnLyogYmVhdXRpZnkgcHJlc2VydmU6c3RhcnQgKi9cbicgKwogICAgICAgICAgICAnICAgIHRlbiAgIDogMTBcbicgKwogICAgICAgICAgICAnLyogYmVhdXRpZnkgcHJlc2VydmU6ZW5kICovXG4nICsKICAgICAgICAgICAgJ307JywKICAgICAgICAgICAgJ3ZhciBhID0ge1xuJyArCiAgICAgICAgICAgICcgICAgLyogYmVhdXRpZnkgcHJlc2VydmU6c3RhcnQgKi9cbicgKwogICAgICAgICAgICAnLyogYmVhdXRpZnkgcHJlc2VydmU6c3RhcnQgKi9cbicgKwogICAgICAgICAgICAnICAgIG9uZSAgIDogIDEsXG4nICsKICAgICAgICAgICAgJyAgLyogYmVhdXRpZnkgcHJlc2VydmU6ZW5kICovXG4nICsKICAgICAgICAgICAgJyAgICB0d286IDIsXG4nICsKICAgICAgICAgICAgJyAgICB0aHJlZTogMyxcbicgKwogICAgICAgICAgICAnICAgIC8qIGJlYXV0aWZ5IHByZXNlcnZlOnN0YXJ0ICovXG4nICsKICAgICAgICAgICAgJyAgICB0ZW4gICA6IDEwXG4nICsKICAgICAgICAgICAgJy8qIGJlYXV0aWZ5IHByZXNlcnZlOmVuZCAqL1xuJyArCiAgICAgICAgICAgICd9OycpOwogICAgICAgIGJ0KAogICAgICAgICAgICAndmFyIGEgPSB7XG4nICsKICAgICAgICAgICAgJy8qIGJlYXV0aWZ5IGlnbm9yZTpzdGFydCAqL1xuJyArCiAgICAgICAgICAgICcgICAgb25lICAgOiAgMVxuJyArCiAgICAgICAgICAgICcgLyogYmVhdXRpZnkgaWdub3JlOmVuZCAqL1xuJyArCiAgICAgICAgICAgICcgICAgdHdvICAgOiAgMixcbicgKwogICAgICAgICAgICAnLyogYmVhdXRpZnkgaWdub3JlOnN0YXJ0ICovXG4nICsKICAgICAgICAgICAgJyAgICB0aHJlZSA6ICB7XG4nICsKICAgICAgICAgICAgJyAgICB0ZW4gICA6IDEwXG4nICsKICAgICAgICAgICAgJy8qIGJlYXV0aWZ5IGlnbm9yZTplbmQgKi9cbicgKwogICAgICAgICAgICAnfTsnLAogICAgICAgICAgICAndmFyIGEgPSB7XG4nICsKICAgICAgICAgICAgJyAgICAvKiBiZWF1dGlmeSBpZ25vcmU6c3RhcnQgKi9cbicgKwogICAgICAgICAgICAnICAgIG9uZSAgIDogIDFcbicgKwogICAgICAgICAgICAnIC8qIGJlYXV0aWZ5IGlnbm9yZTplbmQgKi9cbicgKwogICAgICAgICAgICAnICAgIHR3bzogMixcbicgKwogICAgICAgICAgICAnICAgIC8qIGJlYXV0aWZ5IGlnbm9yZTpzdGFydCAqL1xuJyArCiAgICAgICAgICAgICcgICAgdGhyZWUgOiAge1xuJyArCiAgICAgICAgICAgICcgICAgdGVuICAgOiAxMFxuJyArCiAgICAgICAgICAgICcvKiBiZWF1dGlmeSBpZ25vcmU6ZW5kICovXG4nICsKICAgICAgICAgICAgJ307Jyk7CiAgICAgICAgCiAgICAgICAgLy8gU3RhcnRzIGNhbiBvY2N1ciB0b2dldGhlciwgaWdub3JlOmVuZCBtdXN0IG9jY3VyIGFsb25lLgogICAgICAgIGJ0KAogICAgICAgICAgICAndmFyIGEgPSB7XG4nICsKICAgICAgICAgICAgJy8qIGJlYXV0aWZ5IGlnbm9yZTpzdGFydCAqL1xuJyArCiAgICAgICAgICAgICcgICAgb25lICAgOiAgMVxuJyArCiAgICAgICAgICAgICcgICAgTk9URTogaWdub3JlIGVuZCBibG9jayBkb2VzIG5vdCBzdXBwb3J0IHN0YXJ0aW5nIG90aGVyIGRpcmVjdGl2ZXNcbicgKwogICAgICAgICAgICAnICAgIFRoaXMgZG9lcyBub3QgbWF0Y2ggdGhlIGVuZGluZyB0aGUgaWdub3JlLi4uXG4nICsKICAgICAgICAgICAgJyAvKiBiZWF1dGlmeSBpZ25vcmU6ZW5kIHByZXNlcnZlOnN0YXJ0ICovXG4nICsKICAgICAgICAgICAgJyAgICB0d28gICA6ICAyLFxuJyArCiAgICAgICAgICAgICcvKiBiZWF1dGlmeSBpZ25vcmU6c3RhcnQgKi9cbicgKwogICAgICAgICAgICAnICAgIHRocmVlIDogIHtcbicgKwogICAgICAgICAgICAnICAgIHRlbiAgIDogMTBcbicgKwogICAgICAgICAgICAnICAgID09VGhlIG5leHQgY29tbWVudCBlbmRzIHRoZSBzdGFydGluZyBpZ25vcmU9PVxuJyArCiAgICAgICAgICAgICcvKiBiZWF1dGlmeSBpZ25vcmU6ZW5kICovXG4nICsKICAgICAgICAgICAgJ307JywKICAgICAgICAgICAgJ3ZhciBhID0ge1xuJyArCiAgICAgICAgICAgICcgICAgLyogYmVhdXRpZnkgaWdub3JlOnN0YXJ0ICovXG4nICsKICAgICAgICAgICAgJyAgICBvbmUgICA6ICAxXG4nICsKICAgICAgICAgICAgJyAgICBOT1RFOiBpZ25vcmUgZW5kIGJsb2NrIGRvZXMgbm90IHN1cHBvcnQgc3RhcnRpbmcgb3RoZXIgZGlyZWN0aXZlc1xuJyArCiAgICAgICAgICAgICcgICAgVGhpcyBkb2VzIG5vdCBtYXRjaCB0aGUgZW5kaW5nIHRoZSBpZ25vcmUuLi5cbicgKwogICAgICAgICAgICAnIC8qIGJlYXV0aWZ5IGlnbm9yZTplbmQgcHJlc2VydmU6c3RhcnQgKi9cbicgKwogICAgICAgICAgICAnICAgIHR3byAgIDogIDIsXG4nICsKICAgICAgICAgICAgJy8qIGJlYXV0aWZ5IGlnbm9yZTpzdGFydCAqL1xuJyArCiAgICAgICAgICAgICcgICAgdGhyZWUgOiAge1xuJyArCiAgICAgICAgICAgICcgICAgdGVuICAgOiAxMFxuJyArCiAgICAgICAgICAgICcgICAgPT1UaGUgbmV4dCBjb21tZW50IGVuZHMgdGhlIHN0YXJ0aW5nIGlnbm9yZT09XG4nICsKICAgICAgICAgICAgJy8qIGJlYXV0aWZ5IGlnbm9yZTplbmQgKi9cbicgKwogICAgICAgICAgICAnfTsnKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciBhID0ge1xuJyArCiAgICAgICAgICAgICcvKiBiZWF1dGlmeSBpZ25vcmU6c3RhcnQgcHJlc2VydmU6c3RhcnQgKi9cbicgKwogICAgICAgICAgICAnICAgIG9uZSAgIDogIHtcbicgKwogICAgICAgICAgICAnIC8qIGJlYXV0aWZ5IGlnbm9yZTplbmQgKi9cbicgKwogICAgICAgICAgICAnICAgIHR3byAgIDogIDIsXG4nICsKICAgICAgICAgICAgJyAgLyogYmVhdXRpZnkgaWdub3JlOnN0YXJ0ICovXG4nICsKICAgICAgICAgICAgJyAgICB0aHJlZSA6ICB7XG4nICsKICAgICAgICAgICAgJy8qIGJlYXV0aWZ5IGlnbm9yZTplbmQgKi9cbicgKwogICAgICAgICAgICAnICAgIHRlbiAgIDogMTBcbicgKwogICAgICAgICAgICAnICAgLy8gVGhpcyBpcyBhbGwgcHJlc2VydmVkXG4nICsKICAgICAgICAgICAgJ307JywKICAgICAgICAgICAgJ3ZhciBhID0ge1xuJyArCiAgICAgICAgICAgICcgICAgLyogYmVhdXRpZnkgaWdub3JlOnN0YXJ0IHByZXNlcnZlOnN0YXJ0ICovXG4nICsKICAgICAgICAgICAgJyAgICBvbmUgICA6ICB7XG4nICsKICAgICAgICAgICAgJyAvKiBiZWF1dGlmeSBpZ25vcmU6ZW5kICovXG4nICsKICAgICAgICAgICAgJyAgICB0d28gICA6ICAyLFxuJyArCiAgICAgICAgICAgICcgIC8qIGJlYXV0aWZ5IGlnbm9yZTpzdGFydCAqL1xuJyArCiAgICAgICAgICAgICcgICAgdGhyZWUgOiAge1xuJyArCiAgICAgICAgICAgICcvKiBiZWF1dGlmeSBpZ25vcmU6ZW5kICovXG4nICsKICAgICAgICAgICAgJyAgICB0ZW4gICA6IDEwXG4nICsKICAgICAgICAgICAgJyAgIC8vIFRoaXMgaXMgYWxsIHByZXNlcnZlZFxuJyArCiAgICAgICAgICAgICd9OycpOwogICAgICAgIGJ0KAogICAgICAgICAgICAndmFyIGEgPSB7XG4nICsKICAgICAgICAgICAgJy8qIGJlYXV0aWZ5IGlnbm9yZTpzdGFydCBwcmVzZXJ2ZTpzdGFydCAqL1xuJyArCiAgICAgICAgICAgICcgICAgb25lICAgOiAge1xuJyArCiAgICAgICAgICAgICcgLyogYmVhdXRpZnkgaWdub3JlOmVuZCAqL1xuJyArCiAgICAgICAgICAgICcgICAgdHdvICAgOiAgMixcbicgKwogICAgICAgICAgICAnICAvKiBiZWF1dGlmeSBpZ25vcmU6c3RhcnQgKi9cbicgKwogICAgICAgICAgICAnICAgIHRocmVlIDogIHtcbicgKwogICAgICAgICAgICAnLyogYmVhdXRpZnkgaWdub3JlOmVuZCAqL1xuJyArCiAgICAgICAgICAgICcgICAgdGVuICAgOiAxMCxcbicgKwogICAgICAgICAgICAnLyogYmVhdXRpZnkgcHJlc2VydmU6ZW5kICovXG4nICsKICAgICAgICAgICAgJyAgICAgZWxldmVuOiAxMVxuJyArCiAgICAgICAgICAgICd9OycsCiAgICAgICAgICAgICd2YXIgYSA9IHtcbicgKwogICAgICAgICAgICAnICAgIC8qIGJlYXV0aWZ5IGlnbm9yZTpzdGFydCBwcmVzZXJ2ZTpzdGFydCAqL1xuJyArCiAgICAgICAgICAgICcgICAgb25lICAgOiAge1xuJyArCiAgICAgICAgICAgICcgLyogYmVhdXRpZnkgaWdub3JlOmVuZCAqL1xuJyArCiAgICAgICAgICAgICcgICAgdHdvICAgOiAgMixcbicgKwogICAgICAgICAgICAnICAvKiBiZWF1dGlmeSBpZ25vcmU6c3RhcnQgKi9cbicgKwogICAgICAgICAgICAnICAgIHRocmVlIDogIHtcbicgKwogICAgICAgICAgICAnLyogYmVhdXRpZnkgaWdub3JlOmVuZCAqL1xuJyArCiAgICAgICAgICAgICcgICAgdGVuICAgOiAxMCxcbicgKwogICAgICAgICAgICAnLyogYmVhdXRpZnkgcHJlc2VydmU6ZW5kICovXG4nICsKICAgICAgICAgICAgJyAgICBlbGV2ZW46IDExXG4nICsKICAgICAgICAgICAgJ307Jyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBUZW1wbGF0ZSBGb3JtYXR0aW5nCiAgICAgICAgYnQoJzw/PSR2aWV3WyJuYW1lIl07ID8+Jyk7CiAgICAgICAgYnQoJ2EgPSA8Pz0gZXh0ZXJuYWwoKSA/PjsnKTsKICAgICAgICBidCgKICAgICAgICAgICAgJzw/cGhwXG4nICsKICAgICAgICAgICAgJ2ZvcigkaSA9IDE7ICRpIDw9IDEwMDsgJGkrKzspIHtcbicgKwogICAgICAgICAgICAnICAgICNjb3VudCB0byAxMDAhXG4nICsKICAgICAgICAgICAgJyAgICBlY2hvKCRpIC4gIjwvYnI+Iik7XG4nICsKICAgICAgICAgICAgJ31cbicgKwogICAgICAgICAgICAnPz4nKTsKICAgICAgICBidCgnYSA9IDwlPSBleHRlcm5hbCgpICU+OycpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgLy8ganNsaW50IGFuZCBzcGFjZSBhZnRlciBhbm9uIGZ1bmN0aW9uIC0gKGYgPSAiICIsIGMgPSAiIikKICAgICAgICBvcHRzLmpzbGludF9oYXBweSA9IHRydWU7CiAgICAgICAgb3B0cy5zcGFjZV9hZnRlcl9hbm9uX2Z1bmN0aW9uID0gdHJ1ZTsKICAgICAgICBidCgKICAgICAgICAgICAgJ2E9dHlwZW9mKHgpJywKICAgICAgICAgICAgJ2EgPSB0eXBlb2YgKHgpJyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICd4KCk7XG5cbmZ1bmN0aW9uKCl7fScsCiAgICAgICAgICAgICd4KCk7XG5cbmZ1bmN0aW9uICgpIHt9Jyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICd4KCk7XG5cbnZhciB4ID0ge1xueDogZnVuY3Rpb24oKXt9XG59JywKICAgICAgICAgICAgJ3goKTtcblxudmFyIHggPSB7XG4gICAgeDogZnVuY3Rpb24gKCkge31cbn0nKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ2Z1bmN0aW9uICgpIHtcbiAgICB2YXIgYSwgYiwgYywgZCwgZSA9IFtdLFxuICAgICAgICBmO1xufScpOwogICAgICAgIGJ0KAogICAgICAgICAgICAnc3dpdGNoKHgpIHtjYXNlIDA6IGNhc2UgMTogYSgpOyBicmVhazsgZGVmYXVsdDogYnJlYWt9JywKICAgICAgICAgICAgJ3N3aXRjaCAoeCkge1xuY2FzZSAwOlxuY2FzZSAxOlxuICAgIGEoKTtcbiAgICBicmVhaztcbmRlZmF1bHQ6XG4gICAgYnJlYWtcbn0nKTsKICAgICAgICBidCgnc3dpdGNoKHgpe2Nhc2UgLTE6YnJlYWs7Y2FzZSAheTpicmVhazt9JywgJ3N3aXRjaCAoeCkge1xuY2FzZSAtMTpcbiAgICBicmVhaztcbmNhc2UgIXk6XG4gICAgYnJlYWs7XG59Jyk7CiAgICAgICAgCiAgICAgICAgLy8gdHlwaWNhbCBncmVhc2Vtb25rZXkgc3RhcnQKICAgICAgICB0ZXN0X2ZyYWdtZW50KCcvLyBjb21tZW50IDJcbihmdW5jdGlvbiAoKScpOwogICAgICAgIGJ0KAogICAgICAgICAgICAndmFyIGEyLCBiMiwgYzIsIGQyID0gMCwgYyA9IGZ1bmN0aW9uKCkge30sIGQgPSBcJ1wnOycsCiAgICAgICAgICAgICd2YXIgYTIsIGIyLCBjMiwgZDIgPSAwLFxuICAgIGMgPSBmdW5jdGlvbiAoKSB7fSxcbiAgICBkID0gXCdcJzsnKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciBhMiwgYjIsIGMyLCBkMiA9IDAsIGMgPSBmdW5jdGlvbigpIHt9LFxuZCA9IFwnXCc7JywKICAgICAgICAgICAgJ3ZhciBhMiwgYjIsIGMyLCBkMiA9IDAsXG4gICAgYyA9IGZ1bmN0aW9uICgpIHt9LFxuICAgIGQgPSBcJ1wnOycpOwogICAgICAgIGJ0KAogICAgICAgICAgICAndmFyIG8yPSQuZXh0ZW5kKGEpO2Z1bmN0aW9uKCl7YWxlcnQoeCk7fScsCiAgICAgICAgICAgICd2YXIgbzIgPSAkLmV4dGVuZChhKTtcblxuZnVuY3Rpb24gKCkge1xuICAgIGFsZXJ0KHgpO1xufScpOwogICAgICAgIGJ0KCdmdW5jdGlvbiooKSB7XG4gICAgeWllbGQgMTtcbn0nLCAnZnVuY3Rpb24qICgpIHtcbiAgICB5aWVsZCAxO1xufScpOwogICAgICAgIGJ0KCdmdW5jdGlvbiogeCgpIHtcbiAgICB5aWVsZCAxO1xufScpOwoKICAgICAgICAvLyBqc2xpbnQgYW5kIHNwYWNlIGFmdGVyIGFub24gZnVuY3Rpb24gLSAoZiA9ICIgIiwgYyA9ICIiKQogICAgICAgIG9wdHMuanNsaW50X2hhcHB5ID0gdHJ1ZTsKICAgICAgICBvcHRzLnNwYWNlX2FmdGVyX2Fub25fZnVuY3Rpb24gPSBmYWxzZTsKICAgICAgICBidCgKICAgICAgICAgICAgJ2E9dHlwZW9mKHgpJywKICAgICAgICAgICAgJ2EgPSB0eXBlb2YgKHgpJyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICd4KCk7XG5cbmZ1bmN0aW9uKCl7fScsCiAgICAgICAgICAgICd4KCk7XG5cbmZ1bmN0aW9uICgpIHt9Jyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICd4KCk7XG5cbnZhciB4ID0ge1xueDogZnVuY3Rpb24oKXt9XG59JywKICAgICAgICAgICAgJ3goKTtcblxudmFyIHggPSB7XG4gICAgeDogZnVuY3Rpb24gKCkge31cbn0nKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ2Z1bmN0aW9uICgpIHtcbiAgICB2YXIgYSwgYiwgYywgZCwgZSA9IFtdLFxuICAgICAgICBmO1xufScpOwogICAgICAgIGJ0KAogICAgICAgICAgICAnc3dpdGNoKHgpIHtjYXNlIDA6IGNhc2UgMTogYSgpOyBicmVhazsgZGVmYXVsdDogYnJlYWt9JywKICAgICAgICAgICAgJ3N3aXRjaCAoeCkge1xuY2FzZSAwOlxuY2FzZSAxOlxuICAgIGEoKTtcbiAgICBicmVhaztcbmRlZmF1bHQ6XG4gICAgYnJlYWtcbn0nKTsKICAgICAgICBidCgnc3dpdGNoKHgpe2Nhc2UgLTE6YnJlYWs7Y2FzZSAheTpicmVhazt9JywgJ3N3aXRjaCAoeCkge1xuY2FzZSAtMTpcbiAgICBicmVhaztcbmNhc2UgIXk6XG4gICAgYnJlYWs7XG59Jyk7CiAgICAgICAgCiAgICAgICAgLy8gdHlwaWNhbCBncmVhc2Vtb25rZXkgc3RhcnQKICAgICAgICB0ZXN0X2ZyYWdtZW50KCcvLyBjb21tZW50IDJcbihmdW5jdGlvbiAoKScpOwogICAgICAgIGJ0KAogICAgICAgICAgICAndmFyIGEyLCBiMiwgYzIsIGQyID0gMCwgYyA9IGZ1bmN0aW9uKCkge30sIGQgPSBcJ1wnOycsCiAgICAgICAgICAgICd2YXIgYTIsIGIyLCBjMiwgZDIgPSAwLFxuICAgIGMgPSBmdW5jdGlvbiAoKSB7fSxcbiAgICBkID0gXCdcJzsnKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciBhMiwgYjIsIGMyLCBkMiA9IDAsIGMgPSBmdW5jdGlvbigpIHt9LFxuZCA9IFwnXCc7JywKICAgICAgICAgICAgJ3ZhciBhMiwgYjIsIGMyLCBkMiA9IDAsXG4gICAgYyA9IGZ1bmN0aW9uICgpIHt9LFxuICAgIGQgPSBcJ1wnOycpOwogICAgICAgIGJ0KAogICAgICAgICAgICAndmFyIG8yPSQuZXh0ZW5kKGEpO2Z1bmN0aW9uKCl7YWxlcnQoeCk7fScsCiAgICAgICAgICAgICd2YXIgbzIgPSAkLmV4dGVuZChhKTtcblxuZnVuY3Rpb24gKCkge1xuICAgIGFsZXJ0KHgpO1xufScpOwogICAgICAgIGJ0KCdmdW5jdGlvbiooKSB7XG4gICAgeWllbGQgMTtcbn0nLCAnZnVuY3Rpb24qICgpIHtcbiAgICB5aWVsZCAxO1xufScpOwogICAgICAgIGJ0KCdmdW5jdGlvbiogeCgpIHtcbiAgICB5aWVsZCAxO1xufScpOwoKICAgICAgICAvLyBqc2xpbnQgYW5kIHNwYWNlIGFmdGVyIGFub24gZnVuY3Rpb24gLSAoZiA9ICIgIiwgYyA9ICIgICAgIikKICAgICAgICBvcHRzLmpzbGludF9oYXBweSA9IGZhbHNlOwogICAgICAgIG9wdHMuc3BhY2VfYWZ0ZXJfYW5vbl9mdW5jdGlvbiA9IHRydWU7CiAgICAgICAgYnQoCiAgICAgICAgICAgICdhPXR5cGVvZih4KScsCiAgICAgICAgICAgICdhID0gdHlwZW9mICh4KScpOwogICAgICAgIGJ0KAogICAgICAgICAgICAneCgpO1xuXG5mdW5jdGlvbigpe30nLAogICAgICAgICAgICAneCgpO1xuXG5mdW5jdGlvbiAoKSB7fScpOwogICAgICAgIGJ0KAogICAgICAgICAgICAneCgpO1xuXG52YXIgeCA9IHtcbng6IGZ1bmN0aW9uKCl7fVxufScsCiAgICAgICAgICAgICd4KCk7XG5cbnZhciB4ID0ge1xuICAgIHg6IGZ1bmN0aW9uICgpIHt9XG59Jyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICdmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGEsIGIsIGMsIGQsIGUgPSBbXSxcbiAgICAgICAgZjtcbn0nKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ3N3aXRjaCh4KSB7Y2FzZSAwOiBjYXNlIDE6IGEoKTsgYnJlYWs7IGRlZmF1bHQ6IGJyZWFrfScsCiAgICAgICAgICAgICdzd2l0Y2ggKHgpIHtcbiAgICBjYXNlIDA6XG4gICAgY2FzZSAxOlxuICAgICAgICBhKCk7XG4gICAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG59Jyk7CiAgICAgICAgYnQoJ3N3aXRjaCh4KXtjYXNlIC0xOmJyZWFrO2Nhc2UgIXk6YnJlYWs7fScsICdzd2l0Y2ggKHgpIHtcbiAgICBjYXNlIC0xOlxuICAgICAgICBicmVhaztcbiAgICBjYXNlICF5OlxuICAgICAgICBicmVhaztcbn0nKTsKICAgICAgICAKICAgICAgICAvLyB0eXBpY2FsIGdyZWFzZW1vbmtleSBzdGFydAogICAgICAgIHRlc3RfZnJhZ21lbnQoJy8vIGNvbW1lbnQgMlxuKGZ1bmN0aW9uICgpJyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgYTIsIGIyLCBjMiwgZDIgPSAwLCBjID0gZnVuY3Rpb24oKSB7fSwgZCA9IFwnXCc7JywKICAgICAgICAgICAgJ3ZhciBhMiwgYjIsIGMyLCBkMiA9IDAsXG4gICAgYyA9IGZ1bmN0aW9uICgpIHt9LFxuICAgIGQgPSBcJ1wnOycpOwogICAgICAgIGJ0KAogICAgICAgICAgICAndmFyIGEyLCBiMiwgYzIsIGQyID0gMCwgYyA9IGZ1bmN0aW9uKCkge30sXG5kID0gXCdcJzsnLAogICAgICAgICAgICAndmFyIGEyLCBiMiwgYzIsIGQyID0gMCxcbiAgICBjID0gZnVuY3Rpb24gKCkge30sXG4gICAgZCA9IFwnXCc7Jyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgbzI9JC5leHRlbmQoYSk7ZnVuY3Rpb24oKXthbGVydCh4KTt9JywKICAgICAgICAgICAgJ3ZhciBvMiA9ICQuZXh0ZW5kKGEpO1xuXG5mdW5jdGlvbiAoKSB7XG4gICAgYWxlcnQoeCk7XG59Jyk7CiAgICAgICAgYnQoJ2Z1bmN0aW9uKigpIHtcbiAgICB5aWVsZCAxO1xufScsICdmdW5jdGlvbiogKCkge1xuICAgIHlpZWxkIDE7XG59Jyk7CiAgICAgICAgYnQoJ2Z1bmN0aW9uKiB4KCkge1xuICAgIHlpZWxkIDE7XG59Jyk7CgogICAgICAgIC8vIGpzbGludCBhbmQgc3BhY2UgYWZ0ZXIgYW5vbiBmdW5jdGlvbiAtIChmID0gIiIsIGMgPSAiICAgICIpCiAgICAgICAgb3B0cy5qc2xpbnRfaGFwcHkgPSBmYWxzZTsKICAgICAgICBvcHRzLnNwYWNlX2FmdGVyX2Fub25fZnVuY3Rpb24gPSBmYWxzZTsKICAgICAgICBidCgKICAgICAgICAgICAgJ2E9dHlwZW9mKHgpJywKICAgICAgICAgICAgJ2EgPSB0eXBlb2YoeCknKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ3goKTtcblxuZnVuY3Rpb24oKXt9JywKICAgICAgICAgICAgJ3goKTtcblxuZnVuY3Rpb24oKSB7fScpOwogICAgICAgIGJ0KAogICAgICAgICAgICAneCgpO1xuXG52YXIgeCA9IHtcbng6IGZ1bmN0aW9uKCl7fVxufScsCiAgICAgICAgICAgICd4KCk7XG5cbnZhciB4ID0ge1xuICAgIHg6IGZ1bmN0aW9uKCkge31cbn0nKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ2Z1bmN0aW9uICgpIHtcbiAgICB2YXIgYSwgYiwgYywgZCwgZSA9IFtdLFxuICAgICAgICBmO1xufScsCiAgICAgICAgICAgICdmdW5jdGlvbigpIHtcbiAgICB2YXIgYSwgYiwgYywgZCwgZSA9IFtdLFxuICAgICAgICBmO1xufScpOwogICAgICAgIGJ0KAogICAgICAgICAgICAnc3dpdGNoKHgpIHtjYXNlIDA6IGNhc2UgMTogYSgpOyBicmVhazsgZGVmYXVsdDogYnJlYWt9JywKICAgICAgICAgICAgJ3N3aXRjaCAoeCkge1xuICAgIGNhc2UgMDpcbiAgICBjYXNlIDE6XG4gICAgICAgIGEoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbn0nKTsKICAgICAgICBidCgnc3dpdGNoKHgpe2Nhc2UgLTE6YnJlYWs7Y2FzZSAheTpicmVhazt9JywgJ3N3aXRjaCAoeCkge1xuICAgIGNhc2UgLTE6XG4gICAgICAgIGJyZWFrO1xuICAgIGNhc2UgIXk6XG4gICAgICAgIGJyZWFrO1xufScpOwogICAgICAgIAogICAgICAgIC8vIHR5cGljYWwgZ3JlYXNlbW9ua2V5IHN0YXJ0CiAgICAgICAgdGVzdF9mcmFnbWVudCgnLy8gY29tbWVudCAyXG4oZnVuY3Rpb24oKScpOwogICAgICAgIGJ0KAogICAgICAgICAgICAndmFyIGEyLCBiMiwgYzIsIGQyID0gMCwgYyA9IGZ1bmN0aW9uKCkge30sIGQgPSBcJ1wnOycsCiAgICAgICAgICAgICd2YXIgYTIsIGIyLCBjMiwgZDIgPSAwLFxuICAgIGMgPSBmdW5jdGlvbigpIHt9LFxuICAgIGQgPSBcJ1wnOycpOwogICAgICAgIGJ0KAogICAgICAgICAgICAndmFyIGEyLCBiMiwgYzIsIGQyID0gMCwgYyA9IGZ1bmN0aW9uKCkge30sXG5kID0gXCdcJzsnLAogICAgICAgICAgICAndmFyIGEyLCBiMiwgYzIsIGQyID0gMCxcbiAgICBjID0gZnVuY3Rpb24oKSB7fSxcbiAgICBkID0gXCdcJzsnKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciBvMj0kLmV4dGVuZChhKTtmdW5jdGlvbigpe2FsZXJ0KHgpO30nLAogICAgICAgICAgICAndmFyIG8yID0gJC5leHRlbmQoYSk7XG5cbmZ1bmN0aW9uKCkge1xuICAgIGFsZXJ0KHgpO1xufScpOwogICAgICAgIGJ0KCdmdW5jdGlvbiooKSB7XG4gICAgeWllbGQgMTtcbn0nKTsKICAgICAgICBidCgnZnVuY3Rpb24qIHgoKSB7XG4gICAgeWllbGQgMTtcbn0nKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIFJlZ3Jlc3Npb24gdGVzdHMKICAgICAgICAKICAgICAgICAvLyBJc3N1ZSAyNDEKICAgICAgICBidCgKICAgICAgICAgICAgJ29ialxuJyArCiAgICAgICAgICAgICcgICAgLmxhc3Qoe1xuJyArCiAgICAgICAgICAgICcgICAgICAgIGZvbzogMSxcbicgKwogICAgICAgICAgICAnICAgICAgICBiYXI6IDJcbicgKwogICAgICAgICAgICAnICAgIH0pO1xuJyArCiAgICAgICAgICAgICd2YXIgdGVzdCA9IDE7Jyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICdvYmpcbicgKwogICAgICAgICAgICAnICAgIC5sYXN0KGEsIGZ1bmN0aW9uKCkge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIHZhciB0ZXN0O1xuJyArCiAgICAgICAgICAgICcgICAgfSk7XG4nICsKICAgICAgICAgICAgJ3ZhciB0ZXN0ID0gMTsnKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ29iai5maXJzdCgpXG4nICsKICAgICAgICAgICAgJyAgICAuc2Vjb25kKClcbicgKwogICAgICAgICAgICAnICAgIC5sYXN0KGZ1bmN0aW9uKGVyciwgcmVzcG9uc2UpIHtcbicgKwogICAgICAgICAgICAnICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuJyArCiAgICAgICAgICAgICcgICAgfSk7Jyk7CiAgICAgICAgCiAgICAgICAgLy8gSXNzdWUgMjY4IGFuZCAyNzUKICAgICAgICBidCgKICAgICAgICAgICAgJ29iai5sYXN0KGEsIGZ1bmN0aW9uKCkge1xuJyArCiAgICAgICAgICAgICcgICAgdmFyIHRlc3Q7XG4nICsKICAgICAgICAgICAgJ30pO1xuJyArCiAgICAgICAgICAgICd2YXIgdGVzdCA9IDE7Jyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICdvYmoubGFzdChhLFxuJyArCiAgICAgICAgICAgICcgICAgZnVuY3Rpb24oKSB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgdmFyIHRlc3Q7XG4nICsKICAgICAgICAgICAgJyAgICB9KTtcbicgKwogICAgICAgICAgICAndmFyIHRlc3QgPSAxOycpOwogICAgICAgIGJ0KAogICAgICAgICAgICAnKGZ1bmN0aW9uKCkge2lmICghd2luZG93LkZPTykgd2luZG93LkZPTyB8fCAod2luZG93LkZPTyA9IGZ1bmN0aW9uKCkge3ZhciBiID0ge2JhcjogInpvcnQifTt9KTt9KSgpOycsCiAgICAgICAgICAgICcoZnVuY3Rpb24oKSB7XG4nICsKICAgICAgICAgICAgJyAgICBpZiAoIXdpbmRvdy5GT08pIHdpbmRvdy5GT08gfHwgKHdpbmRvdy5GT08gPSBmdW5jdGlvbigpIHtcbicgKwogICAgICAgICAgICAnICAgICAgICB2YXIgYiA9IHtcbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgYmFyOiAiem9ydCJcbicgKwogICAgICAgICAgICAnICAgICAgICB9O1xuJyArCiAgICAgICAgICAgICcgICAgfSk7XG4nICsKICAgICAgICAgICAgJ30pKCk7Jyk7CiAgICAgICAgCiAgICAgICAgLy8gSXNzdWUgMjgxCiAgICAgICAgYnQoCiAgICAgICAgICAgICdkZWZpbmUoWyJkb2pvL19iYXNlL2RlY2xhcmUiLCAibXkvRW1wbG95ZWUiLCAiZGlqaXQvZm9ybS9CdXR0b24iLFxuJyArCiAgICAgICAgICAgICcgICAgImRvam8vX2Jhc2UvbGFuZyIsICJkb2pvL0RlZmVycmVkIlxuJyArCiAgICAgICAgICAgICddLCBmdW5jdGlvbihkZWNsYXJlLCBFbXBsb3llZSwgQnV0dG9uLCBsYW5nLCBEZWZlcnJlZCkge1xuJyArCiAgICAgICAgICAgICcgICAgcmV0dXJuIGRlY2xhcmUoRW1wbG95ZWUsIHtcbicgKwogICAgICAgICAgICAnICAgICAgICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24oKSB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgIG5ldyBCdXR0b24oe1xuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgb25DbGljazogbGFuZy5oaXRjaCh0aGlzLCBmdW5jdGlvbigpIHtcbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgICAgICAgICBuZXcgRGVmZXJyZWQoKS50aGVuKGxhbmcuaGl0Y2godGhpcywgZnVuY3Rpb24oKSB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2FsYXJ5ICogMC4yNTtcbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgICAgICAgICB9KSk7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgICAgICB9KVxuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICB9KTtcbicgKwogICAgICAgICAgICAnICAgICAgICB9XG4nICsKICAgICAgICAgICAgJyAgICB9KTtcbicgKwogICAgICAgICAgICAnfSk7Jyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICdkZWZpbmUoWyJkb2pvL19iYXNlL2RlY2xhcmUiLCAibXkvRW1wbG95ZWUiLCAiZGlqaXQvZm9ybS9CdXR0b24iLFxuJyArCiAgICAgICAgICAgICcgICAgICAgICJkb2pvL19iYXNlL2xhbmciLCAiZG9qby9EZWZlcnJlZCJcbicgKwogICAgICAgICAgICAnICAgIF0sXG4nICsKICAgICAgICAgICAgJyAgICBmdW5jdGlvbihkZWNsYXJlLCBFbXBsb3llZSwgQnV0dG9uLCBsYW5nLCBEZWZlcnJlZCkge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIHJldHVybiBkZWNsYXJlKEVtcGxveWVlLCB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgIGNvbnN0cnVjdG9yOiBmdW5jdGlvbigpIHtcbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgICAgIG5ldyBCdXR0b24oe1xuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGxhbmcuaGl0Y2godGhpcywgZnVuY3Rpb24oKSB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEZWZlcnJlZCgpLnRoZW4obGFuZy5oaXRjaCh0aGlzLCBmdW5jdGlvbigpIHtcbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2FsYXJ5ICogMC4yNTtcbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuJyArCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgICAgIH0pXG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgICAgICB9KTtcbicgKwogICAgICAgICAgICAnICAgICAgICAgICAgfVxuJyArCiAgICAgICAgICAgICcgICAgICAgIH0pO1xuJyArCiAgICAgICAgICAgICcgICAgfSk7Jyk7CiAgICAgICAgCiAgICAgICAgLy8gSXNzdWUgNDU5CiAgICAgICAgYnQoCiAgICAgICAgICAgICcoZnVuY3Rpb24oKSB7XG4nICsKICAgICAgICAgICAgJyAgICByZXR1cm4ge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIGZvbzogZnVuY3Rpb24oKSB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgICAgIHJldHVybiAiYmFyIjtcbicgKwogICAgICAgICAgICAnICAgICAgICB9LFxuJyArCiAgICAgICAgICAgICcgICAgICAgIGJhcjogWyJiYXIiXVxuJyArCiAgICAgICAgICAgICcgICAgfTtcbicgKwogICAgICAgICAgICAnfSgpKTsnKTsKICAgICAgICAKICAgICAgICAvLyBJc3N1ZSA1MDUgLSBzdHJpbmdzIHNob3VsZCBlbmQgYXQgbmV3bGluZSB1bmxlc3MgY29udGludWVkIGJ5IGJhY2tzbGFzaAogICAgICAgIGJ0KAogICAgICAgICAgICAndmFyIG5hbWUgPSAiYTtcbicgKwogICAgICAgICAgICAnbmFtZSA9ICJiIjsnKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciBuYW1lID0gImE7XFxcbicgKwogICAgICAgICAgICAnICAgIG5hbWUgPSBiIjsnKTsKICAgICAgICAKICAgICAgICAvLyBJc3N1ZSA1MTQgLSBzb21lIG9wZXJhdG9ycyByZXF1aXJlIHNwYWNlcyB0byBkaXN0aW5ndWlzaCB0aGVtCiAgICAgICAgYnQoJ3ZhciBjID0gIl9BQ1RJT05fVE9fTkFUSVZFQVBJXyIgKyArK2crKyArICtuZXcgRGF0ZTsnKTsKICAgICAgICBidCgndmFyIGMgPSAiX0FDVElPTl9UT19OQVRJVkVBUElfIiAtIC0tZy0tIC0gLW5ldyBEYXRlOycpOwogICAgICAgIAogICAgICAgIC8vIElzc3VlIDQ0MCAtIHJlc2VydmVkIHdvcmRzIGNhbiBiZSB1c2VkIGFzIG9iamVjdCBwcm9wZXJ0eSBuYW1lcwogICAgICAgIGJ0KAogICAgICAgICAgICAnYSA9IHtcbicgKwogICAgICAgICAgICAnICAgIGZ1bmN0aW9uOiB7fSxcbicgKwogICAgICAgICAgICAnICAgICJmdW5jdGlvbiI6IHt9LFxuJyArCiAgICAgICAgICAgICcgICAgdGhyb3c6IHt9LFxuJyArCiAgICAgICAgICAgICcgICAgInRocm93Ijoge30sXG4nICsKICAgICAgICAgICAgJyAgICB2YXI6IHt9LFxuJyArCiAgICAgICAgICAgICcgICAgInZhciI6IHt9LFxuJyArCiAgICAgICAgICAgICcgICAgc2V0OiB7fSxcbicgKwogICAgICAgICAgICAnICAgICJzZXQiOiB7fSxcbicgKwogICAgICAgICAgICAnICAgIGdldDoge30sXG4nICsKICAgICAgICAgICAgJyAgICAiZ2V0Ijoge30sXG4nICsKICAgICAgICAgICAgJyAgICBpZjoge30sXG4nICsKICAgICAgICAgICAgJyAgICAiaWYiOiB7fSxcbicgKwogICAgICAgICAgICAnICAgIHRoZW46IHt9LFxuJyArCiAgICAgICAgICAgICcgICAgInRoZW4iOiB7fSxcbicgKwogICAgICAgICAgICAnICAgIGVsc2U6IHt9LFxuJyArCiAgICAgICAgICAgICcgICAgImVsc2UiOiB7fSxcbicgKwogICAgICAgICAgICAnICAgIHlheToge31cbicgKwogICAgICAgICAgICAnfTsnKTsKICAgICAgICAKICAgICAgICAvLyBJc3N1ZSAzMzEgLSBpZi1lbHNlIHdpdGggYnJhY2VzIGVkZ2UgY2FzZQogICAgICAgIGJ0KAogICAgICAgICAgICAnaWYoeCl7YSgpO31lbHNle2IoKTt9aWYoeSl7YygpO30nLAogICAgICAgICAgICAnaWYgKHgpIHtcbicgKwogICAgICAgICAgICAnICAgIGEoKTtcbicgKwogICAgICAgICAgICAnfSBlbHNlIHtcbicgKwogICAgICAgICAgICAnICAgIGIoKTtcbicgKwogICAgICAgICAgICAnfVxuJyArCiAgICAgICAgICAgICdpZiAoeSkge1xuJyArCiAgICAgICAgICAgICcgICAgYygpO1xuJyArCiAgICAgICAgICAgICd9Jyk7CiAgICAgICAgCiAgICAgICAgLy8gSXNzdWUgNDg1IC0gZW5zdXJlIGZ1bmN0aW9uIGRlY2xhcmF0aW9ucyBiZWhhdmUgdGhlIHNhbWUgaW4gYXJyYXlzIGFzIGVsc2V3aGVyZQogICAgICAgIGJ0KAogICAgICAgICAgICAndmFyIHYgPSBbImEiLFxuJyArCiAgICAgICAgICAgICcgICAgZnVuY3Rpb24oKSB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgcmV0dXJuO1xuJyArCiAgICAgICAgICAgICcgICAgfSwge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIGlkOiAxXG4nICsKICAgICAgICAgICAgJyAgICB9XG4nICsKICAgICAgICAgICAgJ107Jyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgdiA9IFsiYSIsIGZ1bmN0aW9uKCkge1xuJyArCiAgICAgICAgICAgICcgICAgcmV0dXJuO1xuJyArCiAgICAgICAgICAgICd9LCB7XG4nICsKICAgICAgICAgICAgJyAgICBpZDogMVxuJyArCiAgICAgICAgICAgICd9XTsnKTsKICAgICAgICAKICAgICAgICAvLyBJc3N1ZSAzODIgLSBpbml0aWFsIHRvdGFsbHkgY3Vyc29yeSBzdXBwb3J0IGZvciBlczYgbW9kdWxlIGV4cG9ydAogICAgICAgIGJ0KAogICAgICAgICAgICAnbW9kdWxlICJFdmVuIiB7XG4nICsKICAgICAgICAgICAgJyAgICBpbXBvcnQgb2RkIGZyb20gIk9kZCI7XG4nICsKICAgICAgICAgICAgJyAgICBleHBvcnQgZnVuY3Rpb24gc3VtKHgsIHkpIHtcbicgKwogICAgICAgICAgICAnICAgICAgICByZXR1cm4geCArIHk7XG4nICsKICAgICAgICAgICAgJyAgICB9XG4nICsKICAgICAgICAgICAgJyAgICBleHBvcnQgdmFyIHBpID0gMy4xNDE1OTM7XG4nICsKICAgICAgICAgICAgJyAgICBleHBvcnQgZGVmYXVsdCBtb2R1bGVOYW1lO1xuJyArCiAgICAgICAgICAgICd9Jyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICdtb2R1bGUgIkV2ZW4iIHtcbicgKwogICAgICAgICAgICAnICAgIGV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRpdih4LCB5KSB7fVxuJyArCiAgICAgICAgICAgICd9Jyk7CiAgICAgICAgCiAgICAgICAgLy8gSXNzdWUgNTA4CiAgICAgICAgYnQoJ3NldFsibmFtZSJdJyk7CiAgICAgICAgYnQoJ2dldFsibmFtZSJdJyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICdhID0ge1xuJyArCiAgICAgICAgICAgICcgICAgc2V0IGIoeCkge30sXG4nICsKICAgICAgICAgICAgJyAgICBjOiAxLFxuJyArCiAgICAgICAgICAgICcgICAgZDogZnVuY3Rpb24oKSB7fVxuJyArCiAgICAgICAgICAgICd9OycpOwogICAgICAgIGJ0KAogICAgICAgICAgICAnYSA9IHtcbicgKwogICAgICAgICAgICAnICAgIGdldCBiKCkge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIHJldHVuIDA7XG4nICsKICAgICAgICAgICAgJyAgICB9LFxuJyArCiAgICAgICAgICAgICcgICAgYzogMSxcbicgKwogICAgICAgICAgICAnICAgIGQ6IGZ1bmN0aW9uKCkge31cbicgKwogICAgICAgICAgICAnfTsnKTsKICAgICAgICAKICAgICAgICAvLyBJc3N1ZSAyOTggLSBkbyBub3QgdW5kZXIgaW5kZW50IGlmL3doaWxlL2ZvciBjb25kdGlvbmFscyBleHBlcmVzaW9ucwogICAgICAgIGJ0KAogICAgICAgICAgICAnXCd1c2Ugc3RyaWN0XCc7XG4nICsKICAgICAgICAgICAgJ2lmIChbXS5zb21lKGZ1bmN0aW9uKCkge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIHJldHVybiBmYWxzZTtcbicgKwogICAgICAgICAgICAnICAgIH0pKSB7XG4nICsKICAgICAgICAgICAgJyAgICBjb25zb2xlLmxvZygiaGVsbG8iKTtcbicgKwogICAgICAgICAgICAnfScpOwogICAgICAgIAogICAgICAgIC8vIElzc3VlIDI5OCAtIGRvIG5vdCB1bmRlciBpbmRlbnQgaWYvd2hpbGUvZm9yIGNvbmR0aW9uYWxzIGV4cGVyZXNpb25zCiAgICAgICAgYnQoCiAgICAgICAgICAgICdcJ3VzZSBzdHJpY3RcJztcbicgKwogICAgICAgICAgICAnaWYgKFtdLnNvbWUoZnVuY3Rpb24oKSB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgcmV0dXJuIGZhbHNlO1xuJyArCiAgICAgICAgICAgICcgICAgfSkpIHtcbicgKwogICAgICAgICAgICAnICAgIGNvbnNvbGUubG9nKCJoZWxsbyIpO1xuJyArCiAgICAgICAgICAgICd9Jyk7CiAgICAgICAgCiAgICAgICAgLy8gSXNzdWUgNTUyIC0gVHlwZXNjcmlwdD8gIE9rYXkuLi4gd2UgZGlkbid0IGJyZWFrIGl0IGJlZm9yZSwgc28gdHJ5IG5vdCB0byBicmVhayBpdCBub3cuCiAgICAgICAgYnQoCiAgICAgICAgICAgICdjbGFzcyBUZXN0IHtcbicgKwogICAgICAgICAgICAnICAgIGJsYWg6IHN0cmluZ1tdO1xuJyArCiAgICAgICAgICAgICcgICAgZm9vKCk6IG51bWJlciB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgcmV0dXJuIDA7XG4nICsKICAgICAgICAgICAgJyAgICB9XG4nICsKICAgICAgICAgICAgJyAgICBiYXIoKTogbnVtYmVyIHtcbicgKwogICAgICAgICAgICAnICAgICAgICByZXR1cm4gMDtcbicgKwogICAgICAgICAgICAnICAgIH1cbicgKwogICAgICAgICAgICAnfScpOwogICAgICAgIGJ0KAogICAgICAgICAgICAnaW50ZXJmYWNlIFRlc3Qge1xuJyArCiAgICAgICAgICAgICcgICAgYmxhaDogc3RyaW5nW107XG4nICsKICAgICAgICAgICAgJyAgICBmb28oKTogbnVtYmVyIHtcbicgKwogICAgICAgICAgICAnICAgICAgICByZXR1cm4gMDtcbicgKwogICAgICAgICAgICAnICAgIH1cbicgKwogICAgICAgICAgICAnICAgIGJhcigpOiBudW1iZXIge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIHJldHVybiAwO1xuJyArCiAgICAgICAgICAgICcgICAgfVxuJyArCiAgICAgICAgICAgICd9Jyk7CiAgICAgICAgCiAgICAgICAgLy8gSXNzdWUgNTgzIC0gRnVuY3Rpb25zIHdpdGggY29tbWVudHMgYWZ0ZXIgdGhlbSBzaG91bGQgc3RpbGwgaW5kZW50IGNvcnJlY3RseS4KICAgICAgICBidCgKICAgICAgICAgICAgJ2Z1bmN0aW9uIGV4aXQoY29kZSkge1xuJyArCiAgICAgICAgICAgICcgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbicgKwogICAgICAgICAgICAnICAgICAgICBwaGFudG9tLmV4aXQoY29kZSk7XG4nICsKICAgICAgICAgICAgJyAgICB9LCAwKTtcbicgKwogICAgICAgICAgICAnICAgIHBoYW50b20ub25FcnJvciA9IGZ1bmN0aW9uKCkge307XG4nICsKICAgICAgICAgICAgJ31cbicgKwogICAgICAgICAgICAnLy8gQ29tbWVudCcpOwogICAgICAgIAogICAgICAgIC8vIElzc3VlIDgwNiAtIG5ld2xpbmUgYXJyb3cgZnVuY3Rpb25zCiAgICAgICAgYnQoCiAgICAgICAgICAgICdhLmIoImMiLFxuJyArCiAgICAgICAgICAgICcgICAgKCkgPT4gZC5lXG4nICsKICAgICAgICAgICAgJyknKTsKICAgICAgICAKICAgICAgICAvLyBJc3N1ZSA4MTAgLSBlczYgb2JqZWN0IGxpdGVyYWwgZGV0ZWN0aW9uCiAgICAgICAgYnQoCiAgICAgICAgICAgICdmdW5jdGlvbiBiYWRGb3JtYXR0aW5nKCkge1xuJyArCiAgICAgICAgICAgICcgICAgcmV0dXJuIHtcbicgKwogICAgICAgICAgICAnICAgICAgICBhLFxuJyArCiAgICAgICAgICAgICcgICAgICAgIGI6IGMsXG4nICsKICAgICAgICAgICAgJyAgICAgICAgZDogZSxcbicgKwogICAgICAgICAgICAnICAgICAgICBmOiBnLFxuJyArCiAgICAgICAgICAgICcgICAgICAgIGgsXG4nICsKICAgICAgICAgICAgJyAgICAgICAgaSxcbicgKwogICAgICAgICAgICAnICAgICAgICBqOiBrXG4nICsKICAgICAgICAgICAgJyAgICB9XG4nICsKICAgICAgICAgICAgJ31cbicgKwogICAgICAgICAgICAnXG4nICsKICAgICAgICAgICAgJ2Z1bmN0aW9uIGdvb2RGb3JtYXR0aW5nKCkge1xuJyArCiAgICAgICAgICAgICcgICAgcmV0dXJuIHtcbicgKwogICAgICAgICAgICAnICAgICAgICBhOiBiLFxuJyArCiAgICAgICAgICAgICcgICAgICAgIGMsXG4nICsKICAgICAgICAgICAgJyAgICAgICAgZDogZSxcbicgKwogICAgICAgICAgICAnICAgICAgICBmOiBnLFxuJyArCiAgICAgICAgICAgICcgICAgICAgIGgsXG4nICsKICAgICAgICAgICAgJyAgICAgICAgaSxcbicgKwogICAgICAgICAgICAnICAgICAgICBqOiBrXG4nICsKICAgICAgICAgICAgJyAgICB9XG4nICsKICAgICAgICAgICAgJ30nKTsKICAgICAgICAKICAgICAgICAvLyBJc3N1ZSA2MDIgLSBFUzYgb2JqZWN0IGxpdGVyYWwgc2hvcnRoYW5kIGZ1bmN0aW9ucwogICAgICAgIGJ0KAogICAgICAgICAgICAncmV0dXJuIHtcbicgKwogICAgICAgICAgICAnICAgIGZuMSgpIHt9LFxuJyArCiAgICAgICAgICAgICcgICAgZm4yKCkge31cbicgKwogICAgICAgICAgICAnfScpOwogICAgICAgIGJ0KAogICAgICAgICAgICAndGhyb3cge1xuJyArCiAgICAgICAgICAgICcgICAgZm4xKCkge30sXG4nICsKICAgICAgICAgICAgJyAgICBmbjIoKSB7fVxuJyArCiAgICAgICAgICAgICd9Jyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICdmb28oe1xuJyArCiAgICAgICAgICAgICcgICAgZm4xKGEpIHt9XG4nICsKICAgICAgICAgICAgJyAgICBmbjIoYSkge31cbicgKwogICAgICAgICAgICAnfSknKTsKICAgICAgICBidCgKICAgICAgICAgICAgJ2ZvbygidGV4dCIsIHtcbicgKwogICAgICAgICAgICAnICAgIGZuMShhKSB7fVxuJyArCiAgICAgICAgICAgICcgICAgZm4yKGEpIHt9XG4nICsKICAgICAgICAgICAgJ30pJyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICdvbmVBcmcgPSB7XG4nICsKICAgICAgICAgICAgJyAgICBmbjEoYSkge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIGRvKCk7XG4nICsKICAgICAgICAgICAgJyAgICB9LFxuJyArCiAgICAgICAgICAgICcgICAgZm4yKCkge31cbicgKwogICAgICAgICAgICAnfScpOwogICAgICAgIGJ0KAogICAgICAgICAgICAnbXVsdGlBcmcgPSB7XG4nICsKICAgICAgICAgICAgJyAgICBmbjEoYSwgYiwgYykge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIGRvKCk7XG4nICsKICAgICAgICAgICAgJyAgICB9LFxuJyArCiAgICAgICAgICAgICcgICAgZm4yKCkge31cbicgKwogICAgICAgICAgICAnfScpOwogICAgICAgIGJ0KAogICAgICAgICAgICAnbm9BcmdzID0ge1xuJyArCiAgICAgICAgICAgICcgICAgZm4xKCkge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIGRvKCk7XG4nICsKICAgICAgICAgICAgJyAgICB9LFxuJyArCiAgICAgICAgICAgICcgICAgZm4yKCkge31cbicgKwogICAgICAgICAgICAnfScpOwogICAgICAgIGJ0KAogICAgICAgICAgICAnZW1wdHlGbiA9IHtcbicgKwogICAgICAgICAgICAnICAgIGZuMSgpIHt9LFxuJyArCiAgICAgICAgICAgICcgICAgZm4yKCkge31cbicgKwogICAgICAgICAgICAnfScpOwogICAgICAgIGJ0KAogICAgICAgICAgICAnbmVzdGVkID0ge1xuJyArCiAgICAgICAgICAgICcgICAgZm5zOiB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgZm4xKCkge30sXG4nICsKICAgICAgICAgICAgJyAgICAgICAgZm4yKCkge31cbicgKwogICAgICAgICAgICAnICAgIH1cbicgKwogICAgICAgICAgICAnfScpOwogICAgICAgIGJ0KAogICAgICAgICAgICAnYXJyYXkgPSBbe1xuJyArCiAgICAgICAgICAgICcgICAgZm4xKCkge30sXG4nICsKICAgICAgICAgICAgJyAgICBwcm9wOiB2YWwsXG4nICsKICAgICAgICAgICAgJyAgICBmbjIoKSB7fVxuJyArCiAgICAgICAgICAgICd9XScpOwogICAgICAgIGJ0KAogICAgICAgICAgICAnZXhwciA9IGV4cHIgPyBleHByIDoge1xuJyArCiAgICAgICAgICAgICcgICAgZm4xKCkge30sXG4nICsKICAgICAgICAgICAgJyAgICBmbjIoKSB7fVxuJyArCiAgICAgICAgICAgICd9Jyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICdzdHJhbmdlID0gdmFsaWQgKyB7XG4nICsKICAgICAgICAgICAgJyAgICBmbjEoKSB7fSxcbicgKwogICAgICAgICAgICAnICAgIGZuMigpIHtcbicgKwogICAgICAgICAgICAnICAgICAgICByZXR1cm4gMTtcbicgKwogICAgICAgICAgICAnICAgIH1cbicgKwogICAgICAgICAgICAnfS5mbjIoKScpOwogICAgICAgIAogICAgICAgIC8vIElzc3VlIDg1NCAtIEFycm93IGZ1bmN0aW9uIHdpdGggc3RhdGVtZW50IGJsb2NrCiAgICAgICAgYnQoCiAgICAgICAgICAgICd0ZXN0KCgpID0+IHtcbicgKwogICAgICAgICAgICAnICAgIHZhciBhID0ge31cbicgKwogICAgICAgICAgICAnXG4nICsKICAgICAgICAgICAgJyAgICBhLndoYXQgPSAoKSA9PiB0cnVlID8gMSA6IDJcbicgKwogICAgICAgICAgICAnXG4nICsKICAgICAgICAgICAgJyAgICBhLnRoaW5nID0gKCkgPT4ge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIGIoKTtcbicgKwogICAgICAgICAgICAnICAgIH1cbicgKwogICAgICAgICAgICAnfSknKTsKICAgICAgICAKICAgICAgICAvLyBJc3N1ZSA0MDYgLSBNdWx0aWxpbmUgYXJyYXkKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciB0ZW1wTmFtZSA9IFtcbicgKwogICAgICAgICAgICAnICAgICJ0ZW1wIixcbicgKwogICAgICAgICAgICAnICAgIHByb2Nlc3MucGlkLFxuJyArCiAgICAgICAgICAgICcgICAgKE1hdGgucmFuZG9tKCkgKiAweDEwMDAwMDAwMDApLnRvU3RyaW5nKDM2KSxcbicgKwogICAgICAgICAgICAnICAgIG5ldyBEYXRlKCkuZ2V0VGltZSgpXG4nICsKICAgICAgICAgICAgJ10uam9pbigiLSIpOycpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgLy8gVGVzdCBub24tcG9zaXRpb25hYmxlLW9wcwogICAgICAgIGJ0KCdhICs9IDI7Jyk7CiAgICAgICAgYnQoJ2EgLT0gMjsnKTsKICAgICAgICBidCgnYSAqPSAyOycpOwogICAgICAgIGJ0KCdhIC89IDI7Jyk7CiAgICAgICAgYnQoJ2EgJT0gMjsnKTsKICAgICAgICBidCgnYSAmPSAyOycpOwogICAgICAgIGJ0KCdhIF49IDI7Jyk7CiAgICAgICAgYnQoJ2EgfD0gMjsnKTsKICAgICAgICBidCgnYSAqKj0gMjsnKTsKICAgICAgICBidCgnYSA8PD0gMjsnKTsKICAgICAgICBidCgnYSA+Pj0gMjsnKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIERlc3RydWN0dXJlZCBhbmQgcmVsYXRlZAogICAgICAgIG9wdHMuYnJhY2Vfc3R5bGUgPSAnY29sbGFwc2UtcHJlc2VydmUtaW5saW5lJzsKICAgICAgICAKICAgICAgICAvLyBJc3N1ZSAzODIgLSBpbXBvcnQgZGVzdHJ1Y3R1cmVkIAogICAgICAgIGJ0KAogICAgICAgICAgICAnbW9kdWxlICJFdmVuIiB7XG4nICsKICAgICAgICAgICAgJyAgICBpbXBvcnQgeyBvZGQsIG9kZGx5IH0gZnJvbSAiT2RkIjtcbicgKwogICAgICAgICAgICAnfScpOwogICAgICAgIGJ0KAogICAgICAgICAgICAnaW1wb3J0IGRlZmF1bHRNZW1iZXIgZnJvbSAibW9kdWxlLW5hbWUiO1xuJyArCiAgICAgICAgICAgICdpbXBvcnQgKiBhcyBuYW1lIGZyb20gIm1vZHVsZS1uYW1lIjtcbicgKwogICAgICAgICAgICAnaW1wb3J0IHsgbWVtYmVyIH0gZnJvbSAibW9kdWxlLW5hbWUiO1xuJyArCiAgICAgICAgICAgICdpbXBvcnQgeyBtZW1iZXIgYXMgYWxpYXMgfSBmcm9tICJtb2R1bGUtbmFtZSI7XG4nICsKICAgICAgICAgICAgJ2ltcG9ydCB7IG1lbWJlcjEsIG1lbWJlcjIgfSBmcm9tICJtb2R1bGUtbmFtZSI7XG4nICsKICAgICAgICAgICAgJ2ltcG9ydCB7IG1lbWJlcjEsIG1lbWJlcjIgYXMgYWxpYXMyIH0gZnJvbSAibW9kdWxlLW5hbWUiO1xuJyArCiAgICAgICAgICAgICdpbXBvcnQgZGVmYXVsdE1lbWJlciwgeyBtZW1iZXIsIG1lbWJlcjIgfSBmcm9tICJtb2R1bGUtbmFtZSI7XG4nICsKICAgICAgICAgICAgJ2ltcG9ydCBkZWZhdWx0TWVtYmVyLCAqIGFzIG5hbWUgZnJvbSAibW9kdWxlLW5hbWUiO1xuJyArCiAgICAgICAgICAgICdpbXBvcnQgIm1vZHVsZS1uYW1lIjsnKTsKICAgICAgICAKICAgICAgICAvLyBJc3N1ZSA4NTggLSBmcm9tIGlzIGEga2V5d29yZCBvbmx5IGFmdGVyIGltcG9ydAogICAgICAgIGJ0KAogICAgICAgICAgICAnaWYgKGZyb20gPCB0bykge1xuJyArCiAgICAgICAgICAgICcgICAgZnJvbSsrO1xuJyArCiAgICAgICAgICAgICd9IGVsc2Uge1xuJyArCiAgICAgICAgICAgICcgICAgZnJvbS0tO1xuJyArCiAgICAgICAgICAgICd9Jyk7CiAgICAgICAgCiAgICAgICAgLy8gSXNzdWUgNTExIC0gZGVzdHJ1dHVyZWQKICAgICAgICBidCgKICAgICAgICAgICAgJ3ZhciB7IGIsIGMgfSA9IHJlcXVpcmUoIi4uL3N0b3JlcyIpO1xuJyArCiAgICAgICAgICAgICd2YXIgeyBQcm9qZWN0U3RvcmUgfSA9IHJlcXVpcmUoIi4uL3N0b3JlcyIpO1xuJyArCiAgICAgICAgICAgICdcbicgKwogICAgICAgICAgICAnZnVuY3Rpb24gdGFrZVRoaW5nKHsgcHJvcCB9KSB7XG4nICsKICAgICAgICAgICAgJyAgICBjb25zb2xlLmxvZygiaW5uZXIgcHJvcCIsIHByb3ApXG4nICsKICAgICAgICAgICAgJ30nKTsKICAgICAgICAKICAgICAgICAvLyBJc3N1ZSAzMTUgLSBTaG9ydCBvYmplY3RzCiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgYSA9IHsgYjogeyBjOiB7IGQ6IGUgfSB9IH07Jyk7CiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgYSA9IHtcbicgKwogICAgICAgICAgICAnICAgIGI6IHtcbicgKwogICAgICAgICAgICAnICAgICAgICBjOiB7IGQ6IGUgfVxuJyArCiAgICAgICAgICAgICcgICAgICAgIGMzOiB7IGQ6IGUgfVxuJyArCiAgICAgICAgICAgICcgICAgfSxcbicgKwogICAgICAgICAgICAnICAgIGIyOiB7IGM6IHsgZDogZSB9IH1cbicgKwogICAgICAgICAgICAnfTsnKTsKICAgICAgICAKICAgICAgICAvLyBJc3N1ZSAzNzAgLSBTaG9ydCBvYmplY3RzIGluIGFycmF5CiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgbWV0aG9kcyA9IFtcbicgKwogICAgICAgICAgICAnICAgIHsgbmFtZTogInRvIiB9LFxuJyArCiAgICAgICAgICAgICcgICAgeyBuYW1lOiAic3RlcCIgfSxcbicgKwogICAgICAgICAgICAnICAgIHsgbmFtZTogIm1vdmUiIH0sXG4nICsKICAgICAgICAgICAgJyAgICB7IG5hbWU6ICJtaW4iIH0sXG4nICsKICAgICAgICAgICAgJyAgICB7IG5hbWU6ICJtYXgiIH1cbicgKwogICAgICAgICAgICAnXTsnKTsKICAgICAgICAKICAgICAgICAvLyBJc3N1ZSA4MzggLSBTaG9ydCBvYmplY3RzIGluIGFycmF5CiAgICAgICAgYnQoCiAgICAgICAgICAgICdmdW5jdGlvbih1cmwsIGNhbGxiYWNrKSB7XG4nICsKICAgICAgICAgICAgJyAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0IilcbicgKwogICAgICAgICAgICAnICAgIGlmICh0cnVlKSBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgZm9vKCk7XG4nICsKICAgICAgICAgICAgJyAgICB9XG4nICsKICAgICAgICAgICAgJyAgICBlbHNlIHNjcmlwdC5vbmxvYWQgPSBjYWxsYmFjaztcbicgKwogICAgICAgICAgICAnfScpOwogICAgICAgIAogICAgICAgIC8vIElzc3VlIDU3OCAtIE9kZCBpbmRlbnRpbmcgYWZ0ZXIgZnVuY3Rpb24KICAgICAgICBidCgKICAgICAgICAgICAgJ2Z1bmN0aW9uIGJpbmRBdXRoRXZlbnQoZXZlbnROYW1lKSB7XG4nICsKICAgICAgICAgICAgJyAgICBzZWxmLmF1dGgub24oZXZlbnROYW1lLCBmdW5jdGlvbihldmVudCwgbWV0YSkge1xuJyArCiAgICAgICAgICAgICcgICAgICAgIHNlbGYuZW1pdChldmVudE5hbWUsIGV2ZW50LCBtZXRhKTtcbicgKwogICAgICAgICAgICAnICAgIH0pO1xuJyArCiAgICAgICAgICAgICd9XG4nICsKICAgICAgICAgICAgJ1sibG9nZ2VkX2luIiwgImxvZ2dlZF9vdXQiLCAic2lnbmVkX3VwIiwgInVwZGF0ZWRfdXNlciJdLmZvckVhY2goYmluZEF1dGhFdmVudCk7Jyk7CiAgICAgICAgCiAgICAgICAgLy8gSXNzdWUgIzQ4NyAtIHNvbWUgc2hvcnQgZXhwcmVzc2lvbnMgZXhhbXBsZXMKICAgICAgICBidCgKICAgICAgICAgICAgJ2lmIChhID09IDEpIHsgYSsrOyB9XG4nICsKICAgICAgICAgICAgJ2EgPSB7IGE6IGEgfTtcbicgKwogICAgICAgICAgICAnVXNlckRCLmZpbmRPbmUoeyB1c2VybmFtZTogInh5eiIgfSwgZnVuY3Rpb24oZXJyLCB1c2VyKSB7fSk7XG4nICsKICAgICAgICAgICAgJ2ltcG9ydCB7IGZzIH0gZnJvbSAiZnMiOycpOwogICAgICAgIAogICAgICAgIC8vIElzc3VlICM5ODIgLSBGaXhlZCByZXR1cm4gZXhwcmVzc2lvbiBjb2xsYXBzZS1wcmVzZXJ2ZS1pbmxpbmUKICAgICAgICBidCgKICAgICAgICAgICAgJ2Z1bmN0aW9uIGZvbyhhcmcpIHtcbicgKwogICAgICAgICAgICAnICAgIGlmICghYXJnKSB7IGEoKTsgfVxuJyArCiAgICAgICAgICAgICcgICAgaWYgKCFhcmcpIHsgcmV0dXJuIGZhbHNlOyB9XG4nICsKICAgICAgICAgICAgJyAgICBpZiAoIWFyZykgeyB0aHJvdyAiaW5saW5lIjsgfVxuJyArCiAgICAgICAgICAgICcgICAgcmV0dXJuIHRydWU7XG4nICsKICAgICAgICAgICAgJ30nKTsKICAgICAgICAKICAgICAgICAvLyBJc3N1ZSAjMzM4IC0gU2hvcnQgZXhwcmVzc2lvbnMgCiAgICAgICAgYnQoCiAgICAgICAgICAgICdpZiAoc29tZUNvbmRpdGlvbikgeyByZXR1cm4gc29tZXRoaW5nOyB9XG4nICsKICAgICAgICAgICAgJ2lmIChzb21lQ29uZGl0aW9uKSB7XG4nICsKICAgICAgICAgICAgJyAgICByZXR1cm4gc29tZXRoaW5nO1xuJyArCiAgICAgICAgICAgICd9XG4nICsKICAgICAgICAgICAgJ2lmIChzb21lQ29uZGl0aW9uKSB7IGJyZWFrOyB9XG4nICsKICAgICAgICAgICAgJ2lmIChzb21lQ29uZGl0aW9uKSB7XG4nICsKICAgICAgICAgICAgJyAgICByZXR1cm4gc29tZXRoaW5nO1xuJyArCiAgICAgICAgICAgICd9Jyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBPbGQgdGVzdHMKICAgICAgICBidCgnJyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnICAgcmV0dXJuIC41Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnICAgcmV0dXJuIC41O1xuICAgYSgpOycpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJyAgICByZXR1cm4gLjU7XG4gICAgYSgpOycpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJyAgICAgcmV0dXJuIC41O1xuICAgICBhKCk7Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnICAgPCBkaXYnKTsKICAgICAgICBidCgnYSAgICAgICAgPSAgICAgICAgICAxJywgJ2EgPSAxJyk7CiAgICAgICAgYnQoJ2E9MScsICdhID0gMScpOwogICAgICAgIGJ0KCcoMykgLyAyJyk7CiAgICAgICAgYnQoJ1siYSIsICJiIl0uam9pbigiIiknKTsKICAgICAgICBidCgnYSgpO1xuXG5iKCk7Jyk7CiAgICAgICAgYnQoJ3ZhciBhID0gMSB2YXIgYiA9IDInLCAndmFyIGEgPSAxXG52YXIgYiA9IDInKTsKICAgICAgICBidCgndmFyIGE9MSwgYj1jW2RdLCBlPTY7JywgJ3ZhciBhID0gMSxcbiAgICBiID0gY1tkXSxcbiAgICBlID0gNjsnKTsKICAgICAgICBidCgndmFyIGEsXG4gICAgYixcbiAgICBjOycpOwogICAgICAgIGJ0KCdsZXQgYSA9IDEgbGV0IGIgPSAyJywgJ2xldCBhID0gMVxubGV0IGIgPSAyJyk7CiAgICAgICAgYnQoJ2xldCBhPTEsIGI9Y1tkXSwgZT02OycsICdsZXQgYSA9IDEsXG4gICAgYiA9IGNbZF0sXG4gICAgZSA9IDY7Jyk7CiAgICAgICAgYnQoJ2xldCBhLFxuICAgIGIsXG4gICAgYzsnKTsKICAgICAgICBidCgnY29uc3QgYSA9IDEgY29uc3QgYiA9IDInLCAnY29uc3QgYSA9IDFcbmNvbnN0IGIgPSAyJyk7CiAgICAgICAgYnQoJ2NvbnN0IGE9MSwgYj1jW2RdLCBlPTY7JywgJ2NvbnN0IGEgPSAxLFxuICAgIGIgPSBjW2RdLFxuICAgIGUgPSA2OycpOwogICAgICAgIGJ0KCdjb25zdCBhLFxuICAgIGIsXG4gICAgYzsnKTsKICAgICAgICBidCgnYSA9ICIgMTIzNDUgIicpOwogICAgICAgIGJ0KCdhID0gXCcgMTIzNDUgXCcnKTsKICAgICAgICBidCgnaWYgKGEgPT0gMSkgYiA9IDI7Jyk7CiAgICAgICAgYnQoJ2lmKDEpezJ9ZWxzZXszfScsICdpZiAoMSkge1xuICAgIDJcbn0gZWxzZSB7XG4gICAgM1xufScpOwogICAgICAgIGJ0KCdpZigxfHwyKTsnLCAnaWYgKDEgfHwgMik7Jyk7CiAgICAgICAgYnQoJyhhPT0xKXx8KGI9PTIpJywgJyhhID09IDEpIHx8IChiID09IDIpJyk7CiAgICAgICAgYnQoJ3ZhciBhID0gMSBpZiAoMikgMzsnLCAndmFyIGEgPSAxXG5pZiAoMikgMzsnKTsKICAgICAgICBidCgnYSA9IGEgKyAxJyk7CiAgICAgICAgYnQoJ2EgPSBhID09IDEnKTsKICAgICAgICBidCgnLzEyMzQ1W142NzhdKjkrLy5tYXRjaChhKScpOwogICAgICAgIGJ0KCdhIC89IDUnKTsKICAgICAgICBidCgnYSA9IDAuNSAqIDMnKTsKICAgICAgICBidCgnYSAqPSAxMC41NScpOwogICAgICAgIGJ0KCdhIDwgLjUnKTsKICAgICAgICBidCgnYSA8PSAuNScpOwogICAgICAgIGJ0KCdhPC41JywgJ2EgPCAuNScpOwogICAgICAgIGJ0KCdhPD0uNScsICdhIDw9IC41Jyk7CiAgICAgICAgCiAgICAgICAgLy8gZXhwb25lbnQgbGl0ZXJhbHMKICAgICAgICBidCgnYSA9IDFlMTAnKTsKICAgICAgICBidCgnYSA9IDEuM2UxMCcpOwogICAgICAgIGJ0KCdhID0gMS4zZS0xMCcpOwogICAgICAgIGJ0KCdhID0gLTEyMzQ1LjNlLTEwJyk7CiAgICAgICAgYnQoJ2EgPSAuMTIzNDVlLTEwJyk7CiAgICAgICAgYnQoJ2EgPSAwNjc4OWUtMTAnKTsKICAgICAgICBidCgnYSA9IGUgLSAxMCcpOwogICAgICAgIGJ0KCdhID0gMS4zZSsxMCcpOwogICAgICAgIGJ0KCdhID0gLTEyMzQ1LjNlKzEwJyk7CiAgICAgICAgYnQoJ2EgPSAuMTIzNDVlKzEwJyk7CiAgICAgICAgYnQoJ2EgPSAwNjc4OWUrMTAnKTsKICAgICAgICBidCgnYSA9IGUgKyAxMCcpOwogICAgICAgIGJ0KCdhPTBlLTEyMzQ1LjNlLTEwJywgJ2EgPSAwZS0xMjM0NSAuM2UtMTAnKTsKICAgICAgICBidCgnYT0wLmUtMTIzNDUuM2UtMTAnLCAnYSA9IDAuIGUgLSAxMjM0NS4zZS0xMCcpOwogICAgICAgIGJ0KCdhPTB4LmUtMTIzNDUuM2UtMTAnLCAnYSA9IDB4LmUgLSAxMjM0NS4zZS0xMCcpOwogICAgICAgIGJ0KCdhPTB4MC5lLTEyMzQ1LjNlLTEwJywgJ2EgPSAweDAuZSAtIDEyMzQ1LjNlLTEwJyk7CiAgICAgICAgYnQoJ2E9MHgwLjBlLTEyMzQ1LjNlLTEwJywgJ2EgPSAweDAgLjBlLTEyMzQ1IC4zZS0xMCcpOwogICAgICAgIGJ0KCdhPTBnLTEyMzQ1LjNlLTEwJywgJ2EgPSAwIGcgLSAxMjM0NS4zZS0xMCcpOwogICAgICAgIGJ0KCdhPTAuZy0xMjM0NS4zZS0xMCcsICdhID0gMC4gZyAtIDEyMzQ1LjNlLTEwJyk7CiAgICAgICAgYnQoJ2E9MHguZy0xMjM0NS4zZS0xMCcsICdhID0gMHguZyAtIDEyMzQ1LjNlLTEwJyk7CiAgICAgICAgYnQoJ2E9MHgwLmctMTIzNDUuM2UtMTAnLCAnYSA9IDB4MC5nIC0gMTIzNDUuM2UtMTAnKTsKICAgICAgICBidCgnYT0weDAuMGctMTIzNDUuM2UtMTAnLCAnYSA9IDB4MCAuMCBnIC0gMTIzNDUuM2UtMTAnKTsKICAgICAgICAKICAgICAgICAvLyBEZWNpbWFsIGxpdGVyYWxzCiAgICAgICAgYnQoJ2EgPSAwMTIzNDU2Nzg5OycpOwogICAgICAgIGJ0KCdhID0gOTg3NjU0MzIxMDsnKTsKICAgICAgICBidCgnYSA9IDU2NDczMDgyOTE7Jyk7CiAgICAgICAgYnQoJ2E9MDMwZS01JywgJ2EgPSAwMzBlLTUnKTsKICAgICAgICBidCgnYT0wMCs0JywgJ2EgPSAwMCArIDQnKTsKICAgICAgICBidCgnYT0zMis0JywgJ2EgPSAzMiArIDQnKTsKICAgICAgICBidCgnYT0wLjZnKzQnLCAnYSA9IDAuNiBnICsgNCcpOwogICAgICAgIGJ0KCdhPTAxLjEwJywgJ2EgPSAwMS4xMCcpOwogICAgICAgIGJ0KCdhPWEuMTAnLCAnYSA9IGEgLjEwJyk7CiAgICAgICAgYnQoJ2E9MDBCMHgwJywgJ2EgPSAwMCBCMHgwJyk7CiAgICAgICAgYnQoJ2E9MDBCMHhiMCcsICdhID0gMDAgQjB4YjAnKTsKICAgICAgICBidCgnYT0wMEIweDBiMCcsICdhID0gMDAgQjB4MGIwJyk7CiAgICAgICAgYnQoJ2E9MDA5MHgwJywgJ2EgPSAwMDkwIHgwJyk7CiAgICAgICAgYnQoJ2E9MGcwYjBvMCcsICdhID0gMCBnMGIwbzAnKTsKICAgICAgICAKICAgICAgICAvLyBIZXhhZGVjaW1hbCBsaXRlcmFscwogICAgICAgIGJ0KCdhID0gMHgwMTIzNDU2Nzg5YWJjZGVmOycpOwogICAgICAgIGJ0KCdhID0gMFgwMTIzNDU2Nzg5QUJDREVGOycpOwogICAgICAgIGJ0KCdhID0gMHhGZURjQmE5ODc2NTQzMjEwOycpOwogICAgICAgIGJ0KCdhPTB4MzBlLTUnLCAnYSA9IDB4MzBlIC0gNScpOwogICAgICAgIGJ0KCdhPTB4RjArNCcsICdhID0gMHhGMCArIDQnKTsKICAgICAgICBidCgnYT0wWGZmKzQnLCAnYSA9IDBYZmYgKyA0Jyk7CiAgICAgICAgYnQoJ2E9MFhmZmcrNCcsICdhID0gMFhmZiBnICsgNCcpOwogICAgICAgIGJ0KCdhPTB4MDEuMTAnLCAnYSA9IDB4MDEgLjEwJyk7CiAgICAgICAgYnQoJ2EgPSAweGIwY2U7Jyk7CiAgICAgICAgYnQoJ2EgPSAweDBiMDsnKTsKICAgICAgICBidCgnYT0weDBCMHgwJywgJ2EgPSAweDBCMCB4MCcpOwogICAgICAgIGJ0KCdhPTB4MEIweGIwJywgJ2EgPSAweDBCMCB4YjAnKTsKICAgICAgICBidCgnYT0weDBCMHgwYjAnLCAnYSA9IDB4MEIwIHgwYjAnKTsKICAgICAgICBidCgnYT0wWDA5MHgwJywgJ2EgPSAwWDA5MCB4MCcpOwogICAgICAgIGJ0KCdhPTBYZzBiMG8wJywgJ2EgPSAwWCBnMGIwbzAnKTsKICAgICAgICAKICAgICAgICAvLyBPY3RhbCBsaXRlcmFscwogICAgICAgIGJ0KCdhID0gMG8wMTIzNDU2NzsnKTsKICAgICAgICBidCgnYSA9IDBPMDEyMzQ1Njc7Jyk7CiAgICAgICAgYnQoJ2EgPSAwbzM0MTIwNjc1OycpOwogICAgICAgIGJ0KCdhPTBvMzBlLTUnLCAnYSA9IDBvMzAgZSAtIDUnKTsKICAgICAgICBidCgnYT0wbzcwKzQnLCAnYSA9IDBvNzAgKyA0Jyk7CiAgICAgICAgYnQoJ2E9ME83Nys0JywgJ2EgPSAwTzc3ICsgNCcpOwogICAgICAgIGJ0KCdhPTBPNzc4KzQnLCAnYSA9IDBPNzcgOCArIDQnKTsKICAgICAgICBidCgnYT0wTzc3YSs0JywgJ2EgPSAwTzc3IGEgKyA0Jyk7CiAgICAgICAgYnQoJ2E9MG8wMS4xMCcsICdhID0gMG8wMSAuMTAnKTsKICAgICAgICBidCgnYT0wbzBCMHgwJywgJ2EgPSAwbzAgQjB4MCcpOwogICAgICAgIGJ0KCdhPTBvMEIweGIwJywgJ2EgPSAwbzAgQjB4YjAnKTsKICAgICAgICBidCgnYT0wbzBCMHgwYjAnLCAnYSA9IDBvMCBCMHgwYjAnKTsKICAgICAgICBidCgnYT0wTzA5MHgwJywgJ2EgPSAwTzAgOTAgeDAnKTsKICAgICAgICBidCgnYT0wT2cwYjBvMCcsICdhID0gME8gZzBiMG8wJyk7CiAgICAgICAgCiAgICAgICAgLy8gQmluYXJ5IGxpdGVyYWxzCiAgICAgICAgYnQoJ2EgPSAwYjAxMDAxMTsnKTsKICAgICAgICBidCgnYSA9IDBCMDEwMDExOycpOwogICAgICAgIGJ0KCdhID0gMGIwMTAwMTEwMDAwMTExMTsnKTsKICAgICAgICBidCgnYT0wYjEwZS01JywgJ2EgPSAwYjEwIGUgLSA1Jyk7CiAgICAgICAgYnQoJ2E9MGIxMCs0JywgJ2EgPSAwYjEwICsgNCcpOwogICAgICAgIGJ0KCdhPTBCMTErNCcsICdhID0gMEIxMSArIDQnKTsKICAgICAgICBidCgnYT0wQjExMis0JywgJ2EgPSAwQjExIDIgKyA0Jyk7CiAgICAgICAgYnQoJ2E9MEIxMWErNCcsICdhID0gMEIxMSBhICsgNCcpOwogICAgICAgIGJ0KCdhPTBiMDEuMTAnLCAnYSA9IDBiMDEgLjEwJyk7CiAgICAgICAgYnQoJ2E9MGIwQjB4MCcsICdhID0gMGIwIEIweDAnKTsKICAgICAgICBidCgnYT0wYjBCMHhiMCcsICdhID0gMGIwIEIweGIwJyk7CiAgICAgICAgYnQoJ2E9MGIwQjB4MGIwJywgJ2EgPSAwYjAgQjB4MGIwJyk7CiAgICAgICAgYnQoJ2E9MEIwOTB4MCcsICdhID0gMEIwIDkwIHgwJyk7CiAgICAgICAgYnQoJ2E9MEJnMGIwbzAnLCAnYSA9IDBCIGcwYjBvMCcpOwogICAgICAgIGJ0KCdhID0gWzEsIDIsIDMsIDRdJyk7CiAgICAgICAgYnQoJ0YqKGcvPWYpKmcrYicsICdGICogKGcgLz0gZikgKiBnICsgYicpOwogICAgICAgIGJ0KCdhLmIoe2M6ZH0pJywgJ2EuYih7XG4gICAgYzogZFxufSknKTsKICAgICAgICBidCgnYS5iXG4oXG57XG5jOlxuZFxufVxuKScsICdhLmIoe1xuICAgIGM6IGRcbn0pJyk7CiAgICAgICAgYnQoJ2EuYih7YzoiZCJ9KScsICdhLmIoe1xuICAgIGM6ICJkIlxufSknKTsKICAgICAgICBidCgnYS5iXG4oXG57XG5jOlxuImQiXG59XG4pJywgJ2EuYih7XG4gICAgYzogImQiXG59KScpOwogICAgICAgIGJ0KCdhPSFiJywgJ2EgPSAhYicpOwogICAgICAgIGJ0KCdhPSEhYicsICdhID0gISFiJyk7CiAgICAgICAgYnQoJ2E/YjpjJywgJ2EgPyBiIDogYycpOwogICAgICAgIGJ0KCdhPzE6MicsICdhID8gMSA6IDInKTsKICAgICAgICBidCgnYT8oYik6YycsICdhID8gKGIpIDogYycpOwogICAgICAgIGJ0KCd4PXthOjEsYjp3PT0iZm9vIj94OnksYzp6fScsICd4ID0ge1xuICAgIGE6IDEsXG4gICAgYjogdyA9PSAiZm9vIiA/IHggOiB5LFxuICAgIGM6IHpcbn0nKTsKICAgICAgICBidCgneD1hP2I/Yz9kOmU6ZjpnOycsICd4ID0gYSA/IGIgPyBjID8gZCA6IGUgOiBmIDogZzsnKTsKICAgICAgICBidCgneD1hP2I/Yz9kOntlMToxLGUyOjJ9OmY6ZzsnLCAneCA9IGEgPyBiID8gYyA/IGQgOiB7XG4gICAgZTE6IDEsXG4gICAgZTI6IDJcbn0gOiBmIDogZzsnKTsKICAgICAgICBidCgnZnVuY3Rpb24gdm9pZCh2b2lkKSB7fScpOwogICAgICAgIGJ0KCdpZighYSlmb28oKTsnLCAnaWYgKCFhKSBmb28oKTsnKTsKICAgICAgICBidCgnYT1+YScsICdhID0gfmEnKTsKICAgICAgICBidCgnYTsvKmNvbW1lbnQqL2I7JywgJ2E7IC8qY29tbWVudCovXG5iOycpOwogICAgICAgIGJ0KCdhOy8qIGNvbW1lbnQgKi9iOycsICdhOyAvKiBjb21tZW50ICovXG5iOycpOwogICAgICAgIAogICAgICAgIC8vIHNpbXBsZSBjb21tZW50cyBkb24ndCBnZXQgdG91Y2hlZCBhdCBhbGwKICAgICAgICB0ZXN0X2ZyYWdtZW50KCdhOy8qXG5jb21tZW50XG4qL2I7JywgJ2E7XG4vKlxuY29tbWVudFxuKi9cbmI7Jyk7CiAgICAgICAgYnQoJ2E7LyoqXG4qIGphdmFkb2NcbiovYjsnLCAnYTtcbi8qKlxuICogamF2YWRvY1xuICovXG5iOycpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJ2E7LyoqXG5cbm5vIGphdmFkb2NcbiovYjsnLCAnYTtcbi8qKlxuXG5ubyBqYXZhZG9jXG4qL1xuYjsnKTsKICAgICAgICAKICAgICAgICAvLyBjb21tZW50IGJsb2NrcyBkZXRlY3RlZCBhbmQgcmVpbmRlbnRlZCBldmVuIHcvbyBqYXZhZG9jIHN0YXJ0ZXIKICAgICAgICBidCgnYTsvKlxuKiBqYXZhZG9jXG4qL2I7JywgJ2E7XG4vKlxuICogamF2YWRvY1xuICovXG5iOycpOwogICAgICAgIGJ0KCdpZihhKWJyZWFrOycsICdpZiAoYSkgYnJlYWs7Jyk7CiAgICAgICAgYnQoJ2lmKGEpe2JyZWFrfScsICdpZiAoYSkge1xuICAgIGJyZWFrXG59Jyk7CiAgICAgICAgYnQoJ2lmKChhKSlmb28oKTsnLCAnaWYgKChhKSkgZm9vKCk7Jyk7CiAgICAgICAgYnQoJ2Zvcih2YXIgaT0wOzspIGEnLCAnZm9yICh2YXIgaSA9IDA7OykgYScpOwogICAgICAgIGJ0KCdmb3IodmFyIGk9MDs7KVxuYScsICdmb3IgKHZhciBpID0gMDs7KVxuICAgIGEnKTsKICAgICAgICBidCgnYSsrOycpOwogICAgICAgIGJ0KCdmb3IoOztpKyspYSgpJywgJ2ZvciAoOzsgaSsrKSBhKCknKTsKICAgICAgICBidCgnZm9yKDs7aSsrKVxuYSgpJywgJ2ZvciAoOzsgaSsrKVxuICAgIGEoKScpOwogICAgICAgIGJ0KCdmb3IoOzsrK2kpYScsICdmb3IgKDs7ICsraSkgYScpOwogICAgICAgIGJ0KCdyZXR1cm4oMSknLCAncmV0dXJuICgxKScpOwogICAgICAgIGJ0KCd0cnl7YSgpO31jYXRjaChiKXtjKCk7fWZpbmFsbHl7ZCgpO30nLCAndHJ5IHtcbiAgICBhKCk7XG59IGNhdGNoIChiKSB7XG4gICAgYygpO1xufSBmaW5hbGx5IHtcbiAgICBkKCk7XG59Jyk7CiAgICAgICAgCiAgICAgICAgLy8gIG1hZ2ljIGZ1bmN0aW9uIGNhbGwKICAgICAgICBidCgnKHh4KSgpJyk7CiAgICAgICAgCiAgICAgICAgLy8gYW5vdGhlciBtYWdpYyBmdW5jdGlvbiBjYWxsCiAgICAgICAgYnQoJ2FbMV0oKScpOwogICAgICAgIGJ0KCdpZihhKXtiKCk7fWVsc2UgaWYoYykgZm9vKCk7JywgJ2lmIChhKSB7XG4gICAgYigpO1xufSBlbHNlIGlmIChjKSBmb28oKTsnKTsKICAgICAgICBidCgnc3dpdGNoKHgpIHtjYXNlIDA6IGNhc2UgMTogYSgpOyBicmVhazsgZGVmYXVsdDogYnJlYWt9JywgJ3N3aXRjaCAoeCkge1xuICAgIGNhc2UgMDpcbiAgICBjYXNlIDE6XG4gICAgICAgIGEoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbn0nKTsKICAgICAgICBidCgnc3dpdGNoKHgpe2Nhc2UgLTE6YnJlYWs7Y2FzZSAheTpicmVhazt9JywgJ3N3aXRjaCAoeCkge1xuICAgIGNhc2UgLTE6XG4gICAgICAgIGJyZWFrO1xuICAgIGNhc2UgIXk6XG4gICAgICAgIGJyZWFrO1xufScpOwogICAgICAgIGJ0KCdhICE9PSBiJyk7CiAgICAgICAgYnQoJ2lmIChhKSBiKCk7IGVsc2UgYygpOycsICdpZiAoYSkgYigpO1xuZWxzZSBjKCk7Jyk7CiAgICAgICAgCiAgICAgICAgLy8gdHlwaWNhbCBncmVhc2Vtb25rZXkgc3RhcnQKICAgICAgICBidCgnLy8gY29tbWVudFxuKGZ1bmN0aW9uIHNvbWV0aGluZygpIHt9KScpOwogICAgICAgIAogICAgICAgIC8vIGR1cGxpY2F0aW5nIG5ld2xpbmVzCiAgICAgICAgYnQoJ3tcblxuICAgIHgoKTtcblxufScpOwogICAgICAgIGJ0KCdpZiAoYSBpbiBiKSBmb28oKTsnKTsKICAgICAgICBidCgnaWYoWClpZihZKWEoKTtlbHNlIGIoKTtlbHNlIGMoKTsnLCAnaWYgKFgpXG4gICAgaWYgKFkpIGEoKTtcbiAgICBlbHNlIGIoKTtcbmVsc2UgYygpOycpOwogICAgICAgIGJ0KCdpZiAoZm9vKSBiYXIoKTtcbmVsc2UgYnJlYWsnKTsKICAgICAgICBidCgndmFyIGEsIGI7Jyk7CiAgICAgICAgYnQoJ3ZhciBhID0gbmV3IGZ1bmN0aW9uKCk7Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnbmV3IGZ1bmN0aW9uJyk7CiAgICAgICAgYnQoJ3ZhciBhLCBiJyk7CiAgICAgICAgYnQoJ3thOjEsIGI6Mn0nLCAne1xuICAgIGE6IDEsXG4gICAgYjogMlxufScpOwogICAgICAgIGJ0KCdhPXsxOlstMV0sMjpbKzFdfScsICdhID0ge1xuICAgIDE6IFstMV0sXG4gICAgMjogWysxXVxufScpOwogICAgICAgIGJ0KCd2YXIgbCA9IHtcJ2FcJzpcJzFcJywgXCdiXCc6XCcyXCd9JywgJ3ZhciBsID0ge1xuICAgIFwnYVwnOiBcJzFcJyxcbiAgICBcJ2JcJzogXCcyXCdcbn0nKTsKICAgICAgICBidCgnaWYgKHRlbXBsYXRlLnVzZXJbbl0gaW4gYmspIGZvbygpOycpOwogICAgICAgIGJ0KCdyZXR1cm4gNDUnKTsKICAgICAgICBidCgncmV0dXJuIHRoaXMucHJldk9iamVjdCB8fFxuXG4gICAgdGhpcy5jb25zdHJ1Y3RvcihudWxsKTsnKTsKICAgICAgICBidCgnSWZbMV0nKTsKICAgICAgICBidCgnVGhlblsxXScpOwogICAgICAgIGJ0KCdhID0gMTsvLyBjb21tZW50JywgJ2EgPSAxOyAvLyBjb21tZW50Jyk7CiAgICAgICAgYnQoJ2EgPSAxOyAvLyBjb21tZW50Jyk7CiAgICAgICAgYnQoJ2EgPSAxO1xuIC8vIGNvbW1lbnQnLCAnYSA9IDE7XG4vLyBjb21tZW50Jyk7CiAgICAgICAgYnQoJ2EgPSBbLTEsIC0xLCAtMV0nKTsKICAgICAgICAKICAgICAgICAvLyBUaGUgZXhhY3QgZm9ybWF0dGluZyB0aGVzZSBzaG91bGQgaGF2ZSBpcyBvcGVuIGZvciBkaXNjdXNzaW9uLCBidXQgdGhleSBhcmUgYXQgbGVhc3QgcmVhc29uYWJsZQogICAgICAgIGJ0KCdhID0gWyAvLyBjb21tZW50XG4gICAgLTEsIC0xLCAtMVxuXScpOwogICAgICAgIGJ0KCd2YXIgYSA9IFsgLy8gY29tbWVudFxuICAgIC0xLCAtMSwgLTFcbl0nKTsKICAgICAgICBidCgnYSA9IFsgLy8gY29tbWVudFxuICAgIC0xLCAvLyBjb21tZW50XG4gICAgLTEsIC0xXG5dJyk7CiAgICAgICAgYnQoJ3ZhciBhID0gWyAvLyBjb21tZW50XG4gICAgLTEsIC8vIGNvbW1lbnRcbiAgICAtMSwgLTFcbl0nKTsKICAgICAgICBidCgnbyA9IFt7YTpifSx7YzpkfV0nLCAnbyA9IFt7XG4gICAgYTogYlxufSwge1xuICAgIGM6IGRcbn1dJyk7CiAgICAgICAgCiAgICAgICAgLy8gd2FzOiBleHRyYSBzcGFjZSBhcHBlbmRlZAogICAgICAgIGJ0KCdpZiAoYSkge1xuICAgIGRvKCk7XG59Jyk7CiAgICAgICAgCiAgICAgICAgLy8gaWYvZWxzZSBzdGF0ZW1lbnQgd2l0aCBlbXB0eSBib2R5CiAgICAgICAgYnQoJ2lmIChhKSB7XG4vLyBjb21tZW50XG59ZWxzZXtcbi8vIGNvbW1lbnRcbn0nLCAnaWYgKGEpIHtcbiAgICAvLyBjb21tZW50XG59IGVsc2Uge1xuICAgIC8vIGNvbW1lbnRcbn0nKTsKICAgICAgICAKICAgICAgICAvLyBtdWx0aXBsZSBjb21tZW50cyBpbmRlbnRhdGlvbgogICAgICAgIGJ0KCdpZiAoYSkge1xuLy8gY29tbWVudFxuLy8gY29tbWVudFxufScsICdpZiAoYSkge1xuICAgIC8vIGNvbW1lbnRcbiAgICAvLyBjb21tZW50XG59Jyk7CiAgICAgICAgYnQoJ2lmIChhKSBiKCkgZWxzZSBjKCk7JywgJ2lmIChhKSBiKClcbmVsc2UgYygpOycpOwogICAgICAgIGJ0KCdpZiAoYSkgYigpIGVsc2UgaWYgYygpIGQoKTsnLCAnaWYgKGEpIGIoKVxuZWxzZSBpZiBjKCkgZCgpOycpOwogICAgICAgIGJ0KCd7fScpOwogICAgICAgIGJ0KCd7XG5cbn0nKTsKICAgICAgICBidCgnZG8geyBhKCk7IH0gd2hpbGUgKCAxICk7JywgJ2RvIHtcbiAgICBhKCk7XG59IHdoaWxlICgxKTsnKTsKICAgICAgICBidCgnZG8ge30gd2hpbGUgKDEpOycpOwogICAgICAgIGJ0KCdkbyB7XG59IHdoaWxlICgxKTsnLCAnZG8ge30gd2hpbGUgKDEpOycpOwogICAgICAgIGJ0KCdkbyB7XG5cbn0gd2hpbGUgKDEpOycpOwogICAgICAgIGJ0KCd2YXIgYSA9IHgoYSwgYiwgYyknKTsKICAgICAgICBidCgnZGVsZXRlIHggaWYgKGEpIGIoKTsnLCAnZGVsZXRlIHhcbmlmIChhKSBiKCk7Jyk7CiAgICAgICAgYnQoJ2RlbGV0ZSB4W3hdIGlmIChhKSBiKCk7JywgJ2RlbGV0ZSB4W3hdXG5pZiAoYSkgYigpOycpOwogICAgICAgIGJ0KCdmb3IodmFyIGE9MSxiPTIpZCcsICdmb3IgKHZhciBhID0gMSwgYiA9IDIpIGQnKTsKICAgICAgICBidCgnZm9yKHZhciBhPTEsYj0yLGM9MykgZCcsICdmb3IgKHZhciBhID0gMSwgYiA9IDIsIGMgPSAzKSBkJyk7CiAgICAgICAgYnQoJ2Zvcih2YXIgYT0xLGI9MixjPTM7ZDwzO2QrKylcbmUnLCAnZm9yICh2YXIgYSA9IDEsIGIgPSAyLCBjID0gMzsgZCA8IDM7IGQrKylcbiAgICBlJyk7CiAgICAgICAgYnQoJ2Z1bmN0aW9uIHgoKXsoYXx8YikuYygpfScsICdmdW5jdGlvbiB4KCkge1xuICAgIChhIHx8IGIpLmMoKVxufScpOwogICAgICAgIGJ0KCdmdW5jdGlvbiB4KCl7cmV0dXJuIC0gMX0nLCAnZnVuY3Rpb24geCgpIHtcbiAgICByZXR1cm4gLTFcbn0nKTsKICAgICAgICBidCgnZnVuY3Rpb24geCgpe3JldHVybiAhIGF9JywgJ2Z1bmN0aW9uIHgoKSB7XG4gICAgcmV0dXJuICFhXG59Jyk7CiAgICAgICAgYnQoJ3ggPT4geCcpOwogICAgICAgIGJ0KCcoeCkgPT4geCcpOwogICAgICAgIGJ0KCd4ID0+IHsgeCB9JywgJ3ggPT4ge1xuICAgIHhcbn0nKTsKICAgICAgICBidCgnKHgpID0+IHsgeCB9JywgJyh4KSA9PiB7XG4gICAgeFxufScpOwogICAgICAgIAogICAgICAgIC8vIGEgY29tbW9uIHNuaXBwZXQgaW4galF1ZXJ5IHBsdWdpbnMKICAgICAgICBidCgKICAgICAgICAgICAgJ3NldHRpbmdzID0gJC5leHRlbmQoe30sZGVmYXVsdHMsc2V0dGluZ3MpOycsCiAgICAgICAgICAgICdzZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0cywgc2V0dGluZ3MpOycpOwogICAgICAgIGJ0KCckaHR0cCgpLnRoZW4oKS5maW5hbGx5KCkuZGVmYXVsdCgpJyk7CiAgICAgICAgYnQoJyRodHRwKClcbi50aGVuKClcbi5maW5hbGx5KClcbi5kZWZhdWx0KCknLCAnJGh0dHAoKVxuICAgIC50aGVuKClcbiAgICAuZmluYWxseSgpXG4gICAgLmRlZmF1bHQoKScpOwogICAgICAgIGJ0KCckaHR0cCgpLndoZW4uaW4ubmV3LmNhdGNoKCkudGhyb3coKScpOwogICAgICAgIGJ0KCckaHR0cCgpXG4ud2hlblxuLmluXG4ubmV3XG4uY2F0Y2goKVxuLnRocm93KCknLCAnJGh0dHAoKVxuICAgIC53aGVuXG4gICAgLmluXG4gICAgLm5ld1xuICAgIC5jYXRjaCgpXG4gICAgLnRocm93KCknKTsKICAgICAgICBidCgne3h4eDt9KCknLCAne1xuICAgIHh4eDtcbn0oKScpOwogICAgICAgIGJ0KCdhID0gXCdhXCdcbmIgPSBcJ2JcJycpOwogICAgICAgIGJ0KCdhID0gL3JlZy9leHAnKTsKICAgICAgICBidCgnYSA9IC9yZWcvJyk7CiAgICAgICAgYnQoJy9hYmMvLnRlc3QoKScpOwogICAgICAgIGJ0KCcvYWJjL2kudGVzdCgpJyk7CiAgICAgICAgYnQoJ3svYWJjL2kudGVzdCgpfScsICd7XG4gICAgL2FiYy9pLnRlc3QoKVxufScpOwogICAgICAgIGJ0KCd2YXIgeD0oYSkvYTsnLCAndmFyIHggPSAoYSkgLyBhOycpOwogICAgICAgIGJ0KCd4ICE9IC0xJyk7CiAgICAgICAgYnQoJ2ZvciAoOyBzLS0+MDspdCcsICdmb3IgKDsgcy0tID4gMDspIHQnKTsKICAgICAgICBidCgnZm9yICg7IHMrKz4wOyl1JywgJ2ZvciAoOyBzKysgPiAwOykgdScpOwogICAgICAgIGJ0KCdhID0gcysrPnMtLTsnLCAnYSA9IHMrKyA+IHMtLTsnKTsKICAgICAgICBidCgnYSA9IHMrKz4tLXM7JywgJ2EgPSBzKysgPiAtLXM7Jyk7CiAgICAgICAgYnQoJ3t4PSMxPVtdfScsICd7XG4gICAgeCA9ICMxPVtdXG59Jyk7CiAgICAgICAgYnQoJ3thOiMxPXt9fScsICd7XG4gICAgYTogIzE9e31cbn0nKTsKICAgICAgICBidCgne2E6IzEjfScsICd7XG4gICAgYTogIzEjXG59Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnImluY29tcGxldGUtc3RyaW5nJyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnXCdpbmNvbXBsZXRlLXN0cmluZycpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJy9pbmNvbXBsZXRlLXJlZ2V4Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnYGluY29tcGxldGUtdGVtcGxhdGUtc3RyaW5nJyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgne2E6MX0se2E6Mn0nLCAne1xuICAgIGE6IDFcbn0sIHtcbiAgICBhOiAyXG59Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgndmFyIGFyeT1be2E6MX0sIHthOjJ9XTsnLCAndmFyIGFyeSA9IFt7XG4gICAgYTogMVxufSwge1xuICAgIGE6IDJcbn1dOycpOwogICAgICAgIAogICAgICAgIC8vIGluY29tcGxldGUKICAgICAgICB0ZXN0X2ZyYWdtZW50KCd7YTojMScsICd7XG4gICAgYTogIzEnKTsKICAgICAgICAKICAgICAgICAvLyBpbmNvbXBsZXRlCiAgICAgICAgdGVzdF9mcmFnbWVudCgne2E6IycsICd7XG4gICAgYTogIycpOwogICAgICAgIAogICAgICAgIC8vIGluY29tcGxldGUKICAgICAgICB0ZXN0X2ZyYWdtZW50KCd9fX0nLCAnfVxufVxufScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzwhLS1cbnZvaWQoKTtcbi8vIC0tPicpOwogICAgICAgIAogICAgICAgIC8vIGluY29tcGxldGUgcmVnZXhwCiAgICAgICAgdGVzdF9mcmFnbWVudCgnYT0vcmVnZXhwJywgJ2EgPSAvcmVnZXhwJyk7CiAgICAgICAgYnQoJ3thOiMxPVtdLGI6IzEjLGM6Izk5OTk5OSN9JywgJ3tcbiAgICBhOiAjMT1bXSxcbiAgICBiOiAjMSMsXG4gICAgYzogIzk5OTk5OSNcbn0nKTsKICAgICAgICBidCgnZG97eCgpfXdoaWxlKGE+MSknLCAnZG8ge1xuICAgIHgoKVxufSB3aGlsZSAoYSA+IDEpJyk7CiAgICAgICAgYnQoJ3goKTsgL3JlZy9leHAubWF0Y2goc29tZXRoaW5nKScsICd4KCk7XG4vcmVnL2V4cC5tYXRjaChzb21ldGhpbmcpJyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnc29tZXRoaW5nKCk7KCcsICdzb21ldGhpbmcoKTtcbignKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCcjIXNoZS9iYW5ncywgc2hlIGJhbmdzXG5mPTEnLCAnIyFzaGUvYmFuZ3MsIHNoZSBiYW5nc1xuXG5mID0gMScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJyMhc2hlL2JhbmdzLCBzaGUgYmFuZ3NcblxuZj0xJywgJyMhc2hlL2JhbmdzLCBzaGUgYmFuZ3NcblxuZiA9IDEnKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCcjIXNoZS9iYW5ncywgc2hlIGJhbmdzXG5cbi8qIGNvbW1lbnQgKi8nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCcjIXNoZS9iYW5ncywgc2hlIGJhbmdzXG5cblxuLyogY29tbWVudCAqLycpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJyMnKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCcjIScpOwogICAgICAgIGJ0KCdmdW5jdGlvbiBuYW1lc3BhY2U6OnNvbWV0aGluZygpJyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPCEtLVxuc29tZXRoaW5nKCk7XG4tLT4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8IS0tXG5pZihpPDApe2JsYSgpO31cbi0tPicsICc8IS0tXG5pZiAoaSA8IDApIHtcbiAgICBibGEoKTtcbn1cbi0tPicpOwogICAgICAgIGJ0KCd7Zm9vKCk7LS1iYXI7fScsICd7XG4gICAgZm9vKCk7XG4gICAgLS1iYXI7XG59Jyk7CiAgICAgICAgYnQoJ3tmb28oKTsrK2Jhcjt9JywgJ3tcbiAgICBmb28oKTtcbiAgICArK2Jhcjtcbn0nKTsKICAgICAgICBidCgney0tYmFyO30nLCAne1xuICAgIC0tYmFyO1xufScpOwogICAgICAgIGJ0KCd7KytiYXI7fScsICd7XG4gICAgKytiYXI7XG59Jyk7CiAgICAgICAgYnQoJ2lmKHRydWUpKythOycsICdpZiAodHJ1ZSkgKythOycpOwogICAgICAgIGJ0KCdpZih0cnVlKVxuKythOycsICdpZiAodHJ1ZSlcbiAgICArK2E7Jyk7CiAgICAgICAgYnQoJ2lmKHRydWUpLS1hOycsICdpZiAodHJ1ZSkgLS1hOycpOwogICAgICAgIGJ0KCdpZih0cnVlKVxuLS1hOycsICdpZiAodHJ1ZSlcbiAgICAtLWE7Jyk7CiAgICAgICAgYnQoJ2VsZW1bYXJyYXldKys7Jyk7CiAgICAgICAgYnQoJ2VsZW0rKyAqIGVsZW1bYXJyYXldKys7Jyk7CiAgICAgICAgYnQoJ2VsZW0tLSAqIC1lbGVtW2FycmF5XSsrOycpOwogICAgICAgIGJ0KCdlbGVtLS0gKyBlbGVtW2FycmF5XSsrOycpOwogICAgICAgIGJ0KCdlbGVtLS0gLSBlbGVtW2FycmF5XSsrOycpOwogICAgICAgIGJ0KCdlbGVtLS0gLSAtZWxlbVthcnJheV0rKzsnKTsKICAgICAgICBidCgnZWxlbS0tIC0gK2VsZW1bYXJyYXldKys7Jyk7CiAgICAgICAgCiAgICAgICAgLy8gSGFuZGxpbmcgb2YgbmV3bGluZXMgYXJvdW5kIHVuYXJ5ICsrIGFuZCAtLSBvcGVyYXRvcnMKICAgICAgICBidCgne2Zvb1xuKytiYXI7fScsICd7XG4gICAgZm9vXG4gICAgKytiYXI7XG59Jyk7CiAgICAgICAgYnQoJ3tmb28rK1xuYmFyO30nLCAne1xuICAgIGZvbysrXG4gICAgYmFyO1xufScpOwogICAgICAgIAogICAgICAgIC8vIFRoaXMgaXMgaW52YWxpZCwgYnV0IGhhcmRlciB0byBndWFyZCBhZ2FpbnN0LiBJc3N1ZSAjMjAzLgogICAgICAgIGJ0KCd7Zm9vXG4rK1xuYmFyO30nLCAne1xuICAgIGZvb1xuICAgICsrXG4gICAgYmFyO1xufScpOwogICAgICAgIAogICAgICAgIC8vIHJlZ2V4cHMKICAgICAgICBidCgnYSgvYWJjXFwvXFwvZGVmLyk7YigpJywgJ2EoL2FiY1xcL1xcL2RlZi8pO1xuYigpJyk7CiAgICAgICAgYnQoJ2EoL2FbYlxcW1xcXWNdZC8pO2IoKScsICdhKC9hW2JcXFtcXF1jXWQvKTtcbmIoKScpOwogICAgICAgIAogICAgICAgIC8vIGluY29tcGxldGUgY2hhciBjbGFzcwogICAgICAgIHRlc3RfZnJhZ21lbnQoJ2EoL2FbYlxcWycpOwogICAgICAgIAogICAgICAgIC8vIGFsbG93IHVuZXNjYXBlZCAvIGluIGNoYXIgY2xhc3NlcwogICAgICAgIGJ0KCdhKC9bYS9iXS8pO2IoKScsICdhKC9bYS9iXS8pO1xuYigpJyk7CiAgICAgICAgYnQoJ3R5cGVvZiAvZm9vXFwvLzsnKTsKICAgICAgICBidCgneWllbGQgL2Zvb1xcLy87Jyk7CiAgICAgICAgYnQoJ3Rocm93IC9mb29cXC8vOycpOwogICAgICAgIGJ0KCdkbyAvZm9vXFwvLzsnKTsKICAgICAgICBidCgncmV0dXJuIC9mb29cXC8vOycpOwogICAgICAgIGJ0KCdzd2l0Y2ggKGEpIHtcbiAgICBjYXNlIC9mb29cXC8vOlxuICAgICAgICBiXG59Jyk7CiAgICAgICAgYnQoJ2lmIChhKSAvZm9vXFwvL1xuZWxzZSAvZm9vXFwvLzsnKTsKICAgICAgICBidCgnaWYgKGZvbykgL3JlZ2V4Ly50ZXN0KCk7Jyk7CiAgICAgICAgYnQoJ2ZvciAoaW5kZXggaW4gWzEsIDIsIDNdKSAvXnRlc3QkL2kudGVzdChzKScpOwogICAgICAgIGJ0KCdyZXN1bHQgPSB5aWVsZCBwZ0NsaWVudC5xdWVyeV8ocXVlcnlTdHJpbmcpOycpOwogICAgICAgIGJ0KCdmdW5jdGlvbiBmb28oKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgIm9uZSIsXG4gICAgICAgICJ0d28iXG4gICAgXTtcbn0nKTsKICAgICAgICBidCgnYT1bWzEsMl0sWzQsNV0sWzcsOF1dJywgJ2EgPSBbXG4gICAgWzEsIDJdLFxuICAgIFs0LCA1XSxcbiAgICBbNywgOF1cbl0nKTsKICAgICAgICBidCgnYT1bWzEsMl0sWzQsNV0sZnVuY3Rpb24oKXt9LFs3LDhdXScsICdhID0gW1xuICAgIFsxLCAyXSxcbiAgICBbNCwgNV0sXG4gICAgZnVuY3Rpb24oKSB7fSxcbiAgICBbNywgOF1cbl0nKTsKICAgICAgICBidCgnYT1bWzEsMl0sWzQsNV0sZnVuY3Rpb24oKXt9LGZ1bmN0aW9uKCl7fSxbNyw4XV0nLCAnYSA9IFtcbiAgICBbMSwgMl0sXG4gICAgWzQsIDVdLFxuICAgIGZ1bmN0aW9uKCkge30sXG4gICAgZnVuY3Rpb24oKSB7fSxcbiAgICBbNywgOF1cbl0nKTsKICAgICAgICBidCgnYT1bWzEsMl0sWzQsNV0sZnVuY3Rpb24oKXt9LFs3LDhdXScsICdhID0gW1xuICAgIFsxLCAyXSxcbiAgICBbNCwgNV0sXG4gICAgZnVuY3Rpb24oKSB7fSxcbiAgICBbNywgOF1cbl0nKTsKICAgICAgICBidCgnYT1bYixjLGZ1bmN0aW9uKCl7fSxmdW5jdGlvbigpe30sZF0nLCAnYSA9IFtiLCBjLCBmdW5jdGlvbigpIHt9LCBmdW5jdGlvbigpIHt9LCBkXScpOwogICAgICAgIGJ0KCdhPVtiLGMsXG5mdW5jdGlvbigpe30sZnVuY3Rpb24oKXt9LGRdJywgJ2EgPSBbYiwgYyxcbiAgICBmdW5jdGlvbigpIHt9LFxuICAgIGZ1bmN0aW9uKCkge30sXG4gICAgZFxuXScpOwogICAgICAgIGJ0KCdhPVthWzFdLGJbNF0sY1tkWzddXV0nLCAnYSA9IFthWzFdLCBiWzRdLCBjW2RbN11dXScpOwogICAgICAgIGJ0KCdbMSwyLFszLDQsWzUsNl0sN10sOF0nLCAnWzEsIDIsIFszLCA0LCBbNSwgNl0sIDddLCA4XScpOwogICAgICAgIGJ0KCdbW1siMSIsIjIiXSxbIjMiLCI0Il1dLFtbIjUiLCI2IiwiNyJdLFsiOCIsIjkiLCIwIl1dLFtbIjEiLCIyIiwiMyJdLFsiNCIsIjUiLCI2IiwiNyJdLFsiOCIsIjkiLCIwIl1dXScsICdbXG4gICAgW1xuICAgICAgICBbIjEiLCAiMiJdLFxuICAgICAgICBbIjMiLCAiNCJdXG4gICAgXSxcbiAgICBbXG4gICAgICAgIFsiNSIsICI2IiwgIjciXSxcbiAgICAgICAgWyI4IiwgIjkiLCAiMCJdXG4gICAgXSxcbiAgICBbXG4gICAgICAgIFsiMSIsICIyIiwgIjMiXSxcbiAgICAgICAgWyI0IiwgIjUiLCAiNiIsICI3Il0sXG4gICAgICAgIFsiOCIsICI5IiwgIjAiXVxuICAgIF1cbl0nKTsKICAgICAgICBidCgne1t4KClbMF1dO2luZGVudDt9JywgJ3tcbiAgICBbeCgpWzBdXTtcbiAgICBpbmRlbnQ7XG59Jyk7CiAgICAgICAgYnQoJy8qXG4gZm9vIHRyYWlsaW5nIHNwYWNlICAgIFxuICogYmFyIHRyYWlsaW5nIHNwYWNlICAgXG4qKi8nKTsKICAgICAgICBidCgne1xuICAgIC8qXG4gICAgZm9vICAgIFxuICAgICogYmFyICAgIFxuICAgICovXG59Jyk7CiAgICAgICAgYnQoJ3JldHVybiArK2knKTsKICAgICAgICBidCgncmV0dXJuICEheCcpOwogICAgICAgIGJ0KCdyZXR1cm4gIXgnKTsKICAgICAgICBidCgncmV0dXJuIFsxLDJdJywgJ3JldHVybiBbMSwgMl0nKTsKICAgICAgICBidCgncmV0dXJuOycpOwogICAgICAgIGJ0KCdyZXR1cm5cbmZ1bmMnKTsKICAgICAgICBidCgnY2F0Y2goZSknLCAnY2F0Y2ggKGUpJyk7CiAgICAgICAgYnQoJ3lpZWxkIFsxLCAyXScpOwogICAgICAgIGJ0KCd2YXIgYT0xLGI9e2ZvbzoyLGJhcjozfSx7YmF6OjQsd2hhbTo1fSxjPTQ7JywgJ3ZhciBhID0gMSxcbiAgICBiID0ge1xuICAgICAgICBmb286IDIsXG4gICAgICAgIGJhcjogM1xuICAgIH0sXG4gICAge1xuICAgICAgICBiYXo6IDQsXG4gICAgICAgIHdoYW06IDVcbiAgICB9LCBjID0gNDsnKTsKICAgICAgICBidCgndmFyIGE9MSxiPXtmb286MixiYXI6M30se2Jhejo0LHdoYW06NX0sXG5jPTQ7JywgJ3ZhciBhID0gMSxcbiAgICBiID0ge1xuICAgICAgICBmb286IDIsXG4gICAgICAgIGJhcjogM1xuICAgIH0sXG4gICAge1xuICAgICAgICBiYXo6IDQsXG4gICAgICAgIHdoYW06IDVcbiAgICB9LFxuICAgIGMgPSA0OycpOwogICAgICAgIAogICAgICAgIC8vIGlubGluZSBjb21tZW50CiAgICAgICAgYnQoCiAgICAgICAgICAgICdmdW5jdGlvbiB4KC8qaW50Ki8gc3RhcnQsIC8qc3RyaW5nKi8gZm9vKScsCiAgICAgICAgICAgICdmdW5jdGlvbiB4KCAvKmludCovIHN0YXJ0LCAvKnN0cmluZyovIGZvbyknKTsKICAgICAgICAKICAgICAgICAvLyBqYXZhZG9jIGNvbW1lbnQKICAgICAgICBidCgnLyoqXG4qIGZvb1xuKi8nLCAnLyoqXG4gKiBmb29cbiAqLycpOwogICAgICAgIGJ0KCd7XG4vKipcbiogZm9vXG4qL1xufScsICd7XG4gICAgLyoqXG4gICAgICogZm9vXG4gICAgICovXG59Jyk7CiAgICAgICAgCiAgICAgICAgLy8gc3Rhcmxlc3MgYmxvY2sgY29tbWVudAogICAgICAgIGJ0KCcvKipcbmZvb1xuKi8nKTsKICAgICAgICBidCgnLyoqXG5mb29cbioqLycpOwogICAgICAgIGJ0KCcvKipcbmZvb1xuYmFyXG4qKi8nKTsKICAgICAgICBidCgnLyoqXG5mb29cblxuYmFyXG4qKi8nKTsKICAgICAgICBidCgnLyoqXG5mb29cbiAgICBiYXJcbioqLycpOwogICAgICAgIGJ0KCd7XG4vKipcbmZvb1xuKi9cbn0nLCAne1xuICAgIC8qKlxuICAgIGZvb1xuICAgICovXG59Jyk7CiAgICAgICAgYnQoJ3tcbi8qKlxuZm9vXG4qKi9cbn0nLCAne1xuICAgIC8qKlxuICAgIGZvb1xuICAgICoqL1xufScpOwogICAgICAgIGJ0KCd7XG4vKipcbmZvb1xuYmFyXG4qKi9cbn0nLCAne1xuICAgIC8qKlxuICAgIGZvb1xuICAgIGJhclxuICAgICoqL1xufScpOwogICAgICAgIGJ0KCd7XG4vKipcbmZvb1xuXG5iYXJcbioqL1xufScsICd7XG4gICAgLyoqXG4gICAgZm9vXG5cbiAgICBiYXJcbiAgICAqKi9cbn0nKTsKICAgICAgICBidCgne1xuLyoqXG5mb29cbiAgICBiYXJcbioqL1xufScsICd7XG4gICAgLyoqXG4gICAgZm9vXG4gICAgICAgIGJhclxuICAgICoqL1xufScpOwogICAgICAgIGJ0KCd7XG4gICAgLyoqXG4gICAgZm9vXG5iYXJcbiAgICAqKi9cbn0nKTsKICAgICAgICBidCgndmFyIGEsYixjPTEsZCxlLGY9MjsnLCAndmFyIGEsIGIsIGMgPSAxLFxuICAgIGQsIGUsIGYgPSAyOycpOwogICAgICAgIGJ0KCd2YXIgYSxiLGM9W10sZCxlLGY9MjsnLCAndmFyIGEsIGIsIGMgPSBbXSxcbiAgICBkLCBlLCBmID0gMjsnKTsKICAgICAgICBidCgnZnVuY3Rpb24oKSB7XG4gICAgdmFyIGEsIGIsIGMsIGQsIGUgPSBbXSxcbiAgICAgICAgZjtcbn0nKTsKICAgICAgICBidCgnZG8vcmVnZXhwLztcbndoaWxlKDEpOycsICdkbyAvcmVnZXhwLztcbndoaWxlICgxKTsnKTsKICAgICAgICBidCgndmFyIGEgPSBhLFxuYTtcbmIgPSB7XG5iXG59JywgJ3ZhciBhID0gYSxcbiAgICBhO1xuYiA9IHtcbiAgICBiXG59Jyk7CiAgICAgICAgYnQoJ3ZhciBhID0gYSxcbiAgICAvKiBjICovXG4gICAgYjsnKTsKICAgICAgICBidCgndmFyIGEgPSBhLFxuICAgIC8vIGNcbiAgICBiOycpOwogICAgICAgIAogICAgICAgIC8vIHdlaXJkIGVsZW1lbnQgcmVmZXJlbmNpbmcKICAgICAgICBidCgnZm9vLigiYmFyIik7Jyk7CiAgICAgICAgYnQoJ2lmIChhKSBhKClcbmVsc2UgYigpXG5uZXdsaW5lKCknKTsKICAgICAgICBidCgnaWYgKGEpIGEoKVxubmV3bGluZSgpJyk7CiAgICAgICAgYnQoJ2E9dHlwZW9mKHgpJywgJ2EgPSB0eXBlb2YoeCknKTsKICAgICAgICBidCgndmFyIGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBiID0gZmFsc2U7Jyk7CiAgICAgICAgYnQoJ3ZhciBhID0gZnVuY3Rpb24oKSB7XG4gICAgZnVuYzEoKVxufScpOwogICAgICAgIGJ0KCd2YXIgYSA9IGZ1bmN0aW9uKCkge1xuICAgIGZ1bmMxKClcbn1cbnZhciBiID0gZnVuY3Rpb24oKSB7XG4gICAgZnVuYzIoKVxufScpOwogICAgICAgIAogICAgICAgIC8vIGNvZGUgd2l0aCBhbmQgd2l0aG91dCBzZW1pY29sb25zCiAgICAgICAgYnQoCiAgICAgICAgICAgICd2YXIgd2hhdGV2ZXIgPSByZXF1aXJlKCJ3aGF0ZXZlciIpO1xuZnVuY3Rpb24oKSB7XG4gICAgYSA9IDY7XG59JywKICAgICAgICAgICAgJ3ZhciB3aGF0ZXZlciA9IHJlcXVpcmUoIndoYXRldmVyIik7XG5cbmZ1bmN0aW9uKCkge1xuICAgIGEgPSA2O1xufScpOwogICAgICAgIGJ0KCd2YXIgd2hhdGV2ZXIgPSByZXF1aXJlKCJ3aGF0ZXZlciIpXG5mdW5jdGlvbigpIHtcbiAgICBhID0gNlxufScsICd2YXIgd2hhdGV2ZXIgPSByZXF1aXJlKCJ3aGF0ZXZlciIpXG5cbmZ1bmN0aW9uKCkge1xuICAgIGEgPSA2XG59Jyk7CiAgICAgICAgYnQoJ3sieCI6W3siYSI6MSwiYiI6M30sXG43LDgsOCw4LDgseyJiIjo5OX0seyJhIjoxMX1dfScsICd7XG4gICAgIngiOiBbe1xuICAgICAgICAgICAgImEiOiAxLFxuICAgICAgICAgICAgImIiOiAzXG4gICAgICAgIH0sXG4gICAgICAgIDcsIDgsIDgsIDgsIDgsIHtcbiAgICAgICAgICAgICJiIjogOTlcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgImEiOiAxMVxuICAgICAgICB9XG4gICAgXVxufScpOwogICAgICAgIGJ0KCd7IngiOlt7ImEiOjEsImIiOjN9LDcsOCw4LDgsOCx7ImIiOjk5fSx7ImEiOjExfV19JywgJ3tcbiAgICAieCI6IFt7XG4gICAgICAgICJhIjogMSxcbiAgICAgICAgImIiOiAzXG4gICAgfSwgNywgOCwgOCwgOCwgOCwge1xuICAgICAgICAiYiI6IDk5XG4gICAgfSwge1xuICAgICAgICAiYSI6IDExXG4gICAgfV1cbn0nKTsKICAgICAgICBidCgneyIxIjp7IjFhIjoiMWIifSwiMiJ9JywgJ3tcbiAgICAiMSI6IHtcbiAgICAgICAgIjFhIjogIjFiIlxuICAgIH0sXG4gICAgIjIiXG59Jyk7CiAgICAgICAgYnQoJ3thOnthOmJ9LGN9JywgJ3tcbiAgICBhOiB7XG4gICAgICAgIGE6IGJcbiAgICB9LFxuICAgIGNcbn0nKTsKICAgICAgICBidCgne1t5W2FdXTtrZWVwX2luZGVudDt9JywgJ3tcbiAgICBbeVthXV07XG4gICAga2VlcF9pbmRlbnQ7XG59Jyk7CiAgICAgICAgYnQoJ2lmICh4KSB7eX0gZWxzZSB7IGlmICh4KSB7eX19JywgJ2lmICh4KSB7XG4gICAgeVxufSBlbHNlIHtcbiAgICBpZiAoeCkge1xuICAgICAgICB5XG4gICAgfVxufScpOwogICAgICAgIGJ0KCdpZiAoZm9vKSBvbmUoKVxudHdvKClcbnRocmVlKCknKTsKICAgICAgICBidCgnaWYgKDEgKyBmb28oKSAmJiBiYXIoYmF6KCkpIC8gMikgb25lKClcbnR3bygpXG50aHJlZSgpJyk7CiAgICAgICAgYnQoJ2lmICgxICsgZm9vKCkgJiYgYmFyKGJheigpKSAvIDIpIG9uZSgpO1xudHdvKCk7XG50aHJlZSgpOycpOwogICAgICAgIGJ0KCd2YXIgYT0xLGI9e2Jhbmc6Mn0sYz0zOycsICd2YXIgYSA9IDEsXG4gICAgYiA9IHtcbiAgICAgICAgYmFuZzogMlxuICAgIH0sXG4gICAgYyA9IDM7Jyk7CiAgICAgICAgYnQoJ3ZhciBhPXtiaW5nOjF9LGI9MixjPTM7JywgJ3ZhciBhID0ge1xuICAgICAgICBiaW5nOiAxXG4gICAgfSxcbiAgICBiID0gMixcbiAgICBjID0gMzsnKTsKCgogICAgfQoKICAgIGZ1bmN0aW9uIGJlYXV0aWZpZXJfdW5jb252ZXJ0ZWRfdGVzdHMoKQogICAgewogICAgICAgIHNhbml0eXRlc3QgPSB0ZXN0X29iajsKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgb3B0cy5pbmRlbnRfc2l6ZSA9IDE7CiAgICAgICAgb3B0cy5pbmRlbnRfY2hhciA9ICcgJzsKICAgICAgICBidCgneyBvbmVfY2hhcigpIH0nLCAie1xuIG9uZV9jaGFyKClcbn0iKTsKCiAgICAgICAgYnQoJ3ZhciBhLGI9MSxjPTInLCAndmFyIGEsIGIgPSAxLFxuIGMgPSAyJyk7CgogICAgICAgIG9wdHMuaW5kZW50X3NpemUgPSA0OwogICAgICAgIG9wdHMuaW5kZW50X2NoYXIgPSAnICc7CiAgICAgICAgYnQoJ3sgb25lX2NoYXIoKSB9JywgIntcbiAgICBvbmVfY2hhcigpXG59Iik7CgogICAgICAgIG9wdHMuaW5kZW50X3NpemUgPSAxOwogICAgICAgIG9wdHMuaW5kZW50X2NoYXIgPSAiXHQiOwogICAgICAgIGJ0KCd7IG9uZV9jaGFyKCkgfScsICJ7XG5cdG9uZV9jaGFyKClcbn0iKTsKICAgICAgICBidCgneCA9IGEgPyBiIDogYzsgeDsnLCAneCA9IGEgPyBiIDogYztcbng7Jyk7CgogICAgICAgIC8vc2V0IHRvIHNvbWV0aGluZyBlbHNlIHRoYW4gaXQgc2hvdWxkIGNoYW5nZSB0bywgYnV0IHdpdGggdGFicyBvbiwgc2hvdWxkIG92ZXJyaWRlCiAgICAgICAgb3B0cy5pbmRlbnRfc2l6ZSA9IDU7CiAgICAgICAgb3B0cy5pbmRlbnRfY2hhciA9ICcgJzsKICAgICAgICBvcHRzLmluZGVudF93aXRoX3RhYnMgPSB0cnVlOwoKICAgICAgICBidCgneyBvbmVfY2hhcigpIH0nLCAie1xuXHRvbmVfY2hhcigpXG59Iik7CiAgICAgICAgYnQoJ3ggPSBhID8gYiA6IGM7IHg7JywgJ3ggPSBhID8gYiA6IGM7XG54OycpOwoKICAgICAgICBvcHRzLmluZGVudF9zaXplID0gNDsKICAgICAgICBvcHRzLmluZGVudF9jaGFyID0gJyAnOwogICAgICAgIG9wdHMuaW5kZW50X3dpdGhfdGFicyA9IGZhbHNlOwoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICBvcHRzLnByZXNlcnZlX25ld2xpbmVzID0gZmFsc2U7CgogICAgICAgIGJ0KCd2YXJcbmE9ZG9udF9wcmVzZXJ2ZV9uZXdsaW5lczsnLCAndmFyIGEgPSBkb250X3ByZXNlcnZlX25ld2xpbmVzOycpOwoKICAgICAgICAvLyBtYWtlIHN1cmUgdGhlIGJsYW5rIGxpbmUgYmV0d2VlbiBmdW5jdGlvbiBkZWZpbml0aW9ucyBzdGF5cwogICAgICAgIC8vIGV2ZW4gd2hlbiBwcmVzZXJ2ZV9uZXdsaW5lcyA9IGZhbHNlCiAgICAgICAgYnQoJ2Z1bmN0aW9uIGZvbygpIHtcbiAgICByZXR1cm4gMTtcbn1cblxuZnVuY3Rpb24gZm9vKCkge1xuICAgIHJldHVybiAxO1xufScpOwogICAgICAgIGJ0KCdmdW5jdGlvbiBmb28oKSB7XG4gICAgcmV0dXJuIDE7XG59XG5mdW5jdGlvbiBmb28oKSB7XG4gICAgcmV0dXJuIDE7XG59JywKICAgICAgICAgICAnZnVuY3Rpb24gZm9vKCkge1xuICAgIHJldHVybiAxO1xufVxuXG5mdW5jdGlvbiBmb28oKSB7XG4gICAgcmV0dXJuIDE7XG59JwogICAgICAgICAgKTsKICAgICAgICBidCgnZnVuY3Rpb24gZm9vKCkge1xuICAgIHJldHVybiAxO1xufVxuXG5cbmZ1bmN0aW9uIGZvbygpIHtcbiAgICByZXR1cm4gMTtcbn0nLAogICAgICAgICAgICdmdW5jdGlvbiBmb28oKSB7XG4gICAgcmV0dXJuIDE7XG59XG5cbmZ1bmN0aW9uIGZvbygpIHtcbiAgICByZXR1cm4gMTtcbn0nCiAgICAgICAgICApOwoKICAgICAgICBvcHRzLnByZXNlcnZlX25ld2xpbmVzID0gdHJ1ZTsKICAgICAgICBidCgndmFyXG5hPWRvX3ByZXNlcnZlX25ld2xpbmVzOycsICd2YXJcbiAgICBhID0gZG9fcHJlc2VydmVfbmV3bGluZXM7Jyk7CiAgICAgICAgYnQoJy8vIGFcbi8vIGJcblxuLy8gY1xuLy8gZCcpOwogICAgICAgIGJ0KCdpZiAoZm9vKSAvLyAgY29tbWVudFxue1xuICAgIGJhcigpO1xufScpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgb3B0cy5rZWVwX2FycmF5X2luZGVudGF0aW9uID0gZmFsc2U7CiAgICAgICAgYnQoImEgPSBbJ2EnLCAnYicsICdjJyxcbiAgICdkJywgJ2UnLCAnZiddIiwKICAgICAgICAgICAgImEgPSBbJ2EnLCAnYicsICdjJyxcbiAgICAnZCcsICdlJywgJ2YnXG5dIik7CiAgICAgICAgYnQoImEgPSBbJ2EnLCAnYicsICdjJyxcbiAgICdkJywgJ2UnLCAnZicsXG4gICAgICAgICdnJywgJ2gnLCAnaSddIiwKICAgICAgICAgICAgImEgPSBbJ2EnLCAnYicsICdjJyxcbiAgICAnZCcsICdlJywgJ2YnLFxuICAgICdnJywgJ2gnLCAnaSdcbl0iKTsKICAgICAgICBidCgiYSA9IFsnYScsICdiJywgJ2MnLFxuICAgICAgICdkJywgJ2UnLCAnZicsXG4gICAgICAgICAgICAnZycsICdoJywgJ2knXSIsCiAgICAgICAgICAgICJhID0gWydhJywgJ2InLCAnYycsXG4gICAgJ2QnLCAnZScsICdmJyxcbiAgICAnZycsICdoJywgJ2knXG5dIik7CiAgICAgICAgYnQoJ3ZhciB4ID0gW3t9XG5dJywgJ3ZhciB4ID0gW3t9XScpOwogICAgICAgIGJ0KCd2YXIgeCA9IFt7Zm9vOmJhcn1cbl0nLCAndmFyIHggPSBbe1xuICAgIGZvbzogYmFyXG59XScpOwogICAgICAgIGJ0KCJhID0gWydzb21ldGhpbmcnLFxuICAgICdjb21wbGV0ZWx5JyxcbiAgICAnZGlmZmVyZW50J107XG5pZiAoeCk7IiwKICAgICAgICAgICAgImEgPSBbJ3NvbWV0aGluZycsXG4gICAgJ2NvbXBsZXRlbHknLFxuICAgICdkaWZmZXJlbnQnXG5dO1xuaWYgKHgpOyIpOwogICAgICAgIGJ0KCJhID0gWydhJywnYicsJ2MnXSIsICJhID0gWydhJywgJ2InLCAnYyddIik7CgogICAgICAgIGJ0KCJhID0gWydhJywgICAnYicsJ2MnXSIsICJhID0gWydhJywgJ2InLCAnYyddIik7CiAgICAgICAgYnQoInggPSBbeydhJzowfV0iLAogICAgICAgICAgICAieCA9IFt7XG4gICAgJ2EnOiAwXG59XSIpOwogICAgICAgIGJ0KCd7YShbW2ExXV0sIHtiO30pO30nLAogICAgICAgICAgICAne1xuICAgIGEoW1xuICAgICAgICBbYTFdXG4gICAgXSwge1xuICAgICAgICBiO1xuICAgIH0pO1xufScpOwogICAgICAgIGJ0KCJhKCk7XG4gICBbXG4gICBbJ3NkZnNkZnNkJ10sXG4gICAgICAgIFsnc2Rmc2Rmc2RmJ11cbiAgIF0udG9TdHJpbmcoKTsiLAogICAgICAgICAgICAiYSgpO1xuW1xuICAgIFsnc2Rmc2Rmc2QnXSxcbiAgICBbJ3NkZnNkZnNkZiddXG5dLnRvU3RyaW5nKCk7Iik7CiAgICAgICAgYnQoImEoKTtcbmEgPSBbXG4gICBbJ3NkZnNkZnNkJ10sXG4gICAgICAgIFsnc2Rmc2Rmc2RmJ11cbiAgIF0udG9TdHJpbmcoKTsiLAogICAgICAgICAgICAiYSgpO1xuYSA9IFtcbiAgICBbJ3NkZnNkZnNkJ10sXG4gICAgWydzZGZzZGZzZGYnXVxuXS50b1N0cmluZygpOyIpOwogICAgICAgIGJ0KCJmdW5jdGlvbigpIHtcbiAgICBGb28oW1xuICAgICAgICBbJ3NkZnNkZnNkJ10sXG4gICAgICAgIFsnc2Rmc2Rmc2RmJ11cbiAgICBdKTtcbn0iLAogICAgICAgICAgICAiZnVuY3Rpb24oKSB7XG4gICAgRm9vKFtcbiAgICAgICAgWydzZGZzZGZzZCddLFxuICAgICAgICBbJ3NkZnNkZnNkZiddXG4gICAgXSk7XG59Iik7CiAgICAgICAgYnQoJ2Z1bmN0aW9uIGZvbygpIHtcbiAgICByZXR1cm4gW1xuICAgICAgICAib25lIixcbiAgICAgICAgInR3byJcbiAgICBdO1xufScpOwogICAgICAgIC8vIDQgc3BhY2VzIHBlciBpbmRlbnQgaW5wdXQsIHByb2Nlc3NlZCB3aXRoIDQtc3BhY2VzIHBlciBpbmRlbnQKICAgICAgICBidCggImZ1bmN0aW9uIGZvbygpIHtcbiIgKwogICAgICAgICAgICAiICAgIHJldHVybiBbXG4iICsKICAgICAgICAgICAgIiAgICAgICAge1xuIiArCiAgICAgICAgICAgICIgICAgICAgICAgICBvbmU6ICd4JyxcbiIgKwogICAgICAgICAgICAiICAgICAgICAgICAgdHdvOiBbXG4iICsKICAgICAgICAgICAgIiAgICAgICAgICAgICAgICB7XG4iICsKICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgaWQ6ICdhJyxcbiIgKwogICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICBuYW1lOiAnYXBwbGUnXG4iICsKICAgICAgICAgICAgIiAgICAgICAgICAgICAgICB9LCB7XG4iICsKICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgaWQ6ICdiJyxcbiIgKwogICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICBuYW1lOiAnYmFuYW5hJ1xuIiArCiAgICAgICAgICAgICIgICAgICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICIgICAgICAgICAgICBdXG4iICsKICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICIgICAgXTtcbiIgKwogICAgICAgICAgICAifSIsCiAgICAgICAgICAgICJmdW5jdGlvbiBmb28oKSB7XG4iICsKICAgICAgICAgICAgIiAgICByZXR1cm4gW3tcbiIgKwogICAgICAgICAgICAiICAgICAgICBvbmU6ICd4JyxcbiIgKwogICAgICAgICAgICAiICAgICAgICB0d286IFt7XG4iICsKICAgICAgICAgICAgIiAgICAgICAgICAgIGlkOiAnYScsXG4iICsKICAgICAgICAgICAgIiAgICAgICAgICAgIG5hbWU6ICdhcHBsZSdcbiIgKwogICAgICAgICAgICAiICAgICAgICB9LCB7XG4iICsKICAgICAgICAgICAgIiAgICAgICAgICAgIGlkOiAnYicsXG4iICsKICAgICAgICAgICAgIiAgICAgICAgICAgIG5hbWU6ICdiYW5hbmEnXG4iICsKICAgICAgICAgICAgIiAgICAgICAgfV1cbiIgKwogICAgICAgICAgICAiICAgIH1dO1xuIiArCiAgICAgICAgICAgICJ9Iik7CiAgICAgICAgLy8gMyBzcGFjZXMgcGVyIGluZGVudCBpbnB1dCwgcHJvY2Vzc2VkIHdpdGggNC1zcGFjZXMgcGVyIGluZGVudAogICAgICAgIGJ0KCAiZnVuY3Rpb24gZm9vKCkge1xuIiArCiAgICAgICAgICAgICIgICByZXR1cm4gW1xuIiArCiAgICAgICAgICAgICIgICAgICB7XG4iICsKICAgICAgICAgICAgIiAgICAgICAgIG9uZTogJ3gnLFxuIiArCiAgICAgICAgICAgICIgICAgICAgICB0d286IFtcbiIgKwogICAgICAgICAgICAiICAgICAgICAgICAge1xuIiArCiAgICAgICAgICAgICIgICAgICAgICAgICAgICBpZDogJ2EnLFxuIiArCiAgICAgICAgICAgICIgICAgICAgICAgICAgICBuYW1lOiAnYXBwbGUnXG4iICsKICAgICAgICAgICAgIiAgICAgICAgICAgIH0sIHtcbiIgKwogICAgICAgICAgICAiICAgICAgICAgICAgICAgaWQ6ICdiJyxcbiIgKwogICAgICAgICAgICAiICAgICAgICAgICAgICAgbmFtZTogJ2JhbmFuYSdcbiIgKwogICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICIgICAgICAgICBdXG4iICsKICAgICAgICAgICAgIiAgICAgIH1cbiIgKwogICAgICAgICAgICAiICAgXTtcbiIgKwogICAgICAgICAgICAifSIsCiAgICAgICAgICAgICJmdW5jdGlvbiBmb28oKSB7XG4iICsKICAgICAgICAgICAgIiAgICByZXR1cm4gW3tcbiIgKwogICAgICAgICAgICAiICAgICAgICBvbmU6ICd4JyxcbiIgKwogICAgICAgICAgICAiICAgICAgICB0d286IFt7XG4iICsKICAgICAgICAgICAgIiAgICAgICAgICAgIGlkOiAnYScsXG4iICsKICAgICAgICAgICAgIiAgICAgICAgICAgIG5hbWU6ICdhcHBsZSdcbiIgKwogICAgICAgICAgICAiICAgICAgICB9LCB7XG4iICsKICAgICAgICAgICAgIiAgICAgICAgICAgIGlkOiAnYicsXG4iICsKICAgICAgICAgICAgIiAgICAgICAgICAgIG5hbWU6ICdiYW5hbmEnXG4iICsKICAgICAgICAgICAgIiAgICAgICAgfV1cbiIgKwogICAgICAgICAgICAiICAgIH1dO1xuIiArCiAgICAgICAgICAgICJ9Iik7CgogICAgICAgIG9wdHMua2VlcF9hcnJheV9pbmRlbnRhdGlvbiA9IHRydWU7CiAgICAgICAgYnQoImEgPSBbJ2EnLCAnYicsICdjJyxcbiAgICdkJywgJ2UnLCAnZiddIik7CiAgICAgICAgYnQoImEgPSBbJ2EnLCAnYicsICdjJyxcbiAgICdkJywgJ2UnLCAnZicsXG4gICAgICAgICdnJywgJ2gnLCAnaSddIik7CiAgICAgICAgYnQoImEgPSBbJ2EnLCAnYicsICdjJyxcbiAgICAgICAnZCcsICdlJywgJ2YnLFxuICAgICAgICAgICAgJ2cnLCAnaCcsICdpJ10iKTsKICAgICAgICBidCgndmFyIHggPSBbe31cbl0nLCAndmFyIHggPSBbe31cbl0nKTsKICAgICAgICBidCgndmFyIHggPSBbe2ZvbzpiYXJ9XG5dJywgJ3ZhciB4ID0gW3tcbiAgICAgICAgZm9vOiBiYXJcbiAgICB9XG5dJyk7CiAgICAgICAgYnQoImEgPSBbJ3NvbWV0aGluZycsXG4gICAgJ2NvbXBsZXRlbHknLFxuICAgICdkaWZmZXJlbnQnXTtcbmlmICh4KTsiKTsKICAgICAgICBidCgiYSA9IFsnYScsJ2InLCdjJ10iLCAiYSA9IFsnYScsICdiJywgJ2MnXSIpOwogICAgICAgIGJ0KCJhID0gWydhJywgICAnYicsJ2MnXSIsICJhID0gWydhJywgJ2InLCAnYyddIik7CiAgICAgICAgYnQoInggPSBbeydhJzowfV0iLAogICAgICAgICAgICAieCA9IFt7XG4gICAgJ2EnOiAwXG59XSIpOwogICAgICAgIGJ0KCd7YShbW2ExXV0sIHtiO30pO30nLAogICAgICAgICAgICAne1xuICAgIGEoW1thMV1dLCB7XG4gICAgICAgIGI7XG4gICAgfSk7XG59Jyk7CiAgICAgICAgYnQoImEoKTtcbiAgIFtcbiAgIFsnc2Rmc2Rmc2QnXSxcbiAgICAgICAgWydzZGZzZGZzZGYnXVxuICAgXS50b1N0cmluZygpOyIsCiAgICAgICAgICAgICJhKCk7XG4gICBbXG4gICBbJ3NkZnNkZnNkJ10sXG4gICAgICAgIFsnc2Rmc2Rmc2RmJ11cbiAgIF0udG9TdHJpbmcoKTsiKTsKICAgICAgICBidCgiYSgpO1xuYSA9IFtcbiAgIFsnc2Rmc2Rmc2QnXSxcbiAgICAgICAgWydzZGZzZGZzZGYnXVxuICAgXS50b1N0cmluZygpOyIsCiAgICAgICAgICAgICJhKCk7XG5hID0gW1xuICAgWydzZGZzZGZzZCddLFxuICAgICAgICBbJ3NkZnNkZnNkZiddXG4gICBdLnRvU3RyaW5nKCk7Iik7CiAgICAgICAgYnQoImZ1bmN0aW9uKCkge1xuICAgIEZvbyhbXG4gICAgICAgIFsnc2Rmc2Rmc2QnXSxcbiAgICAgICAgWydzZGZzZGZzZGYnXVxuICAgIF0pO1xufSIsCiAgICAgICAgICAgICJmdW5jdGlvbigpIHtcbiAgICBGb28oW1xuICAgICAgICBbJ3NkZnNkZnNkJ10sXG4gICAgICAgIFsnc2Rmc2Rmc2RmJ11cbiAgICBdKTtcbn0iKTsKICAgICAgICBidCgnZnVuY3Rpb24gZm9vKCkge1xuICAgIHJldHVybiBbXG4gICAgICAgICJvbmUiLFxuICAgICAgICAidHdvIlxuICAgIF07XG59Jyk7CiAgICAgICAgLy8gNCBzcGFjZXMgcGVyIGluZGVudCBpbnB1dCwgcHJvY2Vzc2VkIHdpdGggNC1zcGFjZXMgcGVyIGluZGVudAogICAgICAgIGJ0KCAiZnVuY3Rpb24gZm9vKCkge1xuIiArCiAgICAgICAgICAgICIgICAgcmV0dXJuIFtcbiIgKwogICAgICAgICAgICAiICAgICAgICB7XG4iICsKICAgICAgICAgICAgIiAgICAgICAgICAgIG9uZTogJ3gnLFxuIiArCiAgICAgICAgICAgICIgICAgICAgICAgICB0d286IFtcbiIgKwogICAgICAgICAgICAiICAgICAgICAgICAgICAgIHtcbiIgKwogICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICBpZDogJ2EnLFxuIiArCiAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdhcHBsZSdcbiIgKwogICAgICAgICAgICAiICAgICAgICAgICAgICAgIH0sIHtcbiIgKwogICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICBpZDogJ2InLFxuIiArCiAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdiYW5hbmEnXG4iICsKICAgICAgICAgICAgIiAgICAgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgIiAgICAgICAgICAgIF1cbiIgKwogICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgIiAgICBdO1xuIiArCiAgICAgICAgICAgICJ9Iik7CiAgICAgICAgLy8gMyBzcGFjZXMgcGVyIGluZGVudCBpbnB1dCwgcHJvY2Vzc2VkIHdpdGggNC1zcGFjZXMgcGVyIGluZGVudAogICAgICAgIC8vIFNob3VsZCBiZSB1bmNoYW5nZWQsIGJ1dCBpcyBub3QgLSAjNDQ1Ci8vICAgICAgICAgYnQoICJmdW5jdGlvbiBmb28oKSB7XG4iICsKLy8gICAgICAgICAgICAgIiAgIHJldHVybiBbXG4iICsKLy8gICAgICAgICAgICAgIiAgICAgIHtcbiIgKwovLyAgICAgICAgICAgICAiICAgICAgICAgb25lOiAneCcsXG4iICsKLy8gICAgICAgICAgICAgIiAgICAgICAgIHR3bzogW1xuIiArCi8vICAgICAgICAgICAgICIgICAgICAgICAgICB7XG4iICsKLy8gICAgICAgICAgICAgIiAgICAgICAgICAgICAgIGlkOiAnYScsXG4iICsKLy8gICAgICAgICAgICAgIiAgICAgICAgICAgICAgIG5hbWU6ICdhcHBsZSdcbiIgKwovLyAgICAgICAgICAgICAiICAgICAgICAgICAgfSwge1xuIiArCi8vICAgICAgICAgICAgICIgICAgICAgICAgICAgICBpZDogJ2InLFxuIiArCi8vICAgICAgICAgICAgICIgICAgICAgICAgICAgICBuYW1lOiAnYmFuYW5hJ1xuIiArCi8vICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKLy8gICAgICAgICAgICAgIiAgICAgICAgIF1cbiIgKwovLyAgICAgICAgICAgICAiICAgICAgfVxuIiArCi8vICAgICAgICAgICAgICIgICBdO1xuIiArCi8vICAgICAgICAgICAgICJ9Iik7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICBidCgnYSA9IC8vY29tbWVudFxuICAgIC9yZWdleC87Jyk7CgogICAgICAgIGJ0KCdpZiAoYSlcbntcbmI7XG59XG5lbHNlXG57XG5jO1xufScsICdpZiAoYSkge1xuICAgIGI7XG59IGVsc2Uge1xuICAgIGM7XG59Jyk7CgogICAgICAgIC8vIHRlc3RzIGZvciBicmFjZSBwb3NpdGlvbmluZwogICAgICAgIGJlYXV0aWZ5X2JyYWNlX3Rlc3RzKCdleHBhbmQnKTsKICAgICAgICBiZWF1dGlmeV9icmFjZV90ZXN0cygnY29sbGFwc2UnKTsKICAgICAgICBiZWF1dGlmeV9icmFjZV90ZXN0cygnZW5kLWV4cGFuZCcpOwogICAgICAgIGJlYXV0aWZ5X2JyYWNlX3Rlc3RzKCdub25lJyk7CgogICAgICAgIGJ0KCcvLyBmdW5jLWNvbW1lbnRcblxuZnVuY3Rpb24gZm9vKCkge31cblxuLy8gZW5kLWZ1bmMtY29tbWVudCcpOwoKICAgICAgICB0ZXN0X2ZyYWdtZW50KCdyb28gPSB7XG4gICAgLypcbiAgICAqKioqXG4gICAgICBGT09cbiAgICAqKioqXG4gICAgKi9cbiAgICBCQVI6IDBcbn07Jyk7CgogICAgICAgIGJ0KCciZm9vIiJiYXIiImJheiInLCAnImZvbyJcbiJiYXIiXG4iYmF6IicpOwogICAgICAgIGJ0KCInZm9vJydiYXInJ2JheiciLCAiJ2ZvbydcbidiYXInXG4nYmF6JyIpOwoKCiAgICAgICAgdGVzdF9mcmFnbWVudCgiaWYgKHp6KSB7XG4gICAgLy8gLi4uLlxufVxuKGZ1bmN0aW9uIik7CgogICAgICAgIGJ0KCJ7XG4gICAgZ2V0IGZvbygpIHt9XG59Iik7CiAgICAgICAgYnQoIntcbiAgICB2YXIgYSA9IGdldFxuICAgIGZvbygpO1xufSIpOwogICAgICAgIGJ0KCJ7XG4gICAgc2V0IGZvbygpIHt9XG59Iik7CiAgICAgICAgYnQoIntcbiAgICB2YXIgYSA9IHNldFxuICAgIGZvbygpO1xufSIpOwogICAgICAgIGJ0KCJ2YXIgeCA9IHtcbiAgICBnZXQgZnVuY3Rpb24oKVxufSIpOwogICAgICAgIGJ0KCJ2YXIgeCA9IHtcbiAgICBzZXQgZnVuY3Rpb24oKVxufSIpOwoKICAgICAgICAvLyBBY2NvcmRpbmcgdG8gbXkgY3VycmVudCByZXNlYXJjaCBnZXQvc2V0IGhhdmUgbm8gc3BlY2lhbCBtZWFuaW5nIG91dHNpZGUgb2YgYW4gb2JqZWN0IGxpdGVyYWwKICAgICAgICBidCgidmFyIHggPSBzZXRcblxuYSgpIHt9IiwgInZhciB4ID0gc2V0XG5cbmEoKSB7fSIpOwogICAgICAgIGJ0KCJ2YXIgeCA9IHNldFxuXG5mdW5jdGlvbigpIHt9IiwgInZhciB4ID0gc2V0XG5cbmZ1bmN0aW9uKCkge30iKTsKCiAgICAgICAgYnQoJzwhLS0gZm9vXG5iYXIoKTtcbi0tPicpOwogICAgICAgIGJ0KCc8IS0tIGRvbnQgY3Jhc2gnKTsgLy8gLS0+CiAgICAgICAgYnQoJ2ZvciAoKSAvYWJjLy50ZXN0KCknKTsKICAgICAgICBidCgnaWYgKGspIC9hYWEvbS50ZXN0KHYpICYmIGwoKTsnKTsKICAgICAgICBidCgnc3dpdGNoICh0cnVlKSB7XG4gICAgY2FzZSAvc3dmL2kudGVzdChmb28pOlxuICAgICAgICBiYXIoKTtcbn0nKTsKICAgICAgICBidCgnY3JlYXRlZEF0ID0ge1xuICAgIHR5cGU6IERhdGUsXG4gICAgZGVmYXVsdDogRGF0ZS5ub3dcbn0nKTsKICAgICAgICBidCgnc3dpdGNoIChjcmVhdGVkQXQpIHtcbiAgICBjYXNlIGE6XG4gICAgICAgIERhdGUsXG4gICAgZGVmYXVsdDpcbiAgICAgICAgRGF0ZS5ub3dcbn0nKTsKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgb3B0cy5zcGFjZV9iZWZvcmVfY29uZGl0aW9uYWwgPSBmYWxzZTsKICAgICAgICBidCgnaWYoYSkgYigpJyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICBvcHRzLnByZXNlcnZlX25ld2xpbmVzID0gdHJ1ZTsKICAgICAgICBidCgndmFyIGEgPSA0MjsgLy8gZm9vXG5cbnZhciBiOycpOwogICAgICAgIGJ0KCd2YXIgYSA9IDQyOyAvLyBmb29cblxuXG52YXIgYjsnKTsKICAgICAgICBidCgidmFyIGEgPSAnZm9vJyArXG4gICAgJ2Jhcic7Iik7CiAgICAgICAgYnQoInZhciBhID0gXCJmb29cIiArXG4gICAgXCJiYXJcIjsiKTsKICAgICAgICBidCgndGhpcy5vYSA9IG5ldyBPQXV0aChcbicgKwogICAgICAgICAgICcgICAgX3JlcXVlc3RUb2tlbixcbicgKwogICAgICAgICAgICcgICAgX2FjY2Vzc1Rva2VuLFxuJyArCiAgICAgICAgICAgJyAgICBjb25zdW1lcl9rZXlcbicgKwogICAgICAgICAgICcpOycpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgb3B0cy51bmVzY2FwZV9zdHJpbmdzID0gZmFsc2U7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnIlxceDIyXFx4MjciLCBcJ1xceDIyXFx4MjdcJywgIlxceDVjIiwgXCdcXHg1Y1wnLCAiXFx4ZmYgYW5kIFxceHp6IiwgInVuaWNvZGUgXFx1MDAwMCBcXHUwMDIyIFxcdTAwMjcgXFx1MDA1YyBcXHVmZmZmIFxcdXp6enoiJyk7CiAgICAgICAgb3B0cy51bmVzY2FwZV9zdHJpbmdzID0gdHJ1ZTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCciXFx4MjBcXHg0MFxceDRhIicsICciIEBKIicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJyJcXHhmZlxceDQwXFx4NGEiJyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnIlxcdTAwNzJcXHUwMTZCXFx1MDEzN1xcdTAxMkJcXHUwMDc0XFx1MDA2OVxcdTAwNzMiJywgJyJyxavEt8SrdGlzIicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJyJHb29nbGUgQ2hyb21lIGVzdFxcdTAwRTEgYWN0dWFsaXphZG8uIicsICciR29vZ2xlIENocm9tZSBlc3TDoSBhY3R1YWxpemFkby4iJyk7CiAgICAgICAgLyoKICAgICAgICBidCgnIlxceDIyXFx4MjciLFwnXFx4MjJcXHgyN1wnLCJcXHg1YyIsXCdcXHg1Y1wnLCJcXHhmZiBhbmQgXFx4enoiLCJ1bmljb2RlIFxcdTAwMDAgXFx1MDAyMiBcXHUwMDI3IFxcdTAwNWMgXFx1ZmZmZiBcXHV6enp6IicsCiAgICAgICAgICAgJyJcXCJcJyIsIFwnIlxcXCdcJywgIlxcXFwiLCBcJ1xcXFxcJywgIlxceGZmIGFuZCBcXHh6eiIsICJ1bmljb2RlIFxcdTAwMDAgXFwiIFwnIFxcXFwgXFx1ZmZmZiBcXHV6enp6IicpOwogICAgICAgICovCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIGJ0KCdyZXR1cm4gZnVuY3Rpb24oKTsnKTsKICAgICAgICBidCgndmFyIGEgPSBmdW5jdGlvbigpOycpOwogICAgICAgIGJ0KCd2YXIgYSA9IDUgKyBmdW5jdGlvbigpOycpOwoKICAgICAgICBidCgnaW1wb3J0IGZvby4qOycsICdpbXBvcnQgZm9vLio7Jyk7IC8vIGFjdGlvbnNjcmlwdCdzIGltcG9ydAogICAgICAgIHRlc3RfZnJhZ21lbnQoJ2Z1bmN0aW9uIGYoYTogYSwgYjogYiknKTsgLy8gYWN0aW9uc2NyaXB0CgogICAgICAgIGJ0KCd7XG4gICAgZm9vIC8vIHNvbWV0aGluZ1xuICAgICxcbiAgICBiYXIgLy8gc29tZXRoaW5nXG4gICAgYmF6XG59Jyk7CiAgICAgICAgYnQoJ2Z1bmN0aW9uIGEoYSkge30gZnVuY3Rpb24gYihiKSB7fSBmdW5jdGlvbiBjKGMpIHt9JywgJ2Z1bmN0aW9uIGEoYSkge31cblxuZnVuY3Rpb24gYihiKSB7fVxuXG5mdW5jdGlvbiBjKGMpIHt9Jyk7CiAgICAgICAgYnQoJ2ZvbyhhLCBmdW5jdGlvbigpIHt9KScpOwoKICAgICAgICBidCgnZm9vKGEsIC9yZWdleC8pJyk7CgogICAgICAgIGJ0KCcvKiBmb28gKi9cbiJ4IicpOwoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICBvcHRzLmJyZWFrX2NoYWluZWRfbWV0aG9kcyA9IGZhbHNlOwogICAgICAgIG9wdHMucHJlc2VydmVfbmV3bGluZXMgPSBmYWxzZTsKICAgICAgICBidCgnZm9vXG4uYmFyKClcbi5iYXooKS5jdWN1bWJlcihmYXQpJywgJ2Zvby5iYXIoKS5iYXooKS5jdWN1bWJlcihmYXQpJyk7CiAgICAgICAgYnQoJ2Zvb1xuLmJhcigpXG4uYmF6KCkuY3VjdW1iZXIoZmF0KTsgZm9vLmJhcigpLmJheigpLmN1Y3VtYmVyKGZhdCknLCAnZm9vLmJhcigpLmJheigpLmN1Y3VtYmVyKGZhdCk7XG5mb28uYmFyKCkuYmF6KCkuY3VjdW1iZXIoZmF0KScpOwogICAgICAgIGJ0KCdmb29cbi5iYXIoKVxuLmJheigpLmN1Y3VtYmVyKGZhdClcbiBmb28uYmFyKCkuYmF6KCkuY3VjdW1iZXIoZmF0KScsICdmb28uYmFyKCkuYmF6KCkuY3VjdW1iZXIoZmF0KVxuZm9vLmJhcigpLmJheigpLmN1Y3VtYmVyKGZhdCknKTsKICAgICAgICBidCgndGhpc1xuLnNvbWV0aGluZyA9IGZvby5iYXIoKVxuLmJheigpLmN1Y3VtYmVyKGZhdCknLCAndGhpcy5zb21ldGhpbmcgPSBmb28uYmFyKCkuYmF6KCkuY3VjdW1iZXIoZmF0KScpOwogICAgICAgIGJ0KCd0aGlzLnNvbWV0aGluZy54eHggPSBmb28ubW9vLmJhcigpJyk7CiAgICAgICAgYnQoJ3RoaXNcbi5zb21ldGhpbmdcbi54eHggPSBmb28ubW9vXG4uYmFyKCknLCAndGhpcy5zb21ldGhpbmcueHh4ID0gZm9vLm1vby5iYXIoKScpOwoKICAgICAgICBvcHRzLmJyZWFrX2NoYWluZWRfbWV0aG9kcyA9IGZhbHNlOwogICAgICAgIG9wdHMucHJlc2VydmVfbmV3bGluZXMgPSB0cnVlOwogICAgICAgIGJ0KCdmb29cbi5iYXIoKVxuLmJheigpLmN1Y3VtYmVyKGZhdCknLCAnZm9vXG4gICAgLmJhcigpXG4gICAgLmJheigpLmN1Y3VtYmVyKGZhdCknKTsKICAgICAgICBidCgnZm9vXG4uYmFyKClcbi5iYXooKS5jdWN1bWJlcihmYXQpOyBmb28uYmFyKCkuYmF6KCkuY3VjdW1iZXIoZmF0KScsICdmb29cbiAgICAuYmFyKClcbiAgICAuYmF6KCkuY3VjdW1iZXIoZmF0KTtcbmZvby5iYXIoKS5iYXooKS5jdWN1bWJlcihmYXQpJyk7CiAgICAgICAgYnQoJ2Zvb1xuLmJhcigpXG4uYmF6KCkuY3VjdW1iZXIoZmF0KVxuIGZvby5iYXIoKS5iYXooKS5jdWN1bWJlcihmYXQpJywgJ2Zvb1xuICAgIC5iYXIoKVxuICAgIC5iYXooKS5jdWN1bWJlcihmYXQpXG5mb28uYmFyKCkuYmF6KCkuY3VjdW1iZXIoZmF0KScpOwogICAgICAgIGJ0KCd0aGlzXG4uc29tZXRoaW5nID0gZm9vLmJhcigpXG4uYmF6KCkuY3VjdW1iZXIoZmF0KScsICd0aGlzXG4gICAgLnNvbWV0aGluZyA9IGZvby5iYXIoKVxuICAgIC5iYXooKS5jdWN1bWJlcihmYXQpJyk7CiAgICAgICAgYnQoJ3RoaXMuc29tZXRoaW5nLnh4eCA9IGZvby5tb28uYmFyKCknKTsKICAgICAgICBidCgndGhpc1xuLnNvbWV0aGluZ1xuLnh4eCA9IGZvby5tb29cbi5iYXIoKScsICd0aGlzXG4gICAgLnNvbWV0aGluZ1xuICAgIC54eHggPSBmb28ubW9vXG4gICAgLmJhcigpJyk7CgogICAgICAgIG9wdHMuYnJlYWtfY2hhaW5lZF9tZXRob2RzID0gdHJ1ZTsKICAgICAgICBvcHRzLnByZXNlcnZlX25ld2xpbmVzID0gZmFsc2U7CiAgICAgICAgYnQoJ2Zvb1xuLmJhcigpXG4uYmF6KCkuY3VjdW1iZXIoZmF0KScsICdmb28uYmFyKClcbiAgICAuYmF6KClcbiAgICAuY3VjdW1iZXIoZmF0KScpOwogICAgICAgIGJ0KCdmb29cbi5iYXIoKVxuLmJheigpLmN1Y3VtYmVyKGZhdCk7IGZvby5iYXIoKS5iYXooKS5jdWN1bWJlcihmYXQpJywgJ2Zvby5iYXIoKVxuICAgIC5iYXooKVxuICAgIC5jdWN1bWJlcihmYXQpO1xuZm9vLmJhcigpXG4gICAgLmJheigpXG4gICAgLmN1Y3VtYmVyKGZhdCknKTsKICAgICAgICBidCgnZm9vXG4uYmFyKClcbi5iYXooKS5jdWN1bWJlcihmYXQpXG4gZm9vLmJhcigpLmJheigpLmN1Y3VtYmVyKGZhdCknLCAnZm9vLmJhcigpXG4gICAgLmJheigpXG4gICAgLmN1Y3VtYmVyKGZhdClcbmZvby5iYXIoKVxuICAgIC5iYXooKVxuICAgIC5jdWN1bWJlcihmYXQpJyk7CiAgICAgICAgYnQoJ3RoaXNcbi5zb21ldGhpbmcgPSBmb28uYmFyKClcbi5iYXooKS5jdWN1bWJlcihmYXQpJywgJ3RoaXMuc29tZXRoaW5nID0gZm9vLmJhcigpXG4gICAgLmJheigpXG4gICAgLmN1Y3VtYmVyKGZhdCknKTsKICAgICAgICBidCgndGhpcy5zb21ldGhpbmcueHh4ID0gZm9vLm1vby5iYXIoKScpOwogICAgICAgIGJ0KCd0aGlzXG4uc29tZXRoaW5nXG4ueHh4ID0gZm9vLm1vb1xuLmJhcigpJywgJ3RoaXMuc29tZXRoaW5nLnh4eCA9IGZvby5tb28uYmFyKCknKTsKCiAgICAgICAgb3B0cy5icmVha19jaGFpbmVkX21ldGhvZHMgPSB0cnVlOwogICAgICAgIG9wdHMucHJlc2VydmVfbmV3bGluZXMgPSB0cnVlOwogICAgICAgIGJ0KCdmb29cbi5iYXIoKVxuLmJheigpLmN1Y3VtYmVyKGZhdCknLCAnZm9vXG4gICAgLmJhcigpXG4gICAgLmJheigpXG4gICAgLmN1Y3VtYmVyKGZhdCknKTsKICAgICAgICBidCgnZm9vXG4uYmFyKClcbi5iYXooKS5jdWN1bWJlcihmYXQpOyBmb28uYmFyKCkuYmF6KCkuY3VjdW1iZXIoZmF0KScsICdmb29cbiAgICAuYmFyKClcbiAgICAuYmF6KClcbiAgICAuY3VjdW1iZXIoZmF0KTtcbmZvby5iYXIoKVxuICAgIC5iYXooKVxuICAgIC5jdWN1bWJlcihmYXQpJyk7CiAgICAgICAgYnQoJ2Zvb1xuLmJhcigpXG4uYmF6KCkuY3VjdW1iZXIoZmF0KVxuIGZvby5iYXIoKS5iYXooKS5jdWN1bWJlcihmYXQpJywgJ2Zvb1xuICAgIC5iYXIoKVxuICAgIC5iYXooKVxuICAgIC5jdWN1bWJlcihmYXQpXG5mb28uYmFyKClcbiAgICAuYmF6KClcbiAgICAuY3VjdW1iZXIoZmF0KScpOwogICAgICAgIGJ0KCd0aGlzXG4uc29tZXRoaW5nID0gZm9vLmJhcigpXG4uYmF6KCkuY3VjdW1iZXIoZmF0KScsICd0aGlzXG4gICAgLnNvbWV0aGluZyA9IGZvby5iYXIoKVxuICAgIC5iYXooKVxuICAgIC5jdWN1bWJlcihmYXQpJyk7CiAgICAgICAgYnQoJ3RoaXMuc29tZXRoaW5nLnh4eCA9IGZvby5tb28uYmFyKCknKTsKICAgICAgICBidCgndGhpc1xuLnNvbWV0aGluZ1xuLnh4eCA9IGZvby5tb29cbi5iYXIoKScsICd0aGlzXG4gICAgLnNvbWV0aGluZ1xuICAgIC54eHggPSBmb28ubW9vXG4gICAgLmJhcigpJyk7CgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIExpbmUgd3JhcCB0ZXN0IGludHB1dHMKICAgICAgICAvLy4uLi4uLi4uLi4uLi4tLS0tLS0tLS0xLS0tLS0tLS0tMi0tLS0tLS0tLTMtLS0tLS0tLS00LS0tLS0tLS0tNS0tLS0tLS0tLTYtLS0tLS0tLS03CiAgICAgICAgLy8uLi4uLi4uLi4uLi4uMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MAogICAgICAgIHdyYXBfaW5wdXRfMT0oJ2Zvby5iYXIoKS5iYXooKS5jdWN1bWJlcigoZmF0ICYmICJzYXNzeSIpIHx8IChsZWFucyAmJiBtZWFuKSk7XG4nICsKICAgICAgICAgICAgICAgICAgICAgICdUZXN0X3ZlcnlfbG9uZ192YXJpYWJsZV9uYW1lX3RoaXNfc2hvdWxkX25ldmVyX3dyYXBcbi5idXRfdGhpc19jYW5cbicgKwogICAgICAgICAgICAgICAgICAgICAgJ3JldHVybiBiZXR3ZWVuX3JldHVybl9hbmRfZXhwcmVzc2lvbl9zaG91bGRfbmV2ZXJfd3JhcC5idXRfdGhpc19jYW5cbicgKwogICAgICAgICAgICAgICAgICAgICAgJ3Rocm93IGJldHdlZW5fdGhyb3dfYW5kX2V4cHJlc3Npb25fc2hvdWxkX25ldmVyX3dyYXAuYnV0X3RoaXNfY2FuXG4nICsKICAgICAgICAgICAgICAgICAgICAgICdpZiAod3JhcHNfY2FuX29jY3VyICYmIGluc2lkZV9hbl9pZl9ibG9jaykgdGhhdF9pc19cbi5va2F5KCk7XG4nICsKICAgICAgICAgICAgICAgICAgICAgICdvYmplY3RfbGl0ZXJhbCA9IHtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICBwcm9wZXJ0eDogZmlyc3RfdG9rZW4gKyAxMjM0NTY3OC45OTk5OUUtNixcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICBwcm9wZXJ0eTogZmlyc3RfdG9rZW5fc2hvdWxkX25ldmVyX3dyYXAgKyBidXRfdGhpc19jYW4sXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgcHJvcGVydHo6IGZpcnN0X3Rva2VuX3Nob3VsZF9uZXZlcl93cmFwICsgIWJ1dF90aGlzX2NhbixcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICBwcm9wZXI6ICJmaXJzdF90b2tlbl9zaG91bGRfbmV2ZXJfd3JhcCIgKyAiYnV0X3RoaXNfY2FuIlxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnfScpOwoKICAgICAgICAvLy4uLi4uLi4uLi4uLi4tLS0tLS0tLS0xLS0tLS0tLS0tMi0tLS0tLS0tLTMtLS0tLS0tLS00LS0tLS0tLS0tNS0tLS0tLS0tLTYtLS0tLS0tLS03CiAgICAgICAgLy8uLi4uLi4uLi4uLi4uMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MAogICAgICAgIHdyYXBfaW5wdXRfMj0oJ3tcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICBmb28uYmFyKCkuYmF6KCkuY3VjdW1iZXIoKGZhdCAmJiAic2Fzc3kiKSB8fCAobGVhbnMgJiYgbWVhbikpO1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIFRlc3RfdmVyeV9sb25nX3ZhcmlhYmxlX25hbWVfdGhpc19zaG91bGRfbmV2ZXJfd3JhcFxuLmJ1dF90aGlzX2NhblxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIHJldHVybiBiZXR3ZWVuX3JldHVybl9hbmRfZXhwcmVzc2lvbl9zaG91bGRfbmV2ZXJfd3JhcC5idXRfdGhpc19jYW5cbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICB0aHJvdyBiZXR3ZWVuX3Rocm93X2FuZF9leHByZXNzaW9uX3Nob3VsZF9uZXZlcl93cmFwLmJ1dF90aGlzX2NhblxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIGlmICh3cmFwc19jYW5fb2NjdXIgJiYgaW5zaWRlX2FuX2lmX2Jsb2NrKSB0aGF0X2lzX1xuLm9rYXkoKTtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICBvYmplY3RfbGl0ZXJhbCA9IHtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgcHJvcGVydHg6IGZpcnN0X3Rva2VuICsgMTIzNDU2NzguOTk5OTlFLTYsXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgICAgIHByb3BlcnR5OiBmaXJzdF90b2tlbl9zaG91bGRfbmV2ZXJfd3JhcCArIGJ1dF90aGlzX2NhbixcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgcHJvcGVydHo6IGZpcnN0X3Rva2VuX3Nob3VsZF9uZXZlcl93cmFwICsgIWJ1dF90aGlzX2NhbixcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgcHJvcGVyOiAiZmlyc3RfdG9rZW5fc2hvdWxkX25ldmVyX3dyYXAiICsgImJ1dF90aGlzX2NhbiJcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICB9JyArCiAgICAgICAgICAgICAgICAgICAgICAnfScpOwoKICAgICAgICBvcHRzLnByZXNlcnZlX25ld2xpbmVzID0gZmFsc2U7CiAgICAgICAgb3B0cy53cmFwX2xpbmVfbGVuZ3RoID0gMDsKICAgICAgICAvLy4uLi4uLi4uLi4uLi4tLS0tLS0tLS0xLS0tLS0tLS0tMi0tLS0tLS0tLTMtLS0tLS0tLS00LS0tLS0tLS0tNS0tLS0tLS0tLTYtLS0tLS0tLS03CiAgICAgICAgLy8uLi4uLi4uLi4uLi4uMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MAogICAgICAgIHRlc3RfZnJhZ21lbnQod3JhcF9pbnB1dF8xLAogICAgICAgICAgICAgICAgICAgICAgLyogZXhwZWN0ZWQgKi8KICAgICAgICAgICAgICAgICAgICAgICdmb28uYmFyKCkuYmF6KCkuY3VjdW1iZXIoKGZhdCAmJiAic2Fzc3kiKSB8fCAobGVhbnMgJiYgbWVhbikpO1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnVGVzdF92ZXJ5X2xvbmdfdmFyaWFibGVfbmFtZV90aGlzX3Nob3VsZF9uZXZlcl93cmFwLmJ1dF90aGlzX2NhblxuJyArCiAgICAgICAgICAgICAgICAgICAgICAncmV0dXJuIGJldHdlZW5fcmV0dXJuX2FuZF9leHByZXNzaW9uX3Nob3VsZF9uZXZlcl93cmFwLmJ1dF90aGlzX2NhblxuJyArCiAgICAgICAgICAgICAgICAgICAgICAndGhyb3cgYmV0d2Vlbl90aHJvd19hbmRfZXhwcmVzc2lvbl9zaG91bGRfbmV2ZXJfd3JhcC5idXRfdGhpc19jYW5cbicgKwogICAgICAgICAgICAgICAgICAgICAgJ2lmICh3cmFwc19jYW5fb2NjdXIgJiYgaW5zaWRlX2FuX2lmX2Jsb2NrKSB0aGF0X2lzXy5va2F5KCk7XG4nICsKICAgICAgICAgICAgICAgICAgICAgICdvYmplY3RfbGl0ZXJhbCA9IHtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICBwcm9wZXJ0eDogZmlyc3RfdG9rZW4gKyAxMjM0NTY3OC45OTk5OUUtNixcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICBwcm9wZXJ0eTogZmlyc3RfdG9rZW5fc2hvdWxkX25ldmVyX3dyYXAgKyBidXRfdGhpc19jYW4sXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgcHJvcGVydHo6IGZpcnN0X3Rva2VuX3Nob3VsZF9uZXZlcl93cmFwICsgIWJ1dF90aGlzX2NhbixcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICBwcm9wZXI6ICJmaXJzdF90b2tlbl9zaG91bGRfbmV2ZXJfd3JhcCIgKyAiYnV0X3RoaXNfY2FuIlxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnfScpOwoKICAgICAgICBvcHRzLndyYXBfbGluZV9sZW5ndGggPSA3MDsKICAgICAgICAvLy4uLi4uLi4uLi4uLi4tLS0tLS0tLS0xLS0tLS0tLS0tMi0tLS0tLS0tLTMtLS0tLS0tLS00LS0tLS0tLS0tNS0tLS0tLS0tLTYtLS0tLS0tLS03CiAgICAgICAgLy8uLi4uLi4uLi4uLi4uMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MAogICAgICAgIHRlc3RfZnJhZ21lbnQod3JhcF9pbnB1dF8xLAogICAgICAgICAgICAgICAgICAgICAgLyogZXhwZWN0ZWQgKi8KICAgICAgICAgICAgICAgICAgICAgICdmb28uYmFyKCkuYmF6KCkuY3VjdW1iZXIoKGZhdCAmJiAic2Fzc3kiKSB8fCAobGVhbnMgJiYgbWVhbikpO1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnVGVzdF92ZXJ5X2xvbmdfdmFyaWFibGVfbmFtZV90aGlzX3Nob3VsZF9uZXZlcl93cmFwLmJ1dF90aGlzX2NhblxuJyArCiAgICAgICAgICAgICAgICAgICAgICAncmV0dXJuIGJldHdlZW5fcmV0dXJuX2FuZF9leHByZXNzaW9uX3Nob3VsZF9uZXZlcl93cmFwLmJ1dF90aGlzX2NhblxuJyArCiAgICAgICAgICAgICAgICAgICAgICAndGhyb3cgYmV0d2Vlbl90aHJvd19hbmRfZXhwcmVzc2lvbl9zaG91bGRfbmV2ZXJfd3JhcC5idXRfdGhpc19jYW5cbicgKwogICAgICAgICAgICAgICAgICAgICAgJ2lmICh3cmFwc19jYW5fb2NjdXIgJiYgaW5zaWRlX2FuX2lmX2Jsb2NrKSB0aGF0X2lzXy5va2F5KCk7XG4nICsKICAgICAgICAgICAgICAgICAgICAgICdvYmplY3RfbGl0ZXJhbCA9IHtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICBwcm9wZXJ0eDogZmlyc3RfdG9rZW4gKyAxMjM0NTY3OC45OTk5OUUtNixcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICBwcm9wZXJ0eTogZmlyc3RfdG9rZW5fc2hvdWxkX25ldmVyX3dyYXAgKyBidXRfdGhpc19jYW4sXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgcHJvcGVydHo6IGZpcnN0X3Rva2VuX3Nob3VsZF9uZXZlcl93cmFwICsgIWJ1dF90aGlzX2NhbixcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICBwcm9wZXI6ICJmaXJzdF90b2tlbl9zaG91bGRfbmV2ZXJfd3JhcCIgKyAiYnV0X3RoaXNfY2FuIlxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnfScpOwoKICAgICAgICBvcHRzLndyYXBfbGluZV9sZW5ndGggPSA0MDsKICAgICAgICAvLy4uLi4uLi4uLi4uLi4tLS0tLS0tLS0xLS0tLS0tLS0tMi0tLS0tLS0tLTMtLS0tLS0tLS00LS0tLS0tLS0tNS0tLS0tLS0tLTYtLS0tLS0tLS03CiAgICAgICAgLy8uLi4uLi4uLi4uLi4uMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MAogICAgICAgIHRlc3RfZnJhZ21lbnQod3JhcF9pbnB1dF8xLAogICAgICAgICAgICAgICAgICAgICAgLyogZXhwZWN0ZWQgKi8KICAgICAgICAgICAgICAgICAgICAgICdmb28uYmFyKCkuYmF6KCkuY3VjdW1iZXIoKGZhdCAmJlxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgICJzYXNzeSIpIHx8IChsZWFucyAmJiBtZWFuKSk7XG4nICsKICAgICAgICAgICAgICAgICAgICAgICdUZXN0X3ZlcnlfbG9uZ192YXJpYWJsZV9uYW1lX3RoaXNfc2hvdWxkX25ldmVyX3dyYXBcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAuYnV0X3RoaXNfY2FuXG4nICsKICAgICAgICAgICAgICAgICAgICAgICdyZXR1cm4gYmV0d2Vlbl9yZXR1cm5fYW5kX2V4cHJlc3Npb25fc2hvdWxkX25ldmVyX3dyYXBcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAuYnV0X3RoaXNfY2FuXG4nICsKICAgICAgICAgICAgICAgICAgICAgICd0aHJvdyBiZXR3ZWVuX3Rocm93X2FuZF9leHByZXNzaW9uX3Nob3VsZF9uZXZlcl93cmFwXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgLmJ1dF90aGlzX2NhblxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnaWYgKHdyYXBzX2Nhbl9vY2N1ciAmJlxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIGluc2lkZV9hbl9pZl9ibG9jaykgdGhhdF9pc18ub2theSgpO1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnb2JqZWN0X2xpdGVyYWwgPSB7XG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgcHJvcGVydHg6IGZpcnN0X3Rva2VuICtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgMTIzNDU2NzguOTk5OTlFLTYsXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgcHJvcGVydHk6IGZpcnN0X3Rva2VuX3Nob3VsZF9uZXZlcl93cmFwICtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgYnV0X3RoaXNfY2FuLFxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIHByb3BlcnR6OiBmaXJzdF90b2tlbl9zaG91bGRfbmV2ZXJfd3JhcCArXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgICAgICFidXRfdGhpc19jYW4sXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgcHJvcGVyOiAiZmlyc3RfdG9rZW5fc2hvdWxkX25ldmVyX3dyYXAiICtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgImJ1dF90aGlzX2NhbiJcbicgKwogICAgICAgICAgICAgICAgICAgICAgJ30nKTsKCiAgICAgICAgb3B0cy53cmFwX2xpbmVfbGVuZ3RoID0gNDE7CiAgICAgICAgLy8gTk9URTogd3JhcCBpcyBvbmx5IGJlc3QgZWZmb3J0IC0gbGluZSBjb250aW51ZXMgdW50aWwgbmV4dCB3cmFwIHBvaW50IGlzIGZvdW5kLgogICAgICAgIC8vLi4uLi4uLi4uLi4uLi0tLS0tLS0tLTEtLS0tLS0tLS0yLS0tLS0tLS0tMy0tLS0tLS0tLTQtLS0tLS0tLS01LS0tLS0tLS0tNi0tLS0tLS0tLTcKICAgICAgICAvLy4uLi4uLi4uLi4uLi4xMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwCiAgICAgICAgdGVzdF9mcmFnbWVudCh3cmFwX2lucHV0XzEsCiAgICAgICAgICAgICAgICAgICAgICAvKiBleHBlY3RlZCAqLwogICAgICAgICAgICAgICAgICAgICAgJ2Zvby5iYXIoKS5iYXooKS5jdWN1bWJlcigoZmF0ICYmICJzYXNzeSIpIHx8XG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgKGxlYW5zICYmIG1lYW4pKTtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJ1Rlc3RfdmVyeV9sb25nX3ZhcmlhYmxlX25hbWVfdGhpc19zaG91bGRfbmV2ZXJfd3JhcFxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIC5idXRfdGhpc19jYW5cbicgKwogICAgICAgICAgICAgICAgICAgICAgJ3JldHVybiBiZXR3ZWVuX3JldHVybl9hbmRfZXhwcmVzc2lvbl9zaG91bGRfbmV2ZXJfd3JhcFxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIC5idXRfdGhpc19jYW5cbicgKwogICAgICAgICAgICAgICAgICAgICAgJ3Rocm93IGJldHdlZW5fdGhyb3dfYW5kX2V4cHJlc3Npb25fc2hvdWxkX25ldmVyX3dyYXBcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAuYnV0X3RoaXNfY2FuXG4nICsKICAgICAgICAgICAgICAgICAgICAgICdpZiAod3JhcHNfY2FuX29jY3VyICYmXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgaW5zaWRlX2FuX2lmX2Jsb2NrKSB0aGF0X2lzXy5va2F5KCk7XG4nICsKICAgICAgICAgICAgICAgICAgICAgICdvYmplY3RfbGl0ZXJhbCA9IHtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICBwcm9wZXJ0eDogZmlyc3RfdG9rZW4gK1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgICAgICAxMjM0NTY3OC45OTk5OUUtNixcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICBwcm9wZXJ0eTogZmlyc3RfdG9rZW5fc2hvdWxkX25ldmVyX3dyYXAgK1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgICAgICBidXRfdGhpc19jYW4sXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgcHJvcGVydHo6IGZpcnN0X3Rva2VuX3Nob3VsZF9uZXZlcl93cmFwICtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgIWJ1dF90aGlzX2NhbixcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICBwcm9wZXI6ICJmaXJzdF90b2tlbl9zaG91bGRfbmV2ZXJfd3JhcCIgK1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgICAgICAiYnV0X3RoaXNfY2FuIlxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnfScpOwoKICAgICAgICBvcHRzLndyYXBfbGluZV9sZW5ndGggPSA0NTsKICAgICAgICAvLyBOT1RFOiB3cmFwIGlzIG9ubHkgYmVzdCBlZmZvcnQgLSBsaW5lIGNvbnRpbnVlcyB1bnRpbCBuZXh0IHdyYXAgcG9pbnQgaXMgZm91bmQuCiAgICAgICAgLy8uLi4uLi4uLi4uLi4uLS0tLS0tLS0tMS0tLS0tLS0tLTItLS0tLS0tLS0zLS0tLS0tLS0tNC0tLS0tLS0tLTUtLS0tLS0tLS02LS0tLS0tLS0tNwogICAgICAgIC8vLi4uLi4uLi4uLi4uLjEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAKICAgICAgICB0ZXN0X2ZyYWdtZW50KHdyYXBfaW5wdXRfMiwKICAgICAgICAgICAgICAgICAgICAgIC8qIGV4cGVjdGVkICovCiAgICAgICAgICAgICAgICAgICAgICAne1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIGZvby5iYXIoKS5iYXooKS5jdWN1bWJlcigoZmF0ICYmICJzYXNzeSIpIHx8XG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgICAgIChsZWFucyAmJiBtZWFuKSk7XG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgVGVzdF92ZXJ5X2xvbmdfdmFyaWFibGVfbmFtZV90aGlzX3Nob3VsZF9uZXZlcl93cmFwXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgICAgIC5idXRfdGhpc19jYW5cbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICByZXR1cm4gYmV0d2Vlbl9yZXR1cm5fYW5kX2V4cHJlc3Npb25fc2hvdWxkX25ldmVyX3dyYXBcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgLmJ1dF90aGlzX2NhblxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIHRocm93IGJldHdlZW5fdGhyb3dfYW5kX2V4cHJlc3Npb25fc2hvdWxkX25ldmVyX3dyYXBcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgLmJ1dF90aGlzX2NhblxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIGlmICh3cmFwc19jYW5fb2NjdXIgJiZcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgaW5zaWRlX2FuX2lmX2Jsb2NrKSB0aGF0X2lzXy5va2F5KCk7XG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgb2JqZWN0X2xpdGVyYWwgPSB7XG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgICAgIHByb3BlcnR4OiBmaXJzdF90b2tlbiArXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgICAgICAgICAxMjM0NTY3OC45OTk5OUUtNixcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgcHJvcGVydHk6IGZpcnN0X3Rva2VuX3Nob3VsZF9uZXZlcl93cmFwICtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgICAgIGJ1dF90aGlzX2NhbixcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgcHJvcGVydHo6IGZpcnN0X3Rva2VuX3Nob3VsZF9uZXZlcl93cmFwICtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgICAgICFidXRfdGhpc19jYW4sXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgICAgIHByb3BlcjogImZpcnN0X3Rva2VuX3Nob3VsZF9uZXZlcl93cmFwIiArXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgICAgICAgICAiYnV0X3RoaXNfY2FuIlxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIH1cbicrCiAgICAgICAgICAgICAgICAgICAgICAnfScpOwoKICAgICAgICBvcHRzLnByZXNlcnZlX25ld2xpbmVzID0gdHJ1ZTsKICAgICAgICBvcHRzLndyYXBfbGluZV9sZW5ndGggPSAwOwogICAgICAgIC8vLi4uLi4uLi4uLi4uLi0tLS0tLS0tLTEtLS0tLS0tLS0yLS0tLS0tLS0tMy0tLS0tLS0tLTQtLS0tLS0tLS01LS0tLS0tLS0tNi0tLS0tLS0tLTcKICAgICAgICAvLy4uLi4uLi4uLi4uLi4xMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwCiAgICAgICAgdGVzdF9mcmFnbWVudCh3cmFwX2lucHV0XzEsCiAgICAgICAgICAgICAgICAgICAgICAvKiBleHBlY3RlZCAqLwogICAgICAgICAgICAgICAgICAgICAgJ2Zvby5iYXIoKS5iYXooKS5jdWN1bWJlcigoZmF0ICYmICJzYXNzeSIpIHx8IChsZWFucyAmJiBtZWFuKSk7XG4nICsKICAgICAgICAgICAgICAgICAgICAgICdUZXN0X3ZlcnlfbG9uZ192YXJpYWJsZV9uYW1lX3RoaXNfc2hvdWxkX25ldmVyX3dyYXBcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAuYnV0X3RoaXNfY2FuXG4nICsKICAgICAgICAgICAgICAgICAgICAgICdyZXR1cm4gYmV0d2Vlbl9yZXR1cm5fYW5kX2V4cHJlc3Npb25fc2hvdWxkX25ldmVyX3dyYXAuYnV0X3RoaXNfY2FuXG4nICsKICAgICAgICAgICAgICAgICAgICAgICd0aHJvdyBiZXR3ZWVuX3Rocm93X2FuZF9leHByZXNzaW9uX3Nob3VsZF9uZXZlcl93cmFwLmJ1dF90aGlzX2NhblxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnaWYgKHdyYXBzX2Nhbl9vY2N1ciAmJiBpbnNpZGVfYW5faWZfYmxvY2spIHRoYXRfaXNfXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgLm9rYXkoKTtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJ29iamVjdF9saXRlcmFsID0ge1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIHByb3BlcnR4OiBmaXJzdF90b2tlbiArIDEyMzQ1Njc4Ljk5OTk5RS02LFxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIHByb3BlcnR5OiBmaXJzdF90b2tlbl9zaG91bGRfbmV2ZXJfd3JhcCArIGJ1dF90aGlzX2NhbixcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICBwcm9wZXJ0ejogZmlyc3RfdG9rZW5fc2hvdWxkX25ldmVyX3dyYXAgKyAhYnV0X3RoaXNfY2FuLFxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIHByb3BlcjogImZpcnN0X3Rva2VuX3Nob3VsZF9uZXZlcl93cmFwIiArICJidXRfdGhpc19jYW4iXG4nICsKICAgICAgICAgICAgICAgICAgICAgICd9Jyk7CgogICAgICAgIG9wdHMud3JhcF9saW5lX2xlbmd0aCA9IDcwOwogICAgICAgIC8vLi4uLi4uLi4uLi4uLi0tLS0tLS0tLTEtLS0tLS0tLS0yLS0tLS0tLS0tMy0tLS0tLS0tLTQtLS0tLS0tLS01LS0tLS0tLS0tNi0tLS0tLS0tLTcKICAgICAgICAvLy4uLi4uLi4uLi4uLi4xMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwCiAgICAgICAgdGVzdF9mcmFnbWVudCh3cmFwX2lucHV0XzEsCiAgICAgICAgICAgICAgICAgICAgICAvKiBleHBlY3RlZCAqLwogICAgICAgICAgICAgICAgICAgICAgJ2Zvby5iYXIoKS5iYXooKS5jdWN1bWJlcigoZmF0ICYmICJzYXNzeSIpIHx8IChsZWFucyAmJiBtZWFuKSk7XG4nICsKICAgICAgICAgICAgICAgICAgICAgICdUZXN0X3ZlcnlfbG9uZ192YXJpYWJsZV9uYW1lX3RoaXNfc2hvdWxkX25ldmVyX3dyYXBcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAuYnV0X3RoaXNfY2FuXG4nICsKICAgICAgICAgICAgICAgICAgICAgICdyZXR1cm4gYmV0d2Vlbl9yZXR1cm5fYW5kX2V4cHJlc3Npb25fc2hvdWxkX25ldmVyX3dyYXAuYnV0X3RoaXNfY2FuXG4nICsKICAgICAgICAgICAgICAgICAgICAgICd0aHJvdyBiZXR3ZWVuX3Rocm93X2FuZF9leHByZXNzaW9uX3Nob3VsZF9uZXZlcl93cmFwLmJ1dF90aGlzX2NhblxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnaWYgKHdyYXBzX2Nhbl9vY2N1ciAmJiBpbnNpZGVfYW5faWZfYmxvY2spIHRoYXRfaXNfXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgLm9rYXkoKTtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJ29iamVjdF9saXRlcmFsID0ge1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIHByb3BlcnR4OiBmaXJzdF90b2tlbiArIDEyMzQ1Njc4Ljk5OTk5RS02LFxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIHByb3BlcnR5OiBmaXJzdF90b2tlbl9zaG91bGRfbmV2ZXJfd3JhcCArIGJ1dF90aGlzX2NhbixcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICBwcm9wZXJ0ejogZmlyc3RfdG9rZW5fc2hvdWxkX25ldmVyX3dyYXAgKyAhYnV0X3RoaXNfY2FuLFxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIHByb3BlcjogImZpcnN0X3Rva2VuX3Nob3VsZF9uZXZlcl93cmFwIiArICJidXRfdGhpc19jYW4iXG4nICsKICAgICAgICAgICAgICAgICAgICAgICd9Jyk7CgoKICAgICAgICBvcHRzLndyYXBfbGluZV9sZW5ndGggPSA0MDsKICAgICAgICAvLy4uLi4uLi4uLi4uLi4tLS0tLS0tLS0xLS0tLS0tLS0tMi0tLS0tLS0tLTMtLS0tLS0tLS00LS0tLS0tLS0tNS0tLS0tLS0tLTYtLS0tLS0tLS03CiAgICAgICAgLy8uLi4uLi4uLi4uLi4uMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MAogICAgICAgIHRlc3RfZnJhZ21lbnQod3JhcF9pbnB1dF8xLAogICAgICAgICAgICAgICAgICAgICAgLyogZXhwZWN0ZWQgKi8KICAgICAgICAgICAgICAgICAgICAgICdmb28uYmFyKCkuYmF6KCkuY3VjdW1iZXIoKGZhdCAmJlxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgICJzYXNzeSIpIHx8IChsZWFucyAmJiBtZWFuKSk7XG4nICsKICAgICAgICAgICAgICAgICAgICAgICdUZXN0X3ZlcnlfbG9uZ192YXJpYWJsZV9uYW1lX3RoaXNfc2hvdWxkX25ldmVyX3dyYXBcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAuYnV0X3RoaXNfY2FuXG4nICsKICAgICAgICAgICAgICAgICAgICAgICdyZXR1cm4gYmV0d2Vlbl9yZXR1cm5fYW5kX2V4cHJlc3Npb25fc2hvdWxkX25ldmVyX3dyYXBcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAuYnV0X3RoaXNfY2FuXG4nICsKICAgICAgICAgICAgICAgICAgICAgICd0aHJvdyBiZXR3ZWVuX3Rocm93X2FuZF9leHByZXNzaW9uX3Nob3VsZF9uZXZlcl93cmFwXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgLmJ1dF90aGlzX2NhblxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnaWYgKHdyYXBzX2Nhbl9vY2N1ciAmJlxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIGluc2lkZV9hbl9pZl9ibG9jaykgdGhhdF9pc19cbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAub2theSgpO1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnb2JqZWN0X2xpdGVyYWwgPSB7XG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgcHJvcGVydHg6IGZpcnN0X3Rva2VuICtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgMTIzNDU2NzguOTk5OTlFLTYsXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgcHJvcGVydHk6IGZpcnN0X3Rva2VuX3Nob3VsZF9uZXZlcl93cmFwICtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgYnV0X3RoaXNfY2FuLFxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIHByb3BlcnR6OiBmaXJzdF90b2tlbl9zaG91bGRfbmV2ZXJfd3JhcCArXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgICAgICFidXRfdGhpc19jYW4sXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgcHJvcGVyOiAiZmlyc3RfdG9rZW5fc2hvdWxkX25ldmVyX3dyYXAiICtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgImJ1dF90aGlzX2NhbiJcbicgKwogICAgICAgICAgICAgICAgICAgICAgJ30nKTsKCiAgICAgICAgb3B0cy53cmFwX2xpbmVfbGVuZ3RoID0gNDE7CiAgICAgICAgLy8gTk9URTogd3JhcCBpcyBvbmx5IGJlc3QgZWZmb3J0IC0gbGluZSBjb250aW51ZXMgdW50aWwgbmV4dCB3cmFwIHBvaW50IGlzIGZvdW5kLgogICAgICAgIC8vLi4uLi4uLi4uLi4uLi0tLS0tLS0tLTEtLS0tLS0tLS0yLS0tLS0tLS0tMy0tLS0tLS0tLTQtLS0tLS0tLS01LS0tLS0tLS0tNi0tLS0tLS0tLTcKICAgICAgICAvLy4uLi4uLi4uLi4uLi4xMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwCiAgICAgICAgdGVzdF9mcmFnbWVudCh3cmFwX2lucHV0XzEsCiAgICAgICAgICAgICAgICAgICAgICAvKiBleHBlY3RlZCAqLwogICAgICAgICAgICAgICAgICAgICAgJ2Zvby5iYXIoKS5iYXooKS5jdWN1bWJlcigoZmF0ICYmICJzYXNzeSIpIHx8XG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgKGxlYW5zICYmIG1lYW4pKTtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJ1Rlc3RfdmVyeV9sb25nX3ZhcmlhYmxlX25hbWVfdGhpc19zaG91bGRfbmV2ZXJfd3JhcFxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIC5idXRfdGhpc19jYW5cbicgKwogICAgICAgICAgICAgICAgICAgICAgJ3JldHVybiBiZXR3ZWVuX3JldHVybl9hbmRfZXhwcmVzc2lvbl9zaG91bGRfbmV2ZXJfd3JhcFxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIC5idXRfdGhpc19jYW5cbicgKwogICAgICAgICAgICAgICAgICAgICAgJ3Rocm93IGJldHdlZW5fdGhyb3dfYW5kX2V4cHJlc3Npb25fc2hvdWxkX25ldmVyX3dyYXBcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAuYnV0X3RoaXNfY2FuXG4nICsKICAgICAgICAgICAgICAgICAgICAgICdpZiAod3JhcHNfY2FuX29jY3VyICYmXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgaW5zaWRlX2FuX2lmX2Jsb2NrKSB0aGF0X2lzX1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIC5va2F5KCk7XG4nICsKICAgICAgICAgICAgICAgICAgICAgICdvYmplY3RfbGl0ZXJhbCA9IHtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICBwcm9wZXJ0eDogZmlyc3RfdG9rZW4gK1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgICAgICAxMjM0NTY3OC45OTk5OUUtNixcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICBwcm9wZXJ0eTogZmlyc3RfdG9rZW5fc2hvdWxkX25ldmVyX3dyYXAgK1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgICAgICBidXRfdGhpc19jYW4sXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgcHJvcGVydHo6IGZpcnN0X3Rva2VuX3Nob3VsZF9uZXZlcl93cmFwICtcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgIWJ1dF90aGlzX2NhbixcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICBwcm9wZXI6ICJmaXJzdF90b2tlbl9zaG91bGRfbmV2ZXJfd3JhcCIgK1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgICAgICAiYnV0X3RoaXNfY2FuIlxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnfScpOwoKICAgICAgICBvcHRzLndyYXBfbGluZV9sZW5ndGggPSA0NTsKICAgICAgICAvLyBOT1RFOiB3cmFwIGlzIG9ubHkgYmVzdCBlZmZvcnQgLSBsaW5lIGNvbnRpbnVlcyB1bnRpbCBuZXh0IHdyYXAgcG9pbnQgaXMgZm91bmQuCiAgICAgICAgLy8uLi4uLi4uLi4uLi4uLS0tLS0tLS0tMS0tLS0tLS0tLTItLS0tLS0tLS0zLS0tLS0tLS0tNC0tLS0tLS0tLTUtLS0tLS0tLS02LS0tLS0tLS0tNwogICAgICAgIC8vLi4uLi4uLi4uLi4uLjEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAKICAgICAgICB0ZXN0X2ZyYWdtZW50KHdyYXBfaW5wdXRfMiwKICAgICAgICAgICAgICAgICAgICAgIC8qIGV4cGVjdGVkICovCiAgICAgICAgICAgICAgICAgICAgICAne1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIGZvby5iYXIoKS5iYXooKS5jdWN1bWJlcigoZmF0ICYmICJzYXNzeSIpIHx8XG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgICAgIChsZWFucyAmJiBtZWFuKSk7XG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgVGVzdF92ZXJ5X2xvbmdfdmFyaWFibGVfbmFtZV90aGlzX3Nob3VsZF9uZXZlcl93cmFwXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgICAgIC5idXRfdGhpc19jYW5cbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICByZXR1cm4gYmV0d2Vlbl9yZXR1cm5fYW5kX2V4cHJlc3Npb25fc2hvdWxkX25ldmVyX3dyYXBcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgLmJ1dF90aGlzX2NhblxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIHRocm93IGJldHdlZW5fdGhyb3dfYW5kX2V4cHJlc3Npb25fc2hvdWxkX25ldmVyX3dyYXBcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgLmJ1dF90aGlzX2NhblxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIGlmICh3cmFwc19jYW5fb2NjdXIgJiZcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgaW5zaWRlX2FuX2lmX2Jsb2NrKSB0aGF0X2lzX1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgICAgICAub2theSgpO1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgIG9iamVjdF9saXRlcmFsID0ge1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgICAgICBwcm9wZXJ0eDogZmlyc3RfdG9rZW4gK1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgICAgICAgICAgMTIzNDU2NzguOTk5OTlFLTYsXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgICAgIHByb3BlcnR5OiBmaXJzdF90b2tlbl9zaG91bGRfbmV2ZXJfd3JhcCArXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgICAgICAgICBidXRfdGhpc19jYW4sXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgICAgIHByb3BlcnR6OiBmaXJzdF90b2tlbl9zaG91bGRfbmV2ZXJfd3JhcCArXG4nICsKICAgICAgICAgICAgICAgICAgICAgICcgICAgICAgICAgICAhYnV0X3RoaXNfY2FuLFxuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgICAgICBwcm9wZXI6ICJmaXJzdF90b2tlbl9zaG91bGRfbmV2ZXJfd3JhcCIgK1xuJyArCiAgICAgICAgICAgICAgICAgICAgICAnICAgICAgICAgICAgImJ1dF90aGlzX2NhbiJcbicgKwogICAgICAgICAgICAgICAgICAgICAgJyAgICB9XG4nKwogICAgICAgICAgICAgICAgICAgICAgJ30nKTsKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgb3B0cy5wcmVzZXJ2ZV9uZXdsaW5lcyA9IGZhbHNlOwogICAgICAgIGJ0KCdpZiAoZm9vKSAvLyBjb21tZW50XG4gICAgYmFyKCk7Jyk7CiAgICAgICAgYnQoJ2lmIChmb28pIC8vIGNvbW1lbnRcbiAgICAoYmFyKCkpOycpOwogICAgICAgIGJ0KCdpZiAoZm9vKSAvLyBjb21tZW50XG4gICAgKGJhcigpKTsnKTsKICAgICAgICBidCgnaWYgKGZvbykgLy8gY29tbWVudFxuICAgIC9hc2RmLzsnKTsKICAgICAgICBidCgndGhpcy5vYSA9IG5ldyBPQXV0aChcbicgKwogICAgICAgICAgICcgICAgX3JlcXVlc3RUb2tlbixcbicgKwogICAgICAgICAgICcgICAgX2FjY2Vzc1Rva2VuLFxuJyArCiAgICAgICAgICAgJyAgICBjb25zdW1lcl9rZXlcbicgKwogICAgICAgICAgICcpOycsCiAgICAgICAgICAgJ3RoaXMub2EgPSBuZXcgT0F1dGgoX3JlcXVlc3RUb2tlbiwgX2FjY2Vzc1Rva2VuLCBjb25zdW1lcl9rZXkpOycpOwogICAgICAgIGJ0KCdmb28gPSB7XG4gICAgeDogeSwgLy8gIzQ0XG4gICAgdzogeiAvLyAjNDRcbn0nKTsKICAgICAgICBidCgnc3dpdGNoICh4KSB7XG4gICAgY2FzZSAiYSI6XG4gICAgICAgIC8vIGNvbW1lbnQgb24gbmV3bGluZVxuICAgICAgICBicmVhaztcbiAgICBjYXNlICJiIjogLy8gY29tbWVudCBvbiBzYW1lIGxpbmVcbiAgICAgICAgYnJlYWs7XG59Jyk7CiAgICAgICAgYnQoJ3RoaXMudHlwZSA9XG4gICAgdGhpcy5vcHRpb25zID1cbiAgICAvLyBjb21tZW50XG4gICAgdGhpcy5lbmFibGVkIG51bGw7JywKICAgICAgICAgICAndGhpcy50eXBlID0gdGhpcy5vcHRpb25zID1cbiAgICAvLyBjb21tZW50XG4gICAgdGhpcy5lbmFibGVkIG51bGw7Jyk7CiAgICAgICAgYnQoJ3NvbWVPYmpcbiAgICAuc29tZUZ1bmMxKClcbiAgICAvLyBUaGlzIGNvbW1lbnQgc2hvdWxkIG5vdCBicmVhayB0aGUgaW5kZW50XG4gICAgLnNvbWVGdW5jMigpOycsCiAgICAgICAgICAgJ3NvbWVPYmouc29tZUZ1bmMxKClcbiAgICAvLyBUaGlzIGNvbW1lbnQgc2hvdWxkIG5vdCBicmVhayB0aGUgaW5kZW50XG4gICAgLnNvbWVGdW5jMigpOycpOwoKICAgICAgICBidCgnaWYgKHRydWUgfHxcbiF0cnVlKSByZXR1cm47JywgJ2lmICh0cnVlIHx8ICF0cnVlKSByZXR1cm47Jyk7CgogICAgICAgIC8vIHRoZXNlIGFyZW4ndCByZWFkeSB5ZXQuCiAgICAgICAgLy9idCgnaWYgKGZvbykgLy8gY29tbWVudFxuICAgIGJhcigpIC8qaSovICsgYmF6KCkgLypqXG4qLyArIGFzZGYoKTsnKTsKICAgICAgICBidCgnaWZcbihmb28pXG5pZlxuKGJhcilcbmlmXG4oYmF6KVxud2hlZSgpO1xuYSgpOycsCiAgICAgICAgICAgICdpZiAoZm9vKVxuICAgIGlmIChiYXIpXG4gICAgICAgIGlmIChiYXopIHdoZWUoKTtcbmEoKTsnKTsKICAgICAgICBidCgnaWZcbihmb28pXG5pZlxuKGJhcilcbmlmXG4oYmF6KVxud2hlZSgpO1xuZWxzZVxuYSgpOycsCiAgICAgICAgICAgICdpZiAoZm9vKVxuICAgIGlmIChiYXIpXG4gICAgICAgIGlmIChiYXopIHdoZWUoKTtcbiAgICAgICAgZWxzZSBhKCk7Jyk7CiAgICAgICAgYnQoJ2lmIChmb28pXG5iYXIoKTtcbmVsc2VcbmNhcigpOycsCiAgICAgICAgICAgICdpZiAoZm9vKSBiYXIoKTtcbmVsc2UgY2FyKCk7Jyk7CgogICAgICAgIGJ0KCdpZiAoZm9vKSBpZiAoYmFyKSBpZiAoYmF6KTtcbmEoKTsnLAogICAgICAgICAgICAnaWYgKGZvbylcbiAgICBpZiAoYmFyKVxuICAgICAgICBpZiAoYmF6KTtcbmEoKTsnKTsKICAgICAgICBidCgnaWYgKGZvbykgaWYgKGJhcikgaWYgKGJheikgd2hlZSgpO1xuYSgpOycsCiAgICAgICAgICAgICdpZiAoZm9vKVxuICAgIGlmIChiYXIpXG4gICAgICAgIGlmIChiYXopIHdoZWUoKTtcbmEoKTsnKTsKICAgICAgICBidCgnaWYgKGZvbykgYSgpXG5pZiAoYmFyKSBpZiAoYmF6KSB3aGVlKCk7XG5hKCk7JywKICAgICAgICAgICAgJ2lmIChmb28pIGEoKVxuaWYgKGJhcilcbiAgICBpZiAoYmF6KSB3aGVlKCk7XG5hKCk7Jyk7CiAgICAgICAgYnQoJ2lmIChmb28pO1xuaWYgKGJhcikgaWYgKGJheikgd2hlZSgpO1xuYSgpOycsCiAgICAgICAgICAgICdpZiAoZm9vKTtcbmlmIChiYXIpXG4gICAgaWYgKGJheikgd2hlZSgpO1xuYSgpOycpOwogICAgICAgIGJ0KCdpZiAob3B0aW9ucylcbicgKwogICAgICAgICAgICcgICAgZm9yICh2YXIgcCBpbiBvcHRpb25zKVxuJyArCiAgICAgICAgICAgJyAgICAgICAgdGhpc1twXSA9IG9wdGlvbnNbcF07JywKICAgICAgICAgICAnaWYgKG9wdGlvbnMpXG4nKwogICAgICAgICAgICcgICAgZm9yICh2YXIgcCBpbiBvcHRpb25zKSB0aGlzW3BdID0gb3B0aW9uc1twXTsnKTsKICAgICAgICBidCgnaWYgKG9wdGlvbnMpIGZvciAodmFyIHAgaW4gb3B0aW9ucykgdGhpc1twXSA9IG9wdGlvbnNbcF07JywKICAgICAgICAgICAnaWYgKG9wdGlvbnMpXG4gICAgZm9yICh2YXIgcCBpbiBvcHRpb25zKSB0aGlzW3BdID0gb3B0aW9uc1twXTsnKTsKCiAgICAgICAgYnQoJ2lmIChvcHRpb25zKSBkbyBxKCk7IHdoaWxlIChiKCkpOycsCiAgICAgICAgICAgJ2lmIChvcHRpb25zKVxuICAgIGRvIHEoKTsgd2hpbGUgKGIoKSk7Jyk7CiAgICAgICAgYnQoJ2lmIChvcHRpb25zKSB3aGlsZSAoYigpKSBxKCk7JywKICAgICAgICAgICAnaWYgKG9wdGlvbnMpXG4gICAgd2hpbGUgKGIoKSkgcSgpOycpOwogICAgICAgIGJ0KCdpZiAob3B0aW9ucykgZG8gd2hpbGUgKGIoKSkgcSgpOyB3aGlsZSAoYSgpKTsnLAogICAgICAgICAgICdpZiAob3B0aW9ucylcbiAgICBkb1xuICAgICAgICB3aGlsZSAoYigpKSBxKCk7IHdoaWxlIChhKCkpOycpOwoKICAgICAgICBidCgnZnVuY3Rpb24gZihhLCBiLCBjLFxuZCwgZSkge30nLAogICAgICAgICAgICAnZnVuY3Rpb24gZihhLCBiLCBjLCBkLCBlKSB7fScpOwoKICAgICAgICBidCgnZnVuY3Rpb24gZihhLGIpIHtpZihhKSBiKCl9ZnVuY3Rpb24gZyhhLGIpIHtpZighYSkgYigpfScsCiAgICAgICAgICAgICdmdW5jdGlvbiBmKGEsIGIpIHtcbiAgICBpZiAoYSkgYigpXG59XG5cbmZ1bmN0aW9uIGcoYSwgYikge1xuICAgIGlmICghYSkgYigpXG59Jyk7CiAgICAgICAgYnQoJ2Z1bmN0aW9uIGYoYSxiKSB7aWYoYSkgYigpfVxuXG5cblxuZnVuY3Rpb24gZyhhLGIpIHtpZighYSkgYigpfScsCiAgICAgICAgICAgICdmdW5jdGlvbiBmKGEsIGIpIHtcbiAgICBpZiAoYSkgYigpXG59XG5cbmZ1bmN0aW9uIGcoYSwgYikge1xuICAgIGlmICghYSkgYigpXG59Jyk7CgogICAgICAgIC8vIFRoaXMgaXMgbm90IHZhbGlkIHN5bnRheCwgYnV0IHN0aWxsIHdhbnQgdG8gYmVoYXZlIHJlYXNvbmFibHkgYW5kIG5vdCBzaWRlLWVmZmVjdAogICAgICAgIGJ0KCcoaWYoYSkgYigpKShpZihhKSBiKCkpJywKICAgICAgICAgICAgJyhcbiAgICBpZiAoYSkgYigpKShcbiAgICBpZiAoYSkgYigpKScpOwogICAgICAgIGJ0KCcoaWYoYSkgYigpKVxuXG5cbihpZihhKSBiKCkpJywKICAgICAgICAgICAgJyhcbiAgICBpZiAoYSkgYigpKVxuKFxuICAgIGlmIChhKSBiKCkpJyk7CgoKCiAgICAgICAgYnQoImlmXG4oYSlcbmIoKTsiLCAiaWYgKGEpIGIoKTsiKTsKICAgICAgICBidCgndmFyIGEgPVxuZm9vJywgJ3ZhciBhID0gZm9vJyk7CiAgICAgICAgYnQoJ3ZhciBhID0ge1xuImEiOjEsXG4iYiI6Mn0nLCAidmFyIGEgPSB7XG4gICAgXCJhXCI6IDEsXG4gICAgXCJiXCI6IDJcbn0iKTsKICAgICAgICBidCgidmFyIGEgPSB7XG4nYSc6MSxcbidiJzoyfSIsICJ2YXIgYSA9IHtcbiAgICAnYSc6IDEsXG4gICAgJ2InOiAyXG59Iik7CiAgICAgICAgYnQoJ3ZhciBhID0gLyppKi8gImIiOycpOwogICAgICAgIGJ0KCd2YXIgYSA9IC8qaSovXG4iYiI7JywgJ3ZhciBhID0gLyppKi8gImIiOycpOwogICAgICAgIGJ0KCd2YXIgYSA9IC8qaSovXG5iOycsICd2YXIgYSA9IC8qaSovIGI7Jyk7CiAgICAgICAgYnQoJ3tcblxuXG4ieCJcbn0nLCAne1xuICAgICJ4IlxufScpOwogICAgICAgIGJ0KCdpZihhICYmXG5iXG58fFxuY1xufHxkXG4mJlxuZSkgZSA9IGYnLCAnaWYgKGEgJiYgYiB8fCBjIHx8IGQgJiYgZSkgZSA9IGYnKTsKICAgICAgICBidCgnaWYoYSAmJlxuKGJcbnx8XG5jXG58fGQpXG4mJlxuZSkgZSA9IGYnLCAnaWYgKGEgJiYgKGIgfHwgYyB8fCBkKSAmJiBlKSBlID0gZicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJ1xuXG4ieCInLCAnIngiJyk7CiAgICAgICAgYnQoJ2EgPSAxO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuYiA9IDI7JywKICAgICAgICAgICAgICAgICdhID0gMTtcbmIgPSAyOycpOwoKICAgICAgICBvcHRzLnByZXNlcnZlX25ld2xpbmVzID0gdHJ1ZTsKICAgICAgICBidCgnaWYgKGZvbykgLy8gY29tbWVudFxuICAgIGJhcigpOycpOwogICAgICAgIGJ0KCdpZiAoZm9vKSAvLyBjb21tZW50XG4gICAgKGJhcigpKTsnKTsKICAgICAgICBidCgnaWYgKGZvbykgLy8gY29tbWVudFxuICAgIChiYXIoKSk7Jyk7CiAgICAgICAgYnQoJ2lmIChmb28pIC8vIGNvbW1lbnRcbiAgICAvYXNkZi87Jyk7CiAgICAgICAgYnQoJ2ZvbyA9IHtcbiAgICB4OiB5LCAvLyAjNDRcbiAgICB3OiB6IC8vICM0NFxufScpOwogICAgICAgIGJ0KCdzd2l0Y2ggKHgpIHtcbiAgICBjYXNlICJhIjpcbiAgICAgICAgLy8gY29tbWVudCBvbiBuZXdsaW5lXG4gICAgICAgIGJyZWFrO1xuICAgIGNhc2UgImIiOiAvLyBjb21tZW50IG9uIHNhbWUgbGluZVxuICAgICAgICBicmVhaztcbn0nKTsKICAgICAgICBidCgndGhpcy50eXBlID1cbiAgICB0aGlzLm9wdGlvbnMgPVxuICAgIC8vIGNvbW1lbnRcbiAgICB0aGlzLmVuYWJsZWQgbnVsbDsnKTsKICAgICAgICBidCgnc29tZU9ialxuICAgIC5zb21lRnVuYzEoKVxuICAgIC8vIFRoaXMgY29tbWVudCBzaG91bGQgbm90IGJyZWFrIHRoZSBpbmRlbnRcbiAgICAuc29tZUZ1bmMyKCk7Jyk7CgogICAgICAgIGJ0KCdpZiAodHJ1ZSB8fFxuIXRydWUpIHJldHVybjsnLCAnaWYgKHRydWUgfHxcbiAgICAhdHJ1ZSkgcmV0dXJuOycpOwoKICAgICAgICAvLyB0aGVzZSBhcmVuJ3QgcmVhZHkgeWV0LgogICAgICAgIC8vIGJ0KCdpZiAoZm9vKSAvLyBjb21tZW50XG4gICAgYmFyKCkgLyppKi8gKyBiYXooKSAvKmpcbiovICsgYXNkZigpOycpOwogICAgICAgIGJ0KCdpZlxuKGZvbylcbmlmXG4oYmFyKVxuaWZcbihiYXopXG53aGVlKCk7XG5hKCk7JywKICAgICAgICAgICAgJ2lmIChmb28pXG4gICAgaWYgKGJhcilcbiAgICAgICAgaWYgKGJheilcbiAgICAgICAgICAgIHdoZWUoKTtcbmEoKTsnKTsKICAgICAgICBidCgnaWZcbihmb28pXG5pZlxuKGJhcilcbmlmXG4oYmF6KVxud2hlZSgpO1xuZWxzZVxuYSgpOycsCiAgICAgICAgICAgICdpZiAoZm9vKVxuICAgIGlmIChiYXIpXG4gICAgICAgIGlmIChiYXopXG4gICAgICAgICAgICB3aGVlKCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGEoKTsnKTsKICAgICAgICBidCgnaWYgKGZvbykgYmFyKCk7XG5lbHNlXG5jYXIoKTsnLAogICAgICAgICAgICAnaWYgKGZvbykgYmFyKCk7XG5lbHNlXG4gICAgY2FyKCk7Jyk7CgogICAgICAgIGJ0KCdpZiAoZm9vKSBpZiAoYmFyKSBpZiAoYmF6KTtcbmEoKTsnLAogICAgICAgICAgICAnaWYgKGZvbylcbiAgICBpZiAoYmFyKVxuICAgICAgICBpZiAoYmF6KTtcbmEoKTsnKTsKICAgICAgICBidCgnaWYgKGZvbykgaWYgKGJhcikgaWYgKGJheikgd2hlZSgpO1xuYSgpOycsCiAgICAgICAgICAgICdpZiAoZm9vKVxuICAgIGlmIChiYXIpXG4gICAgICAgIGlmIChiYXopIHdoZWUoKTtcbmEoKTsnKTsKICAgICAgICBidCgnaWYgKGZvbykgYSgpXG5pZiAoYmFyKSBpZiAoYmF6KSB3aGVlKCk7XG5hKCk7JywKICAgICAgICAgICAgJ2lmIChmb28pIGEoKVxuaWYgKGJhcilcbiAgICBpZiAoYmF6KSB3aGVlKCk7XG5hKCk7Jyk7CiAgICAgICAgYnQoJ2lmIChmb28pO1xuaWYgKGJhcikgaWYgKGJheikgd2hlZSgpO1xuYSgpOycsCiAgICAgICAgICAgICdpZiAoZm9vKTtcbmlmIChiYXIpXG4gICAgaWYgKGJheikgd2hlZSgpO1xuYSgpOycpOwogICAgICAgIGJ0KCdpZiAob3B0aW9ucylcbicgKwogICAgICAgICAgICcgICAgZm9yICh2YXIgcCBpbiBvcHRpb25zKVxuJyArCiAgICAgICAgICAgJyAgICAgICAgdGhpc1twXSA9IG9wdGlvbnNbcF07Jyk7CiAgICAgICAgYnQoJ2lmIChvcHRpb25zKSBmb3IgKHZhciBwIGluIG9wdGlvbnMpIHRoaXNbcF0gPSBvcHRpb25zW3BdOycsCiAgICAgICAgICAgJ2lmIChvcHRpb25zKVxuICAgIGZvciAodmFyIHAgaW4gb3B0aW9ucykgdGhpc1twXSA9IG9wdGlvbnNbcF07Jyk7CgogICAgICAgIGJ0KCdpZiAob3B0aW9ucykgZG8gcSgpOyB3aGlsZSAoYigpKTsnLAogICAgICAgICAgICdpZiAob3B0aW9ucylcbiAgICBkbyBxKCk7IHdoaWxlIChiKCkpOycpOwogICAgICAgIGJ0KCdpZiAob3B0aW9ucykgZG87IHdoaWxlIChiKCkpOycsCiAgICAgICAgICAgJ2lmIChvcHRpb25zKVxuICAgIGRvOyB3aGlsZSAoYigpKTsnKTsKICAgICAgICBidCgnaWYgKG9wdGlvbnMpIHdoaWxlIChiKCkpIHEoKTsnLAogICAgICAgICAgICdpZiAob3B0aW9ucylcbiAgICB3aGlsZSAoYigpKSBxKCk7Jyk7CiAgICAgICAgYnQoJ2lmIChvcHRpb25zKSBkbyB3aGlsZSAoYigpKSBxKCk7IHdoaWxlIChhKCkpOycsCiAgICAgICAgICAgJ2lmIChvcHRpb25zKVxuICAgIGRvXG4gICAgICAgIHdoaWxlIChiKCkpIHEoKTsgd2hpbGUgKGEoKSk7Jyk7CgogICAgICAgIGJ0KCdmdW5jdGlvbiBmKGEsIGIsIGMsXG5kLCBlKSB7fScsCiAgICAgICAgICAgICdmdW5jdGlvbiBmKGEsIGIsIGMsXG4gICAgZCwgZSkge30nKTsKCiAgICAgICAgYnQoJ2Z1bmN0aW9uIGYoYSxiKSB7aWYoYSkgYigpfWZ1bmN0aW9uIGcoYSxiKSB7aWYoIWEpIGIoKX0nLAogICAgICAgICAgICAnZnVuY3Rpb24gZihhLCBiKSB7XG4gICAgaWYgKGEpIGIoKVxufVxuXG5mdW5jdGlvbiBnKGEsIGIpIHtcbiAgICBpZiAoIWEpIGIoKVxufScpOwogICAgICAgIGJ0KCdmdW5jdGlvbiBmKGEsYikge2lmKGEpIGIoKX1cblxuXG5cbmZ1bmN0aW9uIGcoYSxiKSB7aWYoIWEpIGIoKX0nLAogICAgICAgICAgICAnZnVuY3Rpb24gZihhLCBiKSB7XG4gICAgaWYgKGEpIGIoKVxufVxuXG5cblxuZnVuY3Rpb24gZyhhLCBiKSB7XG4gICAgaWYgKCFhKSBiKClcbn0nKTsKICAgICAgICAvLyBUaGlzIGlzIG5vdCB2YWxpZCBzeW50YXgsIGJ1dCBzdGlsbCB3YW50IHRvIGJlaGF2ZSByZWFzb25hYmx5IGFuZCBub3Qgc2lkZS1lZmZlY3QKICAgICAgICBidCgnKGlmKGEpIGIoKSkoaWYoYSkgYigpKScsCiAgICAgICAgICAgICcoXG4gICAgaWYgKGEpIGIoKSkoXG4gICAgaWYgKGEpIGIoKSknKTsKICAgICAgICBidCgnKGlmKGEpIGIoKSlcblxuXG4oaWYoYSkgYigpKScsCiAgICAgICAgICAgICcoXG4gICAgaWYgKGEpIGIoKSlcblxuXG4oXG4gICAgaWYgKGEpIGIoKSknKTsKCiAgICAgICAgLy8gc3BhY2UgYmV0d2VlbiBmdW5jdGlvbnMKICAgICAgICBidCgnLypcbiAqIGZvb1xuICovXG5mdW5jdGlvbiBmb28oKSB7fScpOwogICAgICAgIGJ0KCcvLyBhIG5pY2UgZnVuY3Rpb25cbmZ1bmN0aW9uIGZvbygpIHt9Jyk7CiAgICAgICAgYnQoJ2Z1bmN0aW9uIGZvbygpIHt9XG5mdW5jdGlvbiBmb28oKSB7fScsCiAgICAgICAgICAgICdmdW5jdGlvbiBmb28oKSB7fVxuXG5mdW5jdGlvbiBmb28oKSB7fScKICAgICAgICApOwoKICAgICAgICBidCgnW1xuICAgIGZ1bmN0aW9uKCkge31cbl0nKTsKCgoKICAgICAgICBidCgiaWZcbihhKVxuYigpOyIsICJpZiAoYSlcbiAgICBiKCk7Iik7CiAgICAgICAgYnQoJ3ZhciBhID1cbmZvbycsICd2YXIgYSA9XG4gICAgZm9vJyk7CiAgICAgICAgYnQoJ3ZhciBhID0ge1xuImEiOjEsXG4iYiI6Mn0nLCAidmFyIGEgPSB7XG4gICAgXCJhXCI6IDEsXG4gICAgXCJiXCI6IDJcbn0iKTsKICAgICAgICBidCgidmFyIGEgPSB7XG4nYSc6MSxcbidiJzoyfSIsICJ2YXIgYSA9IHtcbiAgICAnYSc6IDEsXG4gICAgJ2InOiAyXG59Iik7CiAgICAgICAgYnQoJ3ZhciBhID0gLyppKi8gImIiOycpOwogICAgICAgIGJ0KCd2YXIgYSA9IC8qaSovXG4iYiI7JywgJ3ZhciBhID0gLyppKi9cbiAgICAiYiI7Jyk7CiAgICAgICAgYnQoJ3ZhciBhID0gLyppKi9cbmI7JywgJ3ZhciBhID0gLyppKi9cbiAgICBiOycpOwogICAgICAgIGJ0KCd7XG5cblxuIngiXG59JywgJ3tcblxuXG4gICAgIngiXG59Jyk7CiAgICAgICAgYnQoJ2lmKGEgJiZcbmJcbnx8XG5jXG58fGRcbiYmXG5lKSBlID0gZicsICdpZiAoYSAmJlxuICAgIGIgfHxcbiAgICBjIHx8XG4gICAgZCAmJlxuICAgIGUpIGUgPSBmJyk7CiAgICAgICAgYnQoJ2lmKGEgJiZcbihiXG58fFxuY1xufHxkKVxuJiZcbmUpIGUgPSBmJywgJ2lmIChhICYmXG4gICAgKGIgfHxcbiAgICAgICAgYyB8fFxuICAgICAgICBkKSAmJlxuICAgIGUpIGUgPSBmJyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnXG5cbiJ4IicsICcieCInKTsKCiAgICAgICAgLy8gdGhpcyBiZWF2aW9yIGRpZmZlcnMgYmV0d2VlbiBqcyBhbmQgcHl0aG9uLCBkZWZhdWx0cyB0byB1bmxpbWl0ZWQgaW4ganMsIDEwIGluIHB5dGhvbgogICAgICAgIGJ0KCdhID0gMTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbmIgPSAyOycsCiAgICAgICAgICAgICdhID0gMTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbmIgPSAyOycpOwogICAgICAgIG9wdHMubWF4X3ByZXNlcnZlX25ld2xpbmVzID0gODsKICAgICAgICBidCgnYSA9IDE7XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5iID0gMjsnLAogICAgICAgICAgICAnYSA9IDE7XG5cblxuXG5cblxuXG5cbmIgPSAyOycpOwoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCgogICAgICAgIFVybGVuY29kZWQucnVuX3Rlc3RzKHNhbml0eXRlc3QpOwogICAgfQoKICAgIGJlYXV0aWZpZXJfdGVzdHMoKTsKICAgIGJlYXV0aWZpZXJfdW5jb252ZXJ0ZWRfdGVzdHMoKTsKfQoKaWYgKHR5cGVvZiBleHBvcnRzICE9PSAidW5kZWZpbmVkIikgewogICAgZXhwb3J0cy5ydW5famF2YXNjcmlwdF90ZXN0cyA9IHJ1bl9qYXZhc2NyaXB0X3Rlc3RzOwp9Cg=="></script>
    <script src="data:application/x-javascript;base64,LyoKICAgIEFVVE8tR0VORVJBVEVELiBETyBOT1QgTU9ESUZZLgogICAgU2NyaXB0OiB0ZXN0L2dlbmVyYXRlLXRlc3RzLmpzCiAgICBUZW1wbGF0ZTogdGVzdC9kYXRhL2Nzcy9ub2RlLm11c3RhY2hlCiAgICBEYXRhOiB0ZXN0L2RhdGEvY3NzL3Rlc3RzLmpzCiovCi8qanNoaW50IHVudXNlZDpmYWxzZSAqLwoKZnVuY3Rpb24gcnVuX2Nzc190ZXN0cyh0ZXN0X29iaiwgVXJsZW5jb2RlZCwganNfYmVhdXRpZnksIGh0bWxfYmVhdXRpZnksIGNzc19iZWF1dGlmeSkKewoKICAgIHZhciBkZWZhdWx0X29wdHMgPSB7CiAgICAgICAgaW5kZW50X3NpemU6IDQsCiAgICAgICAgaW5kZW50X2NoYXI6ICcgJywKICAgICAgICBwcmVzZXJ2ZV9uZXdsaW5lczogdHJ1ZSwKICAgICAgICBqc2xpbnRfaGFwcHk6IGZhbHNlLAogICAgICAgIGtlZXBfYXJyYXlfaW5kZW50YXRpb246IGZhbHNlLAogICAgICAgIGJyYWNlX3N0eWxlOiAnY29sbGFwc2UnLAogICAgICAgIHNwYWNlX2JlZm9yZV9jb25kaXRpb25hbDogdHJ1ZSwKICAgICAgICBicmVha19jaGFpbmVkX21ldGhvZHM6IGZhbHNlLAogICAgICAgIHNlbGVjdG9yX3NlcGFyYXRvcjogJ1xuJywKICAgICAgICBlbmRfd2l0aF9uZXdsaW5lOiBmYWxzZQogICAgfTsKICAgIHZhciBvcHRzOwoKICAgIGRlZmF1bHRfb3B0cy5pbmRlbnRfc2l6ZSA9IDE7CiAgICBkZWZhdWx0X29wdHMuaW5kZW50X2NoYXIgPSAnXHQnOwogICAgZGVmYXVsdF9vcHRzLnNlbGVjdG9yX3NlcGFyYXRvcl9uZXdsaW5lID0gdHJ1ZTsKICAgIGRlZmF1bHRfb3B0cy5lbmRfd2l0aF9uZXdsaW5lID0gZmFsc2U7CiAgICBkZWZhdWx0X29wdHMubmV3bGluZV9iZXR3ZWVuX3J1bGVzID0gZmFsc2U7CiAgICBkZWZhdWx0X29wdHMuc3BhY2VfYXJvdW5kX3NlbGVjdG9yX3NlcGFyYXRvciA9IGZhbHNlOwoKICAgIGZ1bmN0aW9uIHJlc2V0X29wdGlvbnMoKQogICAgewogICAgICAgIG9wdHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRlZmF1bHRfb3B0cykpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRlc3RfY3NzX2JlYXV0aWZpZXIoaW5wdXQpCiAgICB7CiAgICAgICAgcmV0dXJuIGNzc19iZWF1dGlmeShpbnB1dCwgb3B0cyk7CiAgICB9CgogICAgdmFyIHNhbml0eXRlc3Q7CgogICAgLy8gdGVzdCB0aGUgaW5wdXQgb24gYmVhdXRpZmllciB3aXRoIHRoZSBjdXJyZW50IGZsYWcgc2V0dGluZ3MKICAgIC8vIGRvZXMgbm90IGNoZWNrIHRoZSBpbmRlbnRhdGlvbiAvIHN1cnJvdW5kaW5ncyBhcyBidCgpIGRvZXMKICAgIGZ1bmN0aW9uIHRlc3RfZnJhZ21lbnQoaW5wdXQsIGV4cGVjdGVkKQogICAgewogICAgICAgIGV4cGVjdGVkID0gZXhwZWN0ZWQgfHwgZXhwZWN0ZWQgPT09ICcnID8gZXhwZWN0ZWQgOiBpbnB1dDsKICAgICAgICBzYW5pdHl0ZXN0LmV4cGVjdChpbnB1dCwgZXhwZWN0ZWQpOwogICAgICAgIC8vIGlmIHRoZSBleHBlY3RlZCBpcyBkaWZmZXJlbnQgZnJvbSBpbnB1dCwgcnVuIGl0IGFnYWluCiAgICAgICAgLy8gZXhwZWN0ZWQgb3V0cHV0IHNob3VsZCBiZSB1bmNoYW5nZWQgd2hlbiBydW4gdHdpY2UuCiAgICAgICAgaWYgKGV4cGVjdGVkICE9PSBpbnB1dCkgewogICAgICAgICAgICBzYW5pdHl0ZXN0LmV4cGVjdChleHBlY3RlZCwgZXhwZWN0ZWQpOwogICAgICAgIH0KCiAgICAgICAgLy8gRXZlcnl3aGVyZSB3ZSBkbyBuZXdsaW5lcywgdGhleSBzaG91bGQgYmUgcmVwbGFjZWQgd2l0aCBvcHRzLmVvbAogICAgICAgIG9wdHMuZW9sID0gJ1xyXFxuJzsKICAgICAgICBleHBlY3RlZCA9IGV4cGVjdGVkLnJlcGxhY2UoL1tcbl0vZywgJ1xyXG4nKTsKICAgICAgICBzYW5pdHl0ZXN0LmV4cGVjdChpbnB1dCwgZXhwZWN0ZWQpOwogICAgICAgIGlucHV0ID0gaW5wdXQucmVwbGFjZSgvW1xuXS9nLCAnXHJcbicpOwogICAgICAgIHNhbml0eXRlc3QuZXhwZWN0KGlucHV0LCBleHBlY3RlZCk7CiAgICAgICAgb3B0cy5lb2wgPSAnXG4nOwogICAgfQoKICAgIC8vIHRlc3QgY3NzCiAgICBmdW5jdGlvbiB0KGlucHV0LCBleHBlY3RhdGlvbikKICAgIHsKICAgICAgICB2YXIgd3JhcHBlZF9pbnB1dCwgd3JhcHBlZF9leHBlY3RhdGlvbjsKCiAgICAgICAgZXhwZWN0YXRpb24gPSBleHBlY3RhdGlvbiB8fCBleHBlY3RhdGlvbiA9PT0gJycgPyBleHBlY3RhdGlvbiA6IGlucHV0OwogICAgICAgIHNhbml0eXRlc3QudGVzdF9mdW5jdGlvbih0ZXN0X2Nzc19iZWF1dGlmaWVyLCAnY3NzX2JlYXV0aWZ5Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudChpbnB1dCwgZXhwZWN0YXRpb24pOwogICAgfQoKICAgIGZ1bmN0aW9uIHVuaWNvZGVfY2hhcih2YWx1ZSkgewogICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHZhbHVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBiZWF1dGlmaWVyX3Rlc3RzKCkKICAgIHsKICAgICAgICBzYW5pdHl0ZXN0ID0gdGVzdF9vYmo7CgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIHQoIi50YWJzIHt9Iik7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBFbmQgV2l0aCBOZXdsaW5lIC0gKGVvZiA9ICJcbiIpCiAgICAgICAgb3B0cy5lbmRfd2l0aF9uZXdsaW5lID0gdHJ1ZTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCcnLCAnXG4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCcgICAudGFic3t9JywgJyAgIC50YWJzIHt9XG4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCcgICBcblxuLnRhYnN7fVxuXG5cblxuJywgJyAgIC50YWJzIHt9XG4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCdcbicpOwoKICAgICAgICAvLyBFbmQgV2l0aCBOZXdsaW5lIC0gKGVvZiA9ICIiKQogICAgICAgIG9wdHMuZW5kX3dpdGhfbmV3bGluZSA9IGZhbHNlOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJycpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJyAgIC50YWJze30nLCAnICAgLnRhYnMge30nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCcgICBcblxuLnRhYnN7fVxuXG5cblxuJywgJyAgIC50YWJzIHt9Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnXG4nLCAnJyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBFbXB0eSBicmFjZXMKICAgICAgICB0KCcudGFic3t9JywgJy50YWJzIHt9Jyk7CiAgICAgICAgdCgnLnRhYnMgeyB9JywgJy50YWJzIHt9Jyk7CiAgICAgICAgdCgnLnRhYnMgICAgeyAgICB9JywgJy50YWJzIHt9Jyk7CiAgICAgICAgdCgnLnRhYnMgICAgXG57XG4gICAgXG4gIH0nLCAnLnRhYnMge30nKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIAogICAgICAgIHQoJyNjYm94T3ZlcmxheSB7XG5cdGJhY2tncm91bmQ6IHVybChpbWFnZXMvb3ZlcmxheS5wbmcpIHJlcGVhdCAwIDA7XG5cdG9wYWNpdHk6IDAuOTtcblx0ZmlsdGVyOiBhbHBoYShvcGFjaXR5ID0gOTApO1xufScsICcjY2JveE92ZXJsYXkge1xuXHRiYWNrZ3JvdW5kOiB1cmwoaW1hZ2VzL292ZXJsYXkucG5nKSByZXBlYXQgMCAwO1xuXHRvcGFjaXR5OiAwLjk7XG5cdGZpbHRlcjogYWxwaGEob3BhY2l0eT05MCk7XG59Jyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBTcGFjZSBBcm91bmQgU2VsZWN0b3IgU2VwYXJhdG9yIC0gKHNwYWNlID0gIiAiKQogICAgICAgIG9wdHMuc3BhY2VfYXJvdW5kX3NlbGVjdG9yX3NlcGFyYXRvciA9IHRydWU7CiAgICAgICAgdCgnYT5ie30nLCAnYSA+IGIge30nKTsKICAgICAgICB0KCdhfmJ7fScsICdhIH4gYiB7fScpOwogICAgICAgIHQoJ2ErYnt9JywgJ2EgKyBiIHt9Jyk7CiAgICAgICAgdCgnYStiPmN7fScsICdhICsgYiA+IGMge30nKTsKCiAgICAgICAgLy8gU3BhY2UgQXJvdW5kIFNlbGVjdG9yIFNlcGFyYXRvciAtIChzcGFjZSA9ICIiKQogICAgICAgIG9wdHMuc3BhY2VfYXJvdW5kX3NlbGVjdG9yX3NlcGFyYXRvciA9IGZhbHNlOwogICAgICAgIHQoJ2E+Ynt9JywgJ2E+YiB7fScpOwogICAgICAgIHQoJ2F+Ynt9JywgJ2F+YiB7fScpOwogICAgICAgIHQoJ2ErYnt9JywgJ2ErYiB7fScpOwogICAgICAgIHQoJ2ErYj5je30nLCAnYStiPmMge30nKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIFNlbGVjdG9yIFNlcGFyYXRvciAtIChzZXBhcmF0b3IgPSAiICIsIHNlcGFyYXRvcjEgPSAiICIpCiAgICAgICAgb3B0cy5zZWxlY3Rvcl9zZXBhcmF0b3JfbmV3bGluZSA9IGZhbHNlOwogICAgICAgIG9wdHMuc2VsZWN0b3Jfc2VwYXJhdG9yID0gIiAiOwogICAgICAgIHQoJyNibGEsICNmb297Y29sb3I6Z3JlZW59JywgJyNibGEsICNmb28ge1xuXHRjb2xvcjogZ3JlZW5cbn0nKTsKICAgICAgICB0KCdAbWVkaWEgcHJpbnQgey50YWJ7fX0nLCAnQG1lZGlhIHByaW50IHtcblx0LnRhYiB7fVxufScpOwogICAgICAgIHQoJ0BtZWRpYSBwcmludCB7LnRhYiwuYmF0e319JywgJ0BtZWRpYSBwcmludCB7XG5cdC50YWIsIC5iYXQge31cbn0nKTsKICAgICAgICB0KCcjYmxhLCAjZm9ve2NvbG9yOmJsYWNrfScsICcjYmxhLCAjZm9vIHtcblx0Y29sb3I6IGJsYWNrXG59Jyk7CiAgICAgICAgdCgnYTpmaXJzdC1jaGlsZCxhOmZpcnN0LWNoaWxke2NvbG9yOnJlZDtkaXY6Zmlyc3QtY2hpbGQsZGl2OmhvdmVye2NvbG9yOmJsYWNrO319JywgJ2E6Zmlyc3QtY2hpbGQsIGE6Zmlyc3QtY2hpbGQge1xuXHRjb2xvcjogcmVkO1xuXHRkaXY6Zmlyc3QtY2hpbGQsIGRpdjpob3ZlciB7XG5cdFx0Y29sb3I6IGJsYWNrO1xuXHR9XG59Jyk7CgogICAgICAgIC8vIFNlbGVjdG9yIFNlcGFyYXRvciAtIChzZXBhcmF0b3IgPSAiICIsIHNlcGFyYXRvcjEgPSAiICIpCiAgICAgICAgb3B0cy5zZWxlY3Rvcl9zZXBhcmF0b3JfbmV3bGluZSA9IGZhbHNlOwogICAgICAgIG9wdHMuc2VsZWN0b3Jfc2VwYXJhdG9yID0gIiAgIjsKICAgICAgICB0KCcjYmxhLCAjZm9ve2NvbG9yOmdyZWVufScsICcjYmxhLCAjZm9vIHtcblx0Y29sb3I6IGdyZWVuXG59Jyk7CiAgICAgICAgdCgnQG1lZGlhIHByaW50IHsudGFie319JywgJ0BtZWRpYSBwcmludCB7XG5cdC50YWIge31cbn0nKTsKICAgICAgICB0KCdAbWVkaWEgcHJpbnQgey50YWIsLmJhdHt9fScsICdAbWVkaWEgcHJpbnQge1xuXHQudGFiLCAuYmF0IHt9XG59Jyk7CiAgICAgICAgdCgnI2JsYSwgI2Zvb3tjb2xvcjpibGFja30nLCAnI2JsYSwgI2ZvbyB7XG5cdGNvbG9yOiBibGFja1xufScpOwogICAgICAgIHQoJ2E6Zmlyc3QtY2hpbGQsYTpmaXJzdC1jaGlsZHtjb2xvcjpyZWQ7ZGl2OmZpcnN0LWNoaWxkLGRpdjpob3Zlcntjb2xvcjpibGFjazt9fScsICdhOmZpcnN0LWNoaWxkLCBhOmZpcnN0LWNoaWxkIHtcblx0Y29sb3I6IHJlZDtcblx0ZGl2OmZpcnN0LWNoaWxkLCBkaXY6aG92ZXIge1xuXHRcdGNvbG9yOiBibGFjaztcblx0fVxufScpOwoKICAgICAgICAvLyBTZWxlY3RvciBTZXBhcmF0b3IgLSAoc2VwYXJhdG9yID0gIlxuIiwgc2VwYXJhdG9yMSA9ICJcblx0IikKICAgICAgICBvcHRzLnNlbGVjdG9yX3NlcGFyYXRvcl9uZXdsaW5lID0gdHJ1ZTsKICAgICAgICBvcHRzLnNlbGVjdG9yX3NlcGFyYXRvciA9ICIgIjsKICAgICAgICB0KCcjYmxhLCAjZm9ve2NvbG9yOmdyZWVufScsICcjYmxhLFxuI2ZvbyB7XG5cdGNvbG9yOiBncmVlblxufScpOwogICAgICAgIHQoJ0BtZWRpYSBwcmludCB7LnRhYnt9fScsICdAbWVkaWEgcHJpbnQge1xuXHQudGFiIHt9XG59Jyk7CiAgICAgICAgdCgnQG1lZGlhIHByaW50IHsudGFiLC5iYXR7fX0nLCAnQG1lZGlhIHByaW50IHtcblx0LnRhYixcblx0LmJhdCB7fVxufScpOwogICAgICAgIHQoJyNibGEsICNmb297Y29sb3I6YmxhY2t9JywgJyNibGEsXG4jZm9vIHtcblx0Y29sb3I6IGJsYWNrXG59Jyk7CiAgICAgICAgdCgnYTpmaXJzdC1jaGlsZCxhOmZpcnN0LWNoaWxke2NvbG9yOnJlZDtkaXY6Zmlyc3QtY2hpbGQsZGl2OmhvdmVye2NvbG9yOmJsYWNrO319JywgJ2E6Zmlyc3QtY2hpbGQsXG5hOmZpcnN0LWNoaWxkIHtcblx0Y29sb3I6IHJlZDtcblx0ZGl2OmZpcnN0LWNoaWxkLFxuXHRkaXY6aG92ZXIge1xuXHRcdGNvbG9yOiBibGFjaztcblx0fVxufScpOwoKICAgICAgICAvLyBTZWxlY3RvciBTZXBhcmF0b3IgLSAoc2VwYXJhdG9yID0gIlxuIiwgc2VwYXJhdG9yMSA9ICJcblx0IikKICAgICAgICBvcHRzLnNlbGVjdG9yX3NlcGFyYXRvcl9uZXdsaW5lID0gdHJ1ZTsKICAgICAgICBvcHRzLnNlbGVjdG9yX3NlcGFyYXRvciA9ICIgICI7CiAgICAgICAgdCgnI2JsYSwgI2Zvb3tjb2xvcjpncmVlbn0nLCAnI2JsYSxcbiNmb28ge1xuXHRjb2xvcjogZ3JlZW5cbn0nKTsKICAgICAgICB0KCdAbWVkaWEgcHJpbnQgey50YWJ7fX0nLCAnQG1lZGlhIHByaW50IHtcblx0LnRhYiB7fVxufScpOwogICAgICAgIHQoJ0BtZWRpYSBwcmludCB7LnRhYiwuYmF0e319JywgJ0BtZWRpYSBwcmludCB7XG5cdC50YWIsXG5cdC5iYXQge31cbn0nKTsKICAgICAgICB0KCcjYmxhLCAjZm9ve2NvbG9yOmJsYWNrfScsICcjYmxhLFxuI2ZvbyB7XG5cdGNvbG9yOiBibGFja1xufScpOwogICAgICAgIHQoJ2E6Zmlyc3QtY2hpbGQsYTpmaXJzdC1jaGlsZHtjb2xvcjpyZWQ7ZGl2OmZpcnN0LWNoaWxkLGRpdjpob3Zlcntjb2xvcjpibGFjazt9fScsICdhOmZpcnN0LWNoaWxkLFxuYTpmaXJzdC1jaGlsZCB7XG5cdGNvbG9yOiByZWQ7XG5cdGRpdjpmaXJzdC1jaGlsZCxcblx0ZGl2OmhvdmVyIHtcblx0XHRjb2xvcjogYmxhY2s7XG5cdH1cbn0nKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIE5ld2xpbmUgQmV0d2VlbiBSdWxlcyAtIChzZXBhcmF0b3IgPSAiXG4iKQogICAgICAgIG9wdHMubmV3bGluZV9iZXR3ZWVuX3J1bGVzID0gdHJ1ZTsKICAgICAgICB0KCcuZGl2IHt9XG4uc3BhbiB7fScsICcuZGl2IHt9XG5cbi5zcGFuIHt9Jyk7CiAgICAgICAgdCgnLmRpdnt9XG4gICBcbi5zcGFue30nLCAnLmRpdiB7fVxuXG4uc3BhbiB7fScpOwogICAgICAgIHQoJy5kaXYge30gICAgXG4gIFxuLnNwYW4geyB9IFxuJywgJy5kaXYge31cblxuLnNwYW4ge30nKTsKICAgICAgICB0KCcuZGl2IHtcbiAgICBcbn0gXG4gIC5zcGFuIHtcbiB9ICAnLCAnLmRpdiB7fVxuXG4uc3BhbiB7fScpOwogICAgICAgIHQoJy5zZWxlY3RvcjEge1xuXHRtYXJnaW46IDA7IC8qIFRoaXMgaXMgYSBjb21tZW50IGluY2x1ZGluZyBhbiB1cmwgaHR0cDovL2RvbWFpbi5jb20vcGF0aC90by9maWxlLmV4dCAqL1xufVxuLmRpdntoZWlnaHQ6MTVweDt9JywgJy5zZWxlY3RvcjEge1xuXHRtYXJnaW46IDA7XG5cdC8qIFRoaXMgaXMgYSBjb21tZW50IGluY2x1ZGluZyBhbiB1cmwgaHR0cDovL2RvbWFpbi5jb20vcGF0aC90by9maWxlLmV4dCAqL1xufVxuXG4uZGl2IHtcblx0aGVpZ2h0OiAxNXB4O1xufScpOwogICAgICAgIHQoJy50YWJze3dpZHRoOjEwcHg7Ly9lbmQgb2YgbGluZSBjb21tZW50XG5oZWlnaHQ6MTBweDsvL2Fub3RoZXJcbn1cbi5kaXZ7aGVpZ2h0OjE1cHg7fScsICcudGFicyB7XG5cdHdpZHRoOiAxMHB4OyAvL2VuZCBvZiBsaW5lIGNvbW1lbnRcblx0aGVpZ2h0OiAxMHB4OyAvL2Fub3RoZXJcbn1cblxuLmRpdiB7XG5cdGhlaWdodDogMTVweDtcbn0nKTsKICAgICAgICB0KCcjZm9vIHtcblx0YmFja2dyb3VuZC1pbWFnZTogdXJsKGZvb0AyeC5wbmcpO1xuXHRAZm9udC1mYWNlIHtcblx0XHRmb250LWZhbWlseTogIkJpdHN0cmVhbSBWZXJhIFNlcmlmIEJvbGQiO1xuXHRcdHNyYzogdXJsKCJodHRwOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL0BhcGkvZGVraS9maWxlcy8yOTM0Lz1WZXJhU2VCZC50dGYiKTtcblx0fVxufVxuLmRpdntoZWlnaHQ6MTVweDt9JywgJyNmb28ge1xuXHRiYWNrZ3JvdW5kLWltYWdlOiB1cmwoZm9vQDJ4LnBuZyk7XG5cdEBmb250LWZhY2Uge1xuXHRcdGZvbnQtZmFtaWx5OiAiQml0c3RyZWFtIFZlcmEgU2VyaWYgQm9sZCI7XG5cdFx0c3JjOiB1cmwoImh0dHA6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvQGFwaS9kZWtpL2ZpbGVzLzI5MzQvPVZlcmFTZUJkLnR0ZiIpO1xuXHR9XG59XG5cbi5kaXYge1xuXHRoZWlnaHQ6IDE1cHg7XG59Jyk7CiAgICAgICAgdCgnQG1lZGlhIHNjcmVlbiB7XG5cdCNmb286aG92ZXIge1xuXHRcdGJhY2tncm91bmQtaW1hZ2U6IHVybChmb29AMngucG5nKTtcblx0fVxuXHRAZm9udC1mYWNlIHtcblx0XHRmb250LWZhbWlseTogIkJpdHN0cmVhbSBWZXJhIFNlcmlmIEJvbGQiO1xuXHRcdHNyYzogdXJsKCJodHRwOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL0BhcGkvZGVraS9maWxlcy8yOTM0Lz1WZXJhU2VCZC50dGYiKTtcblx0fVxufVxuLmRpdntoZWlnaHQ6MTVweDt9JywgJ0BtZWRpYSBzY3JlZW4ge1xuXHQjZm9vOmhvdmVyIHtcblx0XHRiYWNrZ3JvdW5kLWltYWdlOiB1cmwoZm9vQDJ4LnBuZyk7XG5cdH1cblx0QGZvbnQtZmFjZSB7XG5cdFx0Zm9udC1mYW1pbHk6ICJCaXRzdHJlYW0gVmVyYSBTZXJpZiBCb2xkIjtcblx0XHRzcmM6IHVybCgiaHR0cDovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9AYXBpL2Rla2kvZmlsZXMvMjkzNC89VmVyYVNlQmQudHRmIik7XG5cdH1cbn1cblxuLmRpdiB7XG5cdGhlaWdodDogMTVweDtcbn0nKTsKICAgICAgICB0KCdAZm9udC1mYWNlIHtcblx0Zm9udC1mYW1pbHk6ICJCaXRzdHJlYW0gVmVyYSBTZXJpZiBCb2xkIjtcblx0c3JjOiB1cmwoImh0dHA6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvQGFwaS9kZWtpL2ZpbGVzLzI5MzQvPVZlcmFTZUJkLnR0ZiIpO1xufVxuQG1lZGlhIHNjcmVlbiB7XG5cdCNmb286aG92ZXIge1xuXHRcdGJhY2tncm91bmQtaW1hZ2U6IHVybChmb28ucG5nKTtcblx0fVxuXHRAbWVkaWEgc2NyZWVuIGFuZCAobWluLWRldmljZS1waXhlbC1yYXRpbzogMikge1xuXHRcdEBmb250LWZhY2Uge1xuXHRcdFx0Zm9udC1mYW1pbHk6ICJIZWx2ZXRpY2EgTmV1ZSJcblx0XHR9XG5cdFx0I2Zvbzpob3ZlciB7XG5cdFx0XHRiYWNrZ3JvdW5kLWltYWdlOiB1cmwoZm9vQDJ4LnBuZyk7XG5cdFx0fVxuXHR9XG59JywgJ0Bmb250LWZhY2Uge1xuXHRmb250LWZhbWlseTogIkJpdHN0cmVhbSBWZXJhIFNlcmlmIEJvbGQiO1xuXHRzcmM6IHVybCgiaHR0cDovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9AYXBpL2Rla2kvZmlsZXMvMjkzNC89VmVyYVNlQmQudHRmIik7XG59XG5cbkBtZWRpYSBzY3JlZW4ge1xuXHQjZm9vOmhvdmVyIHtcblx0XHRiYWNrZ3JvdW5kLWltYWdlOiB1cmwoZm9vLnBuZyk7XG5cdH1cblx0QG1lZGlhIHNjcmVlbiBhbmQgKG1pbi1kZXZpY2UtcGl4ZWwtcmF0aW86IDIpIHtcblx0XHRAZm9udC1mYWNlIHtcblx0XHRcdGZvbnQtZmFtaWx5OiAiSGVsdmV0aWNhIE5ldWUiXG5cdFx0fVxuXHRcdCNmb286aG92ZXIge1xuXHRcdFx0YmFja2dyb3VuZC1pbWFnZTogdXJsKGZvb0AyeC5wbmcpO1xuXHRcdH1cblx0fVxufScpOwogICAgICAgIHQoJ2E6Zmlyc3QtY2hpbGR7Y29sb3I6cmVkO2RpdjpmaXJzdC1jaGlsZHtjb2xvcjpibGFjazt9fVxuLmRpdntoZWlnaHQ6MTVweDt9JywgJ2E6Zmlyc3QtY2hpbGQge1xuXHRjb2xvcjogcmVkO1xuXHRkaXY6Zmlyc3QtY2hpbGQge1xuXHRcdGNvbG9yOiBibGFjaztcblx0fVxufVxuXG4uZGl2IHtcblx0aGVpZ2h0OiAxNXB4O1xufScpOwogICAgICAgIHQoJ2E6Zmlyc3QtY2hpbGR7Y29sb3I6cmVkO2Rpdjpub3QoLnBlcSl7Y29sb3I6YmxhY2s7fX1cbi5kaXZ7aGVpZ2h0OjE1cHg7fScsICdhOmZpcnN0LWNoaWxkIHtcblx0Y29sb3I6IHJlZDtcblx0ZGl2Om5vdCgucGVxKSB7XG5cdFx0Y29sb3I6IGJsYWNrO1xuXHR9XG59XG5cbi5kaXYge1xuXHRoZWlnaHQ6IDE1cHg7XG59Jyk7CgogICAgICAgIC8vIE5ld2xpbmUgQmV0d2VlbiBSdWxlcyAtIChzZXBhcmF0b3IgPSAiIikKICAgICAgICBvcHRzLm5ld2xpbmVfYmV0d2Vlbl9ydWxlcyA9IGZhbHNlOwogICAgICAgIHQoJy5kaXYge31cbi5zcGFuIHt9Jyk7CiAgICAgICAgdCgnLmRpdnt9XG4gICBcbi5zcGFue30nLCAnLmRpdiB7fVxuLnNwYW4ge30nKTsKICAgICAgICB0KCcuZGl2IHt9ICAgIFxuICBcbi5zcGFuIHsgfSBcbicsICcuZGl2IHt9XG4uc3BhbiB7fScpOwogICAgICAgIHQoJy5kaXYge1xuICAgIFxufSBcbiAgLnNwYW4ge1xuIH0gICcsICcuZGl2IHt9XG4uc3BhbiB7fScpOwogICAgICAgIHQoJy5zZWxlY3RvcjEge1xuXHRtYXJnaW46IDA7IC8qIFRoaXMgaXMgYSBjb21tZW50IGluY2x1ZGluZyBhbiB1cmwgaHR0cDovL2RvbWFpbi5jb20vcGF0aC90by9maWxlLmV4dCAqL1xufVxuLmRpdntoZWlnaHQ6MTVweDt9JywgJy5zZWxlY3RvcjEge1xuXHRtYXJnaW46IDA7XG5cdC8qIFRoaXMgaXMgYSBjb21tZW50IGluY2x1ZGluZyBhbiB1cmwgaHR0cDovL2RvbWFpbi5jb20vcGF0aC90by9maWxlLmV4dCAqL1xufVxuLmRpdiB7XG5cdGhlaWdodDogMTVweDtcbn0nKTsKICAgICAgICB0KCcudGFic3t3aWR0aDoxMHB4Oy8vZW5kIG9mIGxpbmUgY29tbWVudFxuaGVpZ2h0OjEwcHg7Ly9hbm90aGVyXG59XG4uZGl2e2hlaWdodDoxNXB4O30nLCAnLnRhYnMge1xuXHR3aWR0aDogMTBweDsgLy9lbmQgb2YgbGluZSBjb21tZW50XG5cdGhlaWdodDogMTBweDsgLy9hbm90aGVyXG59XG4uZGl2IHtcblx0aGVpZ2h0OiAxNXB4O1xufScpOwogICAgICAgIHQoJyNmb28ge1xuXHRiYWNrZ3JvdW5kLWltYWdlOiB1cmwoZm9vQDJ4LnBuZyk7XG5cdEBmb250LWZhY2Uge1xuXHRcdGZvbnQtZmFtaWx5OiAiQml0c3RyZWFtIFZlcmEgU2VyaWYgQm9sZCI7XG5cdFx0c3JjOiB1cmwoImh0dHA6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvQGFwaS9kZWtpL2ZpbGVzLzI5MzQvPVZlcmFTZUJkLnR0ZiIpO1xuXHR9XG59XG4uZGl2e2hlaWdodDoxNXB4O30nLCAnI2ZvbyB7XG5cdGJhY2tncm91bmQtaW1hZ2U6IHVybChmb29AMngucG5nKTtcblx0QGZvbnQtZmFjZSB7XG5cdFx0Zm9udC1mYW1pbHk6ICJCaXRzdHJlYW0gVmVyYSBTZXJpZiBCb2xkIjtcblx0XHRzcmM6IHVybCgiaHR0cDovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9AYXBpL2Rla2kvZmlsZXMvMjkzNC89VmVyYVNlQmQudHRmIik7XG5cdH1cbn1cbi5kaXYge1xuXHRoZWlnaHQ6IDE1cHg7XG59Jyk7CiAgICAgICAgdCgnQG1lZGlhIHNjcmVlbiB7XG5cdCNmb286aG92ZXIge1xuXHRcdGJhY2tncm91bmQtaW1hZ2U6IHVybChmb29AMngucG5nKTtcblx0fVxuXHRAZm9udC1mYWNlIHtcblx0XHRmb250LWZhbWlseTogIkJpdHN0cmVhbSBWZXJhIFNlcmlmIEJvbGQiO1xuXHRcdHNyYzogdXJsKCJodHRwOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL0BhcGkvZGVraS9maWxlcy8yOTM0Lz1WZXJhU2VCZC50dGYiKTtcblx0fVxufVxuLmRpdntoZWlnaHQ6MTVweDt9JywgJ0BtZWRpYSBzY3JlZW4ge1xuXHQjZm9vOmhvdmVyIHtcblx0XHRiYWNrZ3JvdW5kLWltYWdlOiB1cmwoZm9vQDJ4LnBuZyk7XG5cdH1cblx0QGZvbnQtZmFjZSB7XG5cdFx0Zm9udC1mYW1pbHk6ICJCaXRzdHJlYW0gVmVyYSBTZXJpZiBCb2xkIjtcblx0XHRzcmM6IHVybCgiaHR0cDovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9AYXBpL2Rla2kvZmlsZXMvMjkzNC89VmVyYVNlQmQudHRmIik7XG5cdH1cbn1cbi5kaXYge1xuXHRoZWlnaHQ6IDE1cHg7XG59Jyk7CiAgICAgICAgdCgnQGZvbnQtZmFjZSB7XG5cdGZvbnQtZmFtaWx5OiAiQml0c3RyZWFtIFZlcmEgU2VyaWYgQm9sZCI7XG5cdHNyYzogdXJsKCJodHRwOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL0BhcGkvZGVraS9maWxlcy8yOTM0Lz1WZXJhU2VCZC50dGYiKTtcbn1cbkBtZWRpYSBzY3JlZW4ge1xuXHQjZm9vOmhvdmVyIHtcblx0XHRiYWNrZ3JvdW5kLWltYWdlOiB1cmwoZm9vLnBuZyk7XG5cdH1cblx0QG1lZGlhIHNjcmVlbiBhbmQgKG1pbi1kZXZpY2UtcGl4ZWwtcmF0aW86IDIpIHtcblx0XHRAZm9udC1mYWNlIHtcblx0XHRcdGZvbnQtZmFtaWx5OiAiSGVsdmV0aWNhIE5ldWUiXG5cdFx0fVxuXHRcdCNmb286aG92ZXIge1xuXHRcdFx0YmFja2dyb3VuZC1pbWFnZTogdXJsKGZvb0AyeC5wbmcpO1xuXHRcdH1cblx0fVxufScpOwogICAgICAgIHQoJ2E6Zmlyc3QtY2hpbGR7Y29sb3I6cmVkO2RpdjpmaXJzdC1jaGlsZHtjb2xvcjpibGFjazt9fVxuLmRpdntoZWlnaHQ6MTVweDt9JywgJ2E6Zmlyc3QtY2hpbGQge1xuXHRjb2xvcjogcmVkO1xuXHRkaXY6Zmlyc3QtY2hpbGQge1xuXHRcdGNvbG9yOiBibGFjaztcblx0fVxufVxuLmRpdiB7XG5cdGhlaWdodDogMTVweDtcbn0nKTsKICAgICAgICB0KCdhOmZpcnN0LWNoaWxke2NvbG9yOnJlZDtkaXY6bm90KC5wZXEpe2NvbG9yOmJsYWNrO319XG4uZGl2e2hlaWdodDoxNXB4O30nLCAnYTpmaXJzdC1jaGlsZCB7XG5cdGNvbG9yOiByZWQ7XG5cdGRpdjpub3QoLnBlcSkge1xuXHRcdGNvbG9yOiBibGFjaztcblx0fVxufVxuLmRpdiB7XG5cdGhlaWdodDogMTVweDtcbn0nKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIEZ1bmN0aW9ucyBicmFjZXMKICAgICAgICB0KCcudGFicygpe30nLCAnLnRhYnMoKSB7fScpOwogICAgICAgIHQoJy50YWJzICgpe30nLCAnLnRhYnMgKCkge30nKTsKICAgICAgICB0KCcudGFicyAocGEsIHBhKDEsMikpLCAuY29scyB7IH0nLCAnLnRhYnMgKHBhLCBwYSgxLCAyKSksXG4uY29scyB7fScpOwogICAgICAgIHQoJy50YWJzKHBhLCBwYSgxLDIpKSwgLmNvbHMgeyB9JywgJy50YWJzKHBhLCBwYSgxLCAyKSksXG4uY29scyB7fScpOwogICAgICAgIHQoJy50YWJzICggICApICAgeyAgICB9JywgJy50YWJzICgpIHt9Jyk7CiAgICAgICAgdCgnLnRhYnMoICAgKSAgIHsgICAgfScsICcudGFicygpIHt9Jyk7CiAgICAgICAgdCgnLnRhYnMgICh0LCB0MikgIFxue1xuICBrZXk6IHZhbChwMSAgLHAyKTsgIFxuICB9JywgJy50YWJzICh0LCB0Mikge1xuXHRrZXk6IHZhbChwMSwgcDIpO1xufScpOwogICAgICAgIHQoJy5ib3gtc2hhZG93KEBzaGFkb3c6IDAgMXB4IDNweCByZ2JhKDAsIDAsIDAsIC4yNSkpIHtcblx0LXdlYmtpdC1ib3gtc2hhZG93OiBAc2hhZG93O1xuXHQtbW96LWJveC1zaGFkb3c6IEBzaGFkb3c7XG5cdGJveC1zaGFkb3c6IEBzaGFkb3c7XG59Jyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBDb21tZW50cwogICAgICAgIHQoJy8qIHRlc3QgKi8nKTsKICAgICAgICB0KCcudGFic3svKiB0ZXN0ICovfScsICcudGFicyB7XG5cdC8qIHRlc3QgKi9cbn0nKTsKICAgICAgICB0KCcudGFic3svKiB0ZXN0ICovfScsICcudGFicyB7XG5cdC8qIHRlc3QgKi9cbn0nKTsKICAgICAgICB0KCcvKiBoZWFkZXIgKi8udGFicyB7fScsICcvKiBoZWFkZXIgKi9cblxuLnRhYnMge30nKTsKICAgICAgICB0KCcudGFicyB7XG4vKiBub24taGVhZGVyICovXG53aWR0aDoxMHB4O30nLCAnLnRhYnMge1xuXHQvKiBub24taGVhZGVyICovXG5cdHdpZHRoOiAxMHB4O1xufScpOwogICAgICAgIHQoJy8qIGhlYWRlcicpOwogICAgICAgIHQoJy8vIGNvbW1lbnQnKTsKICAgICAgICB0KCcuc2VsZWN0b3IxIHtcblx0bWFyZ2luOiAwOyAvKiBUaGlzIGlzIGEgY29tbWVudCBpbmNsdWRpbmcgYW4gdXJsIGh0dHA6Ly9kb21haW4uY29tL3BhdGgvdG8vZmlsZS5leHQgKi9cbn0nLCAnLnNlbGVjdG9yMSB7XG5cdG1hcmdpbjogMDtcblx0LyogVGhpcyBpcyBhIGNvbW1lbnQgaW5jbHVkaW5nIGFuIHVybCBodHRwOi8vZG9tYWluLmNvbS9wYXRoL3RvL2ZpbGUuZXh0ICovXG59Jyk7CiAgICAgICAgCiAgICAgICAgLy8gc2luZ2xlIGxpbmUgY29tbWVudCBzdXBwb3J0IChsZXNzL3Nhc3MpCiAgICAgICAgdCgnLnRhYnN7XG4vLyBjb21tZW50XG53aWR0aDoxMHB4O1xufScsICcudGFicyB7XG5cdC8vIGNvbW1lbnRcblx0d2lkdGg6IDEwcHg7XG59Jyk7CiAgICAgICAgdCgnLnRhYnN7Ly8gY29tbWVudFxud2lkdGg6MTBweDtcbn0nLCAnLnRhYnMge1xuXHQvLyBjb21tZW50XG5cdHdpZHRoOiAxMHB4O1xufScpOwogICAgICAgIHQoJy8vY29tbWVudFxuLnRhYnN7d2lkdGg6MTBweDt9JywgJy8vY29tbWVudFxuLnRhYnMge1xuXHR3aWR0aDogMTBweDtcbn0nKTsKICAgICAgICB0KCcudGFic3svL2NvbW1lbnRcbi8vMm5kIHNpbmdsZSBsaW5lIGNvbW1lbnRcbndpZHRoOjEwcHg7fScsICcudGFicyB7XG5cdC8vY29tbWVudFxuXHQvLzJuZCBzaW5nbGUgbGluZSBjb21tZW50XG5cdHdpZHRoOiAxMHB4O1xufScpOwogICAgICAgIHQoJy50YWJze3dpZHRoOjEwcHg7Ly9lbmQgb2YgbGluZSBjb21tZW50XG59JywgJy50YWJzIHtcblx0d2lkdGg6IDEwcHg7IC8vZW5kIG9mIGxpbmUgY29tbWVudFxufScpOwogICAgICAgIHQoJy50YWJze3dpZHRoOjEwcHg7Ly9lbmQgb2YgbGluZSBjb21tZW50XG5oZWlnaHQ6MTBweDt9JywgJy50YWJzIHtcblx0d2lkdGg6IDEwcHg7IC8vZW5kIG9mIGxpbmUgY29tbWVudFxuXHRoZWlnaHQ6IDEwcHg7XG59Jyk7CiAgICAgICAgdCgnLnRhYnN7d2lkdGg6MTBweDsvL2VuZCBvZiBsaW5lIGNvbW1lbnRcbmhlaWdodDoxMHB4Oy8vYW5vdGhlclxufScsICcudGFicyB7XG5cdHdpZHRoOiAxMHB4OyAvL2VuZCBvZiBsaW5lIGNvbW1lbnRcblx0aGVpZ2h0OiAxMHB4OyAvL2Fub3RoZXJcbn0nKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIEhhbmRsZSBMRVNTIHByb3BlcnR5IG5hbWUgaW50ZXJwb2xhdGlvbgogICAgICAgIHQoJ3RhZyB7XG5cdEB7cHJvcH06IG5vbmU7XG59Jyk7CiAgICAgICAgdCgndGFne0B7cHJvcH06bm9uZTt9JywgJ3RhZyB7XG5cdEB7cHJvcH06IG5vbmU7XG59Jyk7CiAgICAgICAgdCgndGFneyBAe3Byb3B9OiBub25lO30nLCAndGFnIHtcblx0QHtwcm9wfTogbm9uZTtcbn0nKTsKICAgICAgICAKICAgICAgICAvLyBjYW4gYWxzbyBiZSBwYXJ0IG9mIHByb3BlcnR5IG5hbWUKICAgICAgICB0KCd0YWcge1xuXHRkeW5hbWljLUB7cHJvcH06IG5vbmU7XG59Jyk7CiAgICAgICAgdCgndGFne2R5bmFtaWMtQHtwcm9wfTpub25lO30nLCAndGFnIHtcblx0ZHluYW1pYy1Ae3Byb3B9OiBub25lO1xufScpOwogICAgICAgIHQoJ3RhZ3sgZHluYW1pYy1Ae3Byb3B9OiBub25lO30nLCAndGFnIHtcblx0ZHluYW1pYy1Ae3Byb3B9OiBub25lO1xufScpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgLy8gSGFuZGxlIExFU1MgcHJvcGVydHkgbmFtZSBpbnRlcnBvbGF0aW9uLCB0ZXN0ICM2MzEKICAgICAgICB0KCcuZ2VuZXJhdGUtY29sdW1ucyhAbiwgQGk6IDEpIHdoZW4gKEBpID08IEBuKSB7XG5cdC5jb2x1bW4tQHtpfSB7XG5cdFx0d2lkdGg6IChAaSAqIDEwMCUgLyBAbik7XG5cdH1cblx0LmdlbmVyYXRlLWNvbHVtbnMoQG4sIChAaSArIDEpKTtcbn0nKTsKICAgICAgICB0KCcuZ2VuZXJhdGUtY29sdW1ucyhAbixAaToxKSB3aGVuIChAaSA9PCBAbil7LmNvbHVtbi1Ae2l9e3dpZHRoOihAaSAqIDEwMCUgLyBAbik7fS5nZW5lcmF0ZS1jb2x1bW5zKEBuLChAaSArIDEpKTt9JywgJy5nZW5lcmF0ZS1jb2x1bW5zKEBuLCBAaTogMSkgd2hlbiAoQGkgPTwgQG4pIHtcblx0LmNvbHVtbi1Ae2l9IHtcblx0XHR3aWR0aDogKEBpICogMTAwJSAvIEBuKTtcblx0fVxuXHQuZ2VuZXJhdGUtY29sdW1ucyhAbiwgKEBpICsgMSkpO1xufScpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgLy8gUHN1ZWRvLWNsYXNzZXMgdnMgVmFyaWFibGVzCiAgICAgICAgdCgnQHBhZ2UgOmZpcnN0IHt9Jyk7CiAgICAgICAgCiAgICAgICAgLy8gQXNzdW1lIHRoZSBjb2xvbiBnb2VzIHdpdGggdGhlIEBuYW1lLiBJZiB3ZSdyZSBpbiBMRVNTLCB0aGlzIGlzIHJlcXVpcmVkIHJlZ2FyZGxlc3Mgb2YgdGhlIGF0LXN0cmluZy4KICAgICAgICB0KCdAcGFnZTpmaXJzdCB7fScsICdAcGFnZTogZmlyc3Qge30nKTsKICAgICAgICB0KCdAcGFnZTogZmlyc3Qge30nKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIFNBU1MvU0NTUwogICAgICAgIAogICAgICAgIC8vIEJhc2ljIEludGVycG9sYXRpb24KICAgICAgICB0KCdwIHtcblx0JGZvbnQtc2l6ZTogMTJweDtcblx0JGxpbmUtaGVpZ2h0OiAzMHB4O1xuXHRmb250OiAjeyRmb250LXNpemV9LyN7JGxpbmUtaGVpZ2h0fTtcbn0nKTsKICAgICAgICB0KCdwLiN7JG5hbWV9IHt9Jyk7CiAgICAgICAgdCgKICAgICAgICAgICAgJ0BtaXhpbiBpdGVtUHJvcGVydGllc0NvdmVySXRlbSgkaXRlbXMsICRtYXJnaW4pIHtcbicgKwogICAgICAgICAgICAnXHR3aWR0aDogY2FsYygoMTAwJSAtICgoI3skaXRlbXN9IC0gMSkgKiAjeyRtYXJnaW59cmVtKSkgLyAjeyRpdGVtc30pO1xuJyArCiAgICAgICAgICAgICdcdG1hcmdpbjogMS42cmVtICN7JG1hcmdpbn1yZW0gMS42cmVtIDA7XG4nICsKICAgICAgICAgICAgJ30nKTsKICAgICAgICAKICAgICAgICAvLyBNdWx0aXBsZSBmaWxlZCBpc3N1ZXMgaW4gTEVTUyBkdWUgdG8gbm90KDpibGFoKQogICAgICAgIHQoJyY6Zmlyc3Qtb2YtdHlwZTpub3QoOmxhc3QtY2hpbGQpIHt9Jyk7CiAgICAgICAgdCgKICAgICAgICAgICAgJ2RpdiB7XG4nICsKICAgICAgICAgICAgJ1x0Jjpub3QoOmZpcnN0LW9mLXR5cGUpIHtcbicgKwogICAgICAgICAgICAnXHRcdGJhY2tncm91bmQ6IHJlZDtcbicgKwogICAgICAgICAgICAnXHR9XG4nICsKICAgICAgICAgICAgJ30nKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIFByb3BlciBoYW5kbGluZyBvZiBjb2xvbiBpbiBzZWxlY3RvcnMKICAgICAgICBvcHRzLnNlbGVjdG9yX3NlcGFyYXRvcl9uZXdsaW5lID0gZmFsc2U7CiAgICAgICAgdCgnYSA6YiB7fScpOwogICAgICAgIHQoJ2EgOjpiIHt9Jyk7CiAgICAgICAgdCgnYTpiIHt9Jyk7CiAgICAgICAgdCgnYTo6YiB7fScpOwogICAgICAgIHQoJ2Ege30sIGE6OmIge30sIGEgICA6OmIge30sIGE6YiB7fSwgYSAgIDpiIHt9JywgJ2Ege31cbiwgYTo6YiB7fVxuLCBhIDo6YiB7fVxuLCBhOmIge31cbiwgYSA6YiB7fScpOwogICAgICAgIHQoCiAgICAgICAgICAgICcuY2FyZC1ibHVlIDo6LXdlYmtpdC1pbnB1dC1wbGFjZWhvbGRlciB7XG4nICsKICAgICAgICAgICAgJ1x0Y29sb3I6ICM4N0QxRkY7XG4nICsKICAgICAgICAgICAgJ30nKTsKICAgICAgICB0KAogICAgICAgICAgICAnZGl2IFthdHRyXSA6bm90KC5jbGFzcykge1xuJyArCiAgICAgICAgICAgICdcdGNvbG9yOiByZWQ7XG4nICsKICAgICAgICAgICAgJ30nKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIAoKCiAgICB9CgogICAgZnVuY3Rpb24gYmVhdXRpZmllcl91bmNvbnZlcnRlZF90ZXN0cygpCiAgICB7CiAgICAgICAgc2FuaXR5dGVzdCA9IHRlc3Rfb2JqOwoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyB0ZXN0IGJhc2ljIGNzcyBiZWF1dGlmaWVyCiAgICAgICAgdCgiLnRhYnMge30iKTsKICAgICAgICB0KCIudGFic3tjb2xvcjpyZWQ7fSIsICIudGFicyB7XG5cdGNvbG9yOiByZWQ7XG59Iik7CiAgICAgICAgdCgiLnRhYnN7Y29sb3I6cmdiKDI1NSwgMjU1LCAwKX0iLCAiLnRhYnMge1xuXHRjb2xvcjogcmdiKDI1NSwgMjU1LCAwKVxufSIpOwogICAgICAgIHQoIi50YWJze2JhY2tncm91bmQ6dXJsKCdiYWNrLmpwZycpfSIsICIudGFicyB7XG5cdGJhY2tncm91bmQ6IHVybCgnYmFjay5qcGcnKVxufSIpOwogICAgICAgIHQoIiNibGEsICNmb297Y29sb3I6cmVkfSIsICIjYmxhLFxuI2ZvbyB7XG5cdGNvbG9yOiByZWRcbn0iKTsKICAgICAgICB0KCJAbWVkaWEgcHJpbnQgey50YWJ7fX0iLCAiQG1lZGlhIHByaW50IHtcblx0LnRhYiB7fVxufSIpOwogICAgICAgIHQoIkBtZWRpYSBwcmludCB7LnRhYntiYWNrZ3JvdW5kLWltYWdlOnVybChmb29AMngucG5nKX19IiwgIkBtZWRpYSBwcmludCB7XG5cdC50YWIge1xuXHRcdGJhY2tncm91bmQtaW1hZ2U6IHVybChmb29AMngucG5nKVxuXHR9XG59Iik7CgogICAgICAgIHQoImE6YmVmb3JlIHtcbiIgKwogICAgICAgICAgICAiXHRjb250ZW50OiAnYXtjb2xvcjpibGFjazt9XCJcIlxcJ1xcJ1wiXFxuXFxuXFxuYXtjb2xvcjpibGFja31cJztcbiIgKwogICAgICAgICAgICAifSIpOwoKICAgICAgICAvL2xlYWQtaW4gd2hpdGVzcGFjZSBkZXRlcm1pbmVzIGJhc2UtaW5kZW50LgogICAgICAgIC8vIGxlYWQtaW4gbmV3bGluZXMgYXJlIHN0cmlwcGVkLgogICAgICAgIHQoIlxuXG5hLCBpbWcge3BhZGRpbmc6IDAuMnB4fSIsICJhLFxuaW1nIHtcblx0cGFkZGluZzogMC4ycHhcbn0iKTsKICAgICAgICB0KCIgICBhLCBpbWcge3BhZGRpbmc6IDAuMnB4fSIsICIgICBhLFxuICAgaW1nIHtcbiAgIFx0cGFkZGluZzogMC4ycHhcbiAgIH0iKTsKICAgICAgICB0KCIgXHQgXG5hLCBpbWcge3BhZGRpbmc6IDAuMnB4fSIsICIgXHQgYSxcbiBcdCBpbWcge1xuIFx0IFx0cGFkZGluZzogMC4ycHhcbiBcdCB9Iik7CiAgICAgICAgdCgiXG5cbiAgICAgYSwgaW1nIHtwYWRkaW5nOiAwLjJweH0iLCAiYSxcbmltZyB7XG5cdHBhZGRpbmc6IDAuMnB4XG59Iik7CgogICAgICAgIC8vIHNlcGFyYXRlIHNlbGVjdG9ycwogICAgICAgIHQoIiNibGEsICNmb297Y29sb3I6cmVkfSIsICIjYmxhLFxuI2ZvbyB7XG5cdGNvbG9yOiByZWRcbn0iKTsKICAgICAgICB0KCJhLCBpbWcge3BhZGRpbmc6IDAuMnB4fSIsICJhLFxuaW1nIHtcblx0cGFkZGluZzogMC4ycHhcbn0iKTsKCiAgICAgICAgLy8gYmxvY2sgbmVzdGluZwogICAgICAgIHQoIiNmb28ge1xuXHRiYWNrZ3JvdW5kLWltYWdlOiB1cmwoZm9vQDJ4LnBuZyk7XG5cdEBmb250LWZhY2Uge1xuXHRcdGZvbnQtZmFtaWx5OiAnQml0c3RyZWFtIFZlcmEgU2VyaWYgQm9sZCc7XG5cdFx0c3JjOiB1cmwoJ2h0dHA6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvQGFwaS9kZWtpL2ZpbGVzLzI5MzQvPVZlcmFTZUJkLnR0ZicpO1xuXHR9XG59Iik7CiAgICAgICAgdCgiQG1lZGlhIHNjcmVlbiB7XG5cdCNmb286aG92ZXIge1xuXHRcdGJhY2tncm91bmQtaW1hZ2U6IHVybChmb29AMngucG5nKTtcblx0fVxuXHRAZm9udC1mYWNlIHtcblx0XHRmb250LWZhbWlseTogJ0JpdHN0cmVhbSBWZXJhIFNlcmlmIEJvbGQnO1xuXHRcdHNyYzogdXJsKCdodHRwOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL0BhcGkvZGVraS9maWxlcy8yOTM0Lz1WZXJhU2VCZC50dGYnKTtcblx0fVxufSIpOwovKgpAZm9udC1mYWNlIHsKICAgIGZvbnQtZmFtaWx5OiAnQml0c3RyZWFtIFZlcmEgU2VyaWYgQm9sZCc7CiAgICBzcmM6IHVybCgnaHR0cDovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9AYXBpL2Rla2kvZmlsZXMvMjkzNC89VmVyYVNlQmQudHRmJyk7Cn0KQG1lZGlhIHNjcmVlbiB7CiAgICAjZm9vOmhvdmVyIHsKICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoZm9vLnBuZyk7CiAgICB9CiAgICBAbWVkaWEgc2NyZWVuIGFuZCAobWluLWRldmljZS1waXhlbC1yYXRpbzogMikgewogICAgICAgIEBmb250LWZhY2UgewogICAgICAgICAgICBmb250LWZhbWlseTogJ0hlbHZldGljYSBOZXVlJwogICAgICAgIH0KICAgICAgICAjZm9vOmhvdmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKGZvb0AyeC5wbmcpOwogICAgICAgIH0KICAgIH0KfQoqLwogICAgICAgIHQoIkBmb250LWZhY2Uge1xuXHRmb250LWZhbWlseTogJ0JpdHN0cmVhbSBWZXJhIFNlcmlmIEJvbGQnO1xuXHRzcmM6IHVybCgnaHR0cDovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9AYXBpL2Rla2kvZmlsZXMvMjkzNC89VmVyYVNlQmQudHRmJyk7XG59XG5AbWVkaWEgc2NyZWVuIHtcblx0I2Zvbzpob3ZlciB7XG5cdFx0YmFja2dyb3VuZC1pbWFnZTogdXJsKGZvby5wbmcpO1xuXHR9XG5cdEBtZWRpYSBzY3JlZW4gYW5kIChtaW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAyKSB7XG5cdFx0QGZvbnQtZmFjZSB7XG5cdFx0XHRmb250LWZhbWlseTogJ0hlbHZldGljYSBOZXVlJ1xuXHRcdH1cblx0XHQjZm9vOmhvdmVyIHtcblx0XHRcdGJhY2tncm91bmQtaW1hZ2U6IHVybChmb29AMngucG5nKTtcblx0XHR9XG5cdH1cbn0iKTsKCiAgICAgICAgLy8gbGVzcy1jc3MgY2FzZXMKICAgICAgICB0KCcud2VsbHtAd2VsbC1iZzpAYmctY29sb3I7QHdlbGwtZmc6QGZnLWNvbG9yO30nLCcud2VsbCB7XG5cdEB3ZWxsLWJnOiBAYmctY29sb3I7XG5cdEB3ZWxsLWZnOiBAZmctY29sb3I7XG59Jyk7CiAgICAgICAgdCgnLndlbGwgeyYuYWN0aXZlIHtcbmJveC1zaGFkb3c6IDAgMXB4IDFweCBAYm9yZGVyLWNvbG9yLCAxcHggMCAxcHggQGJvcmRlci1jb2xvcjt9fScsCiAgICAgICAgICAgICcud2VsbCB7XG4nICsKICAgICAgICAgICAgJ1x0Ji5hY3RpdmUge1xuJyArCiAgICAgICAgICAgICdcdFx0Ym94LXNoYWRvdzogMCAxcHggMXB4IEBib3JkZXItY29sb3IsIDFweCAwIDFweCBAYm9yZGVyLWNvbG9yO1xuJyArCiAgICAgICAgICAgICdcdH1cbicgKwogICAgICAgICAgICAnfScpOwogICAgICAgIHQoJ2Ege1xuJyArCiAgICAgICAgICAgICdcdGNvbG9yOiBibHVlO1xuJyArCiAgICAgICAgICAgICdcdCY6aG92ZXIge1xuJyArCiAgICAgICAgICAgICdcdFx0Y29sb3I6IGdyZWVuO1xuJyArCiAgICAgICAgICAgICdcdH1cbicgKwogICAgICAgICAgICAnXHQmICYgJiYmLmFjdGl2ZSB7XG4nICsKICAgICAgICAgICAgJ1x0XHRjb2xvcjogZ3JlZW47XG4nICsKICAgICAgICAgICAgJ1x0fVxuJyArCiAgICAgICAgICAgICd9Jyk7CgogICAgICAgIC8vIE5vdCBzdXJlIGlmIHRoaXMgaXMgc2Vuc2libGUKICAgICAgICAvLyBidXQgSSBiZWxpZXZlIGl0IGlzIGNvcnJlY3QgdG8gbm90IHJlbW92ZSB0aGUgc3BhY2UgaW4gIiY6IGhvdmVyIi4KICAgICAgICB0KCdhIHtcbicgKwogICAgICAgICAgICAnXHQmOiBob3ZlciB7XG4nICsKICAgICAgICAgICAgJ1x0XHRjb2xvcjogZ3JlZW47XG4nICsKICAgICAgICAgICAgJ1x0fVxuJyArCiAgICAgICAgICAgICd9Jyk7CgogICAgICAgIC8vIGltcG9ydAogICAgICAgIHQoJ0BpbXBvcnQgInRlc3QiOycpOwoKICAgICAgICAvLyBkb24ndCBicmVhayBuZXN0ZWQgcHNldWRvLWNsYXNzZXMKICAgICAgICB0KCJhOmZpcnN0LWNoaWxke2NvbG9yOnJlZDtkaXY6Zmlyc3QtY2hpbGR7Y29sb3I6YmxhY2s7fX0iLAogICAgICAgICAgICAiYTpmaXJzdC1jaGlsZCB7XG5cdGNvbG9yOiByZWQ7XG5cdGRpdjpmaXJzdC1jaGlsZCB7XG5cdFx0Y29sb3I6IGJsYWNrO1xuXHR9XG59Iik7CgogICAgICAgIC8vIGhhbmRsZSBTQVNTL0xFU1MgcGFyZW50IHJlZmVyZW5jZQogICAgICAgIHQoImRpdnsmOmZpcnN0LWxldHRlciB7dGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTt9fSIsCiAgICAgICAgICAgICJkaXYge1xuXHQmOmZpcnN0LWxldHRlciB7XG5cdFx0dGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcblx0fVxufSIpOwoKICAgICAgICAvL25lc3RlZCBtb2RpZmllcnMgKCY6aG92ZXIgZXRjKQogICAgICAgIHQoIi50YWJzeyY6aG92ZXJ7d2lkdGg6MTBweDt9fSIsICIudGFicyB7XG5cdCY6aG92ZXIge1xuXHRcdHdpZHRoOiAxMHB4O1xuXHR9XG59Iik7CiAgICAgICAgdCgiLnRhYnN7Ji5iaWd7d2lkdGg6MTBweDt9fSIsICIudGFicyB7XG5cdCYuYmlnIHtcblx0XHR3aWR0aDogMTBweDtcblx0fVxufSIpOwogICAgICAgIHQoIi50YWJzeyY+Ymlne3dpZHRoOjEwcHg7fX0iLCAiLnRhYnMge1xuXHQmPmJpZyB7XG5cdFx0d2lkdGg6IDEwcHg7XG5cdH1cbn0iKTsKICAgICAgICB0KCIudGFic3smKy5iaWd7d2lkdGg6MTBweDt9fSIsICIudGFicyB7XG5cdCYrLmJpZyB7XG5cdFx0d2lkdGg6IDEwcHg7XG5cdH1cbn0iKTsKCiAgICAgICAgLy9uZXN0ZWQgcnVsZXMKICAgICAgICB0KCIudGFic3suY2hpbGR7d2lkdGg6MTBweDt9fSIsICIudGFicyB7XG5cdC5jaGlsZCB7XG5cdFx0d2lkdGg6IDEwcHg7XG5cdH1cbn0iKTsKCiAgICAgICAgLy92YXJpYWJsZXMKICAgICAgICB0KCJAbXl2YXI6MTBweDsudGFic3t3aWR0aDoxMHB4O30iLCAiQG15dmFyOiAxMHB4O1xuLnRhYnMge1xuXHR3aWR0aDogMTBweDtcbn0iKTsKICAgICAgICB0KCJAbXl2YXI6MTBweDsgLnRhYnN7d2lkdGg6MTBweDt9IiwgIkBteXZhcjogMTBweDtcbi50YWJzIHtcblx0d2lkdGg6IDEwcHg7XG59Iik7CgogICAgICAgIC8vIHRlc3Qgb3B0aW9ucwogICAgICAgIG9wdHMuaW5kZW50X3NpemUgPSAyOwogICAgICAgIG9wdHMuaW5kZW50X2NoYXIgPSAnICc7CiAgICAgICAgb3B0cy5zZWxlY3Rvcl9zZXBhcmF0b3JfbmV3bGluZSA9IGZhbHNlOwoKICAgICAgICAvLyBwc2V1ZG8tY2xhc3NlcyBhbmQgcHNldWRvLWVsZW1lbnRzCiAgICAgICAgdCgiI2Zvbzpob3ZlciB7XG4gIGJhY2tncm91bmQtaW1hZ2U6IHVybChmb29AMngucG5nKVxufSIpOwogICAgICAgIHQoIiNmb28gKjpob3ZlciB7XG4gIGNvbG9yOiBwdXJwbGVcbn0iKTsKICAgICAgICB0KCI6OnNlbGVjdGlvbiB7XG4gIGNvbG9yOiAjZmYwMDAwO1xufSIpOwoKICAgICAgICAvLyBUT0RPOiBkb24ndCBicmVhayBuZXN0ZWQgcHNlZHVvLWNsYXNzZXMKICAgICAgICB0KCJAbWVkaWEgc2NyZWVuIHsudGFiLC5iYXQ6aG92ZXIge2NvbG9yOnJlZH19IiwgIkBtZWRpYSBzY3JlZW4ge1xuICAudGFiLCAuYmF0OmhvdmVyIHtcbiAgICBjb2xvcjogcmVkXG4gIH1cbn0iKTsKCiAgICAgICAgLy8gcGFydGljdWxhciBlZGdlIGNhc2Ugd2l0aCBicmFjZXMgYW5kIHNlbWljb2xvbnMgaW5zaWRlIHRhZ3MgdGhhdCBhbGxvd3MgY3VzdG9tIHRleHQKICAgICAgICB0KCJhOm5vdChcImZvb2JhclxcXCI7e31vbWdcIil7XG5jb250ZW50OiAnZXhhbXBsZVxcJzt7fSB0ZXh0JztcbmNvbnRlbnQ6IFwiZXhhbXBsZVxcXCI7e30gdGV4dFwiO30iLAogICAgICAgICAgICAiYTpub3QoXCJmb29iYXJcXFwiO3t9b21nXCIpIHtcbiAgY29udGVudDogJ2V4YW1wbGVcXCc7e30gdGV4dCc7XG4gIGNvbnRlbnQ6IFwiZXhhbXBsZVxcXCI7e30gdGV4dFwiO1xufSIpOwoKICAgICAgICAvLyBtYXkgbm90IGVhdCB0aGUgc3BhY2UgYmVmb3JlICJbIgogICAgICAgIHQoJ2h0bWwuanMgW2RhdGEtY3VzdG9tPSIxMjMiXSB7XG4gIG9wYWNpdHk6IDEuMDA7XG59Jyk7CiAgICAgICAgdCgnaHRtbC5qcyAqW2RhdGEtY3VzdG9tPSIxMjMiXSB7XG4gIG9wYWNpdHk6IDEuMDA7XG59Jyk7CiAgICB9CgogICAgYmVhdXRpZmllcl90ZXN0cygpOwogICAgYmVhdXRpZmllcl91bmNvbnZlcnRlZF90ZXN0cygpOwp9CgppZiAodHlwZW9mIGV4cG9ydHMgIT09ICJ1bmRlZmluZWQiKSB7CiAgICBleHBvcnRzLnJ1bl9jc3NfdGVzdHMgPSBydW5fY3NzX3Rlc3RzOwp9Cg=="></script>
    <script src="data:application/x-javascript;base64,LyoKICAgIEFVVE8tR0VORVJBVEVELiBETyBOT1QgTU9ESUZZLgogICAgU2NyaXB0OiB0ZXN0L2dlbmVyYXRlLXRlc3RzLmpzCiAgICBUZW1wbGF0ZTogdGVzdC9kYXRhL2h0bWwvbm9kZS5tdXN0YWNoZQogICAgRGF0YTogdGVzdC9kYXRhL2h0bWwvdGVzdHMuanMKKi8KLypqc2hpbnQgdW51c2VkOmZhbHNlICovCgpmdW5jdGlvbiBydW5faHRtbF90ZXN0cyh0ZXN0X29iaiwgVXJsZW5jb2RlZCwganNfYmVhdXRpZnksIGh0bWxfYmVhdXRpZnksIGNzc19iZWF1dGlmeSkKewoKICAgIHZhciBkZWZhdWx0X29wdHMgPSB7CiAgICAgICAgaW5kZW50X3NpemU6IDQsCiAgICAgICAgaW5kZW50X2NoYXI6ICcgJywKICAgICAgICBwcmVzZXJ2ZV9uZXdsaW5lczogdHJ1ZSwKICAgICAgICBqc2xpbnRfaGFwcHk6IGZhbHNlLAogICAgICAgIGtlZXBfYXJyYXlfaW5kZW50YXRpb246IGZhbHNlLAogICAgICAgIGJyYWNlX3N0eWxlOiAnY29sbGFwc2UnLAogICAgICAgIHNwYWNlX2JlZm9yZV9jb25kaXRpb25hbDogdHJ1ZSwKICAgICAgICBicmVha19jaGFpbmVkX21ldGhvZHM6IGZhbHNlLAogICAgICAgIHNlbGVjdG9yX3NlcGFyYXRvcjogJ1xuJywKICAgICAgICBlbmRfd2l0aF9uZXdsaW5lOiBmYWxzZQogICAgfTsKICAgIHZhciBvcHRzOwoKICAgIGRlZmF1bHRfb3B0cy5pbmRlbnRfc2l6ZSA9IDQ7CiAgICBkZWZhdWx0X29wdHMuaW5kZW50X2NoYXIgPSAnICc7CiAgICBkZWZhdWx0X29wdHMuaW5kZW50X3dpdGhfdGFicyA9IGZhbHNlOwogICAgZGVmYXVsdF9vcHRzLnByZXNlcnZlX25ld2xpbmVzID0gdHJ1ZTsKICAgIGRlZmF1bHRfb3B0cy5qc2xpbnRfaGFwcHkgPSBmYWxzZTsKICAgIGRlZmF1bHRfb3B0cy5rZWVwX2FycmF5X2luZGVudGF0aW9uID0gZmFsc2U7CiAgICBkZWZhdWx0X29wdHMuYnJhY2Vfc3R5bGUgPSAnY29sbGFwc2UnOwogICAgZGVmYXVsdF9vcHRzLmV4dHJhX2xpbmVycyA9IFsnaHRtbCcsICdoZWFkJywgJy9odG1sJ107CgogICAgZnVuY3Rpb24gcmVzZXRfb3B0aW9ucygpCiAgICB7CiAgICAgICAgb3B0cyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGVmYXVsdF9vcHRzKSk7CiAgICB9CgogICAgZnVuY3Rpb24gdGVzdF9odG1sX2JlYXV0aWZpZXIoaW5wdXQpCiAgICB7CiAgICAgICAgcmV0dXJuIGh0bWxfYmVhdXRpZnkoaW5wdXQsIG9wdHMpOwogICAgfQoKICAgIHZhciBzYW5pdHl0ZXN0OwoKICAgIC8vIHRlc3QgdGhlIGlucHV0IG9uIGJlYXV0aWZpZXIgd2l0aCB0aGUgY3VycmVudCBmbGFnIHNldHRpbmdzCiAgICAvLyBkb2VzIG5vdCBjaGVjayB0aGUgaW5kZW50YXRpb24gLyBzdXJyb3VuZGluZ3MgYXMgYnQoKSBkb2VzCiAgICBmdW5jdGlvbiB0ZXN0X2ZyYWdtZW50KGlucHV0LCBleHBlY3RlZCkKICAgIHsKICAgICAgICBleHBlY3RlZCA9IGV4cGVjdGVkIHx8IGV4cGVjdGVkID09PSAnJyA/IGV4cGVjdGVkIDogaW5wdXQ7CiAgICAgICAgc2FuaXR5dGVzdC5leHBlY3QoaW5wdXQsIGV4cGVjdGVkKTsKICAgICAgICAvLyBpZiB0aGUgZXhwZWN0ZWQgaXMgZGlmZmVyZW50IGZyb20gaW5wdXQsIHJ1biBpdCBhZ2FpbgogICAgICAgIC8vIGV4cGVjdGVkIG91dHB1dCBzaG91bGQgYmUgdW5jaGFuZ2VkIHdoZW4gcnVuIHR3aWNlLgogICAgICAgIGlmIChleHBlY3RlZCAhPT0gaW5wdXQpIHsKICAgICAgICAgICAgc2FuaXR5dGVzdC5leHBlY3QoZXhwZWN0ZWQsIGV4cGVjdGVkKTsKICAgICAgICB9CgogICAgICAgIC8vIEV2ZXJ5d2hlcmUgd2UgZG8gbmV3bGluZXMsIHRoZXkgc2hvdWxkIGJlIHJlcGxhY2VkIHdpdGggb3B0cy5lb2wKICAgICAgICBvcHRzLmVvbCA9ICdcclxuJzsKICAgICAgICBleHBlY3RlZCA9IGV4cGVjdGVkLnJlcGxhY2UoL1tcbl0vZywgJ1xyXG4nKTsKICAgICAgICBzYW5pdHl0ZXN0LmV4cGVjdChpbnB1dCwgZXhwZWN0ZWQpOwogICAgICAgIGlucHV0ID0gaW5wdXQucmVwbGFjZSgvW1xuXS9nLCAnXHJcbicpOwogICAgICAgIHNhbml0eXRlc3QuZXhwZWN0KGlucHV0LCBleHBlY3RlZCk7CiAgICAgICAgb3B0cy5lb2wgPSAnXG4nOwogICAgfQoKICAgIC8vIHRlc3QgaHRtbAogICAgZnVuY3Rpb24gYnRoKGlucHV0LCBleHBlY3RhdGlvbikKICAgIHsKICAgICAgICB2YXIgd3JhcHBlZF9pbnB1dCwgd3JhcHBlZF9leHBlY3RhdGlvbiwgZmllbGRfaW5wdXQsIGZpZWxkX2V4cGVjdGF0aW9uOwoKICAgICAgICBleHBlY3RhdGlvbiA9IGV4cGVjdGF0aW9uIHx8IGV4cGVjdGF0aW9uID09PSAnJyA/IGV4cGVjdGF0aW9uIDogaW5wdXQ7CiAgICAgICAgc2FuaXR5dGVzdC50ZXN0X2Z1bmN0aW9uKHRlc3RfaHRtbF9iZWF1dGlmaWVyLCAnaHRtbF9iZWF1dGlmeScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoaW5wdXQsIGV4cGVjdGF0aW9uKTsKCiAgICAgICAgaWYgKG9wdHMuaW5kZW50X3NpemUgPT09IDQgJiYgaW5wdXQpIHsKICAgICAgICAgICAgd3JhcHBlZF9pbnB1dCA9ICc8ZGl2PlxuJyArIGlucHV0LnJlcGxhY2UoL14oLispJC9tZywgJyAgICAkMScpICsgJ1xuICAgIDxzcGFuPmlubGluZTwvc3Bhbj5cbjwvZGl2Pic7CiAgICAgICAgICAgIHdyYXBwZWRfZXhwZWN0YXRpb24gPSAnPGRpdj5cbicgKyBleHBlY3RhdGlvbi5yZXBsYWNlKC9eKC4rKSQvbWcsICcgICAgJDEnKSArICdcbiAgICA8c3Bhbj5pbmxpbmU8L3NwYW4+XG48L2Rpdj4nOwogICAgICAgICAgICB0ZXN0X2ZyYWdtZW50KHdyYXBwZWRfaW5wdXQsIHdyYXBwZWRfZXhwZWN0YXRpb24pOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB1bmljb2RlX2NoYXIodmFsdWUpIHsKICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSh2YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gYmVhdXRpZmllcl90ZXN0cygpCiAgICB7CiAgICAgICAgc2FuaXR5dGVzdCA9IHRlc3Rfb2JqOwoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICBidGgoJycpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgLy8gSGFuZGxlIGlubGluZSBhbmQgYmxvY2sgZWxlbWVudHMgZGlmZmVyZW50bHkgLSAoKQogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICc8Ym9keT48aDE+QmxvY2s8L2gxPjwvYm9keT4nLAogICAgICAgICAgICAnPGJvZHk+XG4nICsKICAgICAgICAgICAgJyAgICA8aDE+QmxvY2s8L2gxPlxuJyArCiAgICAgICAgICAgICc8L2JvZHk+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGJvZHk+PGk+SW5saW5lPC9pPjwvYm9keT4nKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIEVuZCBXaXRoIE5ld2xpbmUgLSAoZW9mID0gIlxuIikKICAgICAgICBvcHRzLmVuZF93aXRoX25ld2xpbmUgPSB0cnVlOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJycsICdcbicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxkaXY+PC9kaXY+JywgJzxkaXY+PC9kaXY+XG4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCdcbicpOwoKICAgICAgICAvLyBFbmQgV2l0aCBOZXdsaW5lIC0gKGVvZiA9ICIiKQogICAgICAgIG9wdHMuZW5kX3dpdGhfbmV3bGluZSA9IGZhbHNlOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJycpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxkaXY+PC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnXG4nLCAnJyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBDdXN0b20gRXh0cmEgTGluZXJzIChlbXB0eSkgLSAoKQogICAgICAgIG9wdHMuZXh0cmFfbGluZXJzID0gW107CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGh0bWw+PGhlYWQ+PG1ldGE+PC9oZWFkPjxib2R5PjxkaXY+PHA+eDwvcD48L2Rpdj48L2JvZHk+PC9odG1sPicsICc8aHRtbD5cbjxoZWFkPlxuICAgIDxtZXRhPlxuPC9oZWFkPlxuPGJvZHk+XG4gICAgPGRpdj5cbiAgICAgICAgPHA+eDwvcD5cbiAgICA8L2Rpdj5cbjwvYm9keT5cbjwvaHRtbD4nKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIEN1c3RvbSBFeHRyYSBMaW5lcnMgKGRlZmF1bHQpIC0gKCkKICAgICAgICBvcHRzLmV4dHJhX2xpbmVycyA9IG51bGw7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGh0bWw+PGhlYWQ+PC9oZWFkPjxib2R5PjwvYm9keT48L2h0bWw+JywgJzxodG1sPlxuXG48aGVhZD48L2hlYWQ+XG5cbjxib2R5PjwvYm9keT5cblxuPC9odG1sPicpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgLy8gQ3VzdG9tIEV4dHJhIExpbmVycyAocCwgc3RyaW5nKSAtICgpCiAgICAgICAgb3B0cy5leHRyYV9saW5lcnMgPSAncCwvcCc7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGh0bWw+PGhlYWQ+PG1ldGE+PC9oZWFkPjxib2R5PjxkaXY+PHA+eDwvcD48L2Rpdj48L2JvZHk+PC9odG1sPicsICc8aHRtbD5cbjxoZWFkPlxuICAgIDxtZXRhPlxuPC9oZWFkPlxuPGJvZHk+XG4gICAgPGRpdj5cblxuICAgICAgICA8cD54XG5cbiAgICAgICAgPC9wPlxuICAgIDwvZGl2PlxuPC9ib2R5PlxuPC9odG1sPicpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgLy8gQ3VzdG9tIEV4dHJhIExpbmVycyAocCkgLSAoKQogICAgICAgIG9wdHMuZXh0cmFfbGluZXJzID0gWydwJywgJy9wJ107CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGh0bWw+PGhlYWQ+PG1ldGE+PC9oZWFkPjxib2R5PjxkaXY+PHA+eDwvcD48L2Rpdj48L2JvZHk+PC9odG1sPicsICc8aHRtbD5cbjxoZWFkPlxuICAgIDxtZXRhPlxuPC9oZWFkPlxuPGJvZHk+XG4gICAgPGRpdj5cblxuICAgICAgICA8cD54XG5cbiAgICAgICAgPC9wPlxuICAgIDwvZGl2PlxuPC9ib2R5PlxuPC9odG1sPicpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgLy8gVGVzdHMgZm9yIHNjcmlwdCBhbmQgc3R5bGUgdHlwZXMgKGlzc3VlIDQ1MywgODIxCiAgICAgICAgYnRoKAogICAgICAgICAgICAnPHNjcmlwdCB0eXBlPSJ0ZXh0L3Vua25vd24iPjxkaXY+PC9kaXY+PC9zY3JpcHQ+JywKICAgICAgICAgICAgJzxzY3JpcHQgdHlwZT0idGV4dC91bmtub3duIj5cbicgKwogICAgICAgICAgICAnICAgIDxkaXY+PC9kaXY+XG4nICsKICAgICAgICAgICAgJzwvc2NyaXB0PicpOwogICAgICAgIGJ0aCgKICAgICAgICAgICAgJzxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij48ZGl2PjwvZGl2Pjwvc2NyaXB0PicsCiAgICAgICAgICAgICc8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+XG4nICsKICAgICAgICAgICAgJyAgICA8IGRpdiA+IDwgL2Rpdj5cbicgKwogICAgICAgICAgICAnPC9zY3JpcHQ+Jyk7CiAgICAgICAgYnRoKAogICAgICAgICAgICAnPHNjcmlwdD48ZGl2PjwvZGl2Pjwvc2NyaXB0PicsCiAgICAgICAgICAgICc8c2NyaXB0PlxuJyArCiAgICAgICAgICAgICcgICAgPCBkaXYgPiA8IC9kaXY+XG4nICsKICAgICAgICAgICAgJzwvc2NyaXB0PicpOwogICAgICAgIGJ0aCgKICAgICAgICAgICAgJzxzY3JpcHQ+dmFyIGZvbyA9ICJiYXIiOzwvc2NyaXB0PicsCiAgICAgICAgICAgICc8c2NyaXB0PlxuJyArCiAgICAgICAgICAgICcgICAgdmFyIGZvbyA9ICJiYXIiO1xuJyArCiAgICAgICAgICAgICc8L3NjcmlwdD4nKTsKICAgICAgICBidGgoCiAgICAgICAgICAgICc8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+dmFyIGZvbyA9ICJiYXIiOzwvc2NyaXB0PicsCiAgICAgICAgICAgICc8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+XG4nICsKICAgICAgICAgICAgJyAgICB2YXIgZm9vID0gImJhciI7XG4nICsKICAgICAgICAgICAgJzwvc2NyaXB0PicpOwogICAgICAgIGJ0aCgKICAgICAgICAgICAgJzxzY3JpcHQgdHlwZT0iYXBwbGljYXRpb24vamF2YXNjcmlwdCI+dmFyIGZvbyA9ICJiYXIiOzwvc2NyaXB0PicsCiAgICAgICAgICAgICc8c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2phdmFzY3JpcHQiPlxuJyArCiAgICAgICAgICAgICcgICAgdmFyIGZvbyA9ICJiYXIiO1xuJyArCiAgICAgICAgICAgICc8L3NjcmlwdD4nKTsKICAgICAgICBidGgoCiAgICAgICAgICAgICc8c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2phdmFzY3JpcHQ7dmVyc2lvbj0xLjgiPnZhciBmb28gPSAiYmFyIjs8L3NjcmlwdD4nLAogICAgICAgICAgICAnPHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0O3ZlcnNpb249MS44Ij5cbicgKwogICAgICAgICAgICAnICAgIHZhciBmb28gPSAiYmFyIjtcbicgKwogICAgICAgICAgICAnPC9zY3JpcHQ+Jyk7CiAgICAgICAgYnRoKAogICAgICAgICAgICAnPHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi94LWphdmFzY3JpcHQiPnZhciBmb28gPSAiYmFyIjs8L3NjcmlwdD4nLAogICAgICAgICAgICAnPHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi94LWphdmFzY3JpcHQiPlxuJyArCiAgICAgICAgICAgICcgICAgdmFyIGZvbyA9ICJiYXIiO1xuJyArCiAgICAgICAgICAgICc8L3NjcmlwdD4nKTsKICAgICAgICBidGgoCiAgICAgICAgICAgICc8c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2VjbWFzY3JpcHQiPnZhciBmb28gPSAiYmFyIjs8L3NjcmlwdD4nLAogICAgICAgICAgICAnPHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi9lY21hc2NyaXB0Ij5cbicgKwogICAgICAgICAgICAnICAgIHZhciBmb28gPSAiYmFyIjtcbicgKwogICAgICAgICAgICAnPC9zY3JpcHQ+Jyk7CiAgICAgICAgYnRoKAogICAgICAgICAgICAnPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQxLjUiPnZhciBmb28gPSAiYmFyIjs8L3NjcmlwdD4nLAogICAgICAgICAgICAnPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQxLjUiPlxuJyArCiAgICAgICAgICAgICcgICAgdmFyIGZvbyA9ICJiYXIiO1xuJyArCiAgICAgICAgICAgICc8L3NjcmlwdD4nKTsKICAgICAgICBidGgoCiAgICAgICAgICAgICc8c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2pzb24iPnsiZm9vIjoiYmFyIn08L3NjcmlwdD4nLAogICAgICAgICAgICAnPHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi9qc29uIj5cbicgKwogICAgICAgICAgICAnICAgIHtcbicgKwogICAgICAgICAgICAnICAgICAgICAiZm9vIjogImJhciJcbicgKwogICAgICAgICAgICAnICAgIH1cbicgKwogICAgICAgICAgICAnPC9zY3JpcHQ+Jyk7CiAgICAgICAgYnRoKAogICAgICAgICAgICAnPHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi9sZCtqc29uIj57ImZvbyI6ImJhciJ9PC9zY3JpcHQ+JywKICAgICAgICAgICAgJzxzY3JpcHQgdHlwZT0iYXBwbGljYXRpb24vbGQranNvbiI+XG4nICsKICAgICAgICAgICAgJyAgICB7XG4nICsKICAgICAgICAgICAgJyAgICAgICAgImZvbyI6ICJiYXIiXG4nICsKICAgICAgICAgICAgJyAgICB9XG4nICsKICAgICAgICAgICAgJzwvc2NyaXB0PicpOwogICAgICAgIGJ0aCgKICAgICAgICAgICAgJzxzdHlsZSB0eXBlPSJ0ZXh0L3Vua25vd24iPjx0YWc+PC90YWc+PC9zdHlsZT4nLAogICAgICAgICAgICAnPHN0eWxlIHR5cGU9InRleHQvdW5rbm93biI+XG4nICsKICAgICAgICAgICAgJyAgICA8dGFnPjwvdGFnPlxuJyArCiAgICAgICAgICAgICc8L3N0eWxlPicpOwogICAgICAgIGJ0aCgKICAgICAgICAgICAgJzxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PHRhZz48L3RhZz48L3N0eWxlPicsCiAgICAgICAgICAgICc8c3R5bGUgdHlwZT0idGV4dC9jc3MiPlxuJyArCiAgICAgICAgICAgICcgICAgPHRhZz48L3RhZz5cbicgKwogICAgICAgICAgICAnPC9zdHlsZT4nKTsKICAgICAgICBidGgoCiAgICAgICAgICAgICc8c3R5bGU+PHRhZz48L3RhZz48L3N0eWxlPicsCiAgICAgICAgICAgICc8c3R5bGU+XG4nICsKICAgICAgICAgICAgJyAgICA8dGFnPjwvdGFnPlxuJyArCiAgICAgICAgICAgICc8L3N0eWxlPicpOwogICAgICAgIGJ0aCgKICAgICAgICAgICAgJzxzdHlsZT4uc2VsZWN0b3Ige2ZvbnQtc2l6ZToxMnB4O308L3N0eWxlPicsCiAgICAgICAgICAgICc8c3R5bGU+XG4nICsKICAgICAgICAgICAgJyAgICAuc2VsZWN0b3Ige1xuJyArCiAgICAgICAgICAgICcgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbicgKwogICAgICAgICAgICAnICAgIH1cbicgKwogICAgICAgICAgICAnPC9zdHlsZT4nKTsKICAgICAgICBidGgoCiAgICAgICAgICAgICc8c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zZWxlY3RvciB7Zm9udC1zaXplOjEycHg7fTwvc3R5bGU+JywKICAgICAgICAgICAgJzxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+XG4nICsKICAgICAgICAgICAgJyAgICAuc2VsZWN0b3Ige1xuJyArCiAgICAgICAgICAgICcgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbicgKwogICAgICAgICAgICAnICAgIH1cbicgKwogICAgICAgICAgICAnPC9zdHlsZT4nKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIEF0dHJpYnV0ZSBXcmFwIC0gKGluZGVudF9hdHRyID0gIlxuICAgICIsIGluZGVudF9vdmVyODAgPSAiXG4gICAgIikKICAgICAgICBvcHRzLndyYXBfYXR0cmlidXRlcyA9ICdmb3JjZSc7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGRpdiBhdHRyMCBhdHRyMT0iMTIzIiBkYXRhLWF0dHIyPSJoZWxsbyAgICB0IGhlcmUiPlRoaXMgaXMgc29tZSB0ZXh0PC9kaXY+JywgJzxkaXYgYXR0cjBcbiAgICBhdHRyMT0iMTIzIlxuICAgIGRhdGEtYXR0cjI9ImhlbGxvICAgIHQgaGVyZSI+VGhpcyBpcyBzb21lIHRleHQ8L2Rpdj4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8ZGl2IGxvb2thdHRoaXNzdXBlcmR1cGVybG9uZ2F0dHJpYnV0ZW5hbWV3aG9haGNyYXp5MD0idHJ1ZSIgYXR0cjAgYXR0cjE9IjEyMyIgZGF0YS1hdHRyMj0iaGVsbG8gICAgdCBoZXJlIiBoZXltYW5pbXJlYWxseWxvbmd0b293aG9jb21lc3Vwd2l0aHRoZXNlbmFtZXM9ImZhbHNlIj5UaGlzIGlzIHNvbWUgdGV4dDwvZGl2PicsICc8ZGl2IGxvb2thdHRoaXNzdXBlcmR1cGVybG9uZ2F0dHJpYnV0ZW5hbWV3aG9haGNyYXp5MD0idHJ1ZSJcbiAgICBhdHRyMFxuICAgIGF0dHIxPSIxMjMiXG4gICAgZGF0YS1hdHRyMj0iaGVsbG8gICAgdCBoZXJlIlxuICAgIGhleW1hbmltcmVhbGx5bG9uZ3Rvb3dob2NvbWVzdXB3aXRodGhlc2VuYW1lcz0iZmFsc2UiPlRoaXMgaXMgc29tZSB0ZXh0PC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGltZyBhdHRyMCBhdHRyMT0iMTIzIiBkYXRhLWF0dHIyPSJoZWxsbyAgICB0IGhlcmUiLz4nLCAnPGltZyBhdHRyMFxuICAgIGF0dHIxPSIxMjMiXG4gICAgZGF0YS1hdHRyMj0iaGVsbG8gICAgdCBoZXJlIiAvPicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IlVURi04IiA/Pjxyb290IGF0dHIxPSJmb28iIGF0dHIyPSJiYXIiLz4nLCAnPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiID8+XG48cm9vdCBhdHRyMT0iZm9vIlxuICAgIGF0dHIyPSJiYXIiIC8+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGxpbmsgaHJlZj0iLy9mb250cy5nb29nbGVhcGlzLmNvbS9jc3M/ZmFtaWx5PU9wZW4rU2FuczozMDBpdGFsaWMsNDAwaXRhbGljLDYwMGl0YWxpYyw3MDBpdGFsaWMsNDAwLDYwMCw3MDAsMzAwJmFtcDtzdWJzZXQ9bGF0aW4iIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiPicsICc8bGluayBocmVmPSIvL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9T3BlbitTYW5zOjMwMGl0YWxpYyw0MDBpdGFsaWMsNjAwaXRhbGljLDcwMGl0YWxpYyw0MDAsNjAwLDcwMCwzMDAmYW1wO3N1YnNldD1sYXRpbiJcbiAgICByZWw9InN0eWxlc2hlZXQiXG4gICAgdHlwZT0idGV4dC9jc3MiPicpOwoKICAgICAgICAvLyBBdHRyaWJ1dGUgV3JhcCAtIChpbmRlbnRfYXR0ciA9ICJcbiAgICAiLCBpbmRlbnRfb3ZlcjgwID0gIlxuICAgICIpCiAgICAgICAgb3B0cy53cmFwX2F0dHJpYnV0ZXMgPSAnZm9yY2UnOwogICAgICAgIG9wdHMud3JhcF9saW5lX2xlbmd0aCA9IDgwOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxkaXYgYXR0cjAgYXR0cjE9IjEyMyIgZGF0YS1hdHRyMj0iaGVsbG8gICAgdCBoZXJlIj5UaGlzIGlzIHNvbWUgdGV4dDwvZGl2PicsICc8ZGl2IGF0dHIwXG4gICAgYXR0cjE9IjEyMyJcbiAgICBkYXRhLWF0dHIyPSJoZWxsbyAgICB0IGhlcmUiPlRoaXMgaXMgc29tZSB0ZXh0PC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGRpdiBsb29rYXR0aGlzc3VwZXJkdXBlcmxvbmdhdHRyaWJ1dGVuYW1ld2hvYWhjcmF6eTA9InRydWUiIGF0dHIwIGF0dHIxPSIxMjMiIGRhdGEtYXR0cjI9ImhlbGxvICAgIHQgaGVyZSIgaGV5bWFuaW1yZWFsbHlsb25ndG9vd2hvY29tZXN1cHdpdGh0aGVzZW5hbWVzPSJmYWxzZSI+VGhpcyBpcyBzb21lIHRleHQ8L2Rpdj4nLCAnPGRpdiBsb29rYXR0aGlzc3VwZXJkdXBlcmxvbmdhdHRyaWJ1dGVuYW1ld2hvYWhjcmF6eTA9InRydWUiXG4gICAgYXR0cjBcbiAgICBhdHRyMT0iMTIzIlxuICAgIGRhdGEtYXR0cjI9ImhlbGxvICAgIHQgaGVyZSJcbiAgICBoZXltYW5pbXJlYWxseWxvbmd0b293aG9jb21lc3Vwd2l0aHRoZXNlbmFtZXM9ImZhbHNlIj5UaGlzIGlzIHNvbWUgdGV4dDwvZGl2PicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxpbWcgYXR0cjAgYXR0cjE9IjEyMyIgZGF0YS1hdHRyMj0iaGVsbG8gICAgdCBoZXJlIi8+JywgJzxpbWcgYXR0cjBcbiAgICBhdHRyMT0iMTIzIlxuICAgIGRhdGEtYXR0cjI9ImhlbGxvICAgIHQgaGVyZSIgLz4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCIgPz48cm9vdCBhdHRyMT0iZm9vIiBhdHRyMj0iYmFyIi8+JywgJzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IlVURi04IiA/PlxuPHJvb3QgYXR0cjE9ImZvbyJcbiAgICBhdHRyMj0iYmFyIiAvPicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxsaW5rIGhyZWY9Ii8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1PcGVuK1NhbnM6MzAwaXRhbGljLDQwMGl0YWxpYyw2MDBpdGFsaWMsNzAwaXRhbGljLDQwMCw2MDAsNzAwLDMwMCZhbXA7c3Vic2V0PWxhdGluIiByZWw9InN0eWxlc2hlZXQiIHR5cGU9InRleHQvY3NzIj4nLCAnPGxpbmsgaHJlZj0iLy9mb250cy5nb29nbGVhcGlzLmNvbS9jc3M/ZmFtaWx5PU9wZW4rU2FuczozMDBpdGFsaWMsNDAwaXRhbGljLDYwMGl0YWxpYyw3MDBpdGFsaWMsNDAwLDYwMCw3MDAsMzAwJmFtcDtzdWJzZXQ9bGF0aW4iXG4gICAgcmVsPSJzdHlsZXNoZWV0IlxuICAgIHR5cGU9InRleHQvY3NzIj4nKTsKCiAgICAgICAgLy8gQXR0cmlidXRlIFdyYXAgLSAoaW5kZW50X2F0dHIgPSAiXG4gICAgICAgICIsIGluZGVudF9vdmVyODAgPSAiXG4gICAgICAgICIpCiAgICAgICAgb3B0cy53cmFwX2F0dHJpYnV0ZXMgPSAnZm9yY2UnOwogICAgICAgIG9wdHMud3JhcF9hdHRyaWJ1dGVzX2luZGVudF9zaXplID0gODsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8ZGl2IGF0dHIwIGF0dHIxPSIxMjMiIGRhdGEtYXR0cjI9ImhlbGxvICAgIHQgaGVyZSI+VGhpcyBpcyBzb21lIHRleHQ8L2Rpdj4nLCAnPGRpdiBhdHRyMFxuICAgICAgICBhdHRyMT0iMTIzIlxuICAgICAgICBkYXRhLWF0dHIyPSJoZWxsbyAgICB0IGhlcmUiPlRoaXMgaXMgc29tZSB0ZXh0PC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGRpdiBsb29rYXR0aGlzc3VwZXJkdXBlcmxvbmdhdHRyaWJ1dGVuYW1ld2hvYWhjcmF6eTA9InRydWUiIGF0dHIwIGF0dHIxPSIxMjMiIGRhdGEtYXR0cjI9ImhlbGxvICAgIHQgaGVyZSIgaGV5bWFuaW1yZWFsbHlsb25ndG9vd2hvY29tZXN1cHdpdGh0aGVzZW5hbWVzPSJmYWxzZSI+VGhpcyBpcyBzb21lIHRleHQ8L2Rpdj4nLCAnPGRpdiBsb29rYXR0aGlzc3VwZXJkdXBlcmxvbmdhdHRyaWJ1dGVuYW1ld2hvYWhjcmF6eTA9InRydWUiXG4gICAgICAgIGF0dHIwXG4gICAgICAgIGF0dHIxPSIxMjMiXG4gICAgICAgIGRhdGEtYXR0cjI9ImhlbGxvICAgIHQgaGVyZSJcbiAgICAgICAgaGV5bWFuaW1yZWFsbHlsb25ndG9vd2hvY29tZXN1cHdpdGh0aGVzZW5hbWVzPSJmYWxzZSI+VGhpcyBpcyBzb21lIHRleHQ8L2Rpdj4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8aW1nIGF0dHIwIGF0dHIxPSIxMjMiIGRhdGEtYXR0cjI9ImhlbGxvICAgIHQgaGVyZSIvPicsICc8aW1nIGF0dHIwXG4gICAgICAgIGF0dHIxPSIxMjMiXG4gICAgICAgIGRhdGEtYXR0cjI9ImhlbGxvICAgIHQgaGVyZSIgLz4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCIgPz48cm9vdCBhdHRyMT0iZm9vIiBhdHRyMj0iYmFyIi8+JywgJzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IlVURi04IiA/PlxuPHJvb3QgYXR0cjE9ImZvbyJcbiAgICAgICAgYXR0cjI9ImJhciIgLz4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8bGluayBocmVmPSIvL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9T3BlbitTYW5zOjMwMGl0YWxpYyw0MDBpdGFsaWMsNjAwaXRhbGljLDcwMGl0YWxpYyw0MDAsNjAwLDcwMCwzMDAmYW1wO3N1YnNldD1sYXRpbiIgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyI+JywgJzxsaW5rIGhyZWY9Ii8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1PcGVuK1NhbnM6MzAwaXRhbGljLDQwMGl0YWxpYyw2MDBpdGFsaWMsNzAwaXRhbGljLDQwMCw2MDAsNzAwLDMwMCZhbXA7c3Vic2V0PWxhdGluIlxuICAgICAgICByZWw9InN0eWxlc2hlZXQiXG4gICAgICAgIHR5cGU9InRleHQvY3NzIj4nKTsKCiAgICAgICAgLy8gQXR0cmlidXRlIFdyYXAgLSAoaW5kZW50X2F0dHIgPSAiICIsIGluZGVudF9vdmVyODAgPSAiXG4iKQogICAgICAgIG9wdHMud3JhcF9hdHRyaWJ1dGVzID0gJ2F1dG8nOwogICAgICAgIG9wdHMud3JhcF9saW5lX2xlbmd0aCA9IDgwOwogICAgICAgIG9wdHMud3JhcF9hdHRyaWJ1dGVzX2luZGVudF9zaXplID0gMDsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8ZGl2IGF0dHIwIGF0dHIxPSIxMjMiIGRhdGEtYXR0cjI9ImhlbGxvICAgIHQgaGVyZSI+VGhpcyBpcyBzb21lIHRleHQ8L2Rpdj4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8ZGl2IGxvb2thdHRoaXNzdXBlcmR1cGVybG9uZ2F0dHJpYnV0ZW5hbWV3aG9haGNyYXp5MD0idHJ1ZSIgYXR0cjAgYXR0cjE9IjEyMyIgZGF0YS1hdHRyMj0iaGVsbG8gICAgdCBoZXJlIiBoZXltYW5pbXJlYWxseWxvbmd0b293aG9jb21lc3Vwd2l0aHRoZXNlbmFtZXM9ImZhbHNlIj5UaGlzIGlzIHNvbWUgdGV4dDwvZGl2PicsICc8ZGl2IGxvb2thdHRoaXNzdXBlcmR1cGVybG9uZ2F0dHJpYnV0ZW5hbWV3aG9haGNyYXp5MD0idHJ1ZSIgYXR0cjAgYXR0cjE9IjEyMyIgZGF0YS1hdHRyMj0iaGVsbG8gICAgdCBoZXJlIlxuaGV5bWFuaW1yZWFsbHlsb25ndG9vd2hvY29tZXN1cHdpdGh0aGVzZW5hbWVzPSJmYWxzZSI+VGhpcyBpcyBzb21lIHRleHQ8L2Rpdj4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8aW1nIGF0dHIwIGF0dHIxPSIxMjMiIGRhdGEtYXR0cjI9ImhlbGxvICAgIHQgaGVyZSIvPicsICc8aW1nIGF0dHIwIGF0dHIxPSIxMjMiIGRhdGEtYXR0cjI9ImhlbGxvICAgIHQgaGVyZSIgLz4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCIgPz48cm9vdCBhdHRyMT0iZm9vIiBhdHRyMj0iYmFyIi8+JywgJzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IlVURi04IiA/PlxuPHJvb3QgYXR0cjE9ImZvbyIgYXR0cjI9ImJhciIgLz4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8bGluayBocmVmPSIvL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9T3BlbitTYW5zOjMwMGl0YWxpYyw0MDBpdGFsaWMsNjAwaXRhbGljLDcwMGl0YWxpYyw0MDAsNjAwLDcwMCwzMDAmYW1wO3N1YnNldD1sYXRpbiIgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyI+JywgJzxsaW5rIGhyZWY9Ii8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1PcGVuK1NhbnM6MzAwaXRhbGljLDQwMGl0YWxpYyw2MDBpdGFsaWMsNzAwaXRhbGljLDQwMCw2MDAsNzAwLDMwMCZhbXA7c3Vic2V0PWxhdGluIlxucmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyI+Jyk7CgogICAgICAgIC8vIEF0dHJpYnV0ZSBXcmFwIC0gKGluZGVudF9hdHRyID0gIiAiLCBpbmRlbnRfb3ZlcjgwID0gIlxuICAgICIpCiAgICAgICAgb3B0cy53cmFwX2F0dHJpYnV0ZXMgPSAnYXV0byc7CiAgICAgICAgb3B0cy53cmFwX2xpbmVfbGVuZ3RoID0gODA7CiAgICAgICAgb3B0cy53cmFwX2F0dHJpYnV0ZXNfaW5kZW50X3NpemUgPSA0OwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxkaXYgYXR0cjAgYXR0cjE9IjEyMyIgZGF0YS1hdHRyMj0iaGVsbG8gICAgdCBoZXJlIj5UaGlzIGlzIHNvbWUgdGV4dDwvZGl2PicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxkaXYgbG9va2F0dGhpc3N1cGVyZHVwZXJsb25nYXR0cmlidXRlbmFtZXdob2FoY3JhenkwPSJ0cnVlIiBhdHRyMCBhdHRyMT0iMTIzIiBkYXRhLWF0dHIyPSJoZWxsbyAgICB0IGhlcmUiIGhleW1hbmltcmVhbGx5bG9uZ3Rvb3dob2NvbWVzdXB3aXRodGhlc2VuYW1lcz0iZmFsc2UiPlRoaXMgaXMgc29tZSB0ZXh0PC9kaXY+JywgJzxkaXYgbG9va2F0dGhpc3N1cGVyZHVwZXJsb25nYXR0cmlidXRlbmFtZXdob2FoY3JhenkwPSJ0cnVlIiBhdHRyMCBhdHRyMT0iMTIzIiBkYXRhLWF0dHIyPSJoZWxsbyAgICB0IGhlcmUiXG4gICAgaGV5bWFuaW1yZWFsbHlsb25ndG9vd2hvY29tZXN1cHdpdGh0aGVzZW5hbWVzPSJmYWxzZSI+VGhpcyBpcyBzb21lIHRleHQ8L2Rpdj4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8aW1nIGF0dHIwIGF0dHIxPSIxMjMiIGRhdGEtYXR0cjI9ImhlbGxvICAgIHQgaGVyZSIvPicsICc8aW1nIGF0dHIwIGF0dHIxPSIxMjMiIGRhdGEtYXR0cjI9ImhlbGxvICAgIHQgaGVyZSIgLz4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCIgPz48cm9vdCBhdHRyMT0iZm9vIiBhdHRyMj0iYmFyIi8+JywgJzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IlVURi04IiA/PlxuPHJvb3QgYXR0cjE9ImZvbyIgYXR0cjI9ImJhciIgLz4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8bGluayBocmVmPSIvL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9T3BlbitTYW5zOjMwMGl0YWxpYyw0MDBpdGFsaWMsNjAwaXRhbGljLDcwMGl0YWxpYyw0MDAsNjAwLDcwMCwzMDAmYW1wO3N1YnNldD1sYXRpbiIgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyI+JywgJzxsaW5rIGhyZWY9Ii8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1PcGVuK1NhbnM6MzAwaXRhbGljLDQwMGl0YWxpYyw2MDBpdGFsaWMsNzAwaXRhbGljLDQwMCw2MDAsNzAwLDMwMCZhbXA7c3Vic2V0PWxhdGluIlxuICAgIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiPicpOwoKICAgICAgICAvLyBBdHRyaWJ1dGUgV3JhcCAtIChpbmRlbnRfYXR0ciA9ICIgIiwgaW5kZW50X292ZXI4MCA9ICIgIikKICAgICAgICBvcHRzLndyYXBfYXR0cmlidXRlcyA9ICdhdXRvJzsKICAgICAgICBvcHRzLndyYXBfbGluZV9sZW5ndGggPSAwOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxkaXYgYXR0cjAgYXR0cjE9IjEyMyIgZGF0YS1hdHRyMj0iaGVsbG8gICAgdCBoZXJlIj5UaGlzIGlzIHNvbWUgdGV4dDwvZGl2PicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxkaXYgbG9va2F0dGhpc3N1cGVyZHVwZXJsb25nYXR0cmlidXRlbmFtZXdob2FoY3JhenkwPSJ0cnVlIiBhdHRyMCBhdHRyMT0iMTIzIiBkYXRhLWF0dHIyPSJoZWxsbyAgICB0IGhlcmUiIGhleW1hbmltcmVhbGx5bG9uZ3Rvb3dob2NvbWVzdXB3aXRodGhlc2VuYW1lcz0iZmFsc2UiPlRoaXMgaXMgc29tZSB0ZXh0PC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGltZyBhdHRyMCBhdHRyMT0iMTIzIiBkYXRhLWF0dHIyPSJoZWxsbyAgICB0IGhlcmUiLz4nLCAnPGltZyBhdHRyMCBhdHRyMT0iMTIzIiBkYXRhLWF0dHIyPSJoZWxsbyAgICB0IGhlcmUiIC8+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiID8+PHJvb3QgYXR0cjE9ImZvbyIgYXR0cjI9ImJhciIvPicsICc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCIgPz5cbjxyb290IGF0dHIxPSJmb28iIGF0dHIyPSJiYXIiIC8+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGxpbmsgaHJlZj0iLy9mb250cy5nb29nbGVhcGlzLmNvbS9jc3M/ZmFtaWx5PU9wZW4rU2FuczozMDBpdGFsaWMsNDAwaXRhbGljLDYwMGl0YWxpYyw3MDBpdGFsaWMsNDAwLDYwMCw3MDAsMzAwJmFtcDtzdWJzZXQ9bGF0aW4iIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiPicpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgLy8gSGFuZGxlYmFycyBJbmRlbnRpbmcgT2ZmCiAgICAgICAgb3B0cy5pbmRlbnRfaGFuZGxlYmFycyA9IGZhbHNlOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICd7eyNpZiAwfX1cbiAgICA8ZGl2PlxuICAgIDwvZGl2Plxue3svaWZ9fScsCiAgICAgICAgICAgICd7eyNpZiAwfX1cbjxkaXY+XG48L2Rpdj5cbnt7L2lmfX0nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KAogICAgICAgICAgICAnPGRpdj5cbnt7I2VhY2ggdGhpbmd9fVxuICAgIHt7bmFtZX19XG57ey9lYWNofX1cbjwvZGl2PicsCiAgICAgICAgICAgICc8ZGl2PlxuICAgIHt7I2VhY2ggdGhpbmd9fSB7e25hbWV9fSB7ey9lYWNofX1cbjwvZGl2PicpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgLy8gSGFuZGxlYmFycyBJbmRlbnRpbmcgT24gLSAoY29udGVudCA9ICJ7e2ZpZWxkfX0iKQogICAgICAgIG9wdHMuaW5kZW50X2hhbmRsZWJhcnMgPSB0cnVlOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJ3t7cGFnZS10aXRsZX19Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgne3sjaWYgMH19e3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJ3t7I2lmIDB9fXt7ZmllbGR9fXt7L2lmfX0nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCd7eyNpZiAwfX1cbnt7L2lmfX0nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KAogICAgICAgICAgICAne3sjaWYgICAgIHdvcmRzfX17ey9pZn19JywKICAgICAgICAgICAgJ3t7I2lmIHdvcmRzfX17ey9pZn19Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJ3t7I2lmICAgICB3b3Jkc319e3tmaWVsZH19e3svaWZ9fScsCiAgICAgICAgICAgICd7eyNpZiB3b3Jkc319e3tmaWVsZH19e3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICd7eyNpZiAgICAgd29yZHN9fXt7ZmllbGR9fXt7L2lmfX0nLAogICAgICAgICAgICAne3sjaWYgd29yZHN9fXt7ZmllbGR9fXt7L2lmfX0nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCd7eyNpZiAxfX1cbiAgICA8ZGl2PlxuICAgIDwvZGl2Plxue3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICd7eyNpZiAxfX1cbjxkaXY+XG48L2Rpdj5cbnt7L2lmfX0nLAogICAgICAgICAgICAne3sjaWYgMX19XG4gICAgPGRpdj5cbiAgICA8L2Rpdj5cbnt7L2lmfX0nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8ZGl2PlxuICAgIHt7I2lmIDF9fVxuICAgIHt7L2lmfX1cbjwvZGl2PicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICc8ZGl2Plxue3sjaWYgMX19XG57ey9pZn19XG48L2Rpdj4nLAogICAgICAgICAgICAnPGRpdj5cbiAgICB7eyNpZiAxfX1cbiAgICB7ey9pZn19XG48L2Rpdj4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KAogICAgICAgICAgICAne3sjaWZ9fVxue3sjZWFjaH19XG57eyNpZn19XG57e2ZpZWxkfX1cbnt7L2lmfX1cbnt7I2lmfX1cbnt7ZmllbGR9fVxue3svaWZ9fVxue3svZWFjaH19XG57ey9pZn19JywKICAgICAgICAgICAgJ3t7I2lmfX1cbiAgICB7eyNlYWNofX1cbiAgICAgICAge3sjaWZ9fVxuICAgICAgICAgICAge3tmaWVsZH19XG4gICAgICAgIHt7L2lmfX1cbiAgICAgICAge3sjaWZ9fVxuICAgICAgICAgICAge3tmaWVsZH19XG4gICAgICAgIHt7L2lmfX1cbiAgICB7ey9lYWNofX1cbnt7L2lmfX0nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCd7eyNpZiAxfX1cbiAgICA8ZGl2PlxuICAgIDwvZGl2Plxue3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICd7eyNpZiAxfX1cbiAgICB7e2ZpZWxkfX1cbiAgICB7e2Vsc2V9fVxuICAgIHt7ZmllbGR9fVxue3svaWZ9fScsCiAgICAgICAgICAgICd7eyNpZiAxfX1cbiAgICB7e2ZpZWxkfX1cbnt7ZWxzZX19XG4gICAge3tmaWVsZH19XG57ey9pZn19Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJ3t7I2lmIDF9fVxuICAgIHt7ZWxzZX19XG4gICAge3svaWZ9fScsCiAgICAgICAgICAgICd7eyNpZiAxfX1cbnt7ZWxzZX19XG57ey9pZn19Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJ3t7I2lmIHRoaW5nfX1cbnt7I2lmIG90aGVydGhpbmd9fVxuICAgIHt7ZmllbGR9fVxuICAgIHt7ZWxzZX19XG57e2ZpZWxkfX1cbiAgICB7ey9pZn19XG4gICAgICAge3tlbHNlfX1cbnt7ZmllbGR9fVxue3svaWZ9fScsCiAgICAgICAgICAgICd7eyNpZiB0aGluZ319XG4gICAge3sjaWYgb3RoZXJ0aGluZ319XG4gICAgICAgIHt7ZmllbGR9fVxuICAgIHt7ZWxzZX19XG4gICAgICAgIHt7ZmllbGR9fVxuICAgIHt7L2lmfX1cbnt7ZWxzZX19XG4gICAge3tmaWVsZH19XG57ey9pZn19Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJzxkaXZ7e3NvbWVzdHlsZX19PjwvZGl2PicsCiAgICAgICAgICAgICc8ZGl2IHt7c29tZXN0eWxlfX0+PC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJzxkaXZ7eyNpZiB0ZXN0fX1jbGFzcz0iZm9vInt7L2lmfX0+e3tmaWVsZH19PC9kaXY+JywKICAgICAgICAgICAgJzxkaXYge3sjaWYgdGVzdH19IGNsYXNzPSJmb28iIHt7L2lmfX0+e3tmaWVsZH19PC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJzxkaXZ7eyNpZiB0aGluZ319e3tzb21lc3R5bGV9fWNsYXNzPSJ7e2NsYXNzfX0ie3tlbHNlfX1jbGFzcz0ie3tjbGFzczJ9fSJ7ey9pZn19Pnt7ZmllbGR9fTwvZGl2PicsCiAgICAgICAgICAgICc8ZGl2IHt7I2lmIHRoaW5nfX0ge3tzb21lc3R5bGV9fSBjbGFzcz0ie3tjbGFzc319IiB7e2Vsc2V9fSBjbGFzcz0ie3tjbGFzczJ9fSIge3svaWZ9fT57e2ZpZWxkfX08L2Rpdj4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KAogICAgICAgICAgICAnPHNwYW57eyNpZiBjb25kaXRpb259fWNsYXNzPSJmb28ie3svaWZ9fT57e2ZpZWxkfX08L3NwYW4+JywKICAgICAgICAgICAgJzxzcGFuIHt7I2lmIGNvbmRpdGlvbn19IGNsYXNzPSJmb28iIHt7L2lmfX0+e3tmaWVsZH19PC9zcGFuPicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxkaXYgdW5mb3JtYXR0ZWQ9Int7I2lmfX17e2ZpZWxkfX17ey9pZn19Ij57e2ZpZWxkfX08L2Rpdj4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8ZGl2IHVuZm9ybWF0dGVkPSJ7eyNpZiAgfX0gICAge3tmaWVsZH19e3svaWZ9fSI+e3tmaWVsZH19PC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGRpdiBjbGFzcz0ie3sjaWYgdGhpbmdJcyAidmFsdWUifX17e2ZpZWxkfX17ey9pZn19Ij48L2Rpdj4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8ZGl2IGNsYXNzPSJ7eyNpZiB0aGluZ0lzIFwndmFsdWVcJ319e3tmaWVsZH19e3svaWZ9fSI+PC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGRpdiBjbGFzcz1cJ3t7I2lmIHRoaW5nSXMgInZhbHVlIn19e3tmaWVsZH19e3svaWZ9fVwnPjwvZGl2PicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxkaXYgY2xhc3M9XCd7eyNpZiB0aGluZ0lzIFwndmFsdWVcJ319e3tmaWVsZH19e3svaWZ9fVwnPjwvZGl2PicpOwoKICAgICAgICAvLyBIYW5kbGViYXJzIEluZGVudGluZyBPbiAtIChjb250ZW50ID0gInt7ISBjb21tZW50fX0iKQogICAgICAgIG9wdHMuaW5kZW50X2hhbmRsZWJhcnMgPSB0cnVlOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJ3t7cGFnZS10aXRsZX19Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgne3sjaWYgMH19e3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJ3t7I2lmIDB9fXt7ISBjb21tZW50fX17ey9pZn19Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgne3sjaWYgMH19XG57ey9pZn19Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJ3t7I2lmICAgICB3b3Jkc319e3svaWZ9fScsCiAgICAgICAgICAgICd7eyNpZiB3b3Jkc319e3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICd7eyNpZiAgICAgd29yZHN9fXt7ISBjb21tZW50fX17ey9pZn19JywKICAgICAgICAgICAgJ3t7I2lmIHdvcmRzfX17eyEgY29tbWVudH19e3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICd7eyNpZiAgICAgd29yZHN9fXt7ISBjb21tZW50fX17ey9pZn19JywKICAgICAgICAgICAgJ3t7I2lmIHdvcmRzfX17eyEgY29tbWVudH19e3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJ3t7I2lmIDF9fVxuICAgIDxkaXY+XG4gICAgPC9kaXY+XG57ey9pZn19Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJ3t7I2lmIDF9fVxuPGRpdj5cbjwvZGl2Plxue3svaWZ9fScsCiAgICAgICAgICAgICd7eyNpZiAxfX1cbiAgICA8ZGl2PlxuICAgIDwvZGl2Plxue3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxkaXY+XG4gICAge3sjaWYgMX19XG4gICAge3svaWZ9fVxuPC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJzxkaXY+XG57eyNpZiAxfX1cbnt7L2lmfX1cbjwvZGl2PicsCiAgICAgICAgICAgICc8ZGl2PlxuICAgIHt7I2lmIDF9fVxuICAgIHt7L2lmfX1cbjwvZGl2PicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICd7eyNpZn19XG57eyNlYWNofX1cbnt7I2lmfX1cbnt7ISBjb21tZW50fX1cbnt7L2lmfX1cbnt7I2lmfX1cbnt7ISBjb21tZW50fX1cbnt7L2lmfX1cbnt7L2VhY2h9fVxue3svaWZ9fScsCiAgICAgICAgICAgICd7eyNpZn19XG4gICAge3sjZWFjaH19XG4gICAgICAgIHt7I2lmfX1cbiAgICAgICAgICAgIHt7ISBjb21tZW50fX1cbiAgICAgICAge3svaWZ9fVxuICAgICAgICB7eyNpZn19XG4gICAgICAgICAgICB7eyEgY29tbWVudH19XG4gICAgICAgIHt7L2lmfX1cbiAgICB7ey9lYWNofX1cbnt7L2lmfX0nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCd7eyNpZiAxfX1cbiAgICA8ZGl2PlxuICAgIDwvZGl2Plxue3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICd7eyNpZiAxfX1cbiAgICB7eyEgY29tbWVudH19XG4gICAge3tlbHNlfX1cbiAgICB7eyEgY29tbWVudH19XG57ey9pZn19JywKICAgICAgICAgICAgJ3t7I2lmIDF9fVxuICAgIHt7ISBjb21tZW50fX1cbnt7ZWxzZX19XG4gICAge3shIGNvbW1lbnR9fVxue3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICd7eyNpZiAxfX1cbiAgICB7e2Vsc2V9fVxuICAgIHt7L2lmfX0nLAogICAgICAgICAgICAne3sjaWYgMX19XG57e2Vsc2V9fVxue3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICd7eyNpZiB0aGluZ319XG57eyNpZiBvdGhlcnRoaW5nfX1cbiAgICB7eyEgY29tbWVudH19XG4gICAge3tlbHNlfX1cbnt7ISBjb21tZW50fX1cbiAgICB7ey9pZn19XG4gICAgICAge3tlbHNlfX1cbnt7ISBjb21tZW50fX1cbnt7L2lmfX0nLAogICAgICAgICAgICAne3sjaWYgdGhpbmd9fVxuICAgIHt7I2lmIG90aGVydGhpbmd9fVxuICAgICAgICB7eyEgY29tbWVudH19XG4gICAge3tlbHNlfX1cbiAgICAgICAge3shIGNvbW1lbnR9fVxuICAgIHt7L2lmfX1cbnt7ZWxzZX19XG4gICAge3shIGNvbW1lbnR9fVxue3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICc8ZGl2e3tzb21lc3R5bGV9fT48L2Rpdj4nLAogICAgICAgICAgICAnPGRpdiB7e3NvbWVzdHlsZX19PjwvZGl2PicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICc8ZGl2e3sjaWYgdGVzdH19Y2xhc3M9ImZvbyJ7ey9pZn19Pnt7ISBjb21tZW50fX08L2Rpdj4nLAogICAgICAgICAgICAnPGRpdiB7eyNpZiB0ZXN0fX0gY2xhc3M9ImZvbyIge3svaWZ9fT57eyEgY29tbWVudH19PC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJzxkaXZ7eyNpZiB0aGluZ319e3tzb21lc3R5bGV9fWNsYXNzPSJ7e2NsYXNzfX0ie3tlbHNlfX1jbGFzcz0ie3tjbGFzczJ9fSJ7ey9pZn19Pnt7ISBjb21tZW50fX08L2Rpdj4nLAogICAgICAgICAgICAnPGRpdiB7eyNpZiB0aGluZ319IHt7c29tZXN0eWxlfX0gY2xhc3M9Int7Y2xhc3N9fSIge3tlbHNlfX0gY2xhc3M9Int7Y2xhc3MyfX0iIHt7L2lmfX0+e3shIGNvbW1lbnR9fTwvZGl2PicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICc8c3Bhbnt7I2lmIGNvbmRpdGlvbn19Y2xhc3M9ImZvbyJ7ey9pZn19Pnt7ISBjb21tZW50fX08L3NwYW4+JywKICAgICAgICAgICAgJzxzcGFuIHt7I2lmIGNvbmRpdGlvbn19IGNsYXNzPSJmb28iIHt7L2lmfX0+e3shIGNvbW1lbnR9fTwvc3Bhbj4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8ZGl2IHVuZm9ybWF0dGVkPSJ7eyNpZn19e3shIGNvbW1lbnR9fXt7L2lmfX0iPnt7ISBjb21tZW50fX08L2Rpdj4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8ZGl2IHVuZm9ybWF0dGVkPSJ7eyNpZiAgfX0gICAge3shIGNvbW1lbnR9fXt7L2lmfX0iPnt7ISBjb21tZW50fX08L2Rpdj4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8ZGl2IGNsYXNzPSJ7eyNpZiB0aGluZ0lzICJ2YWx1ZSJ9fXt7ISBjb21tZW50fX17ey9pZn19Ij48L2Rpdj4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8ZGl2IGNsYXNzPSJ7eyNpZiB0aGluZ0lzIFwndmFsdWVcJ319e3shIGNvbW1lbnR9fXt7L2lmfX0iPjwvZGl2PicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxkaXYgY2xhc3M9XCd7eyNpZiB0aGluZ0lzICJ2YWx1ZSJ9fXt7ISBjb21tZW50fX17ey9pZn19XCc+PC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGRpdiBjbGFzcz1cJ3t7I2lmIHRoaW5nSXMgXCd2YWx1ZVwnfX17eyEgY29tbWVudH19e3svaWZ9fVwnPjwvZGl2PicpOwoKICAgICAgICAvLyBIYW5kbGViYXJzIEluZGVudGluZyBPbiAtIChjb250ZW50ID0gIntwcmV7e2ZpZWxkMX19IHt7ZmllbGQyfX0ge3tmaWVsZDN9fXBvc3QiKQogICAgICAgIG9wdHMuaW5kZW50X2hhbmRsZWJhcnMgPSB0cnVlOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJ3t7cGFnZS10aXRsZX19Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgne3sjaWYgMH19e3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJ3t7I2lmIDB9fXtwcmV7e2ZpZWxkMX19IHt7ZmllbGQyfX0ge3tmaWVsZDN9fXBvc3R7ey9pZn19Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgne3sjaWYgMH19XG57ey9pZn19Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJ3t7I2lmICAgICB3b3Jkc319e3svaWZ9fScsCiAgICAgICAgICAgICd7eyNpZiB3b3Jkc319e3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICd7eyNpZiAgICAgd29yZHN9fXtwcmV7e2ZpZWxkMX19IHt7ZmllbGQyfX0ge3tmaWVsZDN9fXBvc3R7ey9pZn19JywKICAgICAgICAgICAgJ3t7I2lmIHdvcmRzfX17cHJle3tmaWVsZDF9fSB7e2ZpZWxkMn19IHt7ZmllbGQzfX1wb3N0e3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICd7eyNpZiAgICAgd29yZHN9fXtwcmV7e2ZpZWxkMX19IHt7ZmllbGQyfX0ge3tmaWVsZDN9fXBvc3R7ey9pZn19JywKICAgICAgICAgICAgJ3t7I2lmIHdvcmRzfX17cHJle3tmaWVsZDF9fSB7e2ZpZWxkMn19IHt7ZmllbGQzfX1wb3N0e3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJ3t7I2lmIDF9fVxuICAgIDxkaXY+XG4gICAgPC9kaXY+XG57ey9pZn19Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJ3t7I2lmIDF9fVxuPGRpdj5cbjwvZGl2Plxue3svaWZ9fScsCiAgICAgICAgICAgICd7eyNpZiAxfX1cbiAgICA8ZGl2PlxuICAgIDwvZGl2Plxue3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxkaXY+XG4gICAge3sjaWYgMX19XG4gICAge3svaWZ9fVxuPC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJzxkaXY+XG57eyNpZiAxfX1cbnt7L2lmfX1cbjwvZGl2PicsCiAgICAgICAgICAgICc8ZGl2PlxuICAgIHt7I2lmIDF9fVxuICAgIHt7L2lmfX1cbjwvZGl2PicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICd7eyNpZn19XG57eyNlYWNofX1cbnt7I2lmfX1cbntwcmV7e2ZpZWxkMX19IHt7ZmllbGQyfX0ge3tmaWVsZDN9fXBvc3Rcbnt7L2lmfX1cbnt7I2lmfX1cbntwcmV7e2ZpZWxkMX19IHt7ZmllbGQyfX0ge3tmaWVsZDN9fXBvc3Rcbnt7L2lmfX1cbnt7L2VhY2h9fVxue3svaWZ9fScsCiAgICAgICAgICAgICd7eyNpZn19XG4gICAge3sjZWFjaH19XG4gICAgICAgIHt7I2lmfX1cbiAgICAgICAgICAgIHtwcmV7e2ZpZWxkMX19IHt7ZmllbGQyfX0ge3tmaWVsZDN9fXBvc3RcbiAgICAgICAge3svaWZ9fVxuICAgICAgICB7eyNpZn19XG4gICAgICAgICAgICB7cHJle3tmaWVsZDF9fSB7e2ZpZWxkMn19IHt7ZmllbGQzfX1wb3N0XG4gICAgICAgIHt7L2lmfX1cbiAgICB7ey9lYWNofX1cbnt7L2lmfX0nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCd7eyNpZiAxfX1cbiAgICA8ZGl2PlxuICAgIDwvZGl2Plxue3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICd7eyNpZiAxfX1cbiAgICB7cHJle3tmaWVsZDF9fSB7e2ZpZWxkMn19IHt7ZmllbGQzfX1wb3N0XG4gICAge3tlbHNlfX1cbiAgICB7cHJle3tmaWVsZDF9fSB7e2ZpZWxkMn19IHt7ZmllbGQzfX1wb3N0XG57ey9pZn19JywKICAgICAgICAgICAgJ3t7I2lmIDF9fVxuICAgIHtwcmV7e2ZpZWxkMX19IHt7ZmllbGQyfX0ge3tmaWVsZDN9fXBvc3Rcbnt7ZWxzZX19XG4gICAge3ByZXt7ZmllbGQxfX0ge3tmaWVsZDJ9fSB7e2ZpZWxkM319cG9zdFxue3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICd7eyNpZiAxfX1cbiAgICB7e2Vsc2V9fVxuICAgIHt7L2lmfX0nLAogICAgICAgICAgICAne3sjaWYgMX19XG57e2Vsc2V9fVxue3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICd7eyNpZiB0aGluZ319XG57eyNpZiBvdGhlcnRoaW5nfX1cbiAgICB7cHJle3tmaWVsZDF9fSB7e2ZpZWxkMn19IHt7ZmllbGQzfX1wb3N0XG4gICAge3tlbHNlfX1cbntwcmV7e2ZpZWxkMX19IHt7ZmllbGQyfX0ge3tmaWVsZDN9fXBvc3RcbiAgICB7ey9pZn19XG4gICAgICAge3tlbHNlfX1cbntwcmV7e2ZpZWxkMX19IHt7ZmllbGQyfX0ge3tmaWVsZDN9fXBvc3Rcbnt7L2lmfX0nLAogICAgICAgICAgICAne3sjaWYgdGhpbmd9fVxuICAgIHt7I2lmIG90aGVydGhpbmd9fVxuICAgICAgICB7cHJle3tmaWVsZDF9fSB7e2ZpZWxkMn19IHt7ZmllbGQzfX1wb3N0XG4gICAge3tlbHNlfX1cbiAgICAgICAge3ByZXt7ZmllbGQxfX0ge3tmaWVsZDJ9fSB7e2ZpZWxkM319cG9zdFxuICAgIHt7L2lmfX1cbnt7ZWxzZX19XG4gICAge3ByZXt7ZmllbGQxfX0ge3tmaWVsZDJ9fSB7e2ZpZWxkM319cG9zdFxue3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICc8ZGl2e3tzb21lc3R5bGV9fT48L2Rpdj4nLAogICAgICAgICAgICAnPGRpdiB7e3NvbWVzdHlsZX19PjwvZGl2PicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICc8ZGl2e3sjaWYgdGVzdH19Y2xhc3M9ImZvbyJ7ey9pZn19PntwcmV7e2ZpZWxkMX19IHt7ZmllbGQyfX0ge3tmaWVsZDN9fXBvc3Q8L2Rpdj4nLAogICAgICAgICAgICAnPGRpdiB7eyNpZiB0ZXN0fX0gY2xhc3M9ImZvbyIge3svaWZ9fT57cHJle3tmaWVsZDF9fSB7e2ZpZWxkMn19IHt7ZmllbGQzfX1wb3N0PC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJzxkaXZ7eyNpZiB0aGluZ319e3tzb21lc3R5bGV9fWNsYXNzPSJ7e2NsYXNzfX0ie3tlbHNlfX1jbGFzcz0ie3tjbGFzczJ9fSJ7ey9pZn19PntwcmV7e2ZpZWxkMX19IHt7ZmllbGQyfX0ge3tmaWVsZDN9fXBvc3Q8L2Rpdj4nLAogICAgICAgICAgICAnPGRpdiB7eyNpZiB0aGluZ319IHt7c29tZXN0eWxlfX0gY2xhc3M9Int7Y2xhc3N9fSIge3tlbHNlfX0gY2xhc3M9Int7Y2xhc3MyfX0iIHt7L2lmfX0+e3ByZXt7ZmllbGQxfX0ge3tmaWVsZDJ9fSB7e2ZpZWxkM319cG9zdDwvZGl2PicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICc8c3Bhbnt7I2lmIGNvbmRpdGlvbn19Y2xhc3M9ImZvbyJ7ey9pZn19PntwcmV7e2ZpZWxkMX19IHt7ZmllbGQyfX0ge3tmaWVsZDN9fXBvc3Q8L3NwYW4+JywKICAgICAgICAgICAgJzxzcGFuIHt7I2lmIGNvbmRpdGlvbn19IGNsYXNzPSJmb28iIHt7L2lmfX0+e3ByZXt7ZmllbGQxfX0ge3tmaWVsZDJ9fSB7e2ZpZWxkM319cG9zdDwvc3Bhbj4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8ZGl2IHVuZm9ybWF0dGVkPSJ7eyNpZn19e3ByZXt7ZmllbGQxfX0ge3tmaWVsZDJ9fSB7e2ZpZWxkM319cG9zdHt7L2lmfX0iPntwcmV7e2ZpZWxkMX19IHt7ZmllbGQyfX0ge3tmaWVsZDN9fXBvc3Q8L2Rpdj4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8ZGl2IHVuZm9ybWF0dGVkPSJ7eyNpZiAgfX0gICAge3ByZXt7ZmllbGQxfX0ge3tmaWVsZDJ9fSB7e2ZpZWxkM319cG9zdHt7L2lmfX0iPntwcmV7e2ZpZWxkMX19IHt7ZmllbGQyfX0ge3tmaWVsZDN9fXBvc3Q8L2Rpdj4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8ZGl2IGNsYXNzPSJ7eyNpZiB0aGluZ0lzICJ2YWx1ZSJ9fXtwcmV7e2ZpZWxkMX19IHt7ZmllbGQyfX0ge3tmaWVsZDN9fXBvc3R7ey9pZn19Ij48L2Rpdj4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8ZGl2IGNsYXNzPSJ7eyNpZiB0aGluZ0lzIFwndmFsdWVcJ319e3ByZXt7ZmllbGQxfX0ge3tmaWVsZDJ9fSB7e2ZpZWxkM319cG9zdHt7L2lmfX0iPjwvZGl2PicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxkaXYgY2xhc3M9XCd7eyNpZiB0aGluZ0lzICJ2YWx1ZSJ9fXtwcmV7e2ZpZWxkMX19IHt7ZmllbGQyfX0ge3tmaWVsZDN9fXBvc3R7ey9pZn19XCc+PC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGRpdiBjbGFzcz1cJ3t7I2lmIHRoaW5nSXMgXCd2YWx1ZVwnfX17cHJle3tmaWVsZDF9fSB7e2ZpZWxkMn19IHt7ZmllbGQzfX1wb3N0e3svaWZ9fVwnPjwvZGl2PicpOwoKICAgICAgICAvLyBIYW5kbGViYXJzIEluZGVudGluZyBPbiAtIChjb250ZW50ID0gInt7ISBcbiBtdWx0LWxpbmVcbmNvbW1lbnQgIFxuICAgICB3aXRoIHNwYWNpbmdcbn19IikKICAgICAgICBvcHRzLmluZGVudF9oYW5kbGViYXJzID0gdHJ1ZTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCd7e3BhZ2UtdGl0bGV9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJ3t7I2lmIDB9fXt7L2lmfX0nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCd7eyNpZiAwfX17eyEgXG4gbXVsdC1saW5lXG5jb21tZW50ICBcbiAgICAgd2l0aCBzcGFjaW5nXG59fXt7L2lmfX0nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCd7eyNpZiAwfX1cbnt7L2lmfX0nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KAogICAgICAgICAgICAne3sjaWYgICAgIHdvcmRzfX17ey9pZn19JywKICAgICAgICAgICAgJ3t7I2lmIHdvcmRzfX17ey9pZn19Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJ3t7I2lmICAgICB3b3Jkc319e3shIFxuIG11bHQtbGluZVxuY29tbWVudCAgXG4gICAgIHdpdGggc3BhY2luZ1xufX17ey9pZn19JywKICAgICAgICAgICAgJ3t7I2lmIHdvcmRzfX17eyEgXG4gbXVsdC1saW5lXG5jb21tZW50ICBcbiAgICAgd2l0aCBzcGFjaW5nXG59fXt7L2lmfX0nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KAogICAgICAgICAgICAne3sjaWYgICAgIHdvcmRzfX17eyEgXG4gbXVsdC1saW5lXG5jb21tZW50ICBcbiAgICAgd2l0aCBzcGFjaW5nXG59fXt7L2lmfX0nLAogICAgICAgICAgICAne3sjaWYgd29yZHN9fXt7ISBcbiBtdWx0LWxpbmVcbmNvbW1lbnQgIFxuICAgICB3aXRoIHNwYWNpbmdcbn19e3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJ3t7I2lmIDF9fVxuICAgIDxkaXY+XG4gICAgPC9kaXY+XG57ey9pZn19Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJ3t7I2lmIDF9fVxuPGRpdj5cbjwvZGl2Plxue3svaWZ9fScsCiAgICAgICAgICAgICd7eyNpZiAxfX1cbiAgICA8ZGl2PlxuICAgIDwvZGl2Plxue3svaWZ9fScpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxkaXY+XG4gICAge3sjaWYgMX19XG4gICAge3svaWZ9fVxuPC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJzxkaXY+XG57eyNpZiAxfX1cbnt7L2lmfX1cbjwvZGl2PicsCiAgICAgICAgICAgICc8ZGl2PlxuICAgIHt7I2lmIDF9fVxuICAgIHt7L2lmfX1cbjwvZGl2PicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICd7eyNpZn19XG57eyNlYWNofX1cbnt7I2lmfX1cbnt7ISBcbiBtdWx0LWxpbmVcbmNvbW1lbnQgIFxuICAgICB3aXRoIHNwYWNpbmdcbn19XG57ey9pZn19XG57eyNpZn19XG57eyEgXG4gbXVsdC1saW5lXG5jb21tZW50ICBcbiAgICAgd2l0aCBzcGFjaW5nXG59fVxue3svaWZ9fVxue3svZWFjaH19XG57ey9pZn19JywKICAgICAgICAgICAgJ3t7I2lmfX1cbiAgICB7eyNlYWNofX1cbiAgICAgICAge3sjaWZ9fVxuICAgICAgICAgICAge3shIFxuIG11bHQtbGluZVxuY29tbWVudCAgXG4gICAgIHdpdGggc3BhY2luZ1xufX1cbiAgICAgICAge3svaWZ9fVxuICAgICAgICB7eyNpZn19XG4gICAgICAgICAgICB7eyEgXG4gbXVsdC1saW5lXG5jb21tZW50ICBcbiAgICAgd2l0aCBzcGFjaW5nXG59fVxuICAgICAgICB7ey9pZn19XG4gICAge3svZWFjaH19XG57ey9pZn19Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgne3sjaWYgMX19XG4gICAgPGRpdj5cbiAgICA8L2Rpdj5cbnt7L2lmfX0nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KAogICAgICAgICAgICAne3sjaWYgMX19XG4gICAge3shIFxuIG11bHQtbGluZVxuY29tbWVudCAgXG4gICAgIHdpdGggc3BhY2luZ1xufX1cbiAgICB7e2Vsc2V9fVxuICAgIHt7ISBcbiBtdWx0LWxpbmVcbmNvbW1lbnQgIFxuICAgICB3aXRoIHNwYWNpbmdcbn19XG57ey9pZn19JywKICAgICAgICAgICAgJ3t7I2lmIDF9fVxuICAgIHt7ISBcbiBtdWx0LWxpbmVcbmNvbW1lbnQgIFxuICAgICB3aXRoIHNwYWNpbmdcbn19XG57e2Vsc2V9fVxuICAgIHt7ISBcbiBtdWx0LWxpbmVcbmNvbW1lbnQgIFxuICAgICB3aXRoIHNwYWNpbmdcbn19XG57ey9pZn19Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJ3t7I2lmIDF9fVxuICAgIHt7ZWxzZX19XG4gICAge3svaWZ9fScsCiAgICAgICAgICAgICd7eyNpZiAxfX1cbnt7ZWxzZX19XG57ey9pZn19Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJ3t7I2lmIHRoaW5nfX1cbnt7I2lmIG90aGVydGhpbmd9fVxuICAgIHt7ISBcbiBtdWx0LWxpbmVcbmNvbW1lbnQgIFxuICAgICB3aXRoIHNwYWNpbmdcbn19XG4gICAge3tlbHNlfX1cbnt7ISBcbiBtdWx0LWxpbmVcbmNvbW1lbnQgIFxuICAgICB3aXRoIHNwYWNpbmdcbn19XG4gICAge3svaWZ9fVxuICAgICAgIHt7ZWxzZX19XG57eyEgXG4gbXVsdC1saW5lXG5jb21tZW50ICBcbiAgICAgd2l0aCBzcGFjaW5nXG59fVxue3svaWZ9fScsCiAgICAgICAgICAgICd7eyNpZiB0aGluZ319XG4gICAge3sjaWYgb3RoZXJ0aGluZ319XG4gICAgICAgIHt7ISBcbiBtdWx0LWxpbmVcbmNvbW1lbnQgIFxuICAgICB3aXRoIHNwYWNpbmdcbn19XG4gICAge3tlbHNlfX1cbiAgICAgICAge3shIFxuIG11bHQtbGluZVxuY29tbWVudCAgXG4gICAgIHdpdGggc3BhY2luZ1xufX1cbiAgICB7ey9pZn19XG57e2Vsc2V9fVxuICAgIHt7ISBcbiBtdWx0LWxpbmVcbmNvbW1lbnQgIFxuICAgICB3aXRoIHNwYWNpbmdcbn19XG57ey9pZn19Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJzxkaXZ7e3NvbWVzdHlsZX19PjwvZGl2PicsCiAgICAgICAgICAgICc8ZGl2IHt7c29tZXN0eWxlfX0+PC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJzxkaXZ7eyNpZiB0ZXN0fX1jbGFzcz0iZm9vInt7L2lmfX0+e3shIFxuIG11bHQtbGluZVxuY29tbWVudCAgXG4gICAgIHdpdGggc3BhY2luZ1xufX08L2Rpdj4nLAogICAgICAgICAgICAnPGRpdiB7eyNpZiB0ZXN0fX0gY2xhc3M9ImZvbyIge3svaWZ9fT57eyEgXG4gbXVsdC1saW5lXG5jb21tZW50ICBcbiAgICAgd2l0aCBzcGFjaW5nXG59fTwvZGl2PicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICc8ZGl2e3sjaWYgdGhpbmd9fXt7c29tZXN0eWxlfX1jbGFzcz0ie3tjbGFzc319Int7ZWxzZX19Y2xhc3M9Int7Y2xhc3MyfX0ie3svaWZ9fT57eyEgXG4gbXVsdC1saW5lXG5jb21tZW50ICBcbiAgICAgd2l0aCBzcGFjaW5nXG59fTwvZGl2PicsCiAgICAgICAgICAgICc8ZGl2IHt7I2lmIHRoaW5nfX0ge3tzb21lc3R5bGV9fSBjbGFzcz0ie3tjbGFzc319IiB7e2Vsc2V9fSBjbGFzcz0ie3tjbGFzczJ9fSIge3svaWZ9fT57eyEgXG4gbXVsdC1saW5lXG5jb21tZW50ICBcbiAgICAgd2l0aCBzcGFjaW5nXG59fTwvZGl2PicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICc8c3Bhbnt7I2lmIGNvbmRpdGlvbn19Y2xhc3M9ImZvbyJ7ey9pZn19Pnt7ISBcbiBtdWx0LWxpbmVcbmNvbW1lbnQgIFxuICAgICB3aXRoIHNwYWNpbmdcbn19PC9zcGFuPicsCiAgICAgICAgICAgICc8c3BhbiB7eyNpZiBjb25kaXRpb259fSBjbGFzcz0iZm9vIiB7ey9pZn19Pnt7ISBcbiBtdWx0LWxpbmVcbmNvbW1lbnQgIFxuICAgICB3aXRoIHNwYWNpbmdcbn19PC9zcGFuPicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxkaXYgdW5mb3JtYXR0ZWQ9Int7I2lmfX17eyEgXG4gbXVsdC1saW5lXG5jb21tZW50ICBcbiAgICAgd2l0aCBzcGFjaW5nXG59fXt7L2lmfX0iPnt7ISBcbiBtdWx0LWxpbmVcbmNvbW1lbnQgIFxuICAgICB3aXRoIHNwYWNpbmdcbn19PC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGRpdiB1bmZvcm1hdHRlZD0ie3sjaWYgIH19ICAgIHt7ISBcbiBtdWx0LWxpbmVcbmNvbW1lbnQgIFxuICAgICB3aXRoIHNwYWNpbmdcbn19e3svaWZ9fSI+e3shIFxuIG11bHQtbGluZVxuY29tbWVudCAgXG4gICAgIHdpdGggc3BhY2luZ1xufX08L2Rpdj4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8ZGl2IGNsYXNzPSJ7eyNpZiB0aGluZ0lzICJ2YWx1ZSJ9fXt7ISBcbiBtdWx0LWxpbmVcbmNvbW1lbnQgIFxuICAgICB3aXRoIHNwYWNpbmdcbn19e3svaWZ9fSI+PC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGRpdiBjbGFzcz0ie3sjaWYgdGhpbmdJcyBcJ3ZhbHVlXCd9fXt7ISBcbiBtdWx0LWxpbmVcbmNvbW1lbnQgIFxuICAgICB3aXRoIHNwYWNpbmdcbn19e3svaWZ9fSI+PC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGRpdiBjbGFzcz1cJ3t7I2lmIHRoaW5nSXMgInZhbHVlIn19e3shIFxuIG11bHQtbGluZVxuY29tbWVudCAgXG4gICAgIHdpdGggc3BhY2luZ1xufX17ey9pZn19XCc+PC9kaXY+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGRpdiBjbGFzcz1cJ3t7I2lmIHRoaW5nSXMgXCd2YWx1ZVwnfX17eyEgXG4gbXVsdC1saW5lXG5jb21tZW50ICBcbiAgICAgd2l0aCBzcGFjaW5nXG59fXt7L2lmfX1cJz48L2Rpdj4nKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIEhhbmRsZWJhcnMgRWxzZSB0YWcgaW5kZW50aW5nCiAgICAgICAgb3B0cy5pbmRlbnRfaGFuZGxlYmFycyA9IHRydWU7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJ3t7I2lmIHRlc3R9fTxkaXY+PC9kaXY+e3tlbHNlfX08ZGl2PjwvZGl2Pnt7L2lmfX0nLAogICAgICAgICAgICAne3sjaWYgdGVzdH19XG4gICAgPGRpdj48L2Rpdj5cbnt7ZWxzZX19XG4gICAgPGRpdj48L2Rpdj5cbnt7L2lmfX0nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCd7eyNpZiB0ZXN0fX08c3Bhbj48L3NwYW4+e3tlbHNlfX08c3Bhbj48L3NwYW4+e3svaWZ9fScpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgLy8gVW5jbG9zZWQgaHRtbCBlbGVtZW50cwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxzb3VyY2U+XG48c291cmNlPicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxicj5cbjxicj4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8aW5wdXQ+XG48aW5wdXQ+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPG1ldGE+XG48bWV0YT4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8bGluaz5cbjxsaW5rPicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxjb2xncm91cD5cbiAgICA8Y29sPlxuICAgIDxjb2w+XG48L2NvbGdyb3VwPicpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgLy8gVW5mb3JtYXR0ZWQgdGFncwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxvbD5cbiAgICA8bGk+YjxwcmU+YzwvcHJlPjwvbGk+XG48L29sPicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxvbD5cbiAgICA8bGk+Yjxjb2RlPmM8L2NvZGU+PC9saT5cbjwvb2w+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPHVsPlxuICAgIDxsaT5cbiAgICAgICAgPHNwYW4gY2xhc3M9Im9jdGljb24gb2N0aWNvbi1wZXJzb24iPjwvc3Bhbj5cbiAgICAgICAgPGEgaHJlZj0iL2NvbnRhY3QvIj5Lb250YWt0PC9hPlxuICAgIDwvbGk+XG48L3VsPicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxkaXYgY2xhc3M9InNlYXJjaGZvcm0iPjxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT0iIiBuYW1lPSJzIiBpZD0icyIgLz48aW5wdXQgdHlwZT0ic3VibWl0IiBpZD0ic2VhcmNoc3VibWl0IiB2YWx1ZT0iU2VhcmNoIiAvPjwvZGl2PicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxkaXYgY2xhc3M9InNlYXJjaGZvcm0iPjxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT0iIiBuYW1lPSJzIiBpZD0icyI+PGlucHV0IHR5cGU9InN1Ym1pdCIgaWQ9InNlYXJjaHN1Ym1pdCIgdmFsdWU9IlNlYXJjaCI+PC9kaXY+Jyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBQaHAgZm9ybWF0dGluZwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxoMSBjbGFzcz0iY29udGVudC1wYWdlLWhlYWRlciI+PD89JHZpZXdbIm5hbWUiXTsgPz48L2gxPicsICc8aDEgY2xhc3M9ImNvbnRlbnQtcGFnZS1oZWFkZXIiPlxuICAgIDw/PSR2aWV3WyJuYW1lIl07ID8+XG48L2gxPicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICc8P3BocFxuJyArCiAgICAgICAgICAgICdmb3IoJGkgPSAxOyAkaSA8PSAxMDA7ICRpKys7KSB7XG4nICsKICAgICAgICAgICAgJyAgICAjY291bnQgdG8gMTAwIVxuJyArCiAgICAgICAgICAgICcgICAgZWNobygkaSAuICI8L2JyPiIpO1xuJyArCiAgICAgICAgICAgICd9XG4nICsKICAgICAgICAgICAgJz8+Jyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJzw/cGhwID8+XG4nICsKICAgICAgICAgICAgJzwhRE9DVFlQRSBodG1sPlxuJyArCiAgICAgICAgICAgICdcbicgKwogICAgICAgICAgICAnPGh0bWw+XG4nICsKICAgICAgICAgICAgJ1xuJyArCiAgICAgICAgICAgICc8aGVhZD48L2hlYWQ+XG4nICsKICAgICAgICAgICAgJ1xuJyArCiAgICAgICAgICAgICc8Ym9keT48L2JvZHk+XG4nICsKICAgICAgICAgICAgJ1xuJyArCiAgICAgICAgICAgICc8L2h0bWw+Jyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyB1bmRlcnNjb3JlLmpzICBmb3JtYXR0aW5nCiAgICAgICAgdGVzdF9mcmFnbWVudCgKICAgICAgICAgICAgJzxkaXYgY2xhc3M9ImNvbC1zbS05Ij5cbicgKwogICAgICAgICAgICAnICAgIDx0ZXh0YXJlYSBpZD0ibm90ZXMiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHJvd3M9IjMiPlxuJyArCiAgICAgICAgICAgICcgICAgICAgIDwlPSBub3RlcyAlPlxuJyArCiAgICAgICAgICAgICcgICAgPC90ZXh0YXJlYT5cbicgKwogICAgICAgICAgICAnPC9kaXY+Jyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBJbmRlbnQgd2l0aCB0YWJzCiAgICAgICAgb3B0cy5pbmRlbnRfd2l0aF90YWJzID0gdHJ1ZTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KAogICAgICAgICAgICAnPGRpdj5cbjxkaXY+XG48L2Rpdj5cbjwvZGl2PicsCiAgICAgICAgICAgICc8ZGl2PlxuXHQ8ZGl2PlxuXHQ8L2Rpdj5cbjwvZGl2PicpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgLy8gSW5kZW50IHdpdGhvdXQgdGFicwogICAgICAgIG9wdHMuaW5kZW50X3dpdGhfdGFicyA9IGZhbHNlOwogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICc8ZGl2PlxuPGRpdj5cbjwvZGl2PlxuPC9kaXY+JywKICAgICAgICAgICAgJzxkaXY+XG4gICAgPGRpdj5cbiAgICA8L2Rpdj5cbjwvZGl2PicpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgLy8gSW5kZW50IGJvZHkgaW5uZXIgaHRtbCBieSBkZWZhdWx0CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGh0bWw+XG48Ym9keT5cbjxkaXY+PC9kaXY+XG48L2JvZHk+XG5cbjwvaHRtbD4nLCAnPGh0bWw+XG48Ym9keT5cbiAgICA8ZGl2PjwvZGl2PlxuPC9ib2R5PlxuXG48L2h0bWw+Jyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBpbmRlbnRfYm9keV9pbm5lcl9odG1sIHNldCB0byBmYWxzZSBwcmV2ZW50cyBpbmRlbnQgb2YgYm9keSBpbm5lciBodG1sCiAgICAgICAgb3B0cy5pbmRlbnRfYm9keV9pbm5lcl9odG1sID0gZmFsc2U7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGh0bWw+XG48Ym9keT5cbjxkaXY+PC9kaXY+XG48L2JvZHk+XG5cbjwvaHRtbD4nKTsKCgogICAgICAgIHJlc2V0X29wdGlvbnMoKTsKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIEluZGVudCBoZWFkIGlubmVyIGh0bWwgYnkgZGVmYXVsdAogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxodG1sPlxuXG48aGVhZD5cbjxtZXRhPlxuPC9oZWFkPlxuXG48L2h0bWw+JywgJzxodG1sPlxuXG48aGVhZD5cbiAgICA8bWV0YT5cbjwvaGVhZD5cblxuPC9odG1sPicpOwoKCiAgICAgICAgcmVzZXRfb3B0aW9ucygpOwogICAgICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgICAgLy8gaW5kZW50X2hlYWRfaW5uZXJfaHRtbCBzZXQgdG8gZmFsc2UgcHJldmVudHMgaW5kZW50IG9mIGhlYWQgaW5uZXIgaHRtbAogICAgICAgIG9wdHMuaW5kZW50X2hlYWRfaW5uZXJfaHRtbCA9IGZhbHNlOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxodG1sPlxuXG48aGVhZD5cbjxtZXRhPlxuPC9oZWFkPlxuXG48L2h0bWw+Jyk7CgoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBOZXcgVGVzdCBTdWl0ZQoKCiAgICB9CgogICAgZnVuY3Rpb24gYmVhdXRpZmllcl91bmNvbnZlcnRlZF90ZXN0cygpCiAgICB7CiAgICAgICAgc2FuaXR5dGVzdCA9IHRlc3Rfb2JqOwoKICAgICAgICByZXNldF9vcHRpb25zKCk7CiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICBvcHRzLmVuZF93aXRoX25ld2xpbmUgPSB0cnVlOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJycsICdcbicpOwogICAgICAgIHRlc3RfZnJhZ21lbnQoJzxkaXY+PC9kaXY+XG4nKTsKICAgICAgICB0ZXN0X2ZyYWdtZW50KCc8ZGl2PjwvZGl2PlxuXG5cbicsICc8ZGl2PjwvZGl2PlxuJyk7CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGhlYWQ+XG4nICsKICAgICAgICAgICAgJyAgICA8c2NyaXB0PlxuJyArCiAgICAgICAgICAgICcgICAgICAgIG1vY2hhLnNldHVwKCJiZGQiKTtcbicgKwogICAgICAgICAgICAnXG4nICsKICAgICAgICAgICAgJyAgICA8L3NjcmlwdD5cbicgKwogICAgICAgICAgICAnPC9oZWFkPlxuJyk7CgoKICAgICAgICBvcHRzLmVuZF93aXRoX25ld2xpbmUgPSBmYWxzZTsKICAgICAgICAvLyBlcnJvciBjYXNlcyBuZWVkIGxvdmUgdG9vCiAgICAgICAgYnRoKCc8aW1nIHRpdGxlPSJCYWQgZm9vZCEiIHNyYz0iZm9vLmpwZyIgYWx0PSJFdmlsIiAiPicpOwogICAgICAgIGJ0aCgiPCEtLSBkb24ndCBibG93IHVwIGlmIGEgY29tbWVudCBpcyBub3QgY29tcGxldGUiKTsgLy8gLS0+CgogICAgICAgIHRlc3RfZnJhZ21lbnQoCiAgICAgICAgICAgICc8aGVhZD5cbicgKwogICAgICAgICAgICAnICAgIDxzY3JpcHQ+XG4nICsKICAgICAgICAgICAgJyAgICAgICAgbW9jaGEuc2V0dXAoImJkZCIpO1xuJyArCiAgICAgICAgICAgICcgICAgPC9zY3JpcHQ+XG4nICsKICAgICAgICAgICAgJzwvaGVhZD4nKTsKCiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGRpdj48L2Rpdj5cbicsICc8ZGl2PjwvZGl2PicpOwogICAgICAgIGJ0aCgnPGRpdj48L2Rpdj4nKTsKICAgICAgICBidGgoJzxkaXY+Y29udGVudDwvZGl2PicpOwogICAgICAgIGJ0aCgnPGRpdj48ZGl2PjwvZGl2PjwvZGl2PicsCiAgICAgICAgICAgICc8ZGl2PlxuJyArCiAgICAgICAgICAgICcgICAgPGRpdj48L2Rpdj5cbicgKwogICAgICAgICAgICAnPC9kaXY+Jyk7CiAgICAgICAgYnRoKCc8ZGl2PjxkaXY+Y29udGVudDwvZGl2PjwvZGl2PicsCiAgICAgICAgICAgICc8ZGl2PlxuJyArCiAgICAgICAgICAgICcgICAgPGRpdj5jb250ZW50PC9kaXY+XG4nICsKICAgICAgICAgICAgJzwvZGl2PicpOwogICAgICAgIGJ0aCgnPGRpdj5cbicgKwogICAgICAgICAgICAnICAgIDxzcGFuPmNvbnRlbnQ8L3NwYW4+XG4nICsKICAgICAgICAgICAgJzwvZGl2PicpOwogICAgICAgIGJ0aCgnPGRpdj5cbicgKwogICAgICAgICAgICAnPC9kaXY+Jyk7CiAgICAgICAgYnRoKCc8ZGl2PlxuJyArCiAgICAgICAgICAgICcgICAgY29udGVudFxuJyArCiAgICAgICAgICAgICc8L2Rpdj4nKTsKICAgICAgICBidGgoJzxkaXY+XG4nICsKICAgICAgICAgICAgJyAgICA8L2Rpdj4nLAogICAgICAgICAgICAnPGRpdj5cbicgKwogICAgICAgICAgICAnPC9kaXY+Jyk7CiAgICAgICAgYnRoKCcgICAgPGRpdj5cbicgKwogICAgICAgICAgICAnICAgIDwvZGl2PicsCiAgICAgICAgICAgICc8ZGl2PlxuJyArCiAgICAgICAgICAgICc8L2Rpdj4nKTsKICAgICAgICBidGgoJzxkaXY+XG4nICsKICAgICAgICAgICAgJzwvZGl2PlxuJyArCiAgICAgICAgICAgICcgICAgPGRpdj5cbicgKwogICAgICAgICAgICAnICAgIDwvZGl2PicsCiAgICAgICAgICAgICc8ZGl2PlxuJyArCiAgICAgICAgICAgICc8L2Rpdj5cbicgKwogICAgICAgICAgICAnPGRpdj5cbicgKwogICAgICAgICAgICAnPC9kaXY+Jyk7CiAgICAgICAgYnRoKCcgICAgPGRpdj5cbicgKwogICAgICAgICAgICAnPC9kaXY+JywKICAgICAgICAgICAgJzxkaXY+XG4nICsKICAgICAgICAgICAgJzwvZGl2PicpOwogICAgICAgIGJ0aCgnPGRpdiAgICAgICAgPmNvbnRlbnQ8L2Rpdj4nLAogICAgICAgICAgICAnPGRpdj5jb250ZW50PC9kaXY+Jyk7CiAgICAgICAgYnRoKCc8ZGl2ICAgICB0aGluZ2VyPSJwcmVzZXJ2ZSAgc3BhY2UgIGhlcmUiICAgPjwvZGl2ICA+JywKICAgICAgICAgICAgJzxkaXYgdGhpbmdlcj0icHJlc2VydmUgIHNwYWNlICBoZXJlIj48L2Rpdj4nKTsKICAgICAgICBidGgoJ2NvbnRlbnRcbicgKwogICAgICAgICAgICAnICAgIDxkaXY+XG4nICsKICAgICAgICAgICAgJyAgICA8L2Rpdj5cbicgKwogICAgICAgICAgICAnY29udGVudCcsCiAgICAgICAgICAgICdjb250ZW50XG4nICsKICAgICAgICAgICAgJzxkaXY+XG4nICsKICAgICAgICAgICAgJzwvZGl2PlxuJyArCiAgICAgICAgICAgICdjb250ZW50Jyk7CiAgICAgICAgYnRoKCc8bGk+XG4nICsKICAgICAgICAgICAgJyAgICA8ZGl2PlxuJyArCiAgICAgICAgICAgICcgICAgPC9kaXY+XG4nICsKICAgICAgICAgICAgJzwvbGk+Jyk7CiAgICAgICAgYnRoKCc8bGk+XG4nICsKICAgICAgICAgICAgJzxkaXY+XG4nICsKICAgICAgICAgICAgJzwvZGl2PlxuJyArCiAgICAgICAgICAgICc8L2xpPicsCiAgICAgICAgICAgICc8bGk+XG4nICsKICAgICAgICAgICAgJyAgICA8ZGl2PlxuJyArCiAgICAgICAgICAgICcgICAgPC9kaXY+XG4nICsKICAgICAgICAgICAgJzwvbGk+Jyk7CiAgICAgICAgYnRoKCc8bGk+XG4nICsKICAgICAgICAgICAgJyAgICBjb250ZW50XG4nICsKICAgICAgICAgICAgJzwvbGk+XG4nICsKICAgICAgICAgICAgJzxsaT5cbicgKwogICAgICAgICAgICAnICAgIGNvbnRlbnRcbicgKwogICAgICAgICAgICAnPC9saT4nKTsKCiAgICAgICAgYnRoKCc8aW1nPmNvbnRlbnQnKTsKICAgICAgICBidGgoJzxpbWc+IGNvbnRlbnQnKTsKICAgICAgICBidGgoJzxpbWc+ICAgY29udGVudCcsICc8aW1nPiBjb250ZW50Jyk7CgogICAgICAgIGJ0aCgnPGltZz48aW1nPmNvbnRlbnQnKTsKICAgICAgICBidGgoJzxpbWc+IDxpbWc+Y29udGVudCcpOwogICAgICAgIGJ0aCgnPGltZz4gICA8aW1nPmNvbnRlbnQnLCAnPGltZz4gPGltZz5jb250ZW50Jyk7CgogICAgICAgIGJ0aCgnPGltZz48Yj5jb250ZW50PC9iPicpOwogICAgICAgIGJ0aCgnPGltZz4gPGI+Y29udGVudDwvYj4nKTsKICAgICAgICBidGgoJzxpbWc+ICAgPGI+Y29udGVudDwvYj4nLCAnPGltZz4gPGI+Y29udGVudDwvYj4nKTsKCiAgICAgICAgYnRoKCc8ZGl2PmNvbnRlbnQ8aW1nPmNvbnRlbnQ8L2Rpdj4nKTsKICAgICAgICBidGgoJzxkaXY+IGNvbnRlbnQgPGltZz4gY29udGVudDwvZGl2PicpOwogICAgICAgIGJ0aCgnPGRpdj4gICAgY29udGVudCA8aW1nPiAgICBjb250ZW50IDwvZGl2PicsCiAgICAgICAgICAgICc8ZGl2PiBjb250ZW50IDxpbWc+IGNvbnRlbnQgPC9kaXY+Jyk7CiAgICAgICAgYnRoKCdUZXh0IDxhIGhyZWY9IiMiPkxpbms8L2E+IFRleHQnKTsKCiAgICAgICAgdmFyIHVuZm9ybWF0dGVkID0gb3B0cy51bmZvcm1hdHRlZDsKICAgICAgICBvcHRzLnVuZm9ybWF0dGVkID0gWydzY3JpcHQnLCAnc3R5bGUnXTsKICAgICAgICBidGgoJzxzY3JpcHQgaWQ9ImphdmFzY3JpcHRUZW1wbGF0ZSIgdHlwZT0idGV4dC94LWtlbmRvLXRlbXBsYXRlIj5cbicgKwogICAgICAgICAgICAnICA8dWw+XG4nICsKICAgICAgICAgICAgJyAgIyBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsgI1xuJyArCiAgICAgICAgICAgICcgICAgPGxpPiM9IGRhdGFbaV0gIzwvbGk+XG4nICsKICAgICAgICAgICAgJyAgIyB9ICNcbicgKwogICAgICAgICAgICAnICA8L3VsPlxuJyArCiAgICAgICAgICAgICc8L3NjcmlwdD4nKTsKICAgICAgICBidGgoJzxzdHlsZT5cbicgKwogICAgICAgICAgICAnICBib2R5IHtiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Z3JleX1cbicgKwogICAgICAgICAgICAnICBoMSAgIHtjb2xvcjpibHVlfVxuJyArCiAgICAgICAgICAgICc8L3N0eWxlPicpOwogICAgICAgIG9wdHMudW5mb3JtYXR0ZWQgPSB1bmZvcm1hdHRlZDsKCiAgICAgICAgdW5mb3JtYXR0ZWQgPSBvcHRzLnVuZm9ybWF0dGVkOwogICAgICAgIG9wdHMudW5mb3JtYXR0ZWQgPSBbJ2N1c3RvbS1lbGVtZW50J107CiAgICAgICAgdGVzdF9mcmFnbWVudCgnPGRpdj5zaG91bGQgPGN1c3RvbS1lbGVtZW50Pm5vdDwvY3VzdG9tLWVsZW1lbnQ+JyArCiAgICAgICAgICAgICAgICAgICAgICAnIGluc2VydCBuZXdsaW5lczwvZGl2PicsCiAgICAgICAgICAgICAgICAgICAgICAnPGRpdj5zaG91bGQgPGN1c3RvbS1lbGVtZW50Pm5vdDwvY3VzdG9tLWVsZW1lbnQ+JyArCiAgICAgICAgICAgICAgICAgICAgICAnIGluc2VydCBuZXdsaW5lczwvZGl2PicpOwogICAgICAgIG9wdHMudW5mb3JtYXR0ZWQgPSB1bmZvcm1hdHRlZDsKCiAgICAgICAgLy8gVGVzdHMgdGhhdCBkb24ndCBwYXNzLCBidXQgcHJvYmFibHkgc2hvdWxkLgogICAgICAgIC8vIGJ0aCgnPGRpdj48c3Bhbj5jb250ZW50PC9zcGFuPjwvZGl2PicpOwoKICAgICAgICAvLyBIYW5kbGViYXJzIHRlc3RzCiAgICAgICAgLy8gV2l0aG91dCB0aGUgaW5kZW50IG9wdGlvbiBvbiwgaGFuZGxlYmFycyBhcmUgdHJlYXRlZCBhcyBjb250ZW50LgoKICAgICAgICBvcHRzLndyYXBfbGluZV9sZW5ndGggPSAwOwogICAgICAgIC8vLi4uLS0tLS0tLS0tMS0tLS0tLS0tLTItLS0tLS0tLS0zLS0tLS0tLS0tNC0tLS0tLS0tLTUtLS0tLS0tLS02LS0tLS0tLS0tNwogICAgICAgIC8vLi4uMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MAogICAgICAgIGJ0aCgnPGRpdj5Tb21lIHRleHQgdGhhdCBzaG91bGQgbm90IHdyYXAgYXQgYWxsLjwvZGl2PicsCiAgICAgICAgICAgIC8qIGV4cGVjdGVkICovCiAgICAgICAgICAgICc8ZGl2PlNvbWUgdGV4dCB0aGF0IHNob3VsZCBub3Qgd3JhcCBhdCBhbGwuPC9kaXY+Jyk7CgogICAgICAgIC8vIEEgdmFsdWUgb2YgMCBtZWFucyBubyBtYXggbGluZSBsZW5ndGgsIGFuZCBzaG91bGQgbm90IHdyYXAuCiAgICAgICAgLy8uLi4tLS0tLS0tLS0xLS0tLS0tLS0tMi0tLS0tLS0tLTMtLS0tLS0tLS00LS0tLS0tLS0tNS0tLS0tLS0tLTYtLS0tLS0tLS03LS0tLS0tLS0tOC0tLS0tLS0tLTktLS0tLS0tLTEwLS0tLS0tLS0xMS0tLS0tLS0tMTItLS0tLS0tLTEzLS0tLS0tLS0xNC0tLS0tLS0tMTUtLS0tLS0tLTE2LS0tLS0tLS0xNy0tLS0tLS0tMTgtLS0tLS0tLTE5LS0tLS0tLS0yMC0tLS0tLS0tMjEtLS0tLS0tLTIyLS0tLS0tLS0yMy0tLS0tLS0tMjQtLS0tLS0tLTI1LS0tLS0tLS0yNi0tLS0tLS0tMjctLS0tLS0tLTI4LS0tLS0tLS0yOQogICAgICAgIC8vLi4uMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAKICAgICAgICBidGgoJzxkaXY+U29tZSB0ZXh0IHRoYXQgc2hvdWxkIG5vdCB3cmFwIGF0IGFsbC4gU29tZSB0ZXh0IHRoYXQgc2hvdWxkIG5vdCB3cmFwIGF0IGFsbC4gU29tZSB0ZXh0IHRoYXQgc2hvdWxkIG5vdCB3cmFwIGF0IGFsbC4gU29tZSB0ZXh0IHRoYXQgc2hvdWxkIG5vdCB3cmFwIGF0IGFsbC4gU29tZSB0ZXh0IHRoYXQgc2hvdWxkIG5vdCB3cmFwIGF0IGFsbC4gU29tZSB0ZXh0IHRoYXQgc2hvdWxkIG5vdCB3cmFwIGF0IGFsbC4gU29tZSB0ZXh0IHRoYXQgc2hvdWxkIG5vdCB3cmFwIGF0IGFsbC48L2Rpdj4nLAogICAgICAgICAgICAvKiBleHBlY3RlZCAqLwogICAgICAgICAgICAnPGRpdj5Tb21lIHRleHQgdGhhdCBzaG91bGQgbm90IHdyYXAgYXQgYWxsLiBTb21lIHRleHQgdGhhdCBzaG91bGQgbm90IHdyYXAgYXQgYWxsLiBTb21lIHRleHQgdGhhdCBzaG91bGQgbm90IHdyYXAgYXQgYWxsLiBTb21lIHRleHQgdGhhdCBzaG91bGQgbm90IHdyYXAgYXQgYWxsLiBTb21lIHRleHQgdGhhdCBzaG91bGQgbm90IHdyYXAgYXQgYWxsLiBTb21lIHRleHQgdGhhdCBzaG91bGQgbm90IHdyYXAgYXQgYWxsLiBTb21lIHRleHQgdGhhdCBzaG91bGQgbm90IHdyYXAgYXQgYWxsLjwvZGl2PicpOwoKICAgICAgICBvcHRzLndyYXBfbGluZV9sZW5ndGggPSAiMCI7CiAgICAgICAgLy8uLi4tLS0tLS0tLS0xLS0tLS0tLS0tMi0tLS0tLS0tLTMtLS0tLS0tLS00LS0tLS0tLS0tNS0tLS0tLS0tLTYtLS0tLS0tLS03CiAgICAgICAgLy8uLi4xMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwCiAgICAgICAgYnRoKCc8ZGl2PlNvbWUgdGV4dCB0aGF0IHNob3VsZCBub3Qgd3JhcCBhdCBhbGwuPC9kaXY+JywKICAgICAgICAgICAgLyogZXhwZWN0ZWQgKi8KICAgICAgICAgICAgJzxkaXY+U29tZSB0ZXh0IHRoYXQgc2hvdWxkIG5vdCB3cmFwIGF0IGFsbC48L2Rpdj4nKTsKCiAgICAgICAgLy8gQSB2YWx1ZSBvZiAiMCIgbWVhbnMgbm8gbWF4IGxpbmUgbGVuZ3RoLCBhbmQgc2hvdWxkIG5vdCB3cmFwCiAgICAgICAgLy8uLi4tLS0tLS0tLS0xLS0tLS0tLS0tMi0tLS0tLS0tLTMtLS0tLS0tLS00LS0tLS0tLS0tNS0tLS0tLS0tLTYtLS0tLS0tLS03LS0tLS0tLS0tOC0tLS0tLS0tLTktLS0tLS0tLTEwLS0tLS0tLS0xMS0tLS0tLS0tMTItLS0tLS0tLTEzLS0tLS0tLS0xNC0tLS0tLS0tMTUtLS0tLS0tLTE2LS0tLS0tLS0xNy0tLS0tLS0tMTgtLS0tLS0tLTE5LS0tLS0tLS0yMC0tLS0tLS0tMjEtLS0tLS0tLTIyLS0tLS0tLS0yMy0tLS0tLS0tMjQtLS0tLS0tLTI1LS0tLS0tLS0yNi0tLS0tLS0tMjctLS0tLS0tLTI4LS0tLS0tLS0yOQogICAgICAgIC8vLi4uMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAKICAgICAgICBidGgoJzxkaXY+U29tZSB0ZXh0IHRoYXQgc2hvdWxkIG5vdCB3cmFwIGF0IGFsbC4gU29tZSB0ZXh0IHRoYXQgc2hvdWxkIG5vdCB3cmFwIGF0IGFsbC4gU29tZSB0ZXh0IHRoYXQgc2hvdWxkIG5vdCB3cmFwIGF0IGFsbC4gU29tZSB0ZXh0IHRoYXQgc2hvdWxkIG5vdCB3cmFwIGF0IGFsbC4gU29tZSB0ZXh0IHRoYXQgc2hvdWxkIG5vdCB3cmFwIGF0IGFsbC4gU29tZSB0ZXh0IHRoYXQgc2hvdWxkIG5vdCB3cmFwIGF0IGFsbC4gU29tZSB0ZXh0IHRoYXQgc2hvdWxkIG5vdCB3cmFwIGF0IGFsbC48L2Rpdj4nLAogICAgICAgICAgICAvKiBleHBlY3RlZCAqLwogICAgICAgICAgICAnPGRpdj5Tb21lIHRleHQgdGhhdCBzaG91bGQgbm90IHdyYXAgYXQgYWxsLiBTb21lIHRleHQgdGhhdCBzaG91bGQgbm90IHdyYXAgYXQgYWxsLiBTb21lIHRleHQgdGhhdCBzaG91bGQgbm90IHdyYXAgYXQgYWxsLiBTb21lIHRleHQgdGhhdCBzaG91bGQgbm90IHdyYXAgYXQgYWxsLiBTb21lIHRleHQgdGhhdCBzaG91bGQgbm90IHdyYXAgYXQgYWxsLiBTb21lIHRleHQgdGhhdCBzaG91bGQgbm90IHdyYXAgYXQgYWxsLiBTb21lIHRleHQgdGhhdCBzaG91bGQgbm90IHdyYXAgYXQgYWxsLjwvZGl2PicpOwoKICAgICAgICAvL0JVR0JVRzogVGhpcyBzaG91bGQgd3JhcCBiZWZvcmUgNDAgbm90IGFmdGVyLgogICAgICAgIG9wdHMud3JhcF9saW5lX2xlbmd0aCA9IDQwOwogICAgICAgIC8vLi4uLS0tLS0tLS0tMS0tLS0tLS0tLTItLS0tLS0tLS0zLS0tLS0tLS0tNC0tLS0tLS0tLTUtLS0tLS0tLS02LS0tLS0tLS0tNwogICAgICAgIC8vLi4uMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MAogICAgICAgIGJ0aCgnPGRpdj5Tb21lIHRlc3QgdGV4dCB0aGF0IHNob3VsZCB3cmFwX2luc2lkZV90aGlzIHNlY3Rpb24gaGVyZS48L2Rpdj4nLAogICAgICAgICAgICAvKiBleHBlY3RlZCAqLwogICAgICAgICAgICAnPGRpdj5Tb21lIHRlc3QgdGV4dCB0aGF0IHNob3VsZCB3cmFwX2luc2lkZV90aGlzXG4nICsKICAgICAgICAgICAgJyAgICBzZWN0aW9uIGhlcmUuPC9kaXY+Jyk7CgogICAgICAgIG9wdHMud3JhcF9saW5lX2xlbmd0aCA9ICI0MCI7CiAgICAgICAgLy8uLi4tLS0tLS0tLS0xLS0tLS0tLS0tMi0tLS0tLS0tLTMtLS0tLS0tLS00LS0tLS0tLS0tNS0tLS0tLS0tLTYtLS0tLS0tLS03CiAgICAgICAgLy8uLi4xMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwCiAgICAgICAgYnRoKCc8ZGl2PlNvbWUgdGVzdCB0ZXh0IHRoYXQgc2hvdWxkIHdyYXBfaW5zaWRlX3RoaXMgc2VjdGlvbiBoZXJlLjwvZGl2PicsCiAgICAgICAgICAgIC8qIGV4cGVjdGVkICovCiAgICAgICAgICAgICc8ZGl2PlNvbWUgdGVzdCB0ZXh0IHRoYXQgc2hvdWxkIHdyYXBfaW5zaWRlX3RoaXNcbicgKwogICAgICAgICAgICAnICAgIHNlY3Rpb24gaGVyZS48L2Rpdj4nKTsKCiAgICAgICAgb3B0cy5pbmRlbnRfc2l6ZSA9IDE7CiAgICAgICAgb3B0cy5pbmRlbnRfY2hhciA9ICdcdCc7CiAgICAgICAgb3B0cy5wcmVzZXJ2ZV9uZXdsaW5lcyA9IGZhbHNlOwogICAgICAgIGJ0aCgnPGRpdj5cblx0Zm9vXG48L2Rpdj4nLCAnPGRpdj4gZm9vIDwvZGl2PicpOwoKICAgICAgICBvcHRzLnByZXNlcnZlX25ld2xpbmVzID0gdHJ1ZTsKICAgICAgICBidGgoJzxkaXY+XG5cdGZvb1xuPC9kaXY+Jyk7CgoKCiAgICAgICAgLy8gdGVzdCBwcmVzZXJ2ZV9uZXdsaW5lcyBhbmQgbWF4X3ByZXNlcnZlX25ld2xpbmVzCiAgICAgICAgb3B0cy5wcmVzZXJ2ZV9uZXdsaW5lcyA9IGZhbHNlOwogICAgICAgIGJ0aCgnPGRpdj5TaG91bGQgbm90PC9kaXY+XG5cblxuJyArCiAgICAgICAgICAgICc8ZGl2PnByZXNlcnZlIG5ld2xpbmVzPC9kaXY+JywKICAgICAgICAgICAgJzxkaXY+U2hvdWxkIG5vdDwvZGl2PlxuJyArCiAgICAgICAgICAgICc8ZGl2PnByZXNlcnZlIG5ld2xpbmVzPC9kaXY+Jyk7CgogICAgICAgIG9wdHMucHJlc2VydmVfbmV3bGluZXMgPSB0cnVlOwogICAgICAgIG9wdHMubWF4X3ByZXNlcnZlX25ld2xpbmVzICA9IDA7CiAgICAgICAgYnRoKCc8ZGl2PlNob3VsZDwvZGl2PlxuXG5cbicgKwogICAgICAgICAgICAnPGRpdj5wcmVzZXJ2ZSB6ZXJvIG5ld2xpbmVzPC9kaXY+JywKICAgICAgICAgICAgJzxkaXY+U2hvdWxkPC9kaXY+XG4nICsKICAgICAgICAgICAgJzxkaXY+cHJlc2VydmUgemVybyBuZXdsaW5lczwvZGl2PicpOwoKICAgICAgICBvcHRzLm1heF9wcmVzZXJ2ZV9uZXdsaW5lcyAgPSAxOwogICAgICAgIGJ0aCgnPGRpdj5TaG91bGQ8L2Rpdj5cblxuXG4nICsKICAgICAgICAgICAgJzxkaXY+cHJlc2VydmUgb25lIG5ld2xpbmU8L2Rpdj4nLAogICAgICAgICAgICAnPGRpdj5TaG91bGQ8L2Rpdj5cblxuJyArCiAgICAgICAgICAgICc8ZGl2PnByZXNlcnZlIG9uZSBuZXdsaW5lPC9kaXY+Jyk7CgogICAgICAgIG9wdHMubWF4X3ByZXNlcnZlX25ld2xpbmVzICA9IG51bGw7CiAgICAgICAgYnRoKCc8ZGl2PlNob3VsZDwvZGl2PlxuXG5cbicgKwogICAgICAgICAgICAnPGRpdj5wcmVzZXJ2ZSBvbmUgbmV3bGluZTwvZGl2PicsCiAgICAgICAgICAgICc8ZGl2PlNob3VsZDwvZGl2PlxuXG5cbicgKwogICAgICAgICAgICAnPGRpdj5wcmVzZXJ2ZSBvbmUgbmV3bGluZTwvZGl2PicpOwogICAgfQoKICAgIGJlYXV0aWZpZXJfdGVzdHMoKTsKICAgIGJlYXV0aWZpZXJfdW5jb252ZXJ0ZWRfdGVzdHMoKTsKfQoKaWYgKHR5cGVvZiBleHBvcnRzICE9PSAidW5kZWZpbmVkIikgewogICAgZXhwb3J0cy5ydW5faHRtbF90ZXN0cyA9IHJ1bl9odG1sX3Rlc3RzOwp9Cg=="></script>
    <script src="data:application/x-javascript;base64,Ly8KLy8gc2ltcGxlIHVucGFja2VyL2Rlb2JmdXNjYXRvciBmb3Igc2NyaXB0cyBtZXNzZWQgdXAgd2l0aCBqYXZhc2NyaXB0b2JmdXNjYXRvci5jb20KLy8gd3JpdHRlbiBieSBFaW5hciBMaWVsbWFuaXMgPGVpbmFyQGpzYmVhdXRpZmllci5vcmc+Ci8vCi8vIHVzYWdlOgovLwovLyBpZiAoSmF2YXNjcmlwdE9iZnVzY2F0b3IuZGV0ZWN0KHNvbWVfc3RyaW5nKSkgewovLyAgICAgdmFyIHVucGFja2VkID0gSmF2YXNjcmlwdE9iZnVzY2F0b3IudW5wYWNrKHNvbWVfc3RyaW5nKTsKLy8gfQovLwovLwoKdmFyIEphdmFzY3JpcHRPYmZ1c2NhdG9yID0gewogICAgZGV0ZWN0OiBmdW5jdGlvbihzdHIpIHsKICAgICAgICByZXR1cm4gL152YXIgXzB4W2EtZjAtOV0rID9cPSA/XFsvLnRlc3Qoc3RyKTsKICAgIH0sCgogICAgdW5wYWNrOiBmdW5jdGlvbihzdHIpIHsKICAgICAgICBpZiAoSmF2YXNjcmlwdE9iZnVzY2F0b3IuZGV0ZWN0KHN0cikpIHsKICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSAvdmFyIChfMHhbYS1mXGRdKykgP1w9ID9cWyguKj8pXF07Ly5leGVjKHN0cik7CiAgICAgICAgICAgIGlmIChtYXRjaGVzKSB7CiAgICAgICAgICAgICAgICB2YXIgdmFyX25hbWUgPSBtYXRjaGVzWzFdOwogICAgICAgICAgICAgICAgdmFyIHN0cmluZ3MgPSBKYXZhc2NyaXB0T2JmdXNjYXRvci5fc21hcnRfc3BsaXQobWF0Y2hlc1syXSk7CiAgICAgICAgICAgICAgICBzdHIgPSBzdHIuc3Vic3RyaW5nKG1hdGNoZXNbMF0ubGVuZ3RoKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gc3RyaW5ncykgewogICAgICAgICAgICAgICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKG5ldyBSZWdFeHAodmFyX25hbWUgKyAnXFxbJyArIGsgKyAnXFxdJywgJ2cnKSwKICAgICAgICAgICAgICAgICAgICAgICAgSmF2YXNjcmlwdE9iZnVzY2F0b3IuX2ZpeF9xdW90ZXMoSmF2YXNjcmlwdE9iZnVzY2F0b3IuX3VuZXNjYXBlKHN0cmluZ3Nba10pKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0cjsKICAgIH0sCgogICAgX2ZpeF9xdW90ZXM6IGZ1bmN0aW9uKHN0cikgewogICAgICAgIHZhciBtYXRjaGVzID0gL14iKC4qKSIkLy5leGVjKHN0cik7CiAgICAgICAgaWYgKG1hdGNoZXMpIHsKICAgICAgICAgICAgc3RyID0gbWF0Y2hlc1sxXTsKICAgICAgICAgICAgc3RyID0gIiciICsgc3RyLnJlcGxhY2UoLycvZywgIlxcJyIpICsgIiciOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3RyOwogICAgfSwKCiAgICBfc21hcnRfc3BsaXQ6IGZ1bmN0aW9uKHN0cikgewogICAgICAgIHZhciBzdHJpbmdzID0gW107CiAgICAgICAgdmFyIHBvcyA9IDA7CiAgICAgICAgd2hpbGUgKHBvcyA8IHN0ci5sZW5ndGgpIHsKICAgICAgICAgICAgaWYgKHN0ci5jaGFyQXQocG9zKSA9PT0gJyInKSB7CiAgICAgICAgICAgICAgICAvLyBuZXcgd29yZAogICAgICAgICAgICAgICAgdmFyIHdvcmQgPSAnJzsKICAgICAgICAgICAgICAgIHBvcyArPSAxOwogICAgICAgICAgICAgICAgd2hpbGUgKHBvcyA8IHN0ci5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc3RyLmNoYXJBdChwb3MpID09PSAnIicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzdHIuY2hhckF0KHBvcykgPT09ICdcXCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd29yZCArPSAnXFwnOwogICAgICAgICAgICAgICAgICAgICAgICBwb3MrKzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgd29yZCArPSBzdHIuY2hhckF0KHBvcyk7CiAgICAgICAgICAgICAgICAgICAgcG9zKys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzdHJpbmdzLnB1c2goJyInICsgd29yZCArICciJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcG9zICs9IDE7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzdHJpbmdzOwogICAgfSwKCgogICAgX3VuZXNjYXBlOiBmdW5jdGlvbihzdHIpIHsKICAgICAgICAvLyBpbmVmZmljaWVudCBpZiB1c2VkIHJlcGVhdGVkbHkgb3Igb24gc21hbGwgc3RyaW5ncywgYnV0IHdvbmRlcmZ1bCBvbiBzaW5nbGUgbGFyZ2UgY2h1bmsgb2YgdGV4dAogICAgICAgIGZvciAodmFyIGkgPSAzMjsgaSA8IDEyODsgaSsrKSB7CiAgICAgICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKG5ldyBSZWdFeHAoJ1xcXFx4JyArIGkudG9TdHJpbmcoMTYpLCAnaWcnKSwgU3RyaW5nLmZyb21DaGFyQ29kZShpKSk7CiAgICAgICAgfQogICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9cXHgwOS9nLCAiXHQiKTsKICAgICAgICByZXR1cm4gc3RyOwogICAgfSwKCiAgICBydW5fdGVzdHM6IGZ1bmN0aW9uKHNhbml0eV90ZXN0KSB7CiAgICAgICAgdmFyIHQgPSBzYW5pdHlfdGVzdCB8fCBuZXcgU2FuaXR5VGVzdCgpOwoKICAgICAgICB0LnRlc3RfZnVuY3Rpb24oSmF2YXNjcmlwdE9iZnVzY2F0b3IuX3NtYXJ0X3NwbGl0LCAiSmF2YXNjcmlwdE9iZnVzY2F0b3IuX3NtYXJ0X3NwbGl0Iik7CiAgICAgICAgdC5leHBlY3QoJycsIFtdKTsKICAgICAgICB0LmV4cGVjdCgnImEiLCAiYiInLCBbJyJhIicsICciYiInXSk7CiAgICAgICAgdC5leHBlY3QoJyJhYWEiLCJiYmJiIicsIFsnImFhYSInLCAnImJiYmIiJ10pOwogICAgICAgIHQuZXhwZWN0KCciYSIsICJiXFxcIiInLCBbJyJhIicsICciYlxcXCIiJ10pOwogICAgICAgIHQudGVzdF9mdW5jdGlvbihKYXZhc2NyaXB0T2JmdXNjYXRvci5fdW5lc2NhcGUsICdKYXZhc2NyaXB0T2JmdXNjYXRvci5fdW5lc2NhcGUnKTsKICAgICAgICB0LmV4cGVjdCgnXFx4NDAnLCAnQCcpOwogICAgICAgIHQuZXhwZWN0KCdcXHgxMCcsICdcXHgxMCcpOwogICAgICAgIHQuZXhwZWN0KCdcXHgxJywgJ1xceDEnKTsKICAgICAgICB0LmV4cGVjdCgiXFx4NjFcXHg2MlxceDIyXFx4NjNcXHg2NCIsICdhYiJjZCcpOwogICAgICAgIHQudGVzdF9mdW5jdGlvbihKYXZhc2NyaXB0T2JmdXNjYXRvci5kZXRlY3QsICdKYXZhc2NyaXB0T2JmdXNjYXRvci5kZXRlY3QnKTsKICAgICAgICB0LmV4cGVjdCgnJywgZmFsc2UpOwogICAgICAgIHQuZXhwZWN0KCdhYmNkJywgZmFsc2UpOwogICAgICAgIHQuZXhwZWN0KCd2YXIgXzB4YWFhYScsIGZhbHNlKTsKICAgICAgICB0LmV4cGVjdCgndmFyIF8weGFhYWEgPSBbImEiLCAiYiJdJywgdHJ1ZSk7CiAgICAgICAgdC5leHBlY3QoJ3ZhciBfMHhhYWFhPVsiYSIsICJiIl0nLCB0cnVlKTsKICAgICAgICB0LmV4cGVjdCgndmFyIF8weDEyMzQ9WyJhIiwiYiJdJywgdHJ1ZSk7CiAgICAgICAgcmV0dXJuIHQ7CiAgICB9CgoKfTs="></script>
    <script src="data:application/x-javascript;base64,LypnbG9iYWwgdW5lc2NhcGUgKi8KLypqc2hpbnQgY3VybHk6IGZhbHNlLCBzY3JpcHR1cmw6IHRydWUgKi8KLy8KLy8gdHJpdmlhbCBib29rbWFya2xldC9lc2NhcGVkIHNjcmlwdCBkZXRlY3RvciBmb3IgdGhlIGphdmFzY3JpcHQgYmVhdXRpZmllcgovLyB3cml0dGVuIGJ5IEVpbmFyIExpZWxtYW5pcyA8ZWluYXJAanNiZWF1dGlmaWVyLm9yZz4KLy8KLy8gdXNhZ2U6Ci8vCi8vIGlmIChVcmxlbmNvZGVkLmRldGVjdChzb21lX3N0cmluZykpIHsKLy8gICAgIHZhciB1bnBhY2tlZCA9IFVybGVuY29kZWQudW5wYWNrKHNvbWVfc3RyaW5nKTsKLy8gfQovLwovLwoKdmFyIGlzTm9kZSA9ICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cyk7CmlmIChpc05vZGUpIHsKICAgIHZhciBTYW5pdHlUZXN0ID0gcmVxdWlyZShfX2Rpcm5hbWUgKyAnLy4uLy4uL3Rlc3Qvc2FuaXR5dGVzdCcpOwp9Cgp2YXIgVXJsZW5jb2RlZCA9IHsKICAgIGRldGVjdDogZnVuY3Rpb24oc3RyKSB7CiAgICAgICAgLy8gdGhlIGZhY3QgdGhhdCBzY3JpcHQgZG9lc24ndCBjb250YWluIGFueSBzcGFjZSwgYnV0IGhhcyAlMjAgaW5zdGVhZAogICAgICAgIC8vIHNob3VsZCBiZSBzdWZmaWNpZW50IGNoZWNrIGZvciBub3cuCiAgICAgICAgaWYgKHN0ci5pbmRleE9mKCcgJykgPT09IC0xKSB7CiAgICAgICAgICAgIGlmIChzdHIuaW5kZXhPZignJTInKSAhPT0gLTEpIHJldHVybiB0cnVlOwogICAgICAgICAgICBpZiAoc3RyLnJlcGxhY2UoL1teJV0rL2csICcnKS5sZW5ndGggPiAzKSByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKCiAgICB1bnBhY2s6IGZ1bmN0aW9uKHN0cikgewogICAgICAgIGlmIChVcmxlbmNvZGVkLmRldGVjdChzdHIpKSB7CiAgICAgICAgICAgIGlmIChzdHIuaW5kZXhPZignJTJCJykgIT09IC0xIHx8IHN0ci5pbmRleE9mKCclMmInKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgIC8vICIrIiBlc2NhcGVkIGFzICIlMkIiCiAgICAgICAgICAgICAgICByZXR1cm4gdW5lc2NhcGUoc3RyLnJlcGxhY2UoL1wrL2csICclMjAnKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdW5lc2NhcGUoc3RyKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gc3RyOwogICAgfSwKCgoKICAgIHJ1bl90ZXN0czogZnVuY3Rpb24oc2FuaXR5X3Rlc3QpIHsKICAgICAgICB2YXIgdCA9IHNhbml0eV90ZXN0IHx8IG5ldyBTYW5pdHlUZXN0KCk7CiAgICAgICAgdC50ZXN0X2Z1bmN0aW9uKFVybGVuY29kZWQuZGV0ZWN0LCAiVXJsZW5jb2RlZC5kZXRlY3QiKTsKICAgICAgICB0LmV4cGVjdCgnJywgZmFsc2UpOwogICAgICAgIHQuZXhwZWN0KCd2YXIgYSA9IGInLCBmYWxzZSk7CiAgICAgICAgdC5leHBlY3QoJ3ZhciUyMGErPStiJywgdHJ1ZSk7CiAgICAgICAgdC5leHBlY3QoJ3ZhciUyMGE9YicsIHRydWUpOwogICAgICAgIHQuZXhwZWN0KCd2YXIlMjAlMjElMjInLCB0cnVlKTsKICAgICAgICB0LmV4cGVjdCgnamF2YXNjcmlwdDooZnVuY3Rpb24oKXt2YXIlMjB3aGF0ZXZlcj17aW5pdDpmdW5jdGlvbigpe2FsZXJ0KCUyMmElMjIrJTIyYiUyMil9fTt3aGF0ZXZlci5pbml0KCl9KSgpOycsIHRydWUpOwogICAgICAgIHQudGVzdF9mdW5jdGlvbihVcmxlbmNvZGVkLnVucGFjaywgJ1VybGVuY29kZWQudW5wYWNrJyk7CgogICAgICAgIHQuZXhwZWN0KCdqYXZhc2NyaXB0OihmdW5jdGlvbigpe3ZhciUyMHdoYXRldmVyPXtpbml0OmZ1bmN0aW9uKCl7YWxlcnQoJTIyYSUyMislMjJiJTIyKX19O3doYXRldmVyLmluaXQoKX0pKCk7JywKICAgICAgICAgICAgJ2phdmFzY3JpcHQ6KGZ1bmN0aW9uKCl7dmFyIHdoYXRldmVyPXtpbml0OmZ1bmN0aW9uKCl7YWxlcnQoImEiKyJiIil9fTt3aGF0ZXZlci5pbml0KCl9KSgpOycKICAgICAgICApOwogICAgICAgIHQuZXhwZWN0KCcnLCAnJyk7CiAgICAgICAgdC5leHBlY3QoJ2FiY2QnLCAnYWJjZCcpOwogICAgICAgIHQuZXhwZWN0KCd2YXIgYSA9IGInLCAndmFyIGEgPSBiJyk7CiAgICAgICAgdC5leHBlY3QoJ3ZhciUyMGE9YicsICd2YXIgYT1iJyk7CiAgICAgICAgdC5leHBlY3QoJ3ZhciUyMGE9YisxJywgJ3ZhciBhPWIrMScpOwogICAgICAgIHQuZXhwZWN0KCd2YXIlMjBhPWIlMmIxJywgJ3ZhciBhPWIrMScpOwogICAgICAgIHJldHVybiB0OwogICAgfQoKCn07CgppZiAoaXNOb2RlKSB7CiAgICBtb2R1bGUuZXhwb3J0cyA9IFVybGVuY29kZWQ7Cn0="></script>
    <script src="data:application/x-javascript;base64,Ly8KLy8gVW5wYWNrZXIgZm9yIERlYW4gRWR3YXJkJ3MgcC5hLmMuay5lLnIsIGEgcGFydCBvZiBqYXZhc2NyaXB0IGJlYXV0aWZpZXIKLy8gd3JpdHRlbiBieSBFaW5hciBMaWVsbWFuaXMgPGVpbmFyQGpzYmVhdXRpZmllci5vcmc+Ci8vCi8vIENvaW5jaWRlbnRhbGx5LCBpdCBjYW4gZGVmZWF0IGEgY291cGxlIG9mIG90aGVyIGV2YWwtYmFzZWQgY29tcHJlc3NvcnMuCi8vCi8vIHVzYWdlOgovLwovLyBpZiAoUF9BX0NfS19FX1IuZGV0ZWN0KHNvbWVfc3RyaW5nKSkgewovLyAgICAgdmFyIHVucGFja2VkID0gUF9BX0NfS19FX1IudW5wYWNrKHNvbWVfc3RyaW5nKTsKLy8gfQovLwovLwoKdmFyIFBfQV9DX0tfRV9SID0gewogICAgZGV0ZWN0OiBmdW5jdGlvbihzdHIpIHsKICAgICAgICByZXR1cm4gKFBfQV9DX0tfRV9SLmdldF9jaHVua3Moc3RyKS5sZW5ndGggPiAwKTsKICAgIH0sCgogICAgZ2V0X2NodW5rczogZnVuY3Rpb24oc3RyKSB7CiAgICAgICAgdmFyIGNodW5rcyA9IHN0ci5tYXRjaCgvZXZhbFwoXCg/ZnVuY3Rpb25cKC4qPygsMCxce1x9XClcKXxzcGxpdFwoJ1x8J1wpXClcKSkoJHxcbikvZyk7CiAgICAgICAgcmV0dXJuIGNodW5rcyA/IGNodW5rcyA6IFtdOwogICAgfSwKCiAgICB1bnBhY2s6IGZ1bmN0aW9uKHN0cikgewogICAgICAgIHZhciBjaHVua3MgPSBQX0FfQ19LX0VfUi5nZXRfY2h1bmtzKHN0ciksCiAgICAgICAgICAgIGNodW5rOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2h1bmtzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGNodW5rID0gY2h1bmtzW2ldLnJlcGxhY2UoL1xuJC8sICcnKTsKICAgICAgICAgICAgc3RyID0gc3RyLnNwbGl0KGNodW5rKS5qb2luKFBfQV9DX0tfRV9SLnVucGFja19jaHVuayhjaHVuaykpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3RyOwogICAgfSwKCiAgICB1bnBhY2tfY2h1bms6IGZ1bmN0aW9uKHN0cikgewogICAgICAgIHZhciB1bnBhY2tlZF9zb3VyY2UgPSAnJzsKICAgICAgICB2YXIgX19ldmFsID0gZXZhbDsKICAgICAgICBpZiAoUF9BX0NfS19FX1IuZGV0ZWN0KHN0cikpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGV2YWwgPSBmdW5jdGlvbihzKSB7IC8vIGpzaGludCBpZ25vcmU6bGluZQogICAgICAgICAgICAgICAgICAgIHVucGFja2VkX3NvdXJjZSArPSBzOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB1bnBhY2tlZF9zb3VyY2U7CiAgICAgICAgICAgICAgICB9OyAvLyBqc2hpbnQgaWdub3JlOmxpbmUKICAgICAgICAgICAgICAgIF9fZXZhbChzdHIpOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1bnBhY2tlZF9zb3VyY2UgPT09ICdzdHJpbmcnICYmIHVucGFja2VkX3NvdXJjZSkgewogICAgICAgICAgICAgICAgICAgIHN0ciA9IHVucGFja2VkX3NvdXJjZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgLy8gd2VsbCwgaXQgZmFpbGVkLiB3ZSdsbCBqdXN0IHJldHVybiB0aGUgb3JpZ2luYWwsIGluc3RlYWQgb2YgY3Jhc2hpbmcgb24gdXNlci4KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBldmFsID0gX19ldmFsOyAvLyBqc2hpbnQgaWdub3JlOmxpbmUKICAgICAgICByZXR1cm4gc3RyOwogICAgfSwKCiAgICBydW5fdGVzdHM6IGZ1bmN0aW9uKHNhbml0eV90ZXN0KSB7CiAgICAgICAgdmFyIHQgPSBzYW5pdHlfdGVzdCB8fCBuZXcgU2FuaXR5VGVzdCgpOwoKICAgICAgICB2YXIgcGsxID0gImV2YWwoZnVuY3Rpb24ocCxhLGMsayxlLHIpe2U9U3RyaW5nO2lmKCEnJy5yZXBsYWNlKC9eLyxTdHJpbmcpKXt3aGlsZShjLS0pcltjXT1rW2NdfHxjO2s9W2Z1bmN0aW9uKGUpe3JldHVybiByW2VdfV07ZT1mdW5jdGlvbigpe3JldHVybidcXFxcdysnfTtjPTF9O3doaWxlKGMtLSlpZihrW2NdKXA9cC5yZXBsYWNlKG5ldyBSZWdFeHAoJ1xcXFxiJytlKGMpKydcXFxcYicsJ2cnKSxrW2NdKTtyZXR1cm4gcH0oJzAgMj0xJywzLDMsJ3Zhcnx8YScuc3BsaXQoJ3wnKSwwLHt9KSkiOwogICAgICAgIHZhciB1bnBrMSA9ICd2YXIgYT0xJzsKICAgICAgICB2YXIgcGsyID0gImV2YWwoZnVuY3Rpb24ocCxhLGMsayxlLHIpe2U9U3RyaW5nO2lmKCEnJy5yZXBsYWNlKC9eLyxTdHJpbmcpKXt3aGlsZShjLS0pcltjXT1rW2NdfHxjO2s9W2Z1bmN0aW9uKGUpe3JldHVybiByW2VdfV07ZT1mdW5jdGlvbigpe3JldHVybidcXFxcdysnfTtjPTF9O3doaWxlKGMtLSlpZihrW2NdKXA9cC5yZXBsYWNlKG5ldyBSZWdFeHAoJ1xcXFxiJytlKGMpKydcXFxcYicsJ2cnKSxrW2NdKTtyZXR1cm4gcH0oJzAgMj0xJywzLDMsJ2Zvb3x8Yicuc3BsaXQoJ3wnKSwwLHt9KSkiOwogICAgICAgIHZhciB1bnBrMiA9ICdmb28gYj0xJzsKICAgICAgICB2YXIgcGtfYnJva2VuID0gImV2YWwoZnVuY3Rpb24ocCxhLGMsayxlLHIpe0JPUktCT1JLO2lmKCEnJy5yZXBsYWNlKC9eLyxTdHJpbmcpKXt3aGlsZShjLS0pcltjXT1rW2NdfHxjO2s9W2Z1bmN0aW9uKGUpe3JldHVybiByW2VdfV07ZT1mdW5jdGlvbigpe3JldHVybidcXFxcdysnfTtjPTF9O3doaWxlKGMtLSlpZihrW2NdKXA9cC5yZXBsYWNlKG5ldyBSZWdFeHAoJ1xcXFxiJytlKGMpKydcXFxcYicsJ2cnKSxrW2NdKTtyZXR1cm4gcH0oJzAgMj0xJywzLDMsJ3Zhcnx8YScuc3BsaXQoJ3wnKSwwLHt9KSkiOwogICAgICAgIHZhciBwazMgPSAiZXZhbChmdW5jdGlvbihwLGEsYyxrLGUscil7ZT1TdHJpbmc7aWYoIScnLnJlcGxhY2UoL14vLFN0cmluZykpe3doaWxlKGMtLSlyW2NdPWtbY118fGM7az1bZnVuY3Rpb24oZSl7cmV0dXJuIHJbZV19XTtlPWZ1bmN0aW9uKCl7cmV0dXJuJ1xcXFx3Kyd9O2M9MX07d2hpbGUoYy0tKWlmKGtbY10pcD1wLnJlcGxhY2UobmV3IFJlZ0V4cCgnXFxcXGInK2UoYykrJ1xcXFxiJywnZycpLGtbY10pO3JldHVybiBwfSgnMCAyPTF7fSkpJywzLDMsJ3Zhcnx8YScuc3BsaXQoJ3wnKSwwLHt9KSkiOwogICAgICAgIHZhciB1bnBrMyA9ICd2YXIgYT0xe30pKSc7CgogICAgICAgIHQudGVzdF9mdW5jdGlvbihQX0FfQ19LX0VfUi5kZXRlY3QsICJQX0FfQ19LX0VfUi5kZXRlY3QiKTsKICAgICAgICB0LmV4cGVjdCgnJywgZmFsc2UpOwogICAgICAgIHQuZXhwZWN0KCd2YXIgYSA9IGInLCBmYWxzZSk7CiAgICAgICAgdC50ZXN0X2Z1bmN0aW9uKFBfQV9DX0tfRV9SLnVucGFjaywgIlBfQV9DX0tfRV9SLnVucGFjayIpOwogICAgICAgIHQuZXhwZWN0KHBrX2Jyb2tlbiwgcGtfYnJva2VuKTsKICAgICAgICB0LmV4cGVjdChwazEsIHVucGsxKTsKICAgICAgICB0LmV4cGVjdChwazIsIHVucGsyKTsKICAgICAgICB0LmV4cGVjdChwazMsIHVucGszKTsKCiAgICAgICAgdmFyIGZpbGxlciA9ICdcbmZpbGxlclxuJzsKICAgICAgICB0LmV4cGVjdChmaWxsZXIgKyBwazEgKyAiXG4iICsgcGtfYnJva2VuICsgZmlsbGVyICsgcGsyICsgZmlsbGVyLCBmaWxsZXIgKyB1bnBrMSArICJcbiIgKyBwa19icm9rZW4gKyBmaWxsZXIgKyB1bnBrMiArIGZpbGxlcik7CgogICAgICAgIHJldHVybiB0OwogICAgfQoKCn07"></script>
    <script src="data:application/x-javascript;base64,Ly8KLy8gc2ltcGxlIHVucGFja2VyL2Rlb2JmdXNjYXRvciBmb3Igc2NyaXB0cyBtZXNzZWQgdXAgd2l0aCBteW9iZnVzY2F0ZS5jb20KLy8gWW91IHJlYWxseSBkb24ndCB3YW50IHRvIG9iZnVzY2F0ZSB5b3VyIHNjcmlwdHMgdGhlcmU6IHRoZXkncmUgdHJhY2tpbmcKLy8geW91ciB1bnBhY2tpbmdzLCB5b3VyIHNjcmlwdCBnZXRzIHR1cm5lZCBpbnRvIHNvbWV0aGluZyBsaWtlIHRoaXMsCi8vIGFzIG9mIDIwMTEtMDQtMjU6Ci8qCgogICAgdmFyIF9lc2NhcGUgPSAneW91cl9zY3JpcHRfZXNjYXBlZCc7CiAgICB2YXIgXzExMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgXzExMS5zcmMgPSAnaHR0cDovL2FwaS53d3cubXlvYmZ1c2NhdGUuY29tLz9nZXRzcmM9b2snICsKICAgICAgICAnJnJlZj0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LnJlZmVycmVyKSArCiAgICAgICAgJyZ1cmw9JyArIGVuY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5VUkwpOwogICAgdmFyIDAwMCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07CiAgICAwMDAuYXBwZW5kQ2hpbGQoXzExMSk7CiAgICBkb2N1bWVudC53cml0ZSh1bmVzY2FwZShfZXNjYXBlKSk7CgoqLwovLwovLyB3cml0dGVuIGJ5IEVpbmFyIExpZWxtYW5pcyA8ZWluYXJAanNiZWF1dGlmaWVyLm9yZz4KLy8KLy8gdXNhZ2U6Ci8vCi8vIGlmIChNeU9iZnVzY2F0ZS5kZXRlY3Qoc29tZV9zdHJpbmcpKSB7Ci8vICAgICB2YXIgdW5wYWNrZWQgPSBNeU9iZnVzY2F0ZS51bnBhY2soc29tZV9zdHJpbmcpOwovLyB9Ci8vCi8vCgp2YXIgTXlPYmZ1c2NhdGUgPSB7CiAgICBkZXRlY3Q6IGZ1bmN0aW9uKHN0cikgewogICAgICAgIGlmICgvXnZhciBfP1swTzFsSV17M31cPSgnfFxbKS4qXClcKVwpOy8udGVzdChzdHIpKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBpZiAoL15mdW5jdGlvbiBfP1swTzFsSV17M31cKF8vLnRlc3Qoc3RyKSAmJiAvZXZhbFwoLy50ZXN0KHN0cikpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCgogICAgdW5wYWNrOiBmdW5jdGlvbihzdHIpIHsKICAgICAgICBpZiAoTXlPYmZ1c2NhdGUuZGV0ZWN0KHN0cikpIHsKICAgICAgICAgICAgdmFyIF9fZXZhbCA9IGV2YWw7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBldmFsID0gZnVuY3Rpb24odW5wYWNrZWQpIHsgLy8ganNoaW50IGlnbm9yZTpsaW5lCiAgICAgICAgICAgICAgICAgICAgaWYgKE15T2JmdXNjYXRlLnN0YXJ0c193aXRoKHVucGFja2VkLCAndmFyIF9lc2NhcGUnKSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBmZXRjaCB0aGUgdXJsZW5jb2RlZCBzdHVmZiBmcm9tIHRoZSBzY3JpcHQsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaGVzID0gLycoW14nXSopJy8uZXhlYyh1bnBhY2tlZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1bmVzY2FwZWQgPSB1bmVzY2FwZShtYXRjaGVzWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE15T2JmdXNjYXRlLnN0YXJ0c193aXRoKHVuZXNjYXBlZCwgJzxzY3JpcHQ+JykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZXNjYXBlZCA9IHVuZXNjYXBlZC5zdWJzdHIoOCwgdW5lc2NhcGVkLmxlbmd0aCAtIDgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNeU9iZnVzY2F0ZS5lbmRzX3dpdGgodW5lc2NhcGVkLCAnPC9zY3JpcHQ+JykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZXNjYXBlZCA9IHVuZXNjYXBlZC5zdWJzdHIoMCwgdW5lc2NhcGVkLmxlbmd0aCAtIDkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHVucGFja2VkID0gdW5lc2NhcGVkOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyB0aHJvdyB0byB0ZXJtaW5hdGUgdGhlIHNjcmlwdAogICAgICAgICAgICAgICAgICAgIHVucGFja2VkID0gIi8vIFVucGFja2VyIHdhcm5pbmc6IGJlIGNhcmVmdWwgd2hlbiB1c2luZyBteW9iZnVzY2F0ZS5jb20gZm9yIHlvdXIgcHJvamVjdHM6XG4iICsKICAgICAgICAgICAgICAgICAgICAgICAgIi8vIHNjcmlwdHMgb2JmdXNjYXRlZCBieSB0aGUgZnJlZSBvbmxpbmUgdmVyc2lvbiBtYXkgY2FsbCBiYWNrIGhvbWUuXG4iICsKICAgICAgICAgICAgICAgICAgICAgICAgIlxuLy9cbiIgKyB1bnBhY2tlZDsKICAgICAgICAgICAgICAgICAgICB0aHJvdyB1bnBhY2tlZDsKICAgICAgICAgICAgICAgIH07IC8vIGpzaGludCBpZ25vcmU6bGluZQogICAgICAgICAgICAgICAgX19ldmFsKHN0cik7IC8vIHNob3VsZCB0aHJvdwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAvLyB3ZWxsLCBpdCBmYWlsZWQuIHdlJ2xsIGp1c3QgcmV0dXJuIHRoZSBvcmlnaW5hbCwgaW5zdGVhZCBvZiBjcmFzaGluZyBvbiB1c2VyLgogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlID09PSAic3RyaW5nIikgewogICAgICAgICAgICAgICAgICAgIHN0ciA9IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZXZhbCA9IF9fZXZhbDsgLy8ganNoaW50IGlnbm9yZTpsaW5lCiAgICAgICAgfQogICAgICAgIHJldHVybiBzdHI7CiAgICB9LAoKICAgIHN0YXJ0c193aXRoOiBmdW5jdGlvbihzdHIsIHdoYXQpIHsKICAgICAgICByZXR1cm4gc3RyLnN1YnN0cigwLCB3aGF0Lmxlbmd0aCkgPT09IHdoYXQ7CiAgICB9LAoKICAgIGVuZHNfd2l0aDogZnVuY3Rpb24oc3RyLCB3aGF0KSB7CiAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHIoc3RyLmxlbmd0aCAtIHdoYXQubGVuZ3RoLCB3aGF0Lmxlbmd0aCkgPT09IHdoYXQ7CiAgICB9LAoKICAgIHJ1bl90ZXN0czogZnVuY3Rpb24oc2FuaXR5X3Rlc3QpIHsKICAgICAgICB2YXIgdCA9IHNhbml0eV90ZXN0IHx8IG5ldyBTYW5pdHlUZXN0KCk7CgogICAgICAgIHJldHVybiB0OwogICAgfQoKCn07"></script>
    <script>
        var the={use_codemirror:!window.location.href.match(/without-codemirror/),beautify_in_progress:false,editor:null};
        function run_tests(){var st=new SanityTest;run_javascript_tests(st,Urlencoded,js_beautify,html_beautify,css_beautify);run_css_tests(st,Urlencoded,js_beautify,html_beautify,css_beautify);run_html_tests(st,Urlencoded,js_beautify,html_beautify,css_beautify);JavascriptObfuscator.run_tests(st);P_A_C_K_E_R.run_tests(st);Urlencoded.run_tests(st);MyObfuscate.run_tests(st);var results=st.results_raw().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\r/g,"\u00b7").replace(/\n/g,
        "<br>");$("#testresults").html(results).show()}function any(a,b){return a||b}
        function read_settings_from_cookie(){$("#tabsize").val(any($.cookie("tabsize"),"4"));$("#brace-style").val(any($.cookie("brace-style"),"collapse"));$("#detect-packers").prop("checked",$.cookie("detect-packers")!=="off");$("#max-preserve-newlines").val(any($.cookie("max-preserve-newlines"),"5"));$("#keep-array-indentation").prop("checked",$.cookie("keep-array-indentation")==="on");$("#break-chained-methods").prop("checked",$.cookie("break-chained-methods")==="on");$("#indent-scripts").val(any($.cookie("indent-scripts"),
        "normal"));$("#space-before-conditional").prop("checked",$.cookie("space-before-conditional")!=="off");$("#wrap-line-length").val(any($.cookie("wrap-line-length"),"0"));$("#unescape-strings").prop("checked",$.cookie("unescape-strings")==="on");$("#jslint-happy").prop("checked",$.cookie("jslint-happy")==="on");$("#end-with-newline").prop("checked",$.cookie("end-with-newline")==="on");$("#indent-inner-html").prop("checked",$.cookie("indent-inner-html")==="on");$("#comma-first").prop("checked",$.cookie("comma-first")===
        "on");$("#e4x").prop("checked",$.cookie("e4x")==="on")}
        function store_settings_to_cookie(){var opts={expires:360};$.cookie("tabsize",$("#tabsize").val(),opts);$.cookie("brace-style",$("#brace-style").val(),opts);$.cookie("detect-packers",$("#detect-packers").prop("checked")?"on":"off",opts);$.cookie("max-preserve-newlines",$("#max-preserve-newlines").val(),opts);$.cookie("keep-array-indentation",$("#keep-array-indentation").prop("checked")?"on":"off",opts);$.cookie("break-chained-methods",$("#break-chained-methods").prop("checked")?"on":"off",opts);$.cookie("space-before-conditional",
        $("#space-before-conditional").prop("checked")?"on":"off",opts);$.cookie("unescape-strings",$("#unescape-strings").prop("checked")?"on":"off",opts);$.cookie("jslint-happy",$("#jslint-happy").prop("checked")?"on":"off",opts);$.cookie("end-with-newline",$("#end-with-newline").prop("checked")?"on":"off",opts);$.cookie("wrap-line-length",$("#wrap-line-length").val(),opts);$.cookie("indent-scripts",$("#indent-scripts").val(),opts);$.cookie("indent-inner-html",$("#indent-inner-html").prop("checked")?"on":
        "off",opts);$.cookie("comma-first",$("#comma-first").prop("checked")?"on":"off",opts);$.cookie("e4x",$("#e4x").prop("checked")?"on":"off",opts)}
        function unpacker_filter(source){var trailing_comments="",comment="",unpacked="",found=false;do{found=false;if(/^\s*\/\*/.test(source)){found=true;comment=source.substr(0,source.indexOf("*/")+2);source=source.substr(comment.length).replace(/^\s+/,"");trailing_comments+=comment+"\n"}else if(/^\s*\/\//.test(source)){found=true;comment=source.match(/^\s*\/\/.*/)[0];source=source.substr(comment.length).replace(/^\s+/,"");trailing_comments+=comment+"\n"}}while(found);var unpackers=[P_A_C_K_E_R,Urlencoded,
        MyObfuscate];for(var i=0;i<unpackers.length;i++)if(unpackers[i].detect(source)){unpacked=unpackers[i].unpack(source);if(unpacked!=source)source=unpacker_filter(unpacked)}return trailing_comments+source}
        function beautify(){if(the.beautify_in_progress)return;store_settings_to_cookie();the.beautify_in_progress=true;var source=the.editor?the.editor.getValue():$("#source").val(),output,opts={};opts.indent_size=$("#tabsize").val();opts.indent_char=opts.indent_size==1?"\t":" ";opts.max_preserve_newlines=$("#max-preserve-newlines").val();opts.preserve_newlines=opts.max_preserve_newlines!=="-1";opts.keep_array_indentation=$("#keep-array-indentation").prop("checked");opts.break_chained_methods=$("#break-chained-methods").prop("checked");
        opts.indent_scripts=$("#indent-scripts").val();opts.brace_style=$("#brace-style").val();opts.space_before_conditional=$("#space-before-conditional").prop("checked");opts.unescape_strings=$("#unescape-strings").prop("checked");opts.jslint_happy=$("#jslint-happy").prop("checked");opts.end_with_newline=$("#end-with-newline").prop("checked");opts.wrap_line_length=$("#wrap-line-length").val();opts.indent_inner_html=$("#indent-inner-html").prop("checked");opts.comma_first=$("#comma-first").prop("checked");
        opts.e4x=$("#e4x").prop("checked");if(looks_like_html(source))output=html_beautify(source,opts);else{if($("#detect-packers").prop("checked"))source=unpacker_filter(source);output=js_beautify(source,opts)}if(the.editor)the.editor.setValue(output);else $("#source").val(output);the.beautify_in_progress=false}
        function looks_like_html(source){var trimmed=source.replace(/^[ \t\n\r]+/,"");var comment_mark="<"+"!-"+"-";return trimmed&&(trimmed.substring(0,1)==="<"&&trimmed.substring(0,4)!==comment_mark)};
    </script>
</head>
<body>
    <div id="about">
        <p>
            <a class="self">格式化，解壓縮或反混淆JavaScript和HTML，使得JSON/ JSONP易讀，等等.</a>
        </p>
        <p>
            該工具主要用於將去掉空格的代碼或者壓縮成一行的代碼將其格式化，方便閱讀，並不能將加密過的js還原破解；
            <br>貼上你的代碼到文本區域並點擊格式化按鈕就可以將代碼格式化； 
        </p>
    </div>
    <table id="options">
        <tr>
            <td>
                <select name="tabsize" id="tabsize">
                    <option value="1">tab 縮進</option>
                    <option value="2">2個空格符縮進</option>
                    <option value="3">3個空格符縮進</option>
                    <option value="4">4個空格符縮進</option>
                    <option value="8">8個空格符縮進</option>
                </select>
                <br>

                <select name="max-preserve-newlines" id="max-preserve-newlines">
                    <option value="-1">刪除所有多餘的換行符</option>
                    <option value="1">允許標記之間1個換行符</option>
                    <option value="2">允許標記之間2個換行符</option>
                    <option value="5">允許標記之間5個換行符</option>
                    <option value="10">允許標記之間10個換行符</option>
                    <option value="0">允許標記之間無限個換行符</option>
                </select>
                <br>

                <select name="wrap-line-length" id="wrap-line-length">
                    <option value="0">不要換行</option>
                    <option value="40">近40個字符換行</option>
                    <option value="70">近70個字符換行</option>
                    <option value="80">近80個字符換行</option>
                    <option value="110">近110個字符換行</option>
                    <option value="120">近120個字符換行</option>
                    <option value="160">近160個字符換行</option>
                </select>
                <br>

                <select id="brace-style">
                    <option value="collapse">用大括號控制語句</option>
                    <option value="collapse-preserve-inline">用大括號內聯或控制語句</option>
                    <option value="expand">大括號換行</option>
                    <option value="end-expand">右大括號換行</option>
                    <option value="none">試圖保持大括號的位置不變</option>
                </select>

                <p style="margin:6px 0 0 0">HTML &lt;style&gt;, &lt;script&gt; 格式化為:</p>
                <select id="indent-scripts">
                    <option value="keep">保持標籤的縮進級別</option>
                    <option value="normal">添加一個縮進級別</option>
                    <option value="separate">獨立的縮進</option>
                </select>

            </td>
            <td>
                <!--<input class="checkbox" type="checkbox" id="end-with-newline">-->
                <!--<label for="end-with-newline">script和style結束時則換行?</label>-->
                <!-- End script and style with newline? -->
                <!--<br>-->
                <input class="checkbox" type="checkbox" id="e4x">
                <label for="e4x">支持E4X / JSX語法</label><!-- Support e4x/jsx syntax -->
                <br>
                <!-- 
                <input class="checkbox" type="checkbox" id="comma-first">
                <label for="comma-first">Use comma-first list style?</label>
                <br>
                 -->
                <input class="checkbox" type="checkbox" id="detect-packers">
                <label for="detect-packers">檢測加殼和混淆器?</label><!-- Detect packers and obfuscators? -->
                <br>
                <input class="checkbox" type="checkbox" id="keep-array-indentation">
                <label for="keep-array-indentation">保持數組縮進?</label><!-- Keep array indentation? -->
                <br>
                <input class="checkbox" type="checkbox" id="break-chained-methods">
                <label for="break-chained-methods">鏈式方法調用換行?</label><!-- Break lines on chained methods? -->
                <br>
                <input class="checkbox" type="checkbox" id="space-before-conditional">
                <label for="space-before-conditional">在條件前面添加空格: "if(x)" / "if (x)"</label>
                <br>
                <input class="checkbox" type="checkbox" id="unescape-strings">
                <label for="unescape-strings">對 \xNN 或 \uNNNN 的字元(字符)編碼<br>進行解碼還原成編碼前的字元(字符)?</label>
                <br>
                <input class="checkbox" type="checkbox" id="jslint-happy">
                <label for="jslint-happy">使用JSLint格式調整?</label><!-- Use JSLint-happy formatting tweaks? -->
                <br>
                <input class="checkbox" type="checkbox" id="indent-inner-html">
                <label for="indent-inner-html">縮進 &lt;head&gt; 和 &lt;body&gt; 的部分?</label>
                <!-- <br><a href="?without-codemirror" class="turn-off-codemirror">Use a simple textarea for code input?</a> -->
            </td>
        </tr>
    </table>
    <div style="line-height: 0">
        <button class="submit"><strong>格式化 JavaScript 或 HTML</strong>  <em>(ctrl-enter)</em>
        </button>
        <textarea id="source" rows="30" cols="160"></textarea>
        <button class="submit"><strong>格式化 JavaScript 或 HTML</strong>  <em>(ctrl-enter)</em>
        </button>
    </div>
    <script>
        $(function(){read_settings_from_cookie();var default_text="// 此為一個示例腳本。請在此貼上您實際的（JavaScript或HTML）代碼到這裡。\n\nif ('this_is'==/an_example/){of_beautifier();}else{var a=b?(c%d):e[f];}";var textArea=$("#source")[0];if(the.use_codemirror&&typeof CodeMirror!=="undefined"){the.editor=CodeMirror.fromTextArea(textArea,{theme:"default",lineNumbers:true});the.editor.focus();the.editor.setValue(default_text);$(".CodeMirror").click(function(){if(the.editor.getValue()==default_text)the.editor.setValue("")})}else $("#source").val(default_text).bind("click focus",
        function(){if($(this).val()==default_text)$(this).val("")}).bind("blur",function(){if(!$(this).val())$(this).val(default_text)});$(window).bind("keydown",function(e){if(e.ctrlKey&&e.keyCode==13)beautify()});$(".submit").click(beautify);$("select").change(beautify)});
    </script>
</body>
</html>
